(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var cf={exports:{}},vl={},hf={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function iT(){if(Vy)return Me;Vy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function x(b){return b===null||typeof b!="object"?null:(b=T&&b[T]||b["@@iterator"],typeof b=="function"?b:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,W={};function G(b,K,he){this.props=b,this.context=K,this.refs=W,this.updater=he||V}G.prototype.isReactComponent={},G.prototype.setState=function(b,K){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,K,"setState")},G.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function ae(){}ae.prototype=G.prototype;function le(b,K,he){this.props=b,this.context=K,this.refs=W,this.updater=he||V}var U=le.prototype=new ae;U.constructor=le,H(U,G.prototype),U.isPureReactComponent=!0;var q=Array.isArray,ne=Object.prototype.hasOwnProperty,Q={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(b,K,he){var ye,Ne={},De=null,Ie=null;if(K!=null)for(ye in K.ref!==void 0&&(Ie=K.ref),K.key!==void 0&&(De=""+K.key),K)ne.call(K,ye)&&!k.hasOwnProperty(ye)&&(Ne[ye]=K[ye]);var Le=arguments.length-2;if(Le===1)Ne.children=he;else if(1<Le){for(var We=Array(Le),yt=0;yt<Le;yt++)We[yt]=arguments[yt+2];Ne.children=We}if(b&&b.defaultProps)for(ye in Le=b.defaultProps,Le)Ne[ye]===void 0&&(Ne[ye]=Le[ye]);return{$$typeof:r,type:b,key:De,ref:Ie,props:Ne,_owner:Q.current}}function A(b,K){return{$$typeof:r,type:b.type,key:K,ref:b.ref,props:b.props,_owner:b._owner}}function R(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function N(b){var K={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(he){return K[he]})}var M=/\/+/g;function C(b,K){return typeof b=="object"&&b!==null&&b.key!=null?N(""+b.key):K.toString(36)}function Ae(b,K,he,ye,Ne){var De=typeof b;(De==="undefined"||De==="boolean")&&(b=null);var Ie=!1;if(b===null)Ie=!0;else switch(De){case"string":case"number":Ie=!0;break;case"object":switch(b.$$typeof){case r:case e:Ie=!0}}if(Ie)return Ie=b,Ne=Ne(Ie),b=ye===""?"."+C(Ie,0):ye,q(Ne)?(he="",b!=null&&(he=b.replace(M,"$&/")+"/"),Ae(Ne,K,he,"",function(yt){return yt})):Ne!=null&&(R(Ne)&&(Ne=A(Ne,he+(!Ne.key||Ie&&Ie.key===Ne.key?"":(""+Ne.key).replace(M,"$&/")+"/")+b)),K.push(Ne)),1;if(Ie=0,ye=ye===""?".":ye+":",q(b))for(var Le=0;Le<b.length;Le++){De=b[Le];var We=ye+C(De,Le);Ie+=Ae(De,K,he,We,Ne)}else if(We=x(b),typeof We=="function")for(b=We.call(b),Le=0;!(De=b.next()).done;)De=De.value,We=ye+C(De,Le++),Ie+=Ae(De,K,he,We,Ne);else if(De==="object")throw K=String(b),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Ie}function He(b,K,he){if(b==null)return b;var ye=[],Ne=0;return Ae(b,ye,"","",function(De){return K.call(he,De,Ne++)}),ye}function Be(b){if(b._status===-1){var K=b._result;K=K(),K.then(function(he){(b._status===0||b._status===-1)&&(b._status=1,b._result=he)},function(he){(b._status===0||b._status===-1)&&(b._status=2,b._result=he)}),b._status===-1&&(b._status=0,b._result=K)}if(b._status===1)return b._result.default;throw b._result}var Ve={current:null},B={transition:null},se={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:B,ReactCurrentOwner:Q};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:He,forEach:function(b,K,he){He(b,function(){K.apply(this,arguments)},he)},count:function(b){var K=0;return He(b,function(){K++}),K},toArray:function(b){return He(b,function(K){return K})||[]},only:function(b){if(!R(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Me.Component=G,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=le,Me.StrictMode=i,Me.Suspense=p,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Me.act=ie,Me.cloneElement=function(b,K,he){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var ye=H({},b.props),Ne=b.key,De=b.ref,Ie=b._owner;if(K!=null){if(K.ref!==void 0&&(De=K.ref,Ie=Q.current),K.key!==void 0&&(Ne=""+K.key),b.type&&b.type.defaultProps)var Le=b.type.defaultProps;for(We in K)ne.call(K,We)&&!k.hasOwnProperty(We)&&(ye[We]=K[We]===void 0&&Le!==void 0?Le[We]:K[We])}var We=arguments.length-2;if(We===1)ye.children=he;else if(1<We){Le=Array(We);for(var yt=0;yt<We;yt++)Le[yt]=arguments[yt+2];ye.children=Le}return{$$typeof:r,type:b.type,key:Ne,ref:De,props:ye,_owner:Ie}},Me.createContext=function(b){return b={$$typeof:c,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},Me.createElement=I,Me.createFactory=function(b){var K=I.bind(null,b);return K.type=b,K},Me.createRef=function(){return{current:null}},Me.forwardRef=function(b){return{$$typeof:f,render:b}},Me.isValidElement=R,Me.lazy=function(b){return{$$typeof:w,_payload:{_status:-1,_result:b},_init:Be}},Me.memo=function(b,K){return{$$typeof:y,type:b,compare:K===void 0?null:K}},Me.startTransition=function(b){var K=B.transition;B.transition={};try{b()}finally{B.transition=K}},Me.unstable_act=ie,Me.useCallback=function(b,K){return Ve.current.useCallback(b,K)},Me.useContext=function(b){return Ve.current.useContext(b)},Me.useDebugValue=function(){},Me.useDeferredValue=function(b){return Ve.current.useDeferredValue(b)},Me.useEffect=function(b,K){return Ve.current.useEffect(b,K)},Me.useId=function(){return Ve.current.useId()},Me.useImperativeHandle=function(b,K,he){return Ve.current.useImperativeHandle(b,K,he)},Me.useInsertionEffect=function(b,K){return Ve.current.useInsertionEffect(b,K)},Me.useLayoutEffect=function(b,K){return Ve.current.useLayoutEffect(b,K)},Me.useMemo=function(b,K){return Ve.current.useMemo(b,K)},Me.useReducer=function(b,K,he){return Ve.current.useReducer(b,K,he)},Me.useRef=function(b){return Ve.current.useRef(b)},Me.useState=function(b){return Ve.current.useState(b)},Me.useSyncExternalStore=function(b,K,he){return Ve.current.useSyncExternalStore(b,K,he)},Me.useTransition=function(){return Ve.current.useTransition()},Me.version="18.3.1",Me}var Ly;function Tp(){return Ly||(Ly=1,hf.exports=iT()),hf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function sT(){if(Fy)return vl;Fy=1;var r=Tp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,y){var w,T={},x=null,V=null;y!==void 0&&(x=""+y),p.key!==void 0&&(x=""+p.key),p.ref!==void 0&&(V=p.ref);for(w in p)i.call(p,w)&&!l.hasOwnProperty(w)&&(T[w]=p[w]);if(f&&f.defaultProps)for(w in p=f.defaultProps,p)T[w]===void 0&&(T[w]=p[w]);return{$$typeof:e,type:f,key:x,ref:V,props:T,_owner:o.current}}return vl.Fragment=t,vl.jsx=c,vl.jsxs=c,vl}var jy;function oT(){return jy||(jy=1,cf.exports=sT()),cf.exports}var E=oT(),gc={},df={exports:{}},ln={},ff={exports:{}},pf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function aT(){return Uy||(Uy=1,(function(r){function e(B,se){var ie=B.length;B.push(se);e:for(;0<ie;){var b=ie-1>>>1,K=B[b];if(0<o(K,se))B[b]=se,B[ie]=K,ie=b;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var se=B[0],ie=B.pop();if(ie!==se){B[0]=ie;e:for(var b=0,K=B.length,he=K>>>1;b<he;){var ye=2*(b+1)-1,Ne=B[ye],De=ye+1,Ie=B[De];if(0>o(Ne,ie))De<K&&0>o(Ie,Ne)?(B[b]=Ie,B[De]=ie,b=De):(B[b]=Ne,B[ye]=ie,b=ye);else if(De<K&&0>o(Ie,ie))B[b]=Ie,B[De]=ie,b=De;else break e}}return se}function o(B,se){var ie=B.sortIndex-se.sortIndex;return ie!==0?ie:B.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var p=[],y=[],w=1,T=null,x=3,V=!1,H=!1,W=!1,G=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(B){for(var se=t(y);se!==null;){if(se.callback===null)i(y);else if(se.startTime<=B)i(y),se.sortIndex=se.expirationTime,e(p,se);else break;se=t(y)}}function q(B){if(W=!1,U(B),!H)if(t(p)!==null)H=!0,Be(ne);else{var se=t(y);se!==null&&Ve(q,se.startTime-B)}}function ne(B,se){H=!1,W&&(W=!1,ae(I),I=-1),V=!0;var ie=x;try{for(U(se),T=t(p);T!==null&&(!(T.expirationTime>se)||B&&!N());){var b=T.callback;if(typeof b=="function"){T.callback=null,x=T.priorityLevel;var K=b(T.expirationTime<=se);se=r.unstable_now(),typeof K=="function"?T.callback=K:T===t(p)&&i(p),U(se)}else i(p);T=t(p)}if(T!==null)var he=!0;else{var ye=t(y);ye!==null&&Ve(q,ye.startTime-se),he=!1}return he}finally{T=null,x=ie,V=!1}}var Q=!1,k=null,I=-1,A=5,R=-1;function N(){return!(r.unstable_now()-R<A)}function M(){if(k!==null){var B=r.unstable_now();R=B;var se=!0;try{se=k(!0,B)}finally{se?C():(Q=!1,k=null)}}else Q=!1}var C;if(typeof le=="function")C=function(){le(M)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,He=Ae.port2;Ae.port1.onmessage=M,C=function(){He.postMessage(null)}}else C=function(){G(M,0)};function Be(B){k=B,Q||(Q=!0,C())}function Ve(B,se){I=G(function(){B(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_continueExecution=function(){H||V||(H=!0,Be(ne))},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(B){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var ie=x;x=se;try{return B()}finally{x=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(B,se){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ie=x;x=B;try{return se()}finally{x=ie}},r.unstable_scheduleCallback=function(B,se,ie){var b=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?b+ie:b):ie=b,B){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ie+K,B={id:w++,callback:se,priorityLevel:B,startTime:ie,expirationTime:K,sortIndex:-1},ie>b?(B.sortIndex=ie,e(y,B),t(p)===null&&B===t(y)&&(W?(ae(I),I=-1):W=!0,Ve(q,ie-b))):(B.sortIndex=K,e(p,B),H||V||(H=!0,Be(ne))),B},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(B){var se=x;return function(){var ie=x;x=se;try{return B.apply(this,arguments)}finally{x=ie}}}})(pf)),pf}var zy;function lT(){return zy||(zy=1,ff.exports=aT()),ff.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function uT(){if(By)return ln;By=1;var r=Tp(),e=lT();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function x(n){return p.call(T,n)?!0:p.call(w,n)?!1:y.test(n)?T[n]=!0:(w[n]=!0,!1)}function V(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,s,a,h){if(s===null||typeof s>"u"||V(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(n,s,a,h,d,m,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=_}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){G[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];G[s]=new W(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){G[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){G[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){G[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){G[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){G[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){G[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){G[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var ae=/[\-:]([a-z])/g;function le(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ae,le);G[s]=new W(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ae,le);G[s]=new W(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ae,le);G[s]=new W(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){G[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),G.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){G[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function U(n,s,a,h){var d=G.hasOwnProperty(s)?G[s]:null;(d!==null?d.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(H(s,a,d,h)&&(a=null),h||d===null?x(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,h=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),Q=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),B=Symbol.iterator;function se(n){return n===null||typeof n!="object"?null:(n=B&&n[B]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,b;function K(n){if(b===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+n}var he=!1;function ye(n,s){if(!n||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){h=z}n.call(s.prototype)}else{try{throw Error()}catch(z){h=z}n()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),m=h.stack.split(`
`),_=d.length-1,P=m.length-1;1<=_&&0<=P&&d[_]!==m[P];)P--;for(;1<=_&&0<=P;_--,P--)if(d[_]!==m[P]){if(_!==1||P!==1)do if(_--,P--,0>P||d[_]!==m[P]){var D=`
`+d[_].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=_&&0<=P);break}}}finally{he=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Ne(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=ye(n.type,!1),n;case 11:return n=ye(n.type.render,!1),n;case 1:return n=ye(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case Q:return"Portal";case A:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case Ae:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case R:return(n._context.displayName||"Context")+".Provider";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case He:return s=n.displayName||null,s!==null?s:De(n.type)||"Memo";case Be:s=n._payload,n=n._init;try{return De(n(s))}catch{}}return null}function Ie(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function We(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yt(n){var s=We(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){h=""+_,m.call(this,_)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Yn(n){n._valueTracker||(n._valueTracker=yt(n))}function Jn(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=We(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function ii(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function io(n,s){var a=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function tu(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Le(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function so(n,s){s=s.checked,s!=null&&U(n,"checked",s,!1)}function cs(n,s){so(n,s);var a=Le(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?vt(n,s.type,a):s.hasOwnProperty("defaultValue")&&vt(n,s.type,Le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function xa(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function vt(n,s,a){(s!=="number"||ii(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var dt=Array.isArray;function Mn(n,s,a,h){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Le(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,h&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function ka(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ca(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(dt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Le(a)}}function nu(n,s){var a=Le(s.value),h=Le(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function si(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Aa(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oo(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Aa(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var oi,ru=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(oi=oi||document.createElement("div"),oi.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=oi.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function hs(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iu=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(n){iu.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ai[s]=ai[n]})});function li(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ai.hasOwnProperty(n)&&ai[n]?(""+s).trim():s+"px"}function ao(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=li(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,d):n[a]=d}}var Pa=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vn(n,s){if(s){if(Pa[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function lo(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function uo(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ar=null,Pr=null,ut=null;function ba(n){if(n=rl(n)){if(typeof Ar!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Ru(s),Ar(n.stateNode,n.type,s))}}function ci(n){Pr?ut?ut.push(n):ut=[n]:Pr=n}function hi(){if(Pr){var n=Pr,s=ut;if(ut=Pr=null,ba(n),s)for(n=0;n<s.length;n++)ba(s[n])}}function su(n,s){return n(s)}function ou(){}var Zn=!1;function au(n,s,a){if(Zn)return n(s,a);Zn=!0;try{return su(n,s,a)}finally{Zn=!1,(Pr!==null||ut!==null)&&(ou(),hi())}}function ds(n,s){var a=n.stateNode;if(a===null)return null;var h=Ru(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var di=!1;if(f)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){di=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{di=!1}function lu(n,s,a,h,d,m,_,P,D){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(ee){this.onError(ee)}}var br=!1,er=null,co=!1,Sn=null,uu={onError:function(n){br=!0,er=n}};function cu(n,s,a,h,d,m,_,P,D){br=!1,er=null,lu.apply(uu,arguments)}function Ra(n,s,a,h,d,m,_,P,D){if(cu.apply(this,arguments),br){if(br){var z=er;br=!1,er=null}else throw Error(t(198));co||(co=!0,Sn=z)}}function Ln(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Na(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function hu(n){if(Ln(n)!==n)throw Error(t(188))}function du(n){var s=n.alternate;if(!s){if(s=Ln(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return hu(d),n;if(m===h)return hu(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=m;else{for(var _=!1,P=d.child;P;){if(P===a){_=!0,a=d,h=m;break}if(P===h){_=!0,h=d,a=m;break}P=P.sibling}if(!_){for(P=m.child;P;){if(P===a){_=!0,a=m,h=d;break}if(P===h){_=!0,h=m,a=d;break}P=P.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function fu(n){return n=du(n),n!==null?fs(n):null}function fs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=fs(n);if(s!==null)return s;n=n.sibling}return null}var Da=e.unstable_scheduleCallback,ho=e.unstable_cancelCallback,ps=e.unstable_shouldYield,Rr=e.unstable_requestPaint,et=e.unstable_now,Uh=e.unstable_getCurrentPriorityLevel,fo=e.unstable_ImmediatePriority,Oa=e.unstable_UserBlockingPriority,ms=e.unstable_NormalPriority,Ma=e.unstable_LowPriority,po=e.unstable_IdlePriority,gs=null,dn=null;function pu(n){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(gs,n,void 0,(n.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:ys,tr=Math.log,xn=Math.LN2;function ys(n){return n>>>=0,n===0?32:31-(tr(n)/xn|0)|0}var nr=64,pi=4194304;function Ke(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Nr(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,d=n.suspendedLanes,m=n.pingedLanes,_=a&268435455;if(_!==0){var P=_&~d;P!==0?h=Ke(P):(m&=_,m!==0&&(h=Ke(m)))}else _=a&~d,_!==0?h=Ke(_):m!==0&&(h=Ke(m));if(h===0)return 0;if(s!==0&&s!==h&&(s&d)===0&&(d=h&-h,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-fn(s),d=1<<a,h|=n[a],s&=~d;return h}function vs(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ws(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var _=31-fn(m),P=1<<_,D=d[_];D===-1?((P&a)===0||(P&h)!==0)&&(d[_]=vs(P,s)):D<=s&&(n.expiredLanes|=P),m&=~P}}function Va(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function La(){var n=nr;return nr<<=1,(nr&4194240)===0&&(nr=64),n}function Fa(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function _s(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-fn(s),n[s]=a}function zh(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-fn(a),m=1<<d;s[d]=0,h[d]=-1,n[d]=-1,a&=~m}}function ja(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-fn(a),d=1<<h;d&s|n[h]&s&&(n[h]|=s),a&=~d}}var ze=0;function rr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ua,mo,za,Ba,$a,ir=!1,go=[],sr=null,or=null,Vt=null,Es=new Map,Dr=new Map,pn=[],mu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mi(n,s){switch(n){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":Es.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dr.delete(s.pointerId)}}function Fn(n,s,a,h,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[d]},s!==null&&(s=rl(s),s!==null&&mo(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function gu(n,s,a,h,d){switch(s){case"focusin":return sr=Fn(sr,n,s,a,h,d),!0;case"dragenter":return or=Fn(or,n,s,a,h,d),!0;case"mouseover":return Vt=Fn(Vt,n,s,a,h,d),!0;case"pointerover":var m=d.pointerId;return Es.set(m,Fn(Es.get(m)||null,n,s,a,h,d)),!0;case"gotpointercapture":return m=d.pointerId,Dr.set(m,Fn(Dr.get(m)||null,n,s,a,h,d)),!0}return!1}function yo(n){var s=xs(n.target);if(s!==null){var a=Ln(s);if(a!==null){if(s=a.tag,s===13){if(s=Na(a),s!==null){n.blockedOn=s,$a(n.priority,function(){za(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Je(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=vo(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);ui=h,a.target.dispatchEvent(h),ui=null}else return s=rl(a),s!==null&&mo(s),n.blockedOn=a,!1;s.shift()}return!0}function yu(n,s,a){Je(n)&&a.delete(s)}function Bh(){ir=!1,sr!==null&&Je(sr)&&(sr=null),or!==null&&Je(or)&&(or=null),Vt!==null&&Je(Vt)&&(Vt=null),Es.forEach(yu),Dr.forEach(yu)}function gi(n,s){n.blockedOn===s&&(n.blockedOn=null,ir||(ir=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bh)))}function yi(n){function s(d){return gi(d,n)}if(0<go.length){gi(go[0],n);for(var a=1;a<go.length;a++){var h=go[a];h.blockedOn===n&&(h.blockedOn=null)}}for(sr!==null&&gi(sr,n),or!==null&&gi(or,n),Vt!==null&&gi(Vt,n),Es.forEach(s),Dr.forEach(s),a=0;a<pn.length;a++)h=pn[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<pn.length&&(a=pn[0],a.blockedOn===null);)yo(a),a.blockedOn===null&&pn.shift()}var Or=q.ReactCurrentBatchConfig,Mr=!0;function ar(n,s,a,h){var d=ze,m=Or.transition;Or.transition=null;try{ze=1,Ha(n,s,a,h)}finally{ze=d,Or.transition=m}}function vu(n,s,a,h){var d=ze,m=Or.transition;Or.transition=null;try{ze=4,Ha(n,s,a,h)}finally{ze=d,Or.transition=m}}function Ha(n,s,a,h){if(Mr){var d=vo(n,s,a,h);if(d===null)Zh(n,s,h,lr,a),mi(n,h);else if(gu(d,n,s,a,h))h.stopPropagation();else if(mi(n,h),s&4&&-1<mu.indexOf(n)){for(;d!==null;){var m=rl(d);if(m!==null&&Ua(m),m=vo(n,s,a,h),m===null&&Zh(n,s,h,lr,a),m===d)break;d=m}d!==null&&h.stopPropagation()}else Zh(n,s,h,null,a)}}var lr=null;function vo(n,s,a,h){if(lr=null,n=uo(h),n=xs(n),n!==null)if(s=Ln(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Na(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return lr=n,null}function wo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uh()){case fo:return 1;case Oa:return 4;case ms:case Ma:return 16;case po:return 536870912;default:return 16}default:return 16}}var mn=null,_o=null,Vr=null;function wu(){if(Vr)return Vr;var n,s=_o,a=s.length,h,d="value"in mn?mn.value:mn.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var _=a-n;for(h=1;h<=_&&s[a-h]===d[m-h];h++);return Vr=d.slice(n,1<h?1-h:void 0)}function Ts(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ur(){return!0}function Ga(){return!1}function $t(n){function s(a,h,d,m,_){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(m):m[P]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ur:Ga,this.isPropagationStopped=Ga,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),s}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=$t(cr),vi=ie({},cr,{view:0,detail:0}),Eo=$t(vi),To,Io,gn,Ss=ie({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:be,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gn&&(gn&&n.type==="mousemove"?(To=n.screenX-gn.screenX,Io=n.screenY-gn.screenY):Io=To=0,gn=n),To)},movementY:function(n){return"movementY"in n?n.movementY:Io}}),Wa=$t(Ss),_u=ie({},Ss,{dataTransfer:0}),Eu=$t(_u),So=ie({},vi,{relatedTarget:0}),Lt=$t(So),Tu=ie({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Iu=$t(Tu),wi=ie({},cr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=$t(wi),g=ie({},cr,{data:0}),v=$t(g),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=$[n])?!!s[n]:!1}function be(){return oe}var ft=ie({},vi,{key:function(n){if(n.key){var s=S[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ts(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:be,charCode:function(n){return n.type==="keypress"?Ts(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ts(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xe=$t(ft),wt=ie({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yn=$t(wt),Lr=ie({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:be}),hr=$t(Lr),dr=ie({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xo=$t(dr),qa=ie({},Ss,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J1=$t(qa),Z1=[9,13,27,32],$h=f&&"CompositionEvent"in window,Ka=null;f&&"documentMode"in document&&(Ka=document.documentMode);var eE=f&&"TextEvent"in window&&!Ka,Am=f&&(!$h||Ka&&8<Ka&&11>=Ka),Pm=" ",bm=!1;function Rm(n,s){switch(n){case"keyup":return Z1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ko=!1;function tE(n,s){switch(n){case"compositionend":return Nm(s);case"keypress":return s.which!==32?null:(bm=!0,Pm);case"textInput":return n=s.data,n===Pm&&bm?null:n;default:return null}}function nE(n,s){if(ko)return n==="compositionend"||!$h&&Rm(n,s)?(n=wu(),Vr=_o=mn=null,ko=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Am&&s.locale!=="ko"?null:s.data;default:return null}}var rE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!rE[n.type]:s==="textarea"}function Om(n,s,a,h){ci(h),s=Au(s,"onChange"),0<s.length&&(a=new Is("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var Qa=null,Xa=null;function iE(n){Jm(n,0)}function Su(n){var s=Ro(n);if(Jn(s))return n}function sE(n,s){if(n==="change")return s}var Mm=!1;if(f){var Hh;if(f){var Gh="oninput"in document;if(!Gh){var Vm=document.createElement("div");Vm.setAttribute("oninput","return;"),Gh=typeof Vm.oninput=="function"}Hh=Gh}else Hh=!1;Mm=Hh&&(!document.documentMode||9<document.documentMode)}function Lm(){Qa&&(Qa.detachEvent("onpropertychange",Fm),Xa=Qa=null)}function Fm(n){if(n.propertyName==="value"&&Su(Xa)){var s=[];Om(s,Xa,n,uo(n)),au(iE,s)}}function oE(n,s,a){n==="focusin"?(Lm(),Qa=s,Xa=a,Qa.attachEvent("onpropertychange",Fm)):n==="focusout"&&Lm()}function aE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Su(Xa)}function lE(n,s){if(n==="click")return Su(s)}function uE(n,s){if(n==="input"||n==="change")return Su(s)}function cE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var jn=typeof Object.is=="function"?Object.is:cE;function Ya(n,s){if(jn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(s,d)||!jn(n[d],s[d]))return!1}return!0}function jm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Um(n,s){var a=jm(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jm(a)}}function zm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?zm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Bm(){for(var n=window,s=ii();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=ii(n.document)}return s}function Wh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function hE(n){var s=Bm(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&zm(a.ownerDocument.documentElement,a)){if(h!==null&&Wh(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(h.start,d);h=h.end===void 0?m:Math.min(h.end,d),!n.extend&&m>h&&(d=h,h=m,m=d),d=Um(a,m);var _=Um(a,h);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>h?(n.addRange(s),n.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dE=f&&"documentMode"in document&&11>=document.documentMode,Co=null,qh=null,Ja=null,Kh=!1;function $m(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Kh||Co==null||Co!==ii(h)||(h=Co,"selectionStart"in h&&Wh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ja&&Ya(Ja,h)||(Ja=h,h=Au(qh,"onSelect"),0<h.length&&(s=new Is("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=Co)))}function xu(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ao={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},Qh={},Hm={};f&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function ku(n){if(Qh[n])return Qh[n];if(!Ao[n])return n;var s=Ao[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Hm)return Qh[n]=s[a];return n}var Gm=ku("animationend"),Wm=ku("animationiteration"),qm=ku("animationstart"),Km=ku("transitionend"),Qm=new Map,Xm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(n,s){Qm.set(n,s),l(s,[n])}for(var Xh=0;Xh<Xm.length;Xh++){var Yh=Xm[Xh],fE=Yh.toLowerCase(),pE=Yh[0].toUpperCase()+Yh.slice(1);_i(fE,"on"+pE)}_i(Gm,"onAnimationEnd"),_i(Wm,"onAnimationIteration"),_i(qm,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(Km,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Za));function Ym(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,Ra(h,s,void 0,n),n.currentTarget=null}function Jm(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],d=h.event;h=h.listeners;e:{var m=void 0;if(s)for(var _=h.length-1;0<=_;_--){var P=h[_],D=P.instance,z=P.currentTarget;if(P=P.listener,D!==m&&d.isPropagationStopped())break e;Ym(d,P,z),m=D}else for(_=0;_<h.length;_++){if(P=h[_],D=P.instance,z=P.currentTarget,P=P.listener,D!==m&&d.isPropagationStopped())break e;Ym(d,P,z),m=D}}}if(co)throw n=Sn,co=!1,Sn=null,n}function tt(n,s){var a=s[sd];a===void 0&&(a=s[sd]=new Set);var h=n+"__bubble";a.has(h)||(Zm(s,n,2,!1),a.add(h))}function Jh(n,s,a){var h=0;s&&(h|=4),Zm(a,n,h,s)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function el(n){if(!n[Cu]){n[Cu]=!0,i.forEach(function(a){a!=="selectionchange"&&(mE.has(a)||Jh(a,!1,n),Jh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Cu]||(s[Cu]=!0,Jh("selectionchange",!1,s))}}function Zm(n,s,a,h){switch(wo(s)){case 1:var d=ar;break;case 4:d=vu;break;default:d=Ha}a=d.bind(null,s,a,n),d=void 0,!di||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),h?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Zh(n,s,a,h,d){var m=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var P=h.stateNode.containerInfo;if(P===d||P.nodeType===8&&P.parentNode===d)break;if(_===4)for(_=h.return;_!==null;){var D=_.tag;if((D===3||D===4)&&(D=_.stateNode.containerInfo,D===d||D.nodeType===8&&D.parentNode===d))return;_=_.return}for(;P!==null;){if(_=xs(P),_===null)return;if(D=_.tag,D===5||D===6){h=m=_;continue e}P=P.parentNode}}h=h.return}au(function(){var z=m,ee=uo(a),te=[];e:{var Z=Qm.get(n);if(Z!==void 0){var ue=Is,fe=n;switch(n){case"keypress":if(Ts(a)===0)break e;case"keydown":case"keyup":ue=Xe;break;case"focusin":fe="focus",ue=Lt;break;case"focusout":fe="blur",ue=Lt;break;case"beforeblur":case"afterblur":ue=Lt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=hr;break;case Gm:case Wm:case qm:ue=Iu;break;case Km:ue=xo;break;case"scroll":ue=Eo;break;case"wheel":ue=J1;break;case"copy":case"cut":case"paste":ue=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=yn}var ge=(s&4)!==0,pt=!ge&&n==="scroll",L=ge?Z!==null?Z+"Capture":null:Z;ge=[];for(var O=z,j;O!==null;){j=O;var re=j.stateNode;if(j.tag===5&&re!==null&&(j=re,L!==null&&(re=ds(O,L),re!=null&&ge.push(tl(O,re,j)))),pt)break;O=O.return}0<ge.length&&(Z=new ue(Z,fe,null,a,ee),te.push({event:Z,listeners:ge}))}}if((s&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",Z&&a!==ui&&(fe=a.relatedTarget||a.fromElement)&&(xs(fe)||fe[Fr]))break e;if((ue||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,ue?(fe=a.relatedTarget||a.toElement,ue=z,fe=fe?xs(fe):null,fe!==null&&(pt=Ln(fe),fe!==pt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=z),ue!==fe)){if(ge=Wa,re="onMouseLeave",L="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ge=yn,re="onPointerLeave",L="onPointerEnter",O="pointer"),pt=ue==null?Z:Ro(ue),j=fe==null?Z:Ro(fe),Z=new ge(re,O+"leave",ue,a,ee),Z.target=pt,Z.relatedTarget=j,re=null,xs(ee)===z&&(ge=new ge(L,O+"enter",fe,a,ee),ge.target=j,ge.relatedTarget=pt,re=ge),pt=re,ue&&fe)t:{for(ge=ue,L=fe,O=0,j=ge;j;j=Po(j))O++;for(j=0,re=L;re;re=Po(re))j++;for(;0<O-j;)ge=Po(ge),O--;for(;0<j-O;)L=Po(L),j--;for(;O--;){if(ge===L||L!==null&&ge===L.alternate)break t;ge=Po(ge),L=Po(L)}ge=null}else ge=null;ue!==null&&eg(te,Z,ue,ge,!1),fe!==null&&pt!==null&&eg(te,pt,fe,ge,!0)}}e:{if(Z=z?Ro(z):window,ue=Z.nodeName&&Z.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Z.type==="file")var ve=sE;else if(Dm(Z))if(Mm)ve=uE;else{ve=aE;var Ee=oE}else(ue=Z.nodeName)&&ue.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ve=lE);if(ve&&(ve=ve(n,z))){Om(te,ve,a,ee);break e}Ee&&Ee(n,Z,z),n==="focusout"&&(Ee=Z._wrapperState)&&Ee.controlled&&Z.type==="number"&&vt(Z,"number",Z.value)}switch(Ee=z?Ro(z):window,n){case"focusin":(Dm(Ee)||Ee.contentEditable==="true")&&(Co=Ee,qh=z,Ja=null);break;case"focusout":Ja=qh=Co=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,$m(te,a,ee);break;case"selectionchange":if(dE)break;case"keydown":case"keyup":$m(te,a,ee)}var Te;if($h)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else ko?Rm(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Am&&a.locale!=="ko"&&(ko||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&ko&&(Te=wu()):(mn=ee,_o="value"in mn?mn.value:mn.textContent,ko=!0)),Ee=Au(z,ke),0<Ee.length&&(ke=new v(ke,n,null,a,ee),te.push({event:ke,listeners:Ee}),Te?ke.data=Te:(Te=Nm(a),Te!==null&&(ke.data=Te)))),(Te=eE?tE(n,a):nE(n,a))&&(z=Au(z,"onBeforeInput"),0<z.length&&(ee=new v("onBeforeInput","beforeinput",null,a,ee),te.push({event:ee,listeners:z}),ee.data=Te))}Jm(te,s)})}function tl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Au(n,s){for(var a=s+"Capture",h=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ds(n,a),m!=null&&h.unshift(tl(n,m,d)),m=ds(n,s),m!=null&&h.push(tl(n,m,d))),n=n.return}return h}function Po(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function eg(n,s,a,h,d){for(var m=s._reactName,_=[];a!==null&&a!==h;){var P=a,D=P.alternate,z=P.stateNode;if(D!==null&&D===h)break;P.tag===5&&z!==null&&(P=z,d?(D=ds(a,m),D!=null&&_.unshift(tl(a,D,P))):d||(D=ds(a,m),D!=null&&_.push(tl(a,D,P)))),a=a.return}_.length!==0&&n.push({event:s,listeners:_})}var gE=/\r\n?/g,yE=/\u0000|\uFFFD/g;function tg(n){return(typeof n=="string"?n:""+n).replace(gE,`
`).replace(yE,"")}function Pu(n,s,a){if(s=tg(s),tg(n)!==s&&a)throw Error(t(425))}function bu(){}var ed=null,td=null;function nd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rd=typeof setTimeout=="function"?setTimeout:void 0,vE=typeof clearTimeout=="function"?clearTimeout:void 0,ng=typeof Promise=="function"?Promise:void 0,wE=typeof queueMicrotask=="function"?queueMicrotask:typeof ng<"u"?function(n){return ng.resolve(null).then(n).catch(_E)}:rd;function _E(n){setTimeout(function(){throw n})}function id(n,s){var a=s,h=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){n.removeChild(d),yi(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);yi(s)}function Ei(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function rg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var bo=Math.random().toString(36).slice(2),fr="__reactFiber$"+bo,nl="__reactProps$"+bo,Fr="__reactContainer$"+bo,sd="__reactEvents$"+bo,EE="__reactListeners$"+bo,TE="__reactHandles$"+bo;function xs(n){var s=n[fr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Fr]||a[fr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=rg(n);n!==null;){if(a=n[fr])return a;n=rg(n)}return s}n=a,a=n.parentNode}return null}function rl(n){return n=n[fr]||n[Fr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ro(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ru(n){return n[nl]||null}var od=[],No=-1;function Ti(n){return{current:n}}function nt(n){0>No||(n.current=od[No],od[No]=null,No--)}function Ze(n,s){No++,od[No]=n.current,n.current=s}var Ii={},Ht=Ti(Ii),nn=Ti(!1),ks=Ii;function Do(n,s){var a=n.type.contextTypes;if(!a)return Ii;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function rn(n){return n=n.childContextTypes,n!=null}function Nu(){nt(nn),nt(Ht)}function ig(n,s,a){if(Ht.current!==Ii)throw Error(t(168));Ze(Ht,s),Ze(nn,a)}function sg(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in s))throw Error(t(108,Ie(n)||"Unknown",d));return ie({},a,h)}function Du(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ii,ks=Ht.current,Ze(Ht,n),Ze(nn,nn.current),!0}function og(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=sg(n,s,ks),h.__reactInternalMemoizedMergedChildContext=n,nt(nn),nt(Ht),Ze(Ht,n)):nt(nn),Ze(nn,a)}var jr=null,Ou=!1,ad=!1;function ag(n){jr===null?jr=[n]:jr.push(n)}function IE(n){Ou=!0,ag(n)}function Si(){if(!ad&&jr!==null){ad=!0;var n=0,s=ze;try{var a=jr;for(ze=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}jr=null,Ou=!1}catch(d){throw jr!==null&&(jr=jr.slice(n+1)),Da(fo,Si),d}finally{ze=s,ad=!1}}return null}var Oo=[],Mo=0,Mu=null,Vu=0,kn=[],Cn=0,Cs=null,Ur=1,zr="";function As(n,s){Oo[Mo++]=Vu,Oo[Mo++]=Mu,Mu=n,Vu=s}function lg(n,s,a){kn[Cn++]=Ur,kn[Cn++]=zr,kn[Cn++]=Cs,Cs=n;var h=Ur;n=zr;var d=32-fn(h)-1;h&=~(1<<d),a+=1;var m=32-fn(s)+d;if(30<m){var _=d-d%5;m=(h&(1<<_)-1).toString(32),h>>=_,d-=_,Ur=1<<32-fn(s)+d|a<<d|h,zr=m+n}else Ur=1<<m|a<<d|h,zr=n}function ld(n){n.return!==null&&(As(n,1),lg(n,1,0))}function ud(n){for(;n===Mu;)Mu=Oo[--Mo],Oo[Mo]=null,Vu=Oo[--Mo],Oo[Mo]=null;for(;n===Cs;)Cs=kn[--Cn],kn[Cn]=null,zr=kn[--Cn],kn[Cn]=null,Ur=kn[--Cn],kn[Cn]=null}var vn=null,wn=null,st=!1,Un=null;function ug(n,s){var a=Rn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function cg(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,vn=n,wn=Ei(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,vn=n,wn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Cs!==null?{id:Ur,overflow:zr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Rn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,vn=n,wn=null,!0):!1;default:return!1}}function cd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function hd(n){if(st){var s=wn;if(s){var a=s;if(!cg(n,s)){if(cd(n))throw Error(t(418));s=Ei(a.nextSibling);var h=vn;s&&cg(n,s)?ug(h,a):(n.flags=n.flags&-4097|2,st=!1,vn=n)}}else{if(cd(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,vn=n}}}function hg(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vn=n}function Lu(n){if(n!==vn)return!1;if(!st)return hg(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!nd(n.type,n.memoizedProps)),s&&(s=wn)){if(cd(n))throw dg(),Error(t(418));for(;s;)ug(n,s),s=Ei(s.nextSibling)}if(hg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){wn=Ei(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}wn=null}}else wn=vn?Ei(n.stateNode.nextSibling):null;return!0}function dg(){for(var n=wn;n;)n=Ei(n.nextSibling)}function Vo(){wn=vn=null,st=!1}function dd(n){Un===null?Un=[n]:Un.push(n)}var SE=q.ReactCurrentBatchConfig;function il(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var d=h,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(_){var P=d.refs;_===null?delete P[m]:P[m]=_},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Fu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function fg(n){var s=n._init;return s(n._payload)}function pg(n){function s(L,O){if(n){var j=L.deletions;j===null?(L.deletions=[O],L.flags|=16):j.push(O)}}function a(L,O){if(!n)return null;for(;O!==null;)s(L,O),O=O.sibling;return null}function h(L,O){for(L=new Map;O!==null;)O.key!==null?L.set(O.key,O):L.set(O.index,O),O=O.sibling;return L}function d(L,O){return L=Ni(L,O),L.index=0,L.sibling=null,L}function m(L,O,j){return L.index=j,n?(j=L.alternate,j!==null?(j=j.index,j<O?(L.flags|=2,O):j):(L.flags|=2,O)):(L.flags|=1048576,O)}function _(L){return n&&L.alternate===null&&(L.flags|=2),L}function P(L,O,j,re){return O===null||O.tag!==6?(O=rf(j,L.mode,re),O.return=L,O):(O=d(O,j),O.return=L,O)}function D(L,O,j,re){var ve=j.type;return ve===k?ee(L,O,j.props.children,re,j.key):O!==null&&(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Be&&fg(ve)===O.type)?(re=d(O,j.props),re.ref=il(L,O,j),re.return=L,re):(re=lc(j.type,j.key,j.props,null,L.mode,re),re.ref=il(L,O,j),re.return=L,re)}function z(L,O,j,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=sf(j,L.mode,re),O.return=L,O):(O=d(O,j.children||[]),O.return=L,O)}function ee(L,O,j,re,ve){return O===null||O.tag!==7?(O=Vs(j,L.mode,re,ve),O.return=L,O):(O=d(O,j),O.return=L,O)}function te(L,O,j){if(typeof O=="string"&&O!==""||typeof O=="number")return O=rf(""+O,L.mode,j),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ne:return j=lc(O.type,O.key,O.props,null,L.mode,j),j.ref=il(L,null,O),j.return=L,j;case Q:return O=sf(O,L.mode,j),O.return=L,O;case Be:var re=O._init;return te(L,re(O._payload),j)}if(dt(O)||se(O))return O=Vs(O,L.mode,j,null),O.return=L,O;Fu(L,O)}return null}function Z(L,O,j,re){var ve=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ve!==null?null:P(L,O,""+j,re);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ne:return j.key===ve?D(L,O,j,re):null;case Q:return j.key===ve?z(L,O,j,re):null;case Be:return ve=j._init,Z(L,O,ve(j._payload),re)}if(dt(j)||se(j))return ve!==null?null:ee(L,O,j,re,null);Fu(L,j)}return null}function ue(L,O,j,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number")return L=L.get(j)||null,P(O,L,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ne:return L=L.get(re.key===null?j:re.key)||null,D(O,L,re,ve);case Q:return L=L.get(re.key===null?j:re.key)||null,z(O,L,re,ve);case Be:var Ee=re._init;return ue(L,O,j,Ee(re._payload),ve)}if(dt(re)||se(re))return L=L.get(j)||null,ee(O,L,re,ve,null);Fu(O,re)}return null}function fe(L,O,j,re){for(var ve=null,Ee=null,Te=O,ke=O=0,Dt=null;Te!==null&&ke<j.length;ke++){Te.index>ke?(Dt=Te,Te=null):Dt=Te.sibling;var qe=Z(L,Te,j[ke],re);if(qe===null){Te===null&&(Te=Dt);break}n&&Te&&qe.alternate===null&&s(L,Te),O=m(qe,O,ke),Ee===null?ve=qe:Ee.sibling=qe,Ee=qe,Te=Dt}if(ke===j.length)return a(L,Te),st&&As(L,ke),ve;if(Te===null){for(;ke<j.length;ke++)Te=te(L,j[ke],re),Te!==null&&(O=m(Te,O,ke),Ee===null?ve=Te:Ee.sibling=Te,Ee=Te);return st&&As(L,ke),ve}for(Te=h(L,Te);ke<j.length;ke++)Dt=ue(Te,L,ke,j[ke],re),Dt!==null&&(n&&Dt.alternate!==null&&Te.delete(Dt.key===null?ke:Dt.key),O=m(Dt,O,ke),Ee===null?ve=Dt:Ee.sibling=Dt,Ee=Dt);return n&&Te.forEach(function(Di){return s(L,Di)}),st&&As(L,ke),ve}function ge(L,O,j,re){var ve=se(j);if(typeof ve!="function")throw Error(t(150));if(j=ve.call(j),j==null)throw Error(t(151));for(var Ee=ve=null,Te=O,ke=O=0,Dt=null,qe=j.next();Te!==null&&!qe.done;ke++,qe=j.next()){Te.index>ke?(Dt=Te,Te=null):Dt=Te.sibling;var Di=Z(L,Te,qe.value,re);if(Di===null){Te===null&&(Te=Dt);break}n&&Te&&Di.alternate===null&&s(L,Te),O=m(Di,O,ke),Ee===null?ve=Di:Ee.sibling=Di,Ee=Di,Te=Dt}if(qe.done)return a(L,Te),st&&As(L,ke),ve;if(Te===null){for(;!qe.done;ke++,qe=j.next())qe=te(L,qe.value,re),qe!==null&&(O=m(qe,O,ke),Ee===null?ve=qe:Ee.sibling=qe,Ee=qe);return st&&As(L,ke),ve}for(Te=h(L,Te);!qe.done;ke++,qe=j.next())qe=ue(Te,L,ke,qe.value,re),qe!==null&&(n&&qe.alternate!==null&&Te.delete(qe.key===null?ke:qe.key),O=m(qe,O,ke),Ee===null?ve=qe:Ee.sibling=qe,Ee=qe);return n&&Te.forEach(function(rT){return s(L,rT)}),st&&As(L,ke),ve}function pt(L,O,j,re){if(typeof j=="object"&&j!==null&&j.type===k&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ne:e:{for(var ve=j.key,Ee=O;Ee!==null;){if(Ee.key===ve){if(ve=j.type,ve===k){if(Ee.tag===7){a(L,Ee.sibling),O=d(Ee,j.props.children),O.return=L,L=O;break e}}else if(Ee.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Be&&fg(ve)===Ee.type){a(L,Ee.sibling),O=d(Ee,j.props),O.ref=il(L,Ee,j),O.return=L,L=O;break e}a(L,Ee);break}else s(L,Ee);Ee=Ee.sibling}j.type===k?(O=Vs(j.props.children,L.mode,re,j.key),O.return=L,L=O):(re=lc(j.type,j.key,j.props,null,L.mode,re),re.ref=il(L,O,j),re.return=L,L=re)}return _(L);case Q:e:{for(Ee=j.key;O!==null;){if(O.key===Ee)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){a(L,O.sibling),O=d(O,j.children||[]),O.return=L,L=O;break e}else{a(L,O);break}else s(L,O);O=O.sibling}O=sf(j,L.mode,re),O.return=L,L=O}return _(L);case Be:return Ee=j._init,pt(L,O,Ee(j._payload),re)}if(dt(j))return fe(L,O,j,re);if(se(j))return ge(L,O,j,re);Fu(L,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,O!==null&&O.tag===6?(a(L,O.sibling),O=d(O,j),O.return=L,L=O):(a(L,O),O=rf(j,L.mode,re),O.return=L,L=O),_(L)):a(L,O)}return pt}var Lo=pg(!0),mg=pg(!1),ju=Ti(null),Uu=null,Fo=null,fd=null;function pd(){fd=Fo=Uu=null}function md(n){var s=ju.current;nt(ju),n._currentValue=s}function gd(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function jo(n,s){Uu=n,fd=Fo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(sn=!0),n.firstContext=null)}function An(n){var s=n._currentValue;if(fd!==n)if(n={context:n,memoizedValue:s,next:null},Fo===null){if(Uu===null)throw Error(t(308));Fo=n,Uu.dependencies={lanes:0,firstContext:n}}else Fo=Fo.next=n;return s}var Ps=null;function yd(n){Ps===null?Ps=[n]:Ps.push(n)}function gg(n,s,a,h){var d=s.interleaved;return d===null?(a.next=a,yd(s)):(a.next=d.next,d.next=a),s.interleaved=a,Br(n,h)}function Br(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var xi=!1;function vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yg(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function $r(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ki(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ge&2)!==0){var d=h.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),h.pending=s,Br(n,a)}return d=h.interleaved,d===null?(s.next=s,yd(h)):(s.next=d.next,d.next=s),h.interleaved=s,Br(n,a)}function zu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,ja(n,a)}}function vg(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Bu(n,s,a,h){var d=n.updateQueue;xi=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,P=d.shared.pending;if(P!==null){d.shared.pending=null;var D=P,z=D.next;D.next=null,_===null?m=z:_.next=z,_=D;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,P=ee.lastBaseUpdate,P!==_&&(P===null?ee.firstBaseUpdate=z:P.next=z,ee.lastBaseUpdate=D))}if(m!==null){var te=d.baseState;_=0,ee=z=D=null,P=m;do{var Z=P.lane,ue=P.eventTime;if((h&Z)===Z){ee!==null&&(ee=ee.next={eventTime:ue,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var fe=n,ge=P;switch(Z=s,ue=a,ge.tag){case 1:if(fe=ge.payload,typeof fe=="function"){te=fe.call(ue,te,Z);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ge.payload,Z=typeof fe=="function"?fe.call(ue,te,Z):fe,Z==null)break e;te=ie({},te,Z);break e;case 2:xi=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,Z=d.effects,Z===null?d.effects=[P]:Z.push(P))}else ue={eventTime:ue,lane:Z,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ee===null?(z=ee=ue,D=te):ee=ee.next=ue,_|=Z;if(P=P.next,P===null){if(P=d.shared.pending,P===null)break;Z=P,P=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);if(ee===null&&(D=te),d.baseState=D,d.firstBaseUpdate=z,d.lastBaseUpdate=ee,s=d.shared.interleaved,s!==null){d=s;do _|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);Ns|=_,n.lanes=_,n.memoizedState=te}}function wg(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var sl={},pr=Ti(sl),ol=Ti(sl),al=Ti(sl);function bs(n){if(n===sl)throw Error(t(174));return n}function wd(n,s){switch(Ze(al,s),Ze(ol,n),Ze(pr,sl),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:oo(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=oo(s,n)}nt(pr),Ze(pr,s)}function Uo(){nt(pr),nt(ol),nt(al)}function _g(n){bs(al.current);var s=bs(pr.current),a=oo(s,n.type);s!==a&&(Ze(ol,n),Ze(pr,a))}function _d(n){ol.current===n&&(nt(pr),nt(ol))}var ot=Ti(0);function $u(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ed=[];function Td(){for(var n=0;n<Ed.length;n++)Ed[n]._workInProgressVersionPrimary=null;Ed.length=0}var Hu=q.ReactCurrentDispatcher,Id=q.ReactCurrentBatchConfig,Rs=0,at=null,kt=null,Rt=null,Gu=!1,ll=!1,ul=0,xE=0;function Gt(){throw Error(t(321))}function Sd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!jn(n[a],s[a]))return!1;return!0}function xd(n,s,a,h,d,m){if(Rs=m,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Hu.current=n===null||n.memoizedState===null?PE:bE,n=a(h,d),ll){m=0;do{if(ll=!1,ul=0,25<=m)throw Error(t(301));m+=1,Rt=kt=null,s.updateQueue=null,Hu.current=RE,n=a(h,d)}while(ll)}if(Hu.current=Ku,s=kt!==null&&kt.next!==null,Rs=0,Rt=kt=at=null,Gu=!1,s)throw Error(t(300));return n}function kd(){var n=ul!==0;return ul=0,n}function mr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?at.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Pn(){if(kt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var s=Rt===null?at.memoizedState:Rt.next;if(s!==null)Rt=s,kt=n;else{if(n===null)throw Error(t(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Rt===null?at.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function cl(n,s){return typeof s=="function"?s(n):s}function Cd(n){var s=Pn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=kt,d=h.baseQueue,m=a.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}h.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,h=h.baseState;var P=_=null,D=null,z=m;do{var ee=z.lane;if((Rs&ee)===ee)D!==null&&(D=D.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:n(h,z.action);else{var te={lane:ee,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};D===null?(P=D=te,_=h):D=D.next=te,at.lanes|=ee,Ns|=ee}z=z.next}while(z!==null&&z!==m);D===null?_=h:D.next=P,jn(h,s.memoizedState)||(sn=!0),s.memoizedState=h,s.baseState=_,s.baseQueue=D,a.lastRenderedState=h}if(n=a.interleaved,n!==null){d=n;do m=d.lane,at.lanes|=m,Ns|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ad(n){var s=Pn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=n(m,_.action),_=_.next;while(_!==d);jn(m,s.memoizedState)||(sn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,h]}function Eg(){}function Tg(n,s){var a=at,h=Pn(),d=s(),m=!jn(h.memoizedState,d);if(m&&(h.memoizedState=d,sn=!0),h=h.queue,Pd(xg.bind(null,a,h,n),[n]),h.getSnapshot!==s||m||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,hl(9,Sg.bind(null,a,h,d,s),void 0,null),Nt===null)throw Error(t(349));(Rs&30)!==0||Ig(a,s,d)}return d}function Ig(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Sg(n,s,a,h){s.value=a,s.getSnapshot=h,kg(s)&&Cg(n)}function xg(n,s,a){return a(function(){kg(s)&&Cg(n)})}function kg(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!jn(n,a)}catch{return!0}}function Cg(n){var s=Br(n,1);s!==null&&Hn(s,n,1,-1)}function Ag(n){var s=mr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:n},s.queue=n,n=n.dispatch=AE.bind(null,at,n),[s.memoizedState,n]}function hl(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function Pg(){return Pn().memoizedState}function Wu(n,s,a,h){var d=mr();at.flags|=n,d.memoizedState=hl(1|s,a,void 0,h===void 0?null:h)}function qu(n,s,a,h){var d=Pn();h=h===void 0?null:h;var m=void 0;if(kt!==null){var _=kt.memoizedState;if(m=_.destroy,h!==null&&Sd(h,_.deps)){d.memoizedState=hl(s,a,m,h);return}}at.flags|=n,d.memoizedState=hl(1|s,a,m,h)}function bg(n,s){return Wu(8390656,8,n,s)}function Pd(n,s){return qu(2048,8,n,s)}function Rg(n,s){return qu(4,2,n,s)}function Ng(n,s){return qu(4,4,n,s)}function Dg(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Og(n,s,a){return a=a!=null?a.concat([n]):null,qu(4,4,Dg.bind(null,s,n),a)}function bd(){}function Mg(n,s){var a=Pn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Sd(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function Vg(n,s){var a=Pn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Sd(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function Lg(n,s,a){return(Rs&21)===0?(n.baseState&&(n.baseState=!1,sn=!0),n.memoizedState=a):(jn(a,s)||(a=La(),at.lanes|=a,Ns|=a,n.baseState=!0),s)}function kE(n,s){var a=ze;ze=a!==0&&4>a?a:4,n(!0);var h=Id.transition;Id.transition={};try{n(!1),s()}finally{ze=a,Id.transition=h}}function Fg(){return Pn().memoizedState}function CE(n,s,a){var h=bi(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},jg(n))Ug(s,a);else if(a=gg(n,s,a,h),a!==null){var d=en();Hn(a,n,h,d),zg(a,s,h)}}function AE(n,s,a){var h=bi(n),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(jg(n))Ug(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,P=m(_,a);if(d.hasEagerState=!0,d.eagerState=P,jn(P,_)){var D=s.interleaved;D===null?(d.next=d,yd(s)):(d.next=D.next,D.next=d),s.interleaved=d;return}}catch{}finally{}a=gg(n,s,d,h),a!==null&&(d=en(),Hn(a,n,h,d),zg(a,s,h))}}function jg(n){var s=n.alternate;return n===at||s!==null&&s===at}function Ug(n,s){ll=Gu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function zg(n,s,a){if((a&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,ja(n,a)}}var Ku={readContext:An,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},PE={readContext:An,useCallback:function(n,s){return mr().memoizedState=[n,s===void 0?null:s],n},useContext:An,useEffect:bg,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Wu(4194308,4,Dg.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Wu(4194308,4,n,s)},useInsertionEffect:function(n,s){return Wu(4,2,n,s)},useMemo:function(n,s){var a=mr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=mr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=CE.bind(null,at,n),[h.memoizedState,n]},useRef:function(n){var s=mr();return n={current:n},s.memoizedState=n},useState:Ag,useDebugValue:bd,useDeferredValue:function(n){return mr().memoizedState=n},useTransition:function(){var n=Ag(!1),s=n[0];return n=kE.bind(null,n[1]),mr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=at,d=mr();if(st){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Nt===null)throw Error(t(349));(Rs&30)!==0||Ig(h,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,bg(xg.bind(null,h,m,n),[n]),h.flags|=2048,hl(9,Sg.bind(null,h,m,a,s),void 0,null),a},useId:function(){var n=mr(),s=Nt.identifierPrefix;if(st){var a=zr,h=Ur;a=(h&~(1<<32-fn(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=ul++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=xE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},bE={readContext:An,useCallback:Mg,useContext:An,useEffect:Pd,useImperativeHandle:Og,useInsertionEffect:Rg,useLayoutEffect:Ng,useMemo:Vg,useReducer:Cd,useRef:Pg,useState:function(){return Cd(cl)},useDebugValue:bd,useDeferredValue:function(n){var s=Pn();return Lg(s,kt.memoizedState,n)},useTransition:function(){var n=Cd(cl)[0],s=Pn().memoizedState;return[n,s]},useMutableSource:Eg,useSyncExternalStore:Tg,useId:Fg,unstable_isNewReconciler:!1},RE={readContext:An,useCallback:Mg,useContext:An,useEffect:Pd,useImperativeHandle:Og,useInsertionEffect:Rg,useLayoutEffect:Ng,useMemo:Vg,useReducer:Ad,useRef:Pg,useState:function(){return Ad(cl)},useDebugValue:bd,useDeferredValue:function(n){var s=Pn();return kt===null?s.memoizedState=n:Lg(s,kt.memoizedState,n)},useTransition:function(){var n=Ad(cl)[0],s=Pn().memoizedState;return[n,s]},useMutableSource:Eg,useSyncExternalStore:Tg,useId:Fg,unstable_isNewReconciler:!1};function zn(n,s){if(n&&n.defaultProps){s=ie({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Rd(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:ie({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Qu={isMounted:function(n){return(n=n._reactInternals)?Ln(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=en(),d=bi(n),m=$r(h,d);m.payload=s,a!=null&&(m.callback=a),s=ki(n,m,d),s!==null&&(Hn(s,n,d,h),zu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=en(),d=bi(n),m=$r(h,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=ki(n,m,d),s!==null&&(Hn(s,n,d,h),zu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=en(),h=bi(n),d=$r(a,h);d.tag=2,s!=null&&(d.callback=s),s=ki(n,d,h),s!==null&&(Hn(s,n,h,a),zu(s,n,h))}};function Bg(n,s,a,h,d,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,m,_):s.prototype&&s.prototype.isPureReactComponent?!Ya(a,h)||!Ya(d,m):!0}function $g(n,s,a){var h=!1,d=Ii,m=s.contextType;return typeof m=="object"&&m!==null?m=An(m):(d=rn(s)?ks:Ht.current,h=s.contextTypes,m=(h=h!=null)?Do(n,d):Ii),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Qu,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function Hg(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&Qu.enqueueReplaceState(s,s.state,null)}function Nd(n,s,a,h){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},vd(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=An(m):(m=rn(s)?ks:Ht.current,d.context=Do(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(Rd(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Qu.enqueueReplaceState(d,d.state,null),Bu(n,a,d,h),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function zo(n,s){try{var a="",h=s;do a+=Ne(h),h=h.return;while(h);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function Dd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Od(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var NE=typeof WeakMap=="function"?WeakMap:Map;function Gg(n,s,a){a=$r(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){nc||(nc=!0,Qd=h),Od(n,s)},a}function Wg(n,s,a){a=$r(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var d=s.value;a.payload=function(){return h(d)},a.callback=function(){Od(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Od(n,s),typeof h!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),a}function qg(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new NE;var d=new Set;h.set(s,d)}else d=h.get(s),d===void 0&&(d=new Set,h.set(s,d));d.has(a)||(d.add(a),n=WE.bind(null,n,s,a),s.then(n,n))}function Kg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Qg(n,s,a,h,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=$r(-1,1),s.tag=2,ki(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var DE=q.ReactCurrentOwner,sn=!1;function Zt(n,s,a,h){s.child=n===null?mg(s,null,a,h):Lo(s,n.child,a,h)}function Xg(n,s,a,h,d){a=a.render;var m=s.ref;return jo(s,d),h=xd(n,s,a,h,m,d),a=kd(),n!==null&&!sn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Hr(n,s,d)):(st&&a&&ld(s),s.flags|=1,Zt(n,s,h,d),s.child)}function Yg(n,s,a,h,d){if(n===null){var m=a.type;return typeof m=="function"&&!nf(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Jg(n,s,m,h,d)):(n=lc(a.type,null,h,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ya,a(_,h)&&n.ref===s.ref)return Hr(n,s,d)}return s.flags|=1,n=Ni(m,h),n.ref=s.ref,n.return=s,s.child=n}function Jg(n,s,a,h,d){if(n!==null){var m=n.memoizedProps;if(Ya(m,h)&&n.ref===s.ref)if(sn=!1,s.pendingProps=h=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(sn=!0);else return s.lanes=n.lanes,Hr(n,s,d)}return Md(n,s,a,h,d)}function Zg(n,s,a){var h=s.pendingProps,d=h.children,m=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze($o,_n),_n|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ze($o,_n),_n|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,Ze($o,_n),_n|=h}else m!==null?(h=m.baseLanes|a,s.memoizedState=null):h=a,Ze($o,_n),_n|=h;return Zt(n,s,d,a),s.child}function ey(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Md(n,s,a,h,d){var m=rn(a)?ks:Ht.current;return m=Do(s,m),jo(s,d),a=xd(n,s,a,h,m,d),h=kd(),n!==null&&!sn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Hr(n,s,d)):(st&&h&&ld(s),s.flags|=1,Zt(n,s,a,d),s.child)}function ty(n,s,a,h,d){if(rn(a)){var m=!0;Du(s)}else m=!1;if(jo(s,d),s.stateNode===null)Yu(n,s),$g(s,a,h),Nd(s,a,h,d),h=!0;else if(n===null){var _=s.stateNode,P=s.memoizedProps;_.props=P;var D=_.context,z=a.contextType;typeof z=="object"&&z!==null?z=An(z):(z=rn(a)?ks:Ht.current,z=Do(s,z));var ee=a.getDerivedStateFromProps,te=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function";te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==h||D!==z)&&Hg(s,_,h,z),xi=!1;var Z=s.memoizedState;_.state=Z,Bu(s,h,_,d),D=s.memoizedState,P!==h||Z!==D||nn.current||xi?(typeof ee=="function"&&(Rd(s,a,ee,h),D=s.memoizedState),(P=xi||Bg(s,a,P,h,Z,D,z))?(te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=D),_.props=h,_.state=D,_.context=z,h=P):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{_=s.stateNode,yg(n,s),P=s.memoizedProps,z=s.type===s.elementType?P:zn(s.type,P),_.props=z,te=s.pendingProps,Z=_.context,D=a.contextType,typeof D=="object"&&D!==null?D=An(D):(D=rn(a)?ks:Ht.current,D=Do(s,D));var ue=a.getDerivedStateFromProps;(ee=typeof ue=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==te||Z!==D)&&Hg(s,_,h,D),xi=!1,Z=s.memoizedState,_.state=Z,Bu(s,h,_,d);var fe=s.memoizedState;P!==te||Z!==fe||nn.current||xi?(typeof ue=="function"&&(Rd(s,a,ue,h),fe=s.memoizedState),(z=xi||Bg(s,a,z,h,Z,fe,D)||!1)?(ee||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,fe,D),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,fe,D)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=fe),_.props=h,_.state=fe,_.context=D,h=z):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),h=!1)}return Vd(n,s,a,h,m,d)}function Vd(n,s,a,h,d,m){ey(n,s);var _=(s.flags&128)!==0;if(!h&&!_)return d&&og(s,a,!1),Hr(n,s,m);h=s.stateNode,DE.current=s;var P=_&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&_?(s.child=Lo(s,n.child,null,m),s.child=Lo(s,null,P,m)):Zt(n,s,P,m),s.memoizedState=h.state,d&&og(s,a,!0),s.child}function ny(n){var s=n.stateNode;s.pendingContext?ig(n,s.pendingContext,s.pendingContext!==s.context):s.context&&ig(n,s.context,!1),wd(n,s.containerInfo)}function ry(n,s,a,h,d){return Vo(),dd(d),s.flags|=256,Zt(n,s,a,h),s.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Fd(n){return{baseLanes:n,cachePool:null,transitions:null}}function iy(n,s,a){var h=s.pendingProps,d=ot.current,m=!1,_=(s.flags&128)!==0,P;if((P=_)||(P=n!==null&&n.memoizedState===null?!1:(d&2)!==0),P?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ze(ot,d&1),n===null)return hd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(_=h.children,n=h.fallback,m?(h=s.mode,m=s.child,_={mode:"hidden",children:_},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=_):m=uc(_,h,0,null),n=Vs(n,h,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=Fd(a),s.memoizedState=Ld,n):jd(s,_));if(d=n.memoizedState,d!==null&&(P=d.dehydrated,P!==null))return OE(n,s,_,h,P,d,a);if(m){m=h.fallback,_=s.mode,d=n.child,P=d.sibling;var D={mode:"hidden",children:h.children};return(_&1)===0&&s.child!==d?(h=s.child,h.childLanes=0,h.pendingProps=D,s.deletions=null):(h=Ni(d,D),h.subtreeFlags=d.subtreeFlags&14680064),P!==null?m=Ni(P,m):(m=Vs(m,_,a,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,_=n.child.memoizedState,_=_===null?Fd(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},m.memoizedState=_,m.childLanes=n.childLanes&~a,s.memoizedState=Ld,h}return m=n.child,n=m.sibling,h=Ni(m,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function jd(n,s){return s=uc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Xu(n,s,a,h){return h!==null&&dd(h),Lo(s,n.child,null,a),n=jd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function OE(n,s,a,h,d,m,_){if(a)return s.flags&256?(s.flags&=-257,h=Dd(Error(t(422))),Xu(n,s,_,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=h.fallback,d=s.mode,h=uc({mode:"visible",children:h.children},d,0,null),m=Vs(m,d,_,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,(s.mode&1)!==0&&Lo(s,n.child,null,_),s.child.memoizedState=Fd(_),s.memoizedState=Ld,m);if((s.mode&1)===0)return Xu(n,s,_,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var P=h.dgst;return h=P,m=Error(t(419)),h=Dd(m,h,void 0),Xu(n,s,_,h)}if(P=(_&n.childLanes)!==0,sn||P){if(h=Nt,h!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|_))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Br(n,d),Hn(h,n,d,-1))}return tf(),h=Dd(Error(t(421))),Xu(n,s,_,h)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=qE.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,wn=Ei(d.nextSibling),vn=s,st=!0,Un=null,n!==null&&(kn[Cn++]=Ur,kn[Cn++]=zr,kn[Cn++]=Cs,Ur=n.id,zr=n.overflow,Cs=s),s=jd(s,h.children),s.flags|=4096,s)}function sy(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),gd(n.return,s,a)}function Ud(n,s,a,h,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=d)}function oy(n,s,a){var h=s.pendingProps,d=h.revealOrder,m=h.tail;if(Zt(n,s,h.children,a),h=ot.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sy(n,a,s);else if(n.tag===19)sy(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Ze(ot,h),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&$u(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Ud(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&$u(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Ud(s,!0,a,null,m);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Hr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ns|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Ni(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ni(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function ME(n,s,a){switch(s.tag){case 3:ny(s),Vo();break;case 5:_g(s);break;case 1:rn(s.type)&&Du(s);break;case 4:wd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,d=s.memoizedProps.value;Ze(ju,h._currentValue),h._currentValue=d;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ze(ot,ot.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?iy(n,s,a):(Ze(ot,ot.current&1),n=Hr(n,s,a),n!==null?n.sibling:null);Ze(ot,ot.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(n.flags&128)!==0){if(h)return oy(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ze(ot,ot.current),h)break;return null;case 22:case 23:return s.lanes=0,Zg(n,s,a)}return Hr(n,s,a)}var ay,zd,ly,uy;ay=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},zd=function(){},ly=function(n,s,a,h){var d=n.memoizedProps;if(d!==h){n=s.stateNode,bs(pr.current);var m=null;switch(a){case"input":d=io(n,d),h=io(n,h),m=[];break;case"select":d=ie({},d,{value:void 0}),h=ie({},h,{value:void 0}),m=[];break;case"textarea":d=ka(n,d),h=ka(n,h),m=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=bu)}Vn(a,h);var _;a=null;for(z in d)if(!h.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var P=d[z];for(_ in P)P.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?m||(m=[]):(m=m||[]).push(z,null));for(z in h){var D=h[z];if(P=d!=null?d[z]:void 0,h.hasOwnProperty(z)&&D!==P&&(D!=null||P!=null))if(z==="style")if(P){for(_ in P)!P.hasOwnProperty(_)||D&&D.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in D)D.hasOwnProperty(_)&&P[_]!==D[_]&&(a||(a={}),a[_]=D[_])}else a||(m||(m=[]),m.push(z,a)),a=D;else z==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,P=P?P.__html:void 0,D!=null&&P!==D&&(m=m||[]).push(z,D)):z==="children"?typeof D!="string"&&typeof D!="number"||(m=m||[]).push(z,""+D):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(D!=null&&z==="onScroll"&&tt("scroll",n),m||P===D||(m=[])):(m=m||[]).push(z,D))}a&&(m=m||[]).push("style",a);var z=m;(s.updateQueue=z)&&(s.flags|=4)}},uy=function(n,s,a,h){a!==h&&(s.flags|=4)};function dl(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Wt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function VE(n,s,a){var h=s.pendingProps;switch(ud(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(s),null;case 1:return rn(s.type)&&Nu(),Wt(s),null;case 3:return h=s.stateNode,Uo(),nt(nn),nt(Ht),Td(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Lu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Un!==null&&(Jd(Un),Un=null))),zd(n,s),Wt(s),null;case 5:_d(s);var d=bs(al.current);if(a=s.type,n!==null&&s.stateNode!=null)ly(n,s,a,h,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Wt(s),null}if(n=bs(pr.current),Lu(s)){h=s.stateNode,a=s.type;var m=s.memoizedProps;switch(h[fr]=s,h[nl]=m,n=(s.mode&1)!==0,a){case"dialog":tt("cancel",h),tt("close",h);break;case"iframe":case"object":case"embed":tt("load",h);break;case"video":case"audio":for(d=0;d<Za.length;d++)tt(Za[d],h);break;case"source":tt("error",h);break;case"img":case"image":case"link":tt("error",h),tt("load",h);break;case"details":tt("toggle",h);break;case"input":tu(h,m),tt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},tt("invalid",h);break;case"textarea":Ca(h,m),tt("invalid",h)}Vn(a,m),d=null;for(var _ in m)if(m.hasOwnProperty(_)){var P=m[_];_==="children"?typeof P=="string"?h.textContent!==P&&(m.suppressHydrationWarning!==!0&&Pu(h.textContent,P,n),d=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(m.suppressHydrationWarning!==!0&&Pu(h.textContent,P,n),d=["children",""+P]):o.hasOwnProperty(_)&&P!=null&&_==="onScroll"&&tt("scroll",h)}switch(a){case"input":Yn(h),xa(h,m,!0);break;case"textarea":Yn(h),si(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=bu)}h=d,s.updateQueue=h,h!==null&&(s.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Aa(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=_.createElement(a,{is:h.is}):(n=_.createElement(a),a==="select"&&(_=n,h.multiple?_.multiple=!0:h.size&&(_.size=h.size))):n=_.createElementNS(n,a),n[fr]=s,n[nl]=h,ay(n,s,!1,!1),s.stateNode=n;e:{switch(_=lo(a,h),a){case"dialog":tt("cancel",n),tt("close",n),d=h;break;case"iframe":case"object":case"embed":tt("load",n),d=h;break;case"video":case"audio":for(d=0;d<Za.length;d++)tt(Za[d],n);d=h;break;case"source":tt("error",n),d=h;break;case"img":case"image":case"link":tt("error",n),tt("load",n),d=h;break;case"details":tt("toggle",n),d=h;break;case"input":tu(n,h),d=io(n,h),tt("invalid",n);break;case"option":d=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},d=ie({},h,{value:void 0}),tt("invalid",n);break;case"textarea":Ca(n,h),d=ka(n,h),tt("invalid",n);break;default:d=h}Vn(a,d),P=d;for(m in P)if(P.hasOwnProperty(m)){var D=P[m];m==="style"?ao(n,D):m==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&ru(n,D)):m==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&hs(n,D):typeof D=="number"&&hs(n,""+D):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?D!=null&&m==="onScroll"&&tt("scroll",n):D!=null&&U(n,m,D,_))}switch(a){case"input":Yn(n),xa(n,h,!1);break;case"textarea":Yn(n),si(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Le(h.value));break;case"select":n.multiple=!!h.multiple,m=h.value,m!=null?Mn(n,!!h.multiple,m,!1):h.defaultValue!=null&&Mn(n,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=bu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Wt(s),null;case 6:if(n&&s.stateNode!=null)uy(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=bs(al.current),bs(pr.current),Lu(s)){if(h=s.stateNode,a=s.memoizedProps,h[fr]=s,(m=h.nodeValue!==a)&&(n=vn,n!==null))switch(n.tag){case 3:Pu(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pu(h.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[fr]=s,s.stateNode=h}return Wt(s),null;case 13:if(nt(ot),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&wn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)dg(),Vo(),s.flags|=98560,m=!1;else if(m=Lu(s),h!==null&&h.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[fr]=s}else Vo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Wt(s),m=!1}else Un!==null&&(Jd(Un),Un=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ot.current&1)!==0?Ct===0&&(Ct=3):tf())),s.updateQueue!==null&&(s.flags|=4),Wt(s),null);case 4:return Uo(),zd(n,s),n===null&&el(s.stateNode.containerInfo),Wt(s),null;case 10:return md(s.type._context),Wt(s),null;case 17:return rn(s.type)&&Nu(),Wt(s),null;case 19:if(nt(ot),m=s.memoizedState,m===null)return Wt(s),null;if(h=(s.flags&128)!==0,_=m.rendering,_===null)if(h)dl(m,!1);else{if(Ct!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(_=$u(n),_!==null){for(s.flags|=128,dl(m,!1),h=_.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)m=a,n=h,m.flags&=14680066,_=m.alternate,_===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=_.childLanes,m.lanes=_.lanes,m.child=_.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=_.memoizedProps,m.memoizedState=_.memoizedState,m.updateQueue=_.updateQueue,m.type=_.type,n=_.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ze(ot,ot.current&1|2),s.child}n=n.sibling}m.tail!==null&&et()>Ho&&(s.flags|=128,h=!0,dl(m,!1),s.lanes=4194304)}else{if(!h)if(n=$u(_),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),dl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!st)return Wt(s),null}else 2*et()-m.renderingStartTime>Ho&&a!==1073741824&&(s.flags|=128,h=!0,dl(m,!1),s.lanes=4194304);m.isBackwards?(_.sibling=s.child,s.child=_):(a=m.last,a!==null?a.sibling=_:s.child=_,m.last=_)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=et(),s.sibling=null,a=ot.current,Ze(ot,h?a&1|2:a&1),s):(Wt(s),null);case 22:case 23:return ef(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(_n&1073741824)!==0&&(Wt(s),s.subtreeFlags&6&&(s.flags|=8192)):Wt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function LE(n,s){switch(ud(s),s.tag){case 1:return rn(s.type)&&Nu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Uo(),nt(nn),nt(Ht),Td(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return _d(s),null;case 13:if(nt(ot),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Vo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return nt(ot),null;case 4:return Uo(),null;case 10:return md(s.type._context),null;case 22:case 23:return ef(),null;case 24:return null;default:return null}}var Ju=!1,qt=!1,FE=typeof WeakSet=="function"?WeakSet:Set,de=null;function Bo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ct(n,s,h)}else a.current=null}function Bd(n,s,a){try{a()}catch(h){ct(n,s,h)}}var cy=!1;function jE(n,s){if(ed=Mr,n=Bm(),Wh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,P=-1,D=-1,z=0,ee=0,te=n,Z=null;t:for(;;){for(var ue;te!==a||d!==0&&te.nodeType!==3||(P=_+d),te!==m||h!==0&&te.nodeType!==3||(D=_+h),te.nodeType===3&&(_+=te.nodeValue.length),(ue=te.firstChild)!==null;)Z=te,te=ue;for(;;){if(te===n)break t;if(Z===a&&++z===d&&(P=_),Z===m&&++ee===h&&(D=_),(ue=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=ue}a=P===-1||D===-1?null:{start:P,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(td={focusedElem:n,selectionRange:a},Mr=!1,de=s;de!==null;)if(s=de,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,de=n;else for(;de!==null;){s=de;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var ge=fe.memoizedProps,pt=fe.memoizedState,L=s.stateNode,O=L.getSnapshotBeforeUpdate(s.elementType===s.type?ge:zn(s.type,ge),pt);L.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ct(s,s.return,re)}if(n=s.sibling,n!==null){n.return=s.return,de=n;break}de=s.return}return fe=cy,cy=!1,fe}function fl(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Bd(s,a,m)}d=d.next}while(d!==h)}}function Zu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function $d(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function hy(n){var s=n.alternate;s!==null&&(n.alternate=null,hy(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[fr],delete s[nl],delete s[sd],delete s[EE],delete s[TE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function dy(n){return n.tag===5||n.tag===3||n.tag===4}function fy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hd(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=bu));else if(h!==4&&(n=n.child,n!==null))for(Hd(n,s,a),n=n.sibling;n!==null;)Hd(n,s,a),n=n.sibling}function Gd(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Gd(n,s,a),n=n.sibling;n!==null;)Gd(n,s,a),n=n.sibling}var Ft=null,Bn=!1;function Ci(n,s,a){for(a=a.child;a!==null;)py(n,s,a),a=a.sibling}function py(n,s,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(gs,a)}catch{}switch(a.tag){case 5:qt||Bo(a,s);case 6:var h=Ft,d=Bn;Ft=null,Ci(n,s,a),Ft=h,Bn=d,Ft!==null&&(Bn?(n=Ft,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ft.removeChild(a.stateNode));break;case 18:Ft!==null&&(Bn?(n=Ft,a=a.stateNode,n.nodeType===8?id(n.parentNode,a):n.nodeType===1&&id(n,a),yi(n)):id(Ft,a.stateNode));break;case 4:h=Ft,d=Bn,Ft=a.stateNode.containerInfo,Bn=!0,Ci(n,s,a),Ft=h,Bn=d;break;case 0:case 11:case 14:case 15:if(!qt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var m=d,_=m.destroy;m=m.tag,_!==void 0&&((m&2)!==0||(m&4)!==0)&&Bd(a,s,_),d=d.next}while(d!==h)}Ci(n,s,a);break;case 1:if(!qt&&(Bo(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(P){ct(a,s,P)}Ci(n,s,a);break;case 21:Ci(n,s,a);break;case 22:a.mode&1?(qt=(h=qt)||a.memoizedState!==null,Ci(n,s,a),qt=h):Ci(n,s,a);break;default:Ci(n,s,a)}}function my(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new FE),s.forEach(function(h){var d=KE.bind(null,n,h);a.has(h)||(a.add(h),h.then(d,d))})}}function $n(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var m=n,_=s,P=_;e:for(;P!==null;){switch(P.tag){case 5:Ft=P.stateNode,Bn=!1;break e;case 3:Ft=P.stateNode.containerInfo,Bn=!0;break e;case 4:Ft=P.stateNode.containerInfo,Bn=!0;break e}P=P.return}if(Ft===null)throw Error(t(160));py(m,_,d),Ft=null,Bn=!1;var D=d.alternate;D!==null&&(D.return=null),d.return=null}catch(z){ct(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)gy(s,n),s=s.sibling}function gy(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if($n(s,n),gr(n),h&4){try{fl(3,n,n.return),Zu(3,n)}catch(ge){ct(n,n.return,ge)}try{fl(5,n,n.return)}catch(ge){ct(n,n.return,ge)}}break;case 1:$n(s,n),gr(n),h&512&&a!==null&&Bo(a,a.return);break;case 5:if($n(s,n),gr(n),h&512&&a!==null&&Bo(a,a.return),n.flags&32){var d=n.stateNode;try{hs(d,"")}catch(ge){ct(n,n.return,ge)}}if(h&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,_=a!==null?a.memoizedProps:m,P=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{P==="input"&&m.type==="radio"&&m.name!=null&&so(d,m),lo(P,_);var z=lo(P,m);for(_=0;_<D.length;_+=2){var ee=D[_],te=D[_+1];ee==="style"?ao(d,te):ee==="dangerouslySetInnerHTML"?ru(d,te):ee==="children"?hs(d,te):U(d,ee,te,z)}switch(P){case"input":cs(d,m);break;case"textarea":nu(d,m);break;case"select":var Z=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ue=m.value;ue!=null?Mn(d,!!m.multiple,ue,!1):Z!==!!m.multiple&&(m.defaultValue!=null?Mn(d,!!m.multiple,m.defaultValue,!0):Mn(d,!!m.multiple,m.multiple?[]:"",!1))}d[nl]=m}catch(ge){ct(n,n.return,ge)}}break;case 6:if($n(s,n),gr(n),h&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(ge){ct(n,n.return,ge)}}break;case 3:if($n(s,n),gr(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{yi(s.containerInfo)}catch(ge){ct(n,n.return,ge)}break;case 4:$n(s,n),gr(n);break;case 13:$n(s,n),gr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Kd=et())),h&4&&my(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(qt=(z=qt)||ee,$n(s,n),qt=z):$n(s,n),gr(n),h&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!ee&&(n.mode&1)!==0)for(de=n,ee=n.child;ee!==null;){for(te=de=ee;de!==null;){switch(Z=de,ue=Z.child,Z.tag){case 0:case 11:case 14:case 15:fl(4,Z,Z.return);break;case 1:Bo(Z,Z.return);var fe=Z.stateNode;if(typeof fe.componentWillUnmount=="function"){h=Z,a=Z.return;try{s=h,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(ge){ct(h,a,ge)}}break;case 5:Bo(Z,Z.return);break;case 22:if(Z.memoizedState!==null){wy(te);continue}}ue!==null?(ue.return=Z,de=ue):wy(te)}ee=ee.sibling}e:for(ee=null,te=n;;){if(te.tag===5){if(ee===null){ee=te;try{d=te.stateNode,z?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(P=te.stateNode,D=te.memoizedProps.style,_=D!=null&&D.hasOwnProperty("display")?D.display:null,P.style.display=li("display",_))}catch(ge){ct(n,n.return,ge)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=z?"":te.memoizedProps}catch(ge){ct(n,n.return,ge)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:$n(s,n),gr(n),h&4&&my(n);break;case 21:break;default:$n(s,n),gr(n)}}function gr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(dy(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(hs(d,""),h.flags&=-33);var m=fy(n);Gd(n,m,d);break;case 3:case 4:var _=h.stateNode.containerInfo,P=fy(n);Hd(n,P,_);break;default:throw Error(t(161))}}catch(D){ct(n,n.return,D)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function UE(n,s,a){de=n,yy(n)}function yy(n,s,a){for(var h=(n.mode&1)!==0;de!==null;){var d=de,m=d.child;if(d.tag===22&&h){var _=d.memoizedState!==null||Ju;if(!_){var P=d.alternate,D=P!==null&&P.memoizedState!==null||qt;P=Ju;var z=qt;if(Ju=_,(qt=D)&&!z)for(de=d;de!==null;)_=de,D=_.child,_.tag===22&&_.memoizedState!==null?_y(d):D!==null?(D.return=_,de=D):_y(d);for(;m!==null;)de=m,yy(m),m=m.sibling;de=d,Ju=P,qt=z}vy(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,de=m):vy(n)}}function vy(n){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:qt||Zu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!qt)if(a===null)h.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:zn(s.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&wg(s,m,h);break;case 3:var _=s.updateQueue;if(_!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}wg(s,_,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var ee=z.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&yi(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||s.flags&512&&$d(s)}catch(Z){ct(s,s.return,Z)}}if(s===n){de=null;break}if(a=s.sibling,a!==null){a.return=s.return,de=a;break}de=s.return}}function wy(n){for(;de!==null;){var s=de;if(s===n){de=null;break}var a=s.sibling;if(a!==null){a.return=s.return,de=a;break}de=s.return}}function _y(n){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Zu(4,s)}catch(D){ct(s,a,D)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var d=s.return;try{h.componentDidMount()}catch(D){ct(s,d,D)}}var m=s.return;try{$d(s)}catch(D){ct(s,m,D)}break;case 5:var _=s.return;try{$d(s)}catch(D){ct(s,_,D)}}}catch(D){ct(s,s.return,D)}if(s===n){de=null;break}var P=s.sibling;if(P!==null){P.return=s.return,de=P;break}de=s.return}}var zE=Math.ceil,ec=q.ReactCurrentDispatcher,Wd=q.ReactCurrentOwner,bn=q.ReactCurrentBatchConfig,Ge=0,Nt=null,_t=null,jt=0,_n=0,$o=Ti(0),Ct=0,pl=null,Ns=0,tc=0,qd=0,ml=null,on=null,Kd=0,Ho=1/0,Gr=null,nc=!1,Qd=null,Ai=null,rc=!1,Pi=null,ic=0,gl=0,Xd=null,sc=-1,oc=0;function en(){return(Ge&6)!==0?et():sc!==-1?sc:sc=et()}function bi(n){return(n.mode&1)===0?1:(Ge&2)!==0&&jt!==0?jt&-jt:SE.transition!==null?(oc===0&&(oc=La()),oc):(n=ze,n!==0||(n=window.event,n=n===void 0?16:wo(n.type)),n)}function Hn(n,s,a,h){if(50<gl)throw gl=0,Xd=null,Error(t(185));_s(n,a,h),((Ge&2)===0||n!==Nt)&&(n===Nt&&((Ge&2)===0&&(tc|=a),Ct===4&&Ri(n,jt)),an(n,h),a===1&&Ge===0&&(s.mode&1)===0&&(Ho=et()+500,Ou&&Si()))}function an(n,s){var a=n.callbackNode;ws(n,s);var h=Nr(n,n===Nt?jt:0);if(h===0)a!==null&&ho(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&ho(a),s===1)n.tag===0?IE(Ty.bind(null,n)):ag(Ty.bind(null,n)),wE(function(){(Ge&6)===0&&Si()}),a=null;else{switch(rr(h)){case 1:a=fo;break;case 4:a=Oa;break;case 16:a=ms;break;case 536870912:a=po;break;default:a=ms}a=by(a,Ey.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Ey(n,s){if(sc=-1,oc=0,(Ge&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Go()&&n.callbackNode!==a)return null;var h=Nr(n,n===Nt?jt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=ac(n,h);else{s=h;var d=Ge;Ge|=2;var m=Sy();(Nt!==n||jt!==s)&&(Gr=null,Ho=et()+500,Os(n,s));do try{HE();break}catch(P){Iy(n,P)}while(!0);pd(),ec.current=m,Ge=d,_t!==null?s=0:(Nt=null,jt=0,s=Ct)}if(s!==0){if(s===2&&(d=Va(n),d!==0&&(h=d,s=Yd(n,d))),s===1)throw a=pl,Os(n,0),Ri(n,h),an(n,et()),a;if(s===6)Ri(n,h);else{if(d=n.current.alternate,(h&30)===0&&!BE(d)&&(s=ac(n,h),s===2&&(m=Va(n),m!==0&&(h=m,s=Yd(n,m))),s===1))throw a=pl,Os(n,0),Ri(n,h),an(n,et()),a;switch(n.finishedWork=d,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Ms(n,on,Gr);break;case 3:if(Ri(n,h),(h&130023424)===h&&(s=Kd+500-et(),10<s)){if(Nr(n,0)!==0)break;if(d=n.suspendedLanes,(d&h)!==h){en(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=rd(Ms.bind(null,n,on,Gr),s);break}Ms(n,on,Gr);break;case 4:if(Ri(n,h),(h&4194240)===h)break;for(s=n.eventTimes,d=-1;0<h;){var _=31-fn(h);m=1<<_,_=s[_],_>d&&(d=_),h&=~m}if(h=d,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*zE(h/1960))-h,10<h){n.timeoutHandle=rd(Ms.bind(null,n,on,Gr),h);break}Ms(n,on,Gr);break;case 5:Ms(n,on,Gr);break;default:throw Error(t(329))}}}return an(n,et()),n.callbackNode===a?Ey.bind(null,n):null}function Yd(n,s){var a=ml;return n.current.memoizedState.isDehydrated&&(Os(n,s).flags|=256),n=ac(n,s),n!==2&&(s=on,on=a,s!==null&&Jd(s)),n}function Jd(n){on===null?on=n:on.push.apply(on,n)}function BE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],m=d.getSnapshot;d=d.value;try{if(!jn(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ri(n,s){for(s&=~qd,s&=~tc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-fn(s),h=1<<a;n[a]=-1,s&=~h}}function Ty(n){if((Ge&6)!==0)throw Error(t(327));Go();var s=Nr(n,0);if((s&1)===0)return an(n,et()),null;var a=ac(n,s);if(n.tag!==0&&a===2){var h=Va(n);h!==0&&(s=h,a=Yd(n,h))}if(a===1)throw a=pl,Os(n,0),Ri(n,s),an(n,et()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Ms(n,on,Gr),an(n,et()),null}function Zd(n,s){var a=Ge;Ge|=1;try{return n(s)}finally{Ge=a,Ge===0&&(Ho=et()+500,Ou&&Si())}}function Ds(n){Pi!==null&&Pi.tag===0&&(Ge&6)===0&&Go();var s=Ge;Ge|=1;var a=bn.transition,h=ze;try{if(bn.transition=null,ze=1,n)return n()}finally{ze=h,bn.transition=a,Ge=s,(Ge&6)===0&&Si()}}function ef(){_n=$o.current,nt($o)}function Os(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,vE(a)),_t!==null)for(a=_t.return;a!==null;){var h=a;switch(ud(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Nu();break;case 3:Uo(),nt(nn),nt(Ht),Td();break;case 5:_d(h);break;case 4:Uo();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:md(h.type._context);break;case 22:case 23:ef()}a=a.return}if(Nt=n,_t=n=Ni(n.current,null),jt=_n=s,Ct=0,pl=null,qd=tc=Ns=0,on=ml=null,Ps!==null){for(s=0;s<Ps.length;s++)if(a=Ps[s],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,m=a.pending;if(m!==null){var _=m.next;m.next=d,h.next=_}a.pending=h}Ps=null}return n}function Iy(n,s){do{var a=_t;try{if(pd(),Hu.current=Ku,Gu){for(var h=at.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}Gu=!1}if(Rs=0,Rt=kt=at=null,ll=!1,ul=0,Wd.current=null,a===null||a.return===null){Ct=1,pl=s,_t=null;break}e:{var m=n,_=a.return,P=a,D=s;if(s=jt,P.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var z=D,ee=P,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ue=Kg(_);if(ue!==null){ue.flags&=-257,Qg(ue,_,P,m,s),ue.mode&1&&qg(m,z,s),s=ue,D=z;var fe=s.updateQueue;if(fe===null){var ge=new Set;ge.add(D),s.updateQueue=ge}else fe.add(D);break e}else{if((s&1)===0){qg(m,z,s),tf();break e}D=Error(t(426))}}else if(st&&P.mode&1){var pt=Kg(_);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),Qg(pt,_,P,m,s),dd(zo(D,P));break e}}m=D=zo(D,P),Ct!==4&&(Ct=2),ml===null?ml=[m]:ml.push(m),m=_;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var L=Gg(m,D,s);vg(m,L);break e;case 1:P=D;var O=m.type,j=m.stateNode;if((m.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Ai===null||!Ai.has(j)))){m.flags|=65536,s&=-s,m.lanes|=s;var re=Wg(m,P,s);vg(m,re);break e}}m=m.return}while(m!==null)}ky(a)}catch(ve){s=ve,_t===a&&a!==null&&(_t=a=a.return);continue}break}while(!0)}function Sy(){var n=ec.current;return ec.current=Ku,n===null?Ku:n}function tf(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Nt===null||(Ns&268435455)===0&&(tc&268435455)===0||Ri(Nt,jt)}function ac(n,s){var a=Ge;Ge|=2;var h=Sy();(Nt!==n||jt!==s)&&(Gr=null,Os(n,s));do try{$E();break}catch(d){Iy(n,d)}while(!0);if(pd(),Ge=a,ec.current=h,_t!==null)throw Error(t(261));return Nt=null,jt=0,Ct}function $E(){for(;_t!==null;)xy(_t)}function HE(){for(;_t!==null&&!ps();)xy(_t)}function xy(n){var s=Py(n.alternate,n,_n);n.memoizedProps=n.pendingProps,s===null?ky(n):_t=s,Wd.current=null}function ky(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=VE(a,s,_n),a!==null){_t=a;return}}else{if(a=LE(a,s),a!==null){a.flags&=32767,_t=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,_t=null;return}}if(s=s.sibling,s!==null){_t=s;return}_t=s=n}while(s!==null);Ct===0&&(Ct=5)}function Ms(n,s,a){var h=ze,d=bn.transition;try{bn.transition=null,ze=1,GE(n,s,a,h)}finally{bn.transition=d,ze=h}return null}function GE(n,s,a,h){do Go();while(Pi!==null);if((Ge&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(zh(n,m),n===Nt&&(_t=Nt=null,jt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||rc||(rc=!0,by(ms,function(){return Go(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=bn.transition,bn.transition=null;var _=ze;ze=1;var P=Ge;Ge|=4,Wd.current=null,jE(n,a),gy(a,n),hE(td),Mr=!!ed,td=ed=null,n.current=a,UE(a),Rr(),Ge=P,ze=_,bn.transition=m}else n.current=a;if(rc&&(rc=!1,Pi=n,ic=d),m=n.pendingLanes,m===0&&(Ai=null),pu(a.stateNode),an(n,et()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(nc)throw nc=!1,n=Qd,Qd=null,n;return(ic&1)!==0&&n.tag!==0&&Go(),m=n.pendingLanes,(m&1)!==0?n===Xd?gl++:(gl=0,Xd=n):gl=0,Si(),null}function Go(){if(Pi!==null){var n=rr(ic),s=bn.transition,a=ze;try{if(bn.transition=null,ze=16>n?16:n,Pi===null)var h=!1;else{if(n=Pi,Pi=null,ic=0,(Ge&6)!==0)throw Error(t(331));var d=Ge;for(Ge|=4,de=n.current;de!==null;){var m=de,_=m.child;if((de.flags&16)!==0){var P=m.deletions;if(P!==null){for(var D=0;D<P.length;D++){var z=P[D];for(de=z;de!==null;){var ee=de;switch(ee.tag){case 0:case 11:case 15:fl(8,ee,m)}var te=ee.child;if(te!==null)te.return=ee,de=te;else for(;de!==null;){ee=de;var Z=ee.sibling,ue=ee.return;if(hy(ee),ee===z){de=null;break}if(Z!==null){Z.return=ue,de=Z;break}de=ue}}}var fe=m.alternate;if(fe!==null){var ge=fe.child;if(ge!==null){fe.child=null;do{var pt=ge.sibling;ge.sibling=null,ge=pt}while(ge!==null)}}de=m}}if((m.subtreeFlags&2064)!==0&&_!==null)_.return=m,de=_;else e:for(;de!==null;){if(m=de,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:fl(9,m,m.return)}var L=m.sibling;if(L!==null){L.return=m.return,de=L;break e}de=m.return}}var O=n.current;for(de=O;de!==null;){_=de;var j=_.child;if((_.subtreeFlags&2064)!==0&&j!==null)j.return=_,de=j;else e:for(_=O;de!==null;){if(P=de,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Zu(9,P)}}catch(ve){ct(P,P.return,ve)}if(P===_){de=null;break e}var re=P.sibling;if(re!==null){re.return=P.return,de=re;break e}de=P.return}}if(Ge=d,Si(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(gs,n)}catch{}h=!0}return h}finally{ze=a,bn.transition=s}}return!1}function Cy(n,s,a){s=zo(a,s),s=Gg(n,s,1),n=ki(n,s,1),s=en(),n!==null&&(_s(n,1,s),an(n,s))}function ct(n,s,a){if(n.tag===3)Cy(n,n,a);else for(;s!==null;){if(s.tag===3){Cy(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ai===null||!Ai.has(h))){n=zo(a,n),n=Wg(s,n,1),s=ki(s,n,1),n=en(),s!==null&&(_s(s,1,n),an(s,n));break}}s=s.return}}function WE(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=en(),n.pingedLanes|=n.suspendedLanes&a,Nt===n&&(jt&a)===a&&(Ct===4||Ct===3&&(jt&130023424)===jt&&500>et()-Kd?Os(n,0):qd|=a),an(n,s)}function Ay(n,s){s===0&&((n.mode&1)===0?s=1:(s=pi,pi<<=1,(pi&130023424)===0&&(pi=4194304)));var a=en();n=Br(n,s),n!==null&&(_s(n,s,a),an(n,a))}function qE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Ay(n,a)}function KE(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ay(n,a)}var Py;Py=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||nn.current)sn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return sn=!1,ME(n,s,a);sn=(n.flags&131072)!==0}else sn=!1,st&&(s.flags&1048576)!==0&&lg(s,Vu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Yu(n,s),n=s.pendingProps;var d=Do(s,Ht.current);jo(s,a),d=xd(null,s,h,n,d,a);var m=kd();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rn(h)?(m=!0,Du(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,vd(s),d.updater=Qu,s.stateNode=d,d._reactInternals=s,Nd(s,h,n,a),s=Vd(null,s,h,!0,m,a)):(s.tag=0,st&&m&&ld(s),Zt(null,s,d,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Yu(n,s),n=s.pendingProps,d=h._init,h=d(h._payload),s.type=h,d=s.tag=XE(h),n=zn(h,n),d){case 0:s=Md(null,s,h,n,a);break e;case 1:s=ty(null,s,h,n,a);break e;case 11:s=Xg(null,s,h,n,a);break e;case 14:s=Yg(null,s,h,zn(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Md(n,s,h,d,a);case 1:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),ty(n,s,h,d,a);case 3:e:{if(ny(s),n===null)throw Error(t(387));h=s.pendingProps,m=s.memoizedState,d=m.element,yg(n,s),Bu(s,h,null,a);var _=s.memoizedState;if(h=_.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=zo(Error(t(423)),s),s=ry(n,s,h,a,d);break e}else if(h!==d){d=zo(Error(t(424)),s),s=ry(n,s,h,a,d);break e}else for(wn=Ei(s.stateNode.containerInfo.firstChild),vn=s,st=!0,Un=null,a=mg(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Vo(),h===d){s=Hr(n,s,a);break e}Zt(n,s,h,a)}s=s.child}return s;case 5:return _g(s),n===null&&hd(s),h=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,_=d.children,nd(h,d)?_=null:m!==null&&nd(h,m)&&(s.flags|=32),ey(n,s),Zt(n,s,_,a),s.child;case 6:return n===null&&hd(s),null;case 13:return iy(n,s,a);case 4:return wd(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Lo(s,null,h,a):Zt(n,s,h,a),s.child;case 11:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Xg(n,s,h,d,a);case 7:return Zt(n,s,s.pendingProps,a),s.child;case 8:return Zt(n,s,s.pendingProps.children,a),s.child;case 12:return Zt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,d=s.pendingProps,m=s.memoizedProps,_=d.value,Ze(ju,h._currentValue),h._currentValue=_,m!==null)if(jn(m.value,_)){if(m.children===d.children&&!nn.current){s=Hr(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var P=m.dependencies;if(P!==null){_=m.child;for(var D=P.firstContext;D!==null;){if(D.context===h){if(m.tag===1){D=$r(-1,a&-a),D.tag=2;var z=m.updateQueue;if(z!==null){z=z.shared;var ee=z.pending;ee===null?D.next=D:(D.next=ee.next,ee.next=D),z.pending=D}}m.lanes|=a,D=m.alternate,D!==null&&(D.lanes|=a),gd(m.return,a,s),P.lanes|=a;break}D=D.next}}else if(m.tag===10)_=m.type===s.type?null:m.child;else if(m.tag===18){if(_=m.return,_===null)throw Error(t(341));_.lanes|=a,P=_.alternate,P!==null&&(P.lanes|=a),gd(_,a,s),_=m.sibling}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===s){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}Zt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,h=s.pendingProps.children,jo(s,a),d=An(d),h=h(d),s.flags|=1,Zt(n,s,h,a),s.child;case 14:return h=s.type,d=zn(h,s.pendingProps),d=zn(h.type,d),Yg(n,s,h,d,a);case 15:return Jg(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Yu(n,s),s.tag=1,rn(h)?(n=!0,Du(s)):n=!1,jo(s,a),$g(s,h,d),Nd(s,h,d,a),Vd(null,s,h,!0,n,a);case 19:return oy(n,s,a);case 22:return Zg(n,s,a)}throw Error(t(156,s.tag))};function by(n,s){return Da(n,s)}function QE(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,s,a,h){return new QE(n,s,a,h)}function nf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function XE(n){if(typeof n=="function")return nf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===He)return 14}return 2}function Ni(n,s){var a=n.alternate;return a===null?(a=Rn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function lc(n,s,a,h,d,m){var _=2;if(h=n,typeof n=="function")nf(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case k:return Vs(a.children,d,m,s);case I:_=8,d|=8;break;case A:return n=Rn(12,a,s,d|2),n.elementType=A,n.lanes=m,n;case C:return n=Rn(13,a,s,d),n.elementType=C,n.lanes=m,n;case Ae:return n=Rn(19,a,s,d),n.elementType=Ae,n.lanes=m,n;case Ve:return uc(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:_=10;break e;case N:_=9;break e;case M:_=11;break e;case He:_=14;break e;case Be:_=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Rn(_,a,s,d),s.elementType=n,s.type=h,s.lanes=m,s}function Vs(n,s,a,h){return n=Rn(7,n,h,s),n.lanes=a,n}function uc(n,s,a,h){return n=Rn(22,n,h,s),n.elementType=Ve,n.lanes=a,n.stateNode={isHidden:!1},n}function rf(n,s,a){return n=Rn(6,n,null,s),n.lanes=a,n}function sf(n,s,a){return s=Rn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function YE(n,s,a,h,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fa(0),this.expirationTimes=Fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fa(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function of(n,s,a,h,d,m,_,P,D){return n=new YE(n,s,a,P,D),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Rn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},vd(m),n}function JE(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function Ry(n){if(!n)return Ii;n=n._reactInternals;e:{if(Ln(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(rn(a))return sg(n,a,s)}return s}function Ny(n,s,a,h,d,m,_,P,D){return n=of(a,h,!0,n,d,m,_,P,D),n.context=Ry(null),a=n.current,h=en(),d=bi(a),m=$r(h,d),m.callback=s??null,ki(a,m,d),n.current.lanes=d,_s(n,d,h),an(n,h),n}function cc(n,s,a,h){var d=s.current,m=en(),_=bi(d);return a=Ry(a),s.context===null?s.context=a:s.pendingContext=a,s=$r(m,_),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=ki(d,s,_),n!==null&&(Hn(n,d,_,m),zu(n,d,_)),_}function hc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function af(n,s){Dy(n,s),(n=n.alternate)&&Dy(n,s)}function ZE(){return null}var Oy=typeof reportError=="function"?reportError:function(n){console.error(n)};function lf(n){this._internalRoot=n}dc.prototype.render=lf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));cc(n,s,null,null)},dc.prototype.unmount=lf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ds(function(){cc(null,n,null,null)}),s[Fr]=null}};function dc(n){this._internalRoot=n}dc.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ba();n={blockedOn:null,target:n,priority:s};for(var a=0;a<pn.length&&s!==0&&s<pn[a].priority;a++);pn.splice(a,0,n),a===0&&yo(n)}};function uf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function My(){}function eT(n,s,a,h,d){if(d){if(typeof h=="function"){var m=h;h=function(){var z=hc(_);m.call(z)}}var _=Ny(s,h,n,0,null,!1,!1,"",My);return n._reactRootContainer=_,n[Fr]=_.current,el(n.nodeType===8?n.parentNode:n),Ds(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof h=="function"){var P=h;h=function(){var z=hc(D);P.call(z)}}var D=of(n,0,!1,null,null,!1,!1,"",My);return n._reactRootContainer=D,n[Fr]=D.current,el(n.nodeType===8?n.parentNode:n),Ds(function(){cc(s,D,a,h)}),D}function pc(n,s,a,h,d){var m=a._reactRootContainer;if(m){var _=m;if(typeof d=="function"){var P=d;d=function(){var D=hc(_);P.call(D)}}cc(s,_,n,d)}else _=eT(a,s,n,d,h);return hc(_)}Ua=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ke(s.pendingLanes);a!==0&&(ja(s,a|1),an(s,et()),(Ge&6)===0&&(Ho=et()+500,Si()))}break;case 13:Ds(function(){var h=Br(n,1);if(h!==null){var d=en();Hn(h,n,1,d)}}),af(n,1)}},mo=function(n){if(n.tag===13){var s=Br(n,134217728);if(s!==null){var a=en();Hn(s,n,134217728,a)}af(n,134217728)}},za=function(n){if(n.tag===13){var s=bi(n),a=Br(n,s);if(a!==null){var h=en();Hn(a,n,s,h)}af(n,s)}},Ba=function(){return ze},$a=function(n,s){var a=ze;try{return ze=n,s()}finally{ze=a}},Ar=function(n,s,a){switch(s){case"input":if(cs(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var d=Ru(h);if(!d)throw Error(t(90));Jn(h),cs(h,d)}}}break;case"textarea":nu(n,a);break;case"select":s=a.value,s!=null&&Mn(n,!!a.multiple,s,!1)}},su=Zd,ou=Ds;var tT={usingClientEntryPoint:!1,Events:[rl,Ro,Ru,ci,hi,Zd]},yl={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nT={bundleType:yl.bundleType,version:yl.version,rendererPackageName:yl.rendererPackageName,rendererConfig:yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fu(n),n===null?null:n.stateNode},findFiberByHostInstance:yl.findFiberByHostInstance||ZE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{gs=mc.inject(nT),dn=mc}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tT,ln.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uf(s))throw Error(t(200));return JE(n,s,null,a)},ln.createRoot=function(n,s){if(!uf(n))throw Error(t(299));var a=!1,h="",d=Oy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=of(n,1,!1,null,null,a,!1,h,d),n[Fr]=s.current,el(n.nodeType===8?n.parentNode:n),new lf(s)},ln.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=fu(s),n=n===null?null:n.stateNode,n},ln.flushSync=function(n){return Ds(n)},ln.hydrate=function(n,s,a){if(!fc(s))throw Error(t(200));return pc(null,n,s,!0,a)},ln.hydrateRoot=function(n,s,a){if(!uf(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,m="",_=Oy;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),s=Ny(s,null,n,1,a??null,d,!1,m,_),n[Fr]=s.current,el(n),h)for(n=0;n<h.length;n++)a=h[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new dc(s)},ln.render=function(n,s,a){if(!fc(s))throw Error(t(200));return pc(null,n,s,!1,a)},ln.unmountComponentAtNode=function(n){if(!fc(n))throw Error(t(40));return n._reactRootContainer?(Ds(function(){pc(null,null,n,!1,function(){n._reactRootContainer=null,n[Fr]=null})}),!0):!1},ln.unstable_batchedUpdates=Zd,ln.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!fc(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return pc(n,s,a,!1,h)},ln.version="18.3.1-next-f1338f8080-20240426",ln}var $y;function W0(){if($y)return df.exports;$y=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),df.exports=uT(),df.exports}var Hy;function cT(){if(Hy)return gc;Hy=1;var r=W0();return gc.createRoot=r.createRoot,gc.hydrateRoot=r.hydrateRoot,gc}var hT=cT(),Y=Tp();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Gy=r=>{const e=fT(r);return e.charAt(0).toUpperCase()+e.slice(1)},q0=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=Y.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c,...f},p)=>Y.createElement("svg",{ref:p,...pT,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:q0("lucide",o),...f},[...c.map(([y,w])=>Y.createElement(y,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(r,e)=>{const t=Y.forwardRef(({className:i,...o},l)=>Y.createElement(mT,{ref:l,iconNode:e,className:q0(`lucide-${dT(Gy(r))}`,`lucide-${r}`,i),...o}));return t.displayName=Gy(r),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],K0=Ye("aperture",gT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ip=Ye("arrow-left",yT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Vf=Ye("arrow-right-left",vT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Q0=Ye("calendar",wT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],X0=Ye("camera",_T);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],TT=Ye("check",ET);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Lf=Ye("chevron-left",IT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ff=Ye("chevron-right",ST);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Y0=Ye("clock",xT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wy=Ye("eye",kT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],AT=Ye("file-image",CT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["path",{d:"M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v3.3",key:"1k8050"}],["path",{d:"m21.7 19.4-.9-.3",key:"1qgwi9"}],["path",{d:"m15.2 16.9-.9-.3",key:"1t7mvx"}],["path",{d:"m16.6 21.7.3-.9",key:"1j67ps"}],["path",{d:"m19.1 15.2.3-.9",key:"18r7jp"}],["path",{d:"m19.6 21.7-.4-1",key:"z2vh2"}],["path",{d:"m16.8 15.3-.4-1",key:"1ei7r6"}],["path",{d:"m14.3 19.6 1-.4",key:"11sv9r"}],["path",{d:"m20.7 16.8 1-.4",key:"19m87a"}]],bT=Ye("folder-cog",PT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],qy=Ye("folder-open",RT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],DT=Ye("folder-plus",NT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],MT=Ye("folder",OT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],LT=Ye("image",VT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jT=Ye("info",FT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hi=Ye("loader-circle",UT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],jc=Ye("map-pin",zT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],$T=Ye("menu",BT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],GT=Ye("pen",HT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Uc=Ye("plus",WT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],J0=Ye("save",qT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Z0=Ye("search",KT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ky=Ye("square-pen",QT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ew=Ye("trash-2",XT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],JT=Ye("upload",YT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fa=Ye("x",ZT),eI=()=>{};var Qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},tI=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],c=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},nw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],c=o+1<r.length,f=c?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,w=l>>2,T=(l&3)<<4|f>>4;let x=(f&15)<<2|y>>6,V=y&63;p||(V=64,c||(x=64)),i.push(t[w],t[T],t[x],t[V])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(tw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):tI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new nI;const x=l<<2|f>>4;if(i.push(x),y!==64){const V=f<<4&240|y>>2;if(i.push(V),T!==64){const H=y<<6&192|T;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class nI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rI=function(r){const e=tw(r);return nw.encodeByteArray(e,!0)},zc=function(r){return rI(r).replace(/\./g,"")},rw=function(r){try{return nw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=()=>iI().__FIREBASE_DEFAULTS__,oI=()=>{if(typeof process>"u"||typeof Qy>"u")return;const r=Qy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},aI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&rw(r[1]);return e&&JSON.parse(e)},fh=()=>{try{return eI()||sI()||oI()||aI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iw=r=>{var e,t;return(t=(e=fh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},lI=r=>{const e=iw(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},sw=()=>{var r;return(r=fh())==null?void 0:r.config},ow=r=>{var e;return(e=fh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aw(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[zc(JSON.stringify(t)),zc(JSON.stringify(c)),""].join(".")}const kl={};function hI(){const r={prod:[],emulator:[]};for(const e of Object.keys(kl))kl[e]?r.emulator.push(e):r.prod.push(e);return r}function dI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Xy=!1;function lw(r,e){if(typeof window>"u"||typeof document>"u"||!pa(window.location.host)||kl[r]===e||kl[r]||Xy)return;kl[r]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",l=hI().prod.length>0;function c(){const x=document.getElementById(i);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,V){x.setAttribute("width","24"),x.setAttribute("id",V),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Xy=!0,c()},x}function w(x,V){x.setAttribute("id",V),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=dI(i),V=t("text"),H=document.getElementById(V)||document.createElement("span"),W=t("learnmore"),G=document.getElementById(W)||document.createElement("a"),ae=t("preprendIcon"),le=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const U=x.element;f(U),w(G,W);const q=y();p(le,ae),U.append(le,H,G,q),document.body.appendChild(U)}l?(H.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function pI(){var e;const r=(e=fh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function yI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vI(){const r=Yt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wI(){return!pI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _I(){try{return typeof indexedDB=="object"}catch{return!1}}function EI(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="FirebaseError";class ni extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=TI,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?II(l,i):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new ni(o,f,i)}}function II(r,e){return r.replace(SI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const SI=/\{\$([^}]+)}/g;function xI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ji(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],c=e[o];if(Yy(l)&&Yy(c)){if(!Ji(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Yy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function kI(r,e){const t=new CI(r,e);return t.subscribe.bind(t)}class CI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");AI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=mf),o.error===void 0&&(o.error=mf),o.complete===void 0&&(o.complete=mf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function mf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(r){return r&&r._delegate?r._delegate:r}class qs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new uI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RI(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bI(r){return r===Fs?void 0:r}function RI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Fe||(Fe={}));const DI={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},OI=Fe.INFO,MI={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},VI=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=MI[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=OI,this._logHandler=VI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const LI=(r,e)=>e.some(t=>r instanceof t);let Jy,Zy;function FI(){return Jy||(Jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jI(){return Zy||(Zy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uw=new WeakMap,jf=new WeakMap,cw=new WeakMap,gf=new WeakMap,xp=new WeakMap;function UI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Gi(r.result)),o()},c=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&uw.set(t,r)}).catch(()=>{}),xp.set(e,r),e}function zI(r){if(jf.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});jf.set(r,e)}let Uf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return jf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||cw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function BI(r){Uf=r(Uf)}function $I(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(yf(this),e,...t);return cw.set(i,e.sort?e.sort():[e]),Gi(i)}:jI().includes(r)?function(...e){return r.apply(yf(this),e),Gi(uw.get(this))}:function(...e){return Gi(r.apply(yf(this),e))}}function HI(r){return typeof r=="function"?$I(r):(r instanceof IDBTransaction&&zI(r),LI(r,FI())?new Proxy(r,Uf):r)}function Gi(r){if(r instanceof IDBRequest)return UI(r);if(gf.has(r))return gf.get(r);const e=HI(r);return e!==r&&(gf.set(r,e),xp.set(e,r)),e}const yf=r=>xp.get(r);function GI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(r,e),f=Gi(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Gi(c.result),p.oldVersion,p.newVersion,Gi(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const WI=["get","getKey","getAll","getAllKeys","count"],qI=["put","add","delete","clear"],vf=new Map;function ev(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(vf.get(e))return vf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=qI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||WI.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return vf.set(e,l),l}BI(r=>({...r,get:(e,t,i)=>ev(e,t)||r.get(e,t,i),has:(e,t)=>!!ev(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function QI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zf="@firebase/app",tv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Sp("@firebase/app"),XI="@firebase/app-compat",YI="@firebase/analytics-compat",JI="@firebase/analytics",ZI="@firebase/app-check-compat",eS="@firebase/app-check",tS="@firebase/auth",nS="@firebase/auth-compat",rS="@firebase/database",iS="@firebase/data-connect",sS="@firebase/database-compat",oS="@firebase/functions",aS="@firebase/functions-compat",lS="@firebase/installations",uS="@firebase/installations-compat",cS="@firebase/messaging",hS="@firebase/messaging-compat",dS="@firebase/performance",fS="@firebase/performance-compat",pS="@firebase/remote-config",mS="@firebase/remote-config-compat",gS="@firebase/storage",yS="@firebase/storage-compat",vS="@firebase/firestore",wS="@firebase/ai",_S="@firebase/firestore-compat",ES="firebase",TS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="[DEFAULT]",IS={[zf]:"fire-core",[XI]:"fire-core-compat",[JI]:"fire-analytics",[YI]:"fire-analytics-compat",[eS]:"fire-app-check",[ZI]:"fire-app-check-compat",[tS]:"fire-auth",[nS]:"fire-auth-compat",[rS]:"fire-rtdb",[iS]:"fire-data-connect",[sS]:"fire-rtdb-compat",[oS]:"fire-fn",[aS]:"fire-fn-compat",[lS]:"fire-iid",[uS]:"fire-iid-compat",[cS]:"fire-fcm",[hS]:"fire-fcm-compat",[dS]:"fire-perf",[fS]:"fire-perf-compat",[pS]:"fire-rc",[mS]:"fire-rc-compat",[gS]:"fire-gcs",[yS]:"fire-gcs-compat",[vS]:"fire-fst",[_S]:"fire-fst-compat",[wS]:"fire-vertex","fire-js":"fire-js",[ES]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Map,SS=new Map,$f=new Map;function nv(r,e){try{r.container.addComponent(e)}catch(t){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ra(r){const e=r.name;if($f.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;$f.set(e,r);for(const t of Bc.values())nv(t,r);for(const t of SS.values())nv(t,r);return!0}function kp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Gn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new $l("app","Firebase",xS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=TS;function hw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Bf,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Wi.create("bad-app-name",{appName:String(o)});if(t||(t=sw()),!t)throw Wi.create("no-options");const l=Bc.get(o);if(l){if(Ji(t,l.options)&&Ji(i,l.config))return l;throw Wi.create("duplicate-app",{appName:o})}const c=new NI(o);for(const p of $f.values())c.addComponent(p);const f=new kS(t,i,c);return Bc.set(o,f),f}function dw(r=Bf){const e=Bc.get(r);if(!e&&r===Bf&&sw())return hw();if(!e)throw Wi.create("no-app",{appName:r});return e}function qi(r,e,t){let i=IS[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(c.join(" "));return}ra(new qs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebase-heartbeat-database",AS=1,Ol="firebase-heartbeat-store";let wf=null;function fw(){return wf||(wf=GI(CS,AS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ol)}catch(t){console.warn(t)}}}}).catch(r=>{throw Wi.create("idb-open",{originalErrorMessage:r.message})})),wf}async function PS(r){try{const t=(await fw()).transaction(Ol),i=await t.objectStore(Ol).get(pw(r));return await t.done,i}catch(e){if(e instanceof ni)Yr.warn(e.message);else{const t=Wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(t.message)}}}async function rv(r,e){try{const i=(await fw()).transaction(Ol,"readwrite");await i.objectStore(Ol).put(e,pw(r)),await i.done}catch(t){if(t instanceof ni)Yr.warn(t.message);else{const i=Wi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Yr.warn(i.message)}}}function pw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=1024,RS=30;class NS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=iv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>RS){const c=MS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Yr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=iv(),{heartbeatsToSend:i,unsentEntries:o}=DS(this._heartbeatsCache.heartbeats),l=zc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Yr.warn(t),""}}}function iv(){return new Date().toISOString().substring(0,10)}function DS(r,e=bS){const t=[];let i=r.slice();for(const o of r){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),sv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),sv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class OS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _I()?EI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sv(r){return zc(JSON.stringify({version:2,heartbeats:r})).length}function MS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(r){ra(new qs("platform-logger",e=>new KI(e),"PRIVATE")),ra(new qs("heartbeat",e=>new NS(e),"PRIVATE")),qi(zf,tv,r),qi(zf,tv,"esm2020"),qi("fire-js","")}VS("");var LS="firebase",FS="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(LS,FS,"app");var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ki,mw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function A(){}A.prototype=I.prototype,k.F=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.D=function(R,N,M){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return I.prototype[N].apply(R,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,A){A||(A=0);const R=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)R[N]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(N=0;N<16;++N)R[N]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],N=k.g[2];let M=k.g[3],C;C=I+(M^A&(N^M))+R[0]+3614090360&4294967295,I=A+(C<<7&4294967295|C>>>25),C=M+(N^I&(A^N))+R[1]+3905402710&4294967295,M=I+(C<<12&4294967295|C>>>20),C=N+(A^M&(I^A))+R[2]+606105819&4294967295,N=M+(C<<17&4294967295|C>>>15),C=A+(I^N&(M^I))+R[3]+3250441966&4294967295,A=N+(C<<22&4294967295|C>>>10),C=I+(M^A&(N^M))+R[4]+4118548399&4294967295,I=A+(C<<7&4294967295|C>>>25),C=M+(N^I&(A^N))+R[5]+1200080426&4294967295,M=I+(C<<12&4294967295|C>>>20),C=N+(A^M&(I^A))+R[6]+2821735955&4294967295,N=M+(C<<17&4294967295|C>>>15),C=A+(I^N&(M^I))+R[7]+4249261313&4294967295,A=N+(C<<22&4294967295|C>>>10),C=I+(M^A&(N^M))+R[8]+1770035416&4294967295,I=A+(C<<7&4294967295|C>>>25),C=M+(N^I&(A^N))+R[9]+2336552879&4294967295,M=I+(C<<12&4294967295|C>>>20),C=N+(A^M&(I^A))+R[10]+4294925233&4294967295,N=M+(C<<17&4294967295|C>>>15),C=A+(I^N&(M^I))+R[11]+2304563134&4294967295,A=N+(C<<22&4294967295|C>>>10),C=I+(M^A&(N^M))+R[12]+1804603682&4294967295,I=A+(C<<7&4294967295|C>>>25),C=M+(N^I&(A^N))+R[13]+4254626195&4294967295,M=I+(C<<12&4294967295|C>>>20),C=N+(A^M&(I^A))+R[14]+2792965006&4294967295,N=M+(C<<17&4294967295|C>>>15),C=A+(I^N&(M^I))+R[15]+1236535329&4294967295,A=N+(C<<22&4294967295|C>>>10),C=I+(N^M&(A^N))+R[1]+4129170786&4294967295,I=A+(C<<5&4294967295|C>>>27),C=M+(A^N&(I^A))+R[6]+3225465664&4294967295,M=I+(C<<9&4294967295|C>>>23),C=N+(I^A&(M^I))+R[11]+643717713&4294967295,N=M+(C<<14&4294967295|C>>>18),C=A+(M^I&(N^M))+R[0]+3921069994&4294967295,A=N+(C<<20&4294967295|C>>>12),C=I+(N^M&(A^N))+R[5]+3593408605&4294967295,I=A+(C<<5&4294967295|C>>>27),C=M+(A^N&(I^A))+R[10]+38016083&4294967295,M=I+(C<<9&4294967295|C>>>23),C=N+(I^A&(M^I))+R[15]+3634488961&4294967295,N=M+(C<<14&4294967295|C>>>18),C=A+(M^I&(N^M))+R[4]+3889429448&4294967295,A=N+(C<<20&4294967295|C>>>12),C=I+(N^M&(A^N))+R[9]+568446438&4294967295,I=A+(C<<5&4294967295|C>>>27),C=M+(A^N&(I^A))+R[14]+3275163606&4294967295,M=I+(C<<9&4294967295|C>>>23),C=N+(I^A&(M^I))+R[3]+4107603335&4294967295,N=M+(C<<14&4294967295|C>>>18),C=A+(M^I&(N^M))+R[8]+1163531501&4294967295,A=N+(C<<20&4294967295|C>>>12),C=I+(N^M&(A^N))+R[13]+2850285829&4294967295,I=A+(C<<5&4294967295|C>>>27),C=M+(A^N&(I^A))+R[2]+4243563512&4294967295,M=I+(C<<9&4294967295|C>>>23),C=N+(I^A&(M^I))+R[7]+1735328473&4294967295,N=M+(C<<14&4294967295|C>>>18),C=A+(M^I&(N^M))+R[12]+2368359562&4294967295,A=N+(C<<20&4294967295|C>>>12),C=I+(A^N^M)+R[5]+4294588738&4294967295,I=A+(C<<4&4294967295|C>>>28),C=M+(I^A^N)+R[8]+2272392833&4294967295,M=I+(C<<11&4294967295|C>>>21),C=N+(M^I^A)+R[11]+1839030562&4294967295,N=M+(C<<16&4294967295|C>>>16),C=A+(N^M^I)+R[14]+4259657740&4294967295,A=N+(C<<23&4294967295|C>>>9),C=I+(A^N^M)+R[1]+2763975236&4294967295,I=A+(C<<4&4294967295|C>>>28),C=M+(I^A^N)+R[4]+1272893353&4294967295,M=I+(C<<11&4294967295|C>>>21),C=N+(M^I^A)+R[7]+4139469664&4294967295,N=M+(C<<16&4294967295|C>>>16),C=A+(N^M^I)+R[10]+3200236656&4294967295,A=N+(C<<23&4294967295|C>>>9),C=I+(A^N^M)+R[13]+681279174&4294967295,I=A+(C<<4&4294967295|C>>>28),C=M+(I^A^N)+R[0]+3936430074&4294967295,M=I+(C<<11&4294967295|C>>>21),C=N+(M^I^A)+R[3]+3572445317&4294967295,N=M+(C<<16&4294967295|C>>>16),C=A+(N^M^I)+R[6]+76029189&4294967295,A=N+(C<<23&4294967295|C>>>9),C=I+(A^N^M)+R[9]+3654602809&4294967295,I=A+(C<<4&4294967295|C>>>28),C=M+(I^A^N)+R[12]+3873151461&4294967295,M=I+(C<<11&4294967295|C>>>21),C=N+(M^I^A)+R[15]+530742520&4294967295,N=M+(C<<16&4294967295|C>>>16),C=A+(N^M^I)+R[2]+3299628645&4294967295,A=N+(C<<23&4294967295|C>>>9),C=I+(N^(A|~M))+R[0]+4096336452&4294967295,I=A+(C<<6&4294967295|C>>>26),C=M+(A^(I|~N))+R[7]+1126891415&4294967295,M=I+(C<<10&4294967295|C>>>22),C=N+(I^(M|~A))+R[14]+2878612391&4294967295,N=M+(C<<15&4294967295|C>>>17),C=A+(M^(N|~I))+R[5]+4237533241&4294967295,A=N+(C<<21&4294967295|C>>>11),C=I+(N^(A|~M))+R[12]+1700485571&4294967295,I=A+(C<<6&4294967295|C>>>26),C=M+(A^(I|~N))+R[3]+2399980690&4294967295,M=I+(C<<10&4294967295|C>>>22),C=N+(I^(M|~A))+R[10]+4293915773&4294967295,N=M+(C<<15&4294967295|C>>>17),C=A+(M^(N|~I))+R[1]+2240044497&4294967295,A=N+(C<<21&4294967295|C>>>11),C=I+(N^(A|~M))+R[8]+1873313359&4294967295,I=A+(C<<6&4294967295|C>>>26),C=M+(A^(I|~N))+R[15]+4264355552&4294967295,M=I+(C<<10&4294967295|C>>>22),C=N+(I^(M|~A))+R[6]+2734768916&4294967295,N=M+(C<<15&4294967295|C>>>17),C=A+(M^(N|~I))+R[13]+1309151649&4294967295,A=N+(C<<21&4294967295|C>>>11),C=I+(N^(A|~M))+R[4]+4149444226&4294967295,I=A+(C<<6&4294967295|C>>>26),C=M+(A^(I|~N))+R[11]+3174756917&4294967295,M=I+(C<<10&4294967295|C>>>22),C=N+(I^(M|~A))+R[2]+718787259&4294967295,N=M+(C<<15&4294967295|C>>>17),C=A+(M^(N|~I))+R[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+M&4294967295}i.prototype.v=function(k,I){I===void 0&&(I=k.length);const A=I-this.blockSize,R=this.C;let N=this.h,M=0;for(;M<I;){if(N==0)for(;M<=A;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<I;)if(R[N++]=k.charCodeAt(M++),N==this.blockSize){o(this,R),N=0;break}}else for(;M<I;)if(R[N++]=k[M++],N==this.blockSize){o(this,R),N=0;break}}this.h=N,this.o+=I},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;I=this.o*8;for(var A=k.length-8;A<k.length;++A)k[A]=I&255,I/=256;for(this.v(k),k=Array(16),I=0,A=0;A<4;++A)for(let R=0;R<32;R+=8)k[I++]=this.g[A]>>>R&255;return k};function l(k,I){var A=f;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function c(k,I){this.h=I;const A=[];let R=!0;for(let N=k.length-1;N>=0;N--){const M=k[N]|0;R&&M==I||(A[N]=M,R=!1)}this.g=A}var f={};function p(k){return-128<=k&&k<128?l(k,function(I){return new c([I|0],I<0?-1:0)}):new c([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return T;if(k<0)return G(y(-k));const I=[];let A=1;for(let R=0;k>=A;R++)I[R]=k/A|0,A*=4294967296;return new c(I,0)}function w(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return G(w(k.substring(1),I));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(I,8));let R=T;for(let M=0;M<k.length;M+=8){var N=Math.min(8,k.length-M);const C=parseInt(k.substring(M,M+N),I);N<8?(N=y(Math.pow(I,N)),R=R.j(N).add(y(C))):(R=R.j(A),R=R.add(y(C)))}return R}var T=p(0),x=p(1),V=p(16777216);r=c.prototype,r.m=function(){if(W(this))return-G(this).m();let k=0,I=1;for(let A=0;A<this.g.length;A++){const R=this.i(A);k+=(R>=0?R:4294967296+R)*I,I*=4294967296}return k},r.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(H(this))return"0";if(W(this))return"-"+G(this).toString(k);const I=y(Math.pow(k,6));var A=this;let R="";for(;;){const N=q(A,I).g;A=ae(A,N.j(I));let M=((A.g.length>0?A.g[0]:A.h)>>>0).toString(k);if(A=N,H(A))return M+R;for(;M.length<6;)M="0"+M;R=M+R}},r.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function H(k){if(k.h!=0)return!1;for(let I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function W(k){return k.h==-1}r.l=function(k){return k=ae(this,k),W(k)?-1:H(k)?0:1};function G(k){const I=k.g.length,A=[];for(let R=0;R<I;R++)A[R]=~k.g[R];return new c(A,~k.h).add(x)}r.abs=function(){return W(this)?G(this):this},r.add=function(k){const I=Math.max(this.g.length,k.g.length),A=[];let R=0;for(let N=0;N<=I;N++){let M=R+(this.i(N)&65535)+(k.i(N)&65535),C=(M>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);R=C>>>16,M&=65535,C&=65535,A[N]=C<<16|M}return new c(A,A[A.length-1]&-2147483648?-1:0)};function ae(k,I){return k.add(G(I))}r.j=function(k){if(H(this)||H(k))return T;if(W(this))return W(k)?G(this).j(G(k)):G(G(this).j(k));if(W(k))return G(this.j(G(k)));if(this.l(V)<0&&k.l(V)<0)return y(this.m()*k.m());const I=this.g.length+k.g.length,A=[];for(var R=0;R<2*I;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(let N=0;N<k.g.length;N++){const M=this.i(R)>>>16,C=this.i(R)&65535,Ae=k.i(N)>>>16,He=k.i(N)&65535;A[2*R+2*N]+=C*He,le(A,2*R+2*N),A[2*R+2*N+1]+=M*He,le(A,2*R+2*N+1),A[2*R+2*N+1]+=C*Ae,le(A,2*R+2*N+1),A[2*R+2*N+2]+=M*Ae,le(A,2*R+2*N+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new c(A,0)};function le(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function U(k,I){this.g=k,this.h=I}function q(k,I){if(H(I))throw Error("division by zero");if(H(k))return new U(T,T);if(W(k))return I=q(G(k),I),new U(G(I.g),G(I.h));if(W(I))return I=q(k,G(I)),new U(G(I.g),I.h);if(k.g.length>30){if(W(k)||W(I))throw Error("slowDivide_ only works with positive integers.");for(var A=x,R=I;R.l(k)<=0;)A=ne(A),R=ne(R);var N=Q(A,1),M=Q(R,1);for(R=Q(R,2),A=Q(A,2);!H(R);){var C=M.add(R);C.l(k)<=0&&(N=N.add(A),M=C),R=Q(R,1),A=Q(A,1)}return I=ae(k,N.j(I)),new U(N,I)}for(N=T;k.l(I)>=0;){for(A=Math.max(1,Math.floor(k.m()/I.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),M=y(A),C=M.j(I);W(C)||C.l(k)>0;)A-=R,M=y(A),C=M.j(I);H(M)&&(M=x),N=N.add(M),k=ae(k,C)}return new U(N,k)}r.B=function(k){return q(this,k).h},r.and=function(k){const I=Math.max(this.g.length,k.g.length),A=[];for(let R=0;R<I;R++)A[R]=this.i(R)&k.i(R);return new c(A,this.h&k.h)},r.or=function(k){const I=Math.max(this.g.length,k.g.length),A=[];for(let R=0;R<I;R++)A[R]=this.i(R)|k.i(R);return new c(A,this.h|k.h)},r.xor=function(k){const I=Math.max(this.g.length,k.g.length),A=[];for(let R=0;R<I;R++)A[R]=this.i(R)^k.i(R);return new c(A,this.h^k.h)};function ne(k){const I=k.g.length+1,A=[];for(let R=0;R<I;R++)A[R]=k.i(R)<<1|k.i(R-1)>>>31;return new c(A,k.h)}function Q(k,I){const A=I>>5;I%=32;const R=k.g.length-A,N=[];for(let M=0;M<R;M++)N[M]=I>0?k.i(M+A)>>>I|k.i(M+A+1)<<32-I:k.i(M+A);return new c(N,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,mw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=w,Ki=c}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gw,Tl,yw,Ac,Hf,vw,ww,_w;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var F=u[S];if(!(F in v))break e;v=v[F]}u=u[u.length-1],S=v[u],g=g(S),g!=S&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var v=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&v.push([S,g[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,v){return u.call.apply(u.bind,arguments)}function y(u,g,v){return y=p,y.apply(null,arguments)}function w(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function T(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(S,F,$){for(var oe=Array(arguments.length-2),be=2;be<arguments.length;be++)oe[be-2]=arguments[be];return g.prototype[F].apply(S,oe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function V(u){const g=u.length;if(g>0){const v=Array(g);for(let S=0;S<g;S++)v[S]=u[S];return v}return[]}function H(u,g){for(let S=1;S<arguments.length;S++){const F=arguments[S];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=u.length||0;const $=F.length||0;u.length=v+$;for(let oe=0;oe<$;oe++)u[v+oe]=F[oe]}else u.push(F)}}class W{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(u){c.setTimeout(()=>{throw u},0)}function ae(){var u=k;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class le{constructor(){this.h=this.g=null}add(g,v){const S=U.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var U=new W(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Q=!1,k=new le,I=()=>{const u=Promise.resolve(void 0);ne=()=>{u.then(A)}};function A(){for(var u;u=ae();){try{u.h.call(u.g)}catch(v){G(v)}var g=U;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Q=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};c.addEventListener("test",v,g),c.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Ae(u,g){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(Ae,N),Ae.prototype.init=function(u,g){const v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),Be=0;function Ve(u,g,v,S,F){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=F,this.key=++Be,this.da=this.fa=!1}function B(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function se(u,g,v){for(const S in u)g.call(v,u[S],S,u)}function ie(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function b(u){const g={};for(const v in u)g[v]=u[v];return g}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(u,g){let v,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(v in S)u[v]=S[v];for(let $=0;$<K.length;$++)v=K[$],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,g,v,S,F){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const oe=De(u,g,S,F);return oe>-1?(g=u[oe],v||(g.fa=!1)):(g=new Ve(g,this.src,$,!!S,F),g.fa=v,u.push(g)),g};function Ne(u,g){const v=g.type;if(v in u.g){var S=u.g[v],F=Array.prototype.indexOf.call(S,g,void 0),$;($=F>=0)&&Array.prototype.splice.call(S,F,1),$&&(B(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function De(u,g,v,S){for(let F=0;F<u.length;++F){const $=u[F];if(!$.da&&$.listener==g&&$.capture==!!v&&$.ha==S)return F}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),Le={};function We(u,g,v,S,F){if(Array.isArray(g)){for(let $=0;$<g.length;$++)We(u,g[$],v,S,F);return null}return v=xa(v),u&&u[He]?u.J(g,v,f(S)?!!S.capture:!1,F):yt(u,g,v,!1,S,F)}function yt(u,g,v,S,F,$){if(!g)throw Error("Invalid event type");const oe=f(F)?!!F.capture:!!F;let be=so(u);if(be||(u[Ie]=be=new ye(u)),v=be.add(g,v,S,oe,$),v.proxy)return v;if(S=Yn(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)M||(F=oe),F===void 0&&(F=!1),u.addEventListener(g.toString(),S,F);else if(u.attachEvent)u.attachEvent(io(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Yn(){function u(v){return g.call(u.src,u.listener,v)}const g=tu;return u}function Jn(u,g,v,S,F){if(Array.isArray(g))for(var $=0;$<g.length;$++)Jn(u,g[$],v,S,F);else S=f(S)?!!S.capture:!!S,v=xa(v),u&&u[He]?(u=u.i,$=String(g).toString(),$ in u.g&&(g=u.g[$],v=De(g,v,S,F),v>-1&&(B(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[$],u.h--)))):u&&(u=so(u))&&(g=u.g[g.toString()],u=-1,g&&(u=De(g,v,S,F)),(v=u>-1?g[u]:null)&&ii(v))}function ii(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[He])Ne(g.i,u);else{var v=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(v,S,u.capture):g.detachEvent?g.detachEvent(io(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=so(g))?(Ne(v,u),v.h==0&&(v.src=null,g[Ie]=null)):B(u)}}}function io(u){return u in Le?Le[u]:Le[u]="on"+u}function tu(u,g){if(u.da)u=!0;else{g=new Ae(g,this);const v=u.listener,S=u.ha||u.src;u.fa&&ii(u),u=v.call(S,g)}return u}function so(u){return u=u[Ie],u instanceof ye?u:null}var cs="__closure_events_fn_"+(Math.random()*1e9>>>0);function xa(u){return typeof u=="function"?u:(u[cs]||(u[cs]=function(g){return u.handleEvent(g)}),u[cs])}function vt(){R.call(this),this.i=new ye(this),this.M=this,this.G=null}T(vt,R),vt.prototype[He]=!0,vt.prototype.removeEventListener=function(u,g,v,S){Jn(this,u,g,v,S)};function dt(u,g){var v,S=u.G;if(S)for(v=[];S;S=S.G)v.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new N(g,u);else if(g instanceof N)g.target=g.target||u;else{var F=g;g=new N(S,u),he(g,F)}F=!0;let $,oe;if(v)for(oe=v.length-1;oe>=0;oe--)$=g.g=v[oe],F=Mn($,S,!0,g)&&F;if($=g.g=u,F=Mn($,S,!0,g)&&F,F=Mn($,S,!1,g)&&F,v)for(oe=0;oe<v.length;oe++)$=g.g=v[oe],F=Mn($,S,!1,g)&&F}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let S=0;S<v.length;S++)B(v[S]);delete u.g[g],u.h--}}this.G=null},vt.prototype.J=function(u,g,v,S){return this.i.add(String(u),g,!1,v,S)},vt.prototype.K=function(u,g,v,S){return this.i.add(String(u),g,!0,v,S)};function Mn(u,g,v,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let $=0;$<g.length;++$){const oe=g[$];if(oe&&!oe.da&&oe.capture==v){const be=oe.listener,ft=oe.ha||oe.src;oe.fa&&Ne(u.i,oe),F=be.call(ft,S)!==!1&&F}}return F&&!S.defaultPrevented}function ka(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:c.setTimeout(u,g||0)}function Ca(u){u.g=ka(()=>{u.g=null,u.i&&(u.i=!1,Ca(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class nu extends R{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ca(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function si(u){R.call(this),this.h=u,this.g={}}T(si,R);var Aa=[];function oo(u){se(u.g,function(g,v){this.g.hasOwnProperty(v)&&ii(g)},u),u.g={}}si.prototype.N=function(){si.Z.N.call(this),oo(this)},si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oi=c.JSON.stringify,ru=c.JSON.parse,hs=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function ai(){}function iu(){}var li={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ao(){N.call(this,"d")}T(ao,N);function Pa(){N.call(this,"c")}T(Pa,N);var Vn={},lo=null;function ui(){return lo=lo||new vt}Vn.Ia="serverreachability";function uo(u){N.call(this,Vn.Ia,u)}T(uo,N);function Ar(u){const g=ui();dt(g,new uo(g))}Vn.STAT_EVENT="statevent";function Pr(u,g){N.call(this,Vn.STAT_EVENT,u),this.stat=g}T(Pr,N);function ut(u){const g=ui();dt(g,new Pr(g,u))}Vn.Ja="timingevent";function ba(u,g){N.call(this,Vn.Ja,u),this.size=g}T(ba,N);function ci(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},g)}function hi(){this.g=!0}hi.prototype.ua=function(){this.g=!1};function su(u,g,v,S,F,$){u.info(function(){if(u.g)if($){var oe="",be=$.split("&");for(let Xe=0;Xe<be.length;Xe++){var ft=be[Xe].split("=");if(ft.length>1){const wt=ft[0];ft=ft[1];const yn=wt.split("_");oe=yn.length>=2&&yn[1]=="type"?oe+(wt+"="+ft+"&"):oe+(wt+"=redacted&")}}}else oe=null;else oe=$;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+g+`
`+v+`
`+oe})}function ou(u,g,v,S,F,$,oe){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+g+`
`+v+`
`+$+" "+oe})}function Zn(u,g,v,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ds(u,v)+(S?" "+S:"")})}function au(u,g){u.info(function(){return"TIMEOUT: "+g})}hi.prototype.info=function(){};function ds(u,g){if(!u.g)return g;if(!g)return null;try{const $=JSON.parse(g);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var v=$[u];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let oe=1;oe<S.length;oe++)S[oe]=""}}}}return oi($)}catch{return g}}var di={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lu;function br(){}T(br,ai),br.prototype.g=function(){return new XMLHttpRequest},lu=new br;function er(u){return encodeURIComponent(String(u))}function co(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Sn(u,g,v,S){this.j=u,this.i=g,this.l=v,this.S=S||1,this.V=new si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new uu}function uu(){this.i=null,this.g="",this.h=!1}var cu={},Ra={};function Ln(u,g,v){u.M=1,u.A=Nr(xn(g)),u.u=v,u.R=!0,Na(u,null)}function Na(u,g){u.F=Date.now(),fs(u),u.B=xn(u.A);var v=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ba(v.i,"t",S),u.C=0,v=u.j.L,u.h=new uu,u.g=_u(u.j,v?g:null,!u.u),u.P>0&&(u.O=new nu(y(u.Y,u,u.g),u.P)),g=u.V,v=u.g,S=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Aa[0]=F.toString()),F=Aa);for(let $=0;$<F.length;$++){const oe=We(v,F[$],S||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=u.J?b(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ar(),su(u.i,u.v,u.B,u.l,u.S,u.u)}Sn.prototype.ba=function(u){u=u.target;const g=this.O;g&&ar(u)==3?g.j():this.Y(u)},Sn.prototype.Y=function(u){try{if(u==this.g)e:{const be=ar(this.g),ft=this.g.ya(),Xe=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||vu(this.g)))){this.K||be!=4||ft==7||(ft==8||Xe<=0?Ar(3):Ar(2)),ho(this);var g=this.g.ca();this.X=g;var v=hu(this);if(this.o=g==200,ou(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var $=S;break t}}$=null}if(u=$)Zn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,et(this,u);else{this.o=!1,this.m=3,ut(12),Rr(this),ps(this);break e}}if(this.R){u=!0;let wt;for(;!this.K&&this.C<v.length;)if(wt=fu(this,v),wt==Ra){be==4&&(this.m=4,ut(14),u=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==cu){this.m=4,ut(15),Zn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Zn(this.i,this.l,wt,null),et(this,wt);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||v.length!=0||this.h.h||(this.m=1,ut(16),u=!1),this.o=this.o&&u,!u)Zn(this.i,this.l,v,"[Invalid Chunked Response]"),Rr(this),ps(this);else if(v.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Is(oe),oe.P=!0,ut(11))}}else Zn(this.i,this.l,v,null),et(this,v);be==4&&Rr(this),this.o&&!this.K&&(be==4?To(this.j,this):(this.o=!1,fs(this)))}else Ha(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),Rr(this),ps(this)}}}catch{}finally{}};function hu(u){if(!du(u))return u.g.la();const g=vu(u.g);if(g==="")return"";let v="";const S=g.length,F=ar(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Rr(u),ps(u),"";u.h.i=new c.TextDecoder}for(let $=0;$<S;$++)u.h.h=!0,v+=u.h.i.decode(g[$],{stream:!(F&&$==S-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function du(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function fu(u,g){var v=u.C,S=g.indexOf(`
`,v);return S==-1?Ra:(v=Number(g.substring(v,S)),isNaN(v)?cu:(S+=1,S+v>g.length?Ra:(g=g.slice(S,S+v),u.C=S+v,g)))}Sn.prototype.cancel=function(){this.K=!0,Rr(this)};function fs(u){u.T=Date.now()+u.H,Da(u,u.H)}function Da(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ci(y(u.aa,u),g)}function ho(u){u.D&&(c.clearTimeout(u.D),u.D=null)}Sn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(au(this.i,this.B),this.M!=2&&(Ar(),ut(17)),Rr(this),this.m=2,ps(this)):Da(this,this.T-u)};function ps(u){u.j.I==0||u.K||To(u.j,u)}function Rr(u){ho(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,oo(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function et(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||Ma(v.h,u))){if(!u.L&&Ma(v.h,u)&&v.I==3){try{var S=v.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Eo(v),mn(v);else break e;cr(v),ut(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ci(y(v.Va,v),6e3));ms(v.h)<=1&&v.ta&&(v.ta=void 0)}else gn(v,11)}else if((u.L||v.g==u)&&Eo(v),!C(g))for(F=v.Ba.g.parse(g),g=0;g<F.length;g++){let Xe=F[g];const wt=Xe[0];if(!(wt<=v.K))if(v.K=wt,Xe=Xe[1],v.I==2)if(Xe[0]=="c"){v.M=Xe[1],v.ba=Xe[2];const yn=Xe[3];yn!=null&&(v.ka=yn,v.j.info("VER="+v.ka));const Lr=Xe[4];Lr!=null&&(v.za=Lr,v.j.info("SVER="+v.za));const hr=Xe[5];hr!=null&&typeof hr=="number"&&hr>0&&(S=1.5*hr,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const dr=u.g;if(dr){const xo=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var $=S.h;$.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(po($,$.h),$.h=null))}if(S.G){const qa=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(S.wa=qa,Ke(S.J,S.G,qa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var oe=u;if(S.na=Wa(S,S.L?S.ba:null,S.W),oe.L){gs(S.h,oe);var be=oe,ft=S.O;ft&&(be.H=ft),be.D&&(ho(be),fs(be)),S.g=oe}else $t(S);v.i.length>0&&Vr(v)}else Xe[0]!="stop"&&Xe[0]!="close"||gn(v,7);else v.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?gn(v,7):wo(v):Xe[0]!="noop"&&v.l&&v.l.qa(Xe),v.A=0)}}Ar(4)}catch{}}var Uh=class{constructor(u,g){this.g=u,this.map=g}};function fo(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ms(u){return u.h?1:u.g?u.g.size:0}function Ma(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function po(u,g){u.g?u.g.add(g):u.h=g}function gs(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}fo.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function dn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return V(u.i)}var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fn(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const S=u[v].indexOf("=");let F,$=null;S>=0?(F=u[v].substring(0,S),$=u[v].substring(S+1)):F=u[v],g(F,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function tr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof tr?(this.l=u.l,ys(this,u.j),this.o=u.o,this.g=u.g,nr(this,u.u),this.h=u.h,pi(this,$a(u.i)),this.m=u.m):u&&(g=String(u).match(pu))?(this.l=!1,ys(this,g[1]||"",!0),this.o=vs(g[2]||""),this.g=vs(g[3]||"",!0),nr(this,g[4]),this.h=vs(g[5]||"",!0),pi(this,g[6]||"",!0),this.m=vs(g[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}tr.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(ws(g,La,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ws(g,La,!0),"@"),u.push(er(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ws(v,v.charAt(0)=="/"?_s:Fa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ws(v,ja)),u.join("")},tr.prototype.resolve=function(u){const g=xn(this);let v=!!u.j;v?ys(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var S=u.h;if(v)nr(g,u.u);else if(v=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=g.h.lastIndexOf("/");F!=-1&&(S=g.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const $=[];for(let oe=0;oe<F.length;){const be=F[oe++];be=="."?S&&oe==F.length&&$.push(""):be==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),S&&oe==F.length&&$.push("")):($.push(be),S=!0)}S=$.join("/")}else S=F}return v?g.h=S:v=u.i.toString()!=="",v?pi(g,$a(u.i)):v=!!u.m,v&&(g.m=u.m),g};function xn(u){return new tr(u)}function ys(u,g,v){u.j=v?vs(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function nr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function pi(u,g,v){g instanceof ze?(u.i=g,go(u.i,u.l)):(v||(g=ws(g,zh)),u.i=new ze(g,u.l))}function Ke(u,g,v){u.i.set(g,v)}function Nr(u){return Ke(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function vs(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ws(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,Va),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Va(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var La=/[#\/\?@]/g,Fa=/[#\?:]/g,_s=/[#\?]/g,zh=/[#\?@]/g,ja=/#/g;function ze(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function rr(u){u.g||(u.g=new Map,u.h=0,u.i&&fn(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=ze.prototype,r.add=function(u,g){rr(this),this.i=null,u=ir(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Ua(u,g){rr(u),g=ir(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function mo(u,g){return rr(u),g=ir(u,g),u.g.has(g)}r.forEach=function(u,g){rr(this),this.g.forEach(function(v,S){v.forEach(function(F){u.call(g,F,S,this)},this)},this)};function za(u,g){rr(u);let v=[];if(typeof g=="string")mo(u,g)&&(v=v.concat(u.g.get(ir(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}r.set=function(u,g){return rr(this),this.i=null,u=ir(this,u),mo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=za(this,u),u.length>0?String(u[0]):g):g};function Ba(u,g,v){Ua(u,g),v.length>0&&(u.i=null,u.g.set(ir(u,g),V(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var v=g[S];const F=er(v);v=za(this,v);for(let $=0;$<v.length;$++){let oe=F;v[$]!==""&&(oe+="="+er(v[$])),u.push(oe)}}return this.i=u.join("&")};function $a(u){const g=new ze;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ir(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function go(u,g){g&&!u.j&&(rr(u),u.i=null,u.g.forEach(function(v,S){const F=S.toLowerCase();S!=F&&(Ua(this,S),Ba(this,F,v))},u)),u.j=g}function sr(u,g){const v=new hi;if(c.Image){const S=new Image;S.onload=w(Vt,v,"TestLoadImage: loaded",!0,g,S),S.onerror=w(Vt,v,"TestLoadImage: error",!1,g,S),S.onabort=w(Vt,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=w(Vt,v,"TestLoadImage: timeout",!1,g,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function or(u,g){const v=new hi,S=new AbortController,F=setTimeout(()=>{S.abort(),Vt(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then($=>{clearTimeout(F),$.ok?Vt(v,"TestPingServer: ok",!0,g):Vt(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Vt(v,"TestPingServer: error",!1,g)})}function Vt(u,g,v,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(v)}catch{}}function Es(){this.g=new hs}function Dr(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Dr,ai),Dr.prototype.g=function(){return new pn(this.i,this.h)};function pn(u,g){vt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(pn,vt),r=pn.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Fn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||c).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mi(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mu(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function mu(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?mi(this):Fn(this),this.readyState==3&&mu(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,mi(this))},r.Na=function(u){this.g&&(this.response=u,mi(this))},r.ga=function(){this.g&&mi(this)};function mi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Fn(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Fn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(pn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gu(u){let g="";return se(u,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function yo(u,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=gu(v),typeof u=="string"?v!=null&&er(v):Ke(u,g,v))}function Je(u){vt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Je,vt);var yu=/^https?$/i,Bh=["POST","PUT"];r=Je.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lu.g(),this.g.onreadystatechange=x(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch($){gi(this,$);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)v.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const $ of S.keys())v.set($,S.get($));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),F=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Bh,g,void 0)>=0)||S||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of v)this.g.setRequestHeader($,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){gi(this,$)}};function gi(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,yi(u),Mr(u)}function yi(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,dt(this,"complete"),dt(this,"abort"),Mr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),Je.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Or(this):this.Xa())},r.Xa=function(){Or(this)};function Or(u){if(u.h&&typeof l<"u"){if(u.v&&ar(u)==4)setTimeout(u.Ca.bind(u),0);else if(dt(u,"readystatechange"),ar(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=$===0){let oe=String(u.D).match(pu)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),S=!yu.test(oe?oe.toLowerCase():"")}v=S}if(v)dt(u,"complete"),dt(u,"success");else{u.o=6;try{var F=ar(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",yi(u)}}finally{Mr(u)}}}}function Mr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||dt(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ar(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ar(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ru(g)}};function vu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(u){const g={};u=(u.g&&ar(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var v=co(u[S]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=g[F]||[];g[F]=$,$.push(v)}ie(g,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lr(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function vo(u){this.za=0,this.i=[],this.j=new hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lr("baseRetryDelayMs",5e3,u),this.Za=lr("retryDelaySeedMs",1e4,u),this.Ta=lr("forwardChannelMaxRetries",2,u),this.va=lr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new fo(u&&u.concurrentRequestLimit),this.Ba=new Es,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=vo.prototype,r.ka=8,r.I=1,r.connect=function(u,g,v,S){ut(0),this.W=u,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Wa(this,null,this.W),Vr(this)};function wo(u){if(_o(u),u.I==3){var g=u.V++,v=xn(u.J);if(Ke(v,"SID",u.M),Ke(v,"RID",g),Ke(v,"TYPE","terminate"),ur(u,v),g=new Sn(u,u.j,g),g.M=2,g.A=Nr(xn(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=g.A,v=!0),v||(g.g=_u(g.j,null),g.g.ea(g.A)),g.F=Date.now(),fs(g)}Ss(u)}function mn(u){u.g&&(Is(u),u.g.cancel(),u.g=null)}function _o(u){mn(u),u.v&&(c.clearTimeout(u.v),u.v=null),Eo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Vr(u){if(!Oa(u.h)&&!u.m){u.m=!0;var g=u.Ea;ne||I(),Q||(ne(),Q=!0),k.add(g,u),u.D=0}}function wu(u,g){return ms(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ci(y(u.Ea,u,g),Io(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Sn(this,this.j,u);let $=this.o;if(this.U&&($?($=b($),he($,this.U)):$=this.U),this.u!==null||this.R||(F.J=$,$=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ga(this,F,g),v=xn(this.J),Ke(v,"RID",u),Ke(v,"CVER",22),this.G&&Ke(v,"X-HTTP-Session-Id",this.G),ur(this,v),$&&(this.R?g="headers="+er(gu($))+"&"+g:this.u&&yo(v,this.u,$)),po(this.h,F),this.Ra&&Ke(v,"TYPE","init"),this.S?(Ke(v,"$req",g),Ke(v,"SID","null"),F.U=!0,Ln(F,v,null)):Ln(F,v,g),this.I=2}}else this.I==3&&(u?Ts(this,u):this.i.length==0||Oa(this.h)||Ts(this))};function Ts(u,g){var v;g?v=g.l:v=u.V++;const S=xn(u.J);Ke(S,"SID",u.M),Ke(S,"RID",v),Ke(S,"AID",u.K),ur(u,S),u.u&&u.o&&yo(S,u.u,u.o),v=new Sn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ga(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),po(u.h,v),Ln(v,S,g)}function ur(u,g){u.H&&se(u.H,function(v,S){Ke(g,S,v)}),u.l&&se({},function(v,S){Ke(g,S,v)})}function Ga(u,g,v){v=Math.min(u.i.length,v);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let be=-1;for(;;){const ft=["count="+v];be==-1?v>0?(be=F[0].g,ft.push("ofs="+be)):be=0:ft.push("ofs="+be);let Xe=!0;for(let wt=0;wt<v;wt++){var $=F[wt].g;const yn=F[wt].map;if($-=be,$<0)be=Math.max(0,F[wt].g-100),Xe=!1;else try{$="req"+$+"_"||"";try{var oe=yn instanceof Map?yn:Object.entries(yn);for(const[Lr,hr]of oe){let dr=hr;f(hr)&&(dr=oi(hr)),ft.push($+Lr+"="+encodeURIComponent(dr))}}catch(Lr){throw ft.push($+"type="+encodeURIComponent("_badmap")),Lr}}catch{S&&S(yn)}}if(Xe){oe=ft.join("&");break e}}oe=void 0}return u=u.i.splice(0,v),g.G=u,oe}function $t(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ne||I(),Q||(ne(),Q=!0),k.add(g,u),u.A=0}}function cr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ci(y(u.Da,u),Io(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,vi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ci(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),mn(this),vi(this))};function Is(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function vi(u){u.g=new Sn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=xn(u.na);Ke(g,"RID","rpc"),Ke(g,"SID",u.M),Ke(g,"AID",u.K),Ke(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ke(g,"TO",u.ia),Ke(g,"TYPE","xmlhttp"),ur(u,g),u.u&&u.o&&yo(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Nr(xn(g)),v.u=null,v.R=!0,Na(v,u)}r.Va=function(){this.C!=null&&(this.C=null,mn(this),cr(this),ut(19))};function Eo(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function To(u,g){var v=null;if(u.g==g){Eo(u),Is(u),u.g=null;var S=2}else if(Ma(u.h,g))v=g.G,gs(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;S=ui(),dt(S,new ba(S,v)),Vr(u)}else $t(u);else if(F=g.m,F==3||F==0&&g.X>0||!(S==1&&wu(u,g)||S==2&&cr(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),F){case 1:gn(u,5);break;case 4:gn(u,10);break;case 3:gn(u,6);break;default:gn(u,2)}}}function Io(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function gn(u,g){if(u.j.info("Error code "+g),g==2){var v=y(u.bb,u),S=u.Ua;const F=!S;S=new tr(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ys(S,"https"),Nr(S),F?sr(S.toString(),v):or(S.toString(),v)}else ut(2);u.I=0,u.l&&u.l.pa(g),Ss(u),_o(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Ss(u){if(u.I=0,u.ja=[],u.l){const g=dn(u.h);(g.length!=0||u.i.length!=0)&&(H(u.ja,g),H(u.ja,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.oa()}}function Wa(u,g,v){var S=v instanceof tr?xn(v):new tr(v);if(S.g!="")g&&(S.g=g+"."+S.g),nr(S,S.u);else{var F=c.location;S=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const $=new tr(null);S&&ys($,S),g&&($.g=g),F&&nr($,F),v&&($.h=v),S=$}return v=u.G,g=u.wa,v&&g&&Ke(S,v,g),Ke(S,"VER",u.ka),ur(u,S),S}function _u(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Je(new Dr({ab:v})):new Je(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eu(){}r=Eu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function So(){}So.prototype.g=function(u,g){return new Lt(u,g)};function Lt(u,g){vt.call(this),this.g=new vo(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new wi(this)}T(Lt,vt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){wo(this.g)},Lt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=oi(u),u=v);g.i.push(new Uh(g.Ya++,u)),g.I==3&&Vr(g)},Lt.prototype.N=function(){this.g.l=null,delete this.j,wo(this.g),delete this.g,Lt.Z.N.call(this)};function Tu(u){ao.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(Tu,ao);function Iu(){Pa.call(this),this.status=1}T(Iu,Pa);function wi(u){this.g=u}T(wi,Eu),wi.prototype.ra=function(){dt(this.g,"a")},wi.prototype.qa=function(u){dt(this.g,new Tu(u))},wi.prototype.pa=function(u){dt(this.g,new Iu)},wi.prototype.oa=function(){dt(this.g,"b")},So.prototype.createWebChannel=So.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,_w=function(){return new So},ww=function(){return ui()},vw=Vn,Hf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},di.NO_ERROR=0,di.TIMEOUT=8,di.HTTP_ERROR=6,Ac=di,fi.COMPLETE="complete",yw=fi,iu.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Tl=iu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,gw=Je}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const av="@firebase/firestore",lv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Sp("@firebase/firestore");function Ko(){return Ks.logLevel}function ce(r,...e){if(Ks.logLevel<=Fe.DEBUG){const t=e.map(Cp);Ks.debug(`Firestore (${ga}): ${r}`,...t)}}function Jr(r,...e){if(Ks.logLevel<=Fe.ERROR){const t=e.map(Cp);Ks.error(`Firestore (${ga}): ${r}`,...t)}}function ia(r,...e){if(Ks.logLevel<=Fe.WARN){const t=e.map(Cp);Ks.warn(`Firestore (${ga}): ${r}`,...t)}}function Cp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Ew(r,i,t)}function Ew(r,e,t){let i=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Jr(i),new Error(i)}function Qe(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||Ew(e,o,i)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Qt.UNAUTHENTICATED)))}shutdown(){}}class US{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zS{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new Tw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class BS{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $S{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new BS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=GS(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function je(r,e){return r<e?-1:r>e?1:0}function Gf(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return _f(o)===_f(l)?je(o,l):_f(o)?1:-1}return je(r.length,e.length)}const WS=55296,qS=57343;function _f(r){const e=r.charCodeAt(0);return e>=WS&&e<=qS}function sa(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__name__";class yr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=yr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const i=yr.isNumericId(e),o=yr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?yr.extractNumericId(e).compare(yr.extractNumericId(t)):Gf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ki.fromString(e.substring(4,e.length-2))}}class rt extends yr{construct(e,t,i){return new rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new rt(t)}static emptyPath(){return new rt([])}}const KS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends yr{construct(e,t,i){return new zt(e,t,i)}static isValidIdentifier(e){return KS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cv}static keyField(){return new zt([cv])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new we(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new we(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new we(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(i+=f,o++):(l(),o++)}if(l(),c)throw new we(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(rt.fromString(e))}static fromName(e){return new _e(rt.fromString(e).popFirst(5))}static empty(){return new _e(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(r,e,t){if(!t)throw new we(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function QS(r,e,t,i){if(e===!0&&i===!0)throw new we(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function hv(r){if(!_e.isDocumentKey(r))throw new we(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function dv(r){if(_e.isDocumentKey(r))throw new we(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Sw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Pp(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Zi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new we(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pp(r);throw new we(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r,e){const t={typeString:r};return e&&(t.value=e),t}function Gl(r,e){if(!Sw(r))throw new we(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new we(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=-62135596800,pv=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*pv);return new it(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fv)throw new we(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pv}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gl(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:It("string",it._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new it(0,0))}static max(){return new Pe(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;function XS(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(i===1e9?new it(t+1,0):new it(t,i));return new es(o,_e.empty(),e)}function YS(r){return new es(r.readTime,r.key,Ml)}class es{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new es(Pe.min(),_e.empty(),Ml)}static max(){return new es(Pe.max(),_e.empty(),Ml)}}function JS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(r.documentKey,e.documentKey),t!==0?t:je(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ex{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==ZS)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,i)=>{t(e)}))}static reject(e){return new X(((t,i)=>{i(e)}))}static waitFor(e){return new X(((t,i)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next((o=>o?X.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new X(((i,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((w=>{c[y]=w,++f,f===l&&i(c)}),(w=>o(w)))}}))}static doWhile(e,t){return new X(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function tx(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function va(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ph.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=-1;function mh(r){return r==null}function $c(r){return r===0&&1/r==-1/0}function nx(r){return typeof r=="number"&&Number.isInteger(r)&&!$c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="";function rx(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=mv(e)),e=ix(r.get(t),e);return mv(e)}function ix(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case xw:t+="";break;default:t+=l}}return t}function mv(r){return r+xw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function as(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function kw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}}class vc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ut.RED,this.left=o??Ut.EMPTY,this.right=l??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ut(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yv(this.data.getIterator())}getIteratorFrom(e){return new yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new En([])}unionWith(e){let t=new bt(zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Cw("Invalid base64 string: "+l):l}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const sx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const t=sx.exec(r);if(Qe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ns(r){return typeof r=="string"?Bt.fromBase64String(r):Bt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="server_timestamp",Pw="__type__",bw="__previous_value__",Rw="__local_write_time__";function Rp(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Pw])==null?void 0:i.stringValue)===Aw}function gh(r){const e=r.mapValue.fields[bw];return Rp(e)?gh(e):e}function Vl(r){const e=ts(r.mapValue.fields[Rw].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t,i,o,l,c,f,p,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=w}}const Hc="(default)";class Ll{constructor(e,t){this.projectId=e,this.database=t||Hc}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===Hc}isEqual(e){return e instanceof Ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="__type__",ax="__max__",wc={mapValue:{}},Dw="__vector__",Gc="value";function rs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rp(r)?4:ux(r)?9007199254740991:lx(r)?10:11:Se(28295,{value:r})}function Ir(r,e){if(r===e)return!0;const t=rs(r);if(t!==rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Vl(r).isEqual(Vl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=ts(o.timestampValue),f=ts(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return ns(o.bytesValue).isEqual(ns(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return mt(o.geoPointValue.latitude)===mt(l.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return mt(o.integerValue)===mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=mt(o.doubleValue),f=mt(l.doubleValue);return c===f?$c(c)===$c(f):isNaN(c)&&isNaN(f)}return!1})(r,e);case 9:return sa(r.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(gv(c)!==gv(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Ir(c[p],f[p])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function Fl(r,e){return(r.values||[]).find((t=>Ir(t,e)))!==void 0}function oa(r,e){if(r===e)return 0;const t=rs(r),i=rs(e);if(t!==i)return je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=mt(l.integerValue||l.doubleValue),p=mt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(r,e);case 3:return vv(r.timestampValue,e.timestampValue);case 4:return vv(Vl(r),Vl(e));case 5:return Gf(r.stringValue,e.stringValue);case 6:return(function(l,c){const f=ns(l),p=ns(c);return f.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let y=0;y<f.length&&y<p.length;y++){const w=je(f[y],p[y]);if(w!==0)return w}return je(f.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=je(mt(l.latitude),mt(c.latitude));return f!==0?f:je(mt(l.longitude),mt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return wv(r.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,V,H,W;const f=l.fields||{},p=c.fields||{},y=(x=f[Gc])==null?void 0:x.arrayValue,w=(V=p[Gc])==null?void 0:V.arrayValue,T=je(((H=y==null?void 0:y.values)==null?void 0:H.length)||0,((W=w==null?void 0:w.values)==null?void 0:W.length)||0);return T!==0?T:wv(y,w)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===wc.mapValue&&c===wc.mapValue)return 0;if(l===wc.mapValue)return 1;if(c===wc.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=c.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let T=0;T<p.length&&T<w.length;++T){const x=Gf(p[T],w[T]);if(x!==0)return x;const V=oa(f[p[T]],y[w[T]]);if(V!==0)return V}return je(p.length,w.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function vv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return je(r,e);const t=ts(r),i=ts(e),o=je(t.seconds,i.seconds);return o!==0?o:je(t.nanos,i.nanos)}function wv(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=oa(t[o],i[o]);if(l)return l}return je(t.length,i.length)}function aa(r){return Wf(r)}function Wf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=ts(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ns(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return _e.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Wf(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Wf(t.fields[c])}`;return o+"}"})(r.mapValue):Se(61005,{value:r})}function Pc(r){switch(rs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gh(r);return e?16+Pc(e):16;case 5:return 2*r.stringValue.length;case 6:return ns(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Pc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return as(i.fields,((l,c)=>{o+=l.length+Pc(c)})),o})(r.mapValue);default:throw Se(13486,{value:r})}}function qf(r){return!!r&&"integerValue"in r}function Np(r){return!!r&&"arrayValue"in r}function _v(r){return!!r&&"nullValue"in r}function Ev(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function bc(r){return!!r&&"mapValue"in r}function lx(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Nw])==null?void 0:i.stringValue)===Dw}function Cl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return as(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Cl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cl(r.arrayValue.values[t]);return e}return{...r}}function ux(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ax}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(t)}setAll(e){let t=zt.emptyPath(),i={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}c?i[f.lastSegment()]=Cl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());bc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];bc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){as(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new cn(Cl(this.value))}}function Ow(r){const e=[];return as(r.fields,((t,i)=>{const o=new zt([t]);if(bc(i)){const l=Ow(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t,i,o,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Xt(e,0,Pe.min(),Pe.min(),Pe.min(),cn.empty(),0)}static newFoundDocument(e,t,i,o){return new Xt(e,1,t,Pe.min(),i,o,0)}static newNoDocument(e,t){return new Xt(e,2,t,Pe.min(),Pe.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,Pe.min(),Pe.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.position=e,this.inclusive=t}}function Tv(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],c=r.position[o];if(l.field.isKeyField()?i=_e.comparator(_e.fromName(c.referenceValue),t.key):i=oa(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Iv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ir(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t="asc"){this.field=e,this.dir=t}}function cx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{}class Pt extends Mw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new dx(e,t,i):t==="array-contains"?new mx(e,i):t==="in"?new gx(e,i):t==="not-in"?new yx(e,i):t==="array-contains-any"?new vx(e,i):new Pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new fx(e,i):new px(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(oa(t,this.value)):t!==null&&rs(this.value)===rs(t)&&this.matchesComparison(oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends Mw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Sr(e,t)}matches(e){return Vw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vw(r){return r.op==="and"}function Lw(r){return hx(r)&&Vw(r)}function hx(r){for(const e of r.filters)if(e instanceof Sr)return!1;return!0}function Kf(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+aa(r.value);if(Lw(r))return r.filters.map((e=>Kf(e))).join(",");{const e=r.filters.map((t=>Kf(t))).join(",");return`${r.op}(${e})`}}function Fw(r,e){return r instanceof Pt?(function(i,o){return o instanceof Pt&&i.op===o.op&&i.field.isEqual(o.field)&&Ir(i.value,o.value)})(r,e):r instanceof Sr?(function(i,o){return o instanceof Sr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,f)=>l&&Fw(c,o.filters[f])),!0):!1})(r,e):void Se(19439)}function jw(r){return r instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${aa(t.value)}`})(r):r instanceof Sr?(function(t){return t.op.toString()+" {"+t.getFilters().map(jw).join(" ,")+"}"})(r):"Filter"}class dx extends Pt{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class fx extends Pt{constructor(e,t){super(e,"in",t),this.keys=Uw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class px extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=Uw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Uw(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>_e.fromName(i.referenceValue)))}class mx extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Np(t)&&Fl(t.arrayValue,this.value)}}class gx extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fl(this.value.arrayValue,t)}}class yx extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fl(this.value.arrayValue,t)}}class vx extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Np(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Fl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t=null,i=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Sv(r,e=null,t=[],i=[],o=null,l=null,c=null){return new wx(r,e,t,i,o,l,c)}function Dp(r){const e=Re(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Kf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>aa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>aa(i))).join(",")),e.Te=t}return e.Te}function Op(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!cx(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Fw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Iv(r.startAt,e.startAt)&&Iv(r.endAt,e.endAt)}function Qf(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t=null,i=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _x(r,e,t,i,o,l,c,f){return new yh(r,e,t,i,o,l,c,f)}function Mp(r){return new yh(r)}function xv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Ex(r){return r.collectionGroup!==null}function Al(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new bt(zt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new qc(l,i))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new qc(zt.keyField(),i))}return e.Ie}function vr(r){const e=Re(r);return e.Ee||(e.Ee=Tx(e,Al(r))),e.Ee}function Tx(r,e){if(r.limitType==="F")return Sv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new qc(o.field,l)}));const t=r.endAt?new Wc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Wc(r.startAt.position,r.startAt.inclusive):null;return Sv(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Xf(r,e,t){return new yh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function vh(r,e){return Op(vr(r),vr(e))&&r.limitType===e.limitType}function zw(r){return`${Dp(vr(r))}|lt:${r.limitType}`}function Qo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>jw(o))).join(", ")}]`),mh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>aa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>aa(o))).join(",")),`Target(${i})`})(vr(r))}; limitType=${r.limitType})`}function wh(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):_e.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Al(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(c,f,p){const y=Tv(c,f,p);return c.inclusive?y<=0:y<0})(i.startAt,Al(i),o)||i.endAt&&!(function(c,f,p){const y=Tv(c,f,p);return c.inclusive?y>=0:y>0})(i.endAt,Al(i),o))})(r,e)}function Ix(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Bw(r){return(e,t)=>{let i=!1;for(const o of Al(r)){const l=Sx(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function Sx(r,e,t){const i=r.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),y=f.data.field(l);return p!==null&&y!==null?oa(p,y):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new lt(_e.comparator);function Zr(){return xx}const $w=new lt(_e.comparator);function Il(...r){let e=$w;for(const t of r)e=e.insert(t.key,t);return e}function Hw(r){let e=$w;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function js(){return Pl()}function Gw(){return Pl()}function Pl(){return new to((r=>r.toString()),((r,e)=>r.isEqual(e)))}const kx=new lt(_e.comparator),Cx=new bt(_e.comparator);function Ue(...r){let e=Cx;for(const t of r)e=e.add(t);return e}const Ax=new bt(je);function Px(){return Ax}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function Ww(r){return{integerValue:""+r}}function bx(r,e){return nx(e)?Ww(e):Vp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function Rx(r,e,t){return r instanceof Kc?(function(o,l){const c={fields:{[Pw]:{stringValue:Aw},[Rw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Rp(l)&&(l=gh(l)),l&&(c.fields[bw]=l),{mapValue:c}})(t,e):r instanceof la?Kw(r,e):r instanceof jl?Qw(r,e):(function(o,l){const c=qw(o,l),f=kv(c)+kv(o.Ae);return qf(c)&&qf(o.Ae)?Ww(f):Vp(o.serializer,f)})(r,e)}function Nx(r,e,t){return r instanceof la?Kw(r,e):r instanceof jl?Qw(r,e):t}function qw(r,e){return r instanceof Qc?(function(i){return qf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Kc extends _h{}class la extends _h{constructor(e){super(),this.elements=e}}function Kw(r,e){const t=Xw(e);for(const i of r.elements)t.some((o=>Ir(o,i)))||t.push(i);return{arrayValue:{values:t}}}class jl extends _h{constructor(e){super(),this.elements=e}}function Qw(r,e){let t=Xw(e);for(const i of r.elements)t=t.filter((o=>!Ir(o,i)));return{arrayValue:{values:t}}}class Qc extends _h{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function kv(r){return mt(r.integerValue||r.doubleValue)}function Xw(r){return Np(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,t){this.field=e,this.transform=t}}function Ox(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof la&&o instanceof la||i instanceof jl&&o instanceof jl?sa(i.elements,o.elements,Ir):i instanceof Qc&&o instanceof Qc?Ir(i.Ae,o.Ae):i instanceof Kc&&o instanceof Kc})(r.transform,e.transform)}class Mx{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Eh{}function Yw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Zw(r.key,Kn.none()):new Wl(r.key,r.data,Kn.none());{const t=r.data,i=cn.empty();let o=new bt(zt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new ls(r.key,i,new En(o.toArray()),Kn.none())}}function Vx(r,e,t){r instanceof Wl?(function(o,l,c){const f=o.value.clone(),p=Av(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):r instanceof ls?(function(o,l,c){if(!Rc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Av(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Jw(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function bl(r,e,t,i){return r instanceof Wl?(function(l,c,f,p){if(!Rc(l.precondition,c))return f;const y=l.value.clone(),w=Pv(l.fieldTransforms,p,c);return y.setAll(w),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof ls?(function(l,c,f,p){if(!Rc(l.precondition,c))return f;const y=Pv(l.fieldTransforms,p,c),w=c.data;return w.setAll(Jw(l)),w.setAll(y),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,f){return Rc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(r,e,t)}function Lx(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=qw(i.transform,o||null);l!=null&&(t===null&&(t=cn.empty()),t.set(i.field,l))}return t||null}function Cv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&sa(i,o,((l,c)=>Ox(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Wl extends Eh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ls extends Eh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Jw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Av(r,e,t){const i=new Map;Qe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],c=l.transform,f=e.data.field(l.field);i.set(l.field,Nx(c,f,t[o]))}return i}function Pv(r,e,t){const i=new Map;for(const o of r){const l=o.transform,c=t.data.field(o.field);i.set(o.field,Rx(l,c,e))}return i}class Zw extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fx extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Vx(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=bl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=bl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Gw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=Yw(c,f);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Pe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,((t,i)=>Cv(t,i)))&&sa(this.baseMutations,e.baseMutations,((t,i)=>Cv(t,i)))}}class Lp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return kx})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new Lp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,$e;function Bx(r){switch(r){case J.OK:return Se(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function e_(r){if(r===void 0)return Jr("GRPC error has no .code"),J.UNKNOWN;switch(r){case Et.OK:return J.OK;case Et.CANCELLED:return J.CANCELLED;case Et.UNKNOWN:return J.UNKNOWN;case Et.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Et.INTERNAL:return J.INTERNAL;case Et.UNAVAILABLE:return J.UNAVAILABLE;case Et.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Et.NOT_FOUND:return J.NOT_FOUND;case Et.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Et.ABORTED:return J.ABORTED;case Et.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Et.DATA_LOSS:return J.DATA_LOSS;default:return Se(39323,{code:r})}}($e=Et||(Et={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Ki([4294967295,4294967295],0);function bv(r){const e=$x().encode(r),t=new mw;return t.update(e),new Uint8Array(t.digest())}function Rv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ki([t,i],0),new Ki([o,l],0)]}class Fp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Sl(`Invalid padding: ${t}`);if(i<0)throw new Sl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Sl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Sl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ki.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ki.fromNumber(i)));return o.compare(Hx)===1&&(o=new Ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=bv(e),[i,o]=Rv(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Fp(l,o,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=bv(e),[i,o]=Rv(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Th(Pe.min(),o,new lt(je),Zr(),Ue())}}class ql{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ql(i,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class t_{constructor(e,t){this.targetId=e,this.Ce=t}}class n_{constructor(e,t,i=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Nv{constructor(){this.ve=0,this.Fe=Dv(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),i=Ue();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:l})}})),new ql(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Dv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Gx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zr(),this.Je=_c(),this.He=_c(),this.Ye=new lt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Qf(l))if(i===0){const c=new _e(l.path);this.et(t,c,Xt.newNoDocument(c,Pe.min()))}else Qe(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=ns(i).toUint8Array()}catch(p){if(p instanceof Cw)return ia("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Fp(c,o,l)}catch(p){return ia(p instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Qf(f.target)){const p=new _e(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Xt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Ue();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Th(e,t,this.Ye,this.je,i);return this.je=Zr(),this.Je=_c(),this.He=_c(),this.Ye=new lt(je),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Nv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Nv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _c(){return new lt(_e.comparator)}function Dv(){return new lt(_e.comparator)}const Wx={asc:"ASCENDING",desc:"DESCENDING"},qx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kx={and:"AND",or:"OR"};class Qx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yf(r,e){return r.useProto3Json||mh(e)?e:{value:e}}function Xc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Xx(r,e){return Xc(r,e.toTimestamp())}function wr(r){return Qe(!!r,49232),Pe.fromTimestamp((function(t){const i=ts(t);return new it(i.seconds,i.nanos)})(r))}function jp(r,e){return Jf(r,e).canonicalString()}function Jf(r,e){const t=(function(o){return new rt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function i_(r){const e=rt.fromString(r);return Qe(u_(e),10190,{key:e.toString()}),e}function Zf(r,e){return jp(r.databaseId,e.path)}function Ef(r,e){const t=i_(e);if(t.get(1)!==r.databaseId.projectId)throw new we(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new we(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _e(o_(t))}function s_(r,e){return jp(r.databaseId,e)}function Yx(r){const e=i_(r);return e.length===4?rt.emptyPath():o_(e)}function ep(r){return new rt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function o_(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ov(r,e,t){return{name:Zf(r,e),fields:t.value.mapValue.fields}}function Jx(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(Qe(w===void 0||typeof w=="string",58123),Bt.fromBase64String(w||"")):(Qe(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Bt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(y){const w=y.code===void 0?J.UNKNOWN:e_(y.code);return new we(w,y.message||"")})(c);t=new n_(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ef(r,i.document.name),l=wr(i.document.updateTime),c=i.document.createTime?wr(i.document.createTime):Pe.min(),f=new cn({mapValue:{fields:i.document.fields}}),p=Xt.newFoundDocument(o,l,c,f),y=i.targetIds||[],w=i.removedTargetIds||[];t=new Nc(y,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ef(r,i.document),l=i.readTime?wr(i.readTime):Pe.min(),c=Xt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Nc([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ef(r,i.document),l=i.removedTargetIds||[];t=new Nc([],l,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new zx(o,l),f=i.targetId;t=new t_(f,c)}}return t}function Zx(r,e){let t;if(e instanceof Wl)t={update:Ov(r,e.key,e.value)};else if(e instanceof Zw)t={delete:Zf(r,e.key)};else if(e instanceof ls)t={update:Ov(r,e.key,e.data),updateMask:lk(e.fieldMask)};else{if(!(e instanceof Fx))return Se(16599,{Vt:e.type});t={verify:Zf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof Kc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof la)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof jl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Qc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Se(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Xx(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(r,e.precondition)),t}function ek(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map((t=>(function(o,l){let c=o.updateTime?wr(o.updateTime):wr(l);return c.isEqual(Pe.min())&&(c=wr(l)),new Mx(c,o.transformResults||[])})(t,e)))):[]}function tk(r,e){return{documents:[s_(r,e.path)]}}function nk(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=s_(r,o);const l=(function(y){if(y.length!==0)return l_(Sr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((w=>(function(x){return{field:Xo(x.field),direction:sk(x.dir)}})(w)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Yf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function rk(r){let e=Yx(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(T){const x=a_(T);return x instanceof Sr&&Lw(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((x=>(function(H){return new qc(Yo(H.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(x)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let x;return x=typeof T=="object"?T.value:T,mh(x)?null:x})(t.limit));let p=null;t.startAt&&(p=(function(T){const x=!!T.before,V=T.values||[];return new Wc(V,x)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const x=!T.before,V=T.values||[];return new Wc(V,x)})(t.endAt)),_x(e,o,c,l,f,"F",p,y)}function ik(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function a_(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Yo(t.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Yo(t.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Yo(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yo(t.unaryFilter.field);return Pt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Pt.create(Yo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Sr.create(t.compositeFilter.filters.map((i=>a_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function sk(r){return Wx[r]}function ok(r){return qx[r]}function ak(r){return Kx[r]}function Xo(r){return{fieldPath:r.canonicalString()}}function Yo(r){return zt.fromServerFormat(r.fieldPath)}function l_(r){return r instanceof Pt?(function(t){if(t.op==="=="){if(Ev(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NAN"}};if(_v(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ev(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NAN"}};if(_v(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(t.field),op:ok(t.op),value:t.value}}})(r):r instanceof Sr?(function(t){const i=t.getFilters().map((o=>l_(o)));return i.length===1?i[0]:{compositeFilter:{op:ak(t.op),filters:i}}})(r):Se(54877,{filter:r})}function lk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function u_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,i,o,l=Pe.min(),c=Pe.min(),f=Bt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.yt=e}}function ck(r){const e=rk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Xf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.Cn=new dk}addToCollectionParentIndex(e,t){return this.Cn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(es.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class dk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new bt(rt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new bt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c_=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(c_,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ua(0)}static cr(){return new ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="LruGarbageCollector",fk=1048576;function Lv([r,e],[t,i]){const o=je(r,t);return o===0?je(e,i):o}class pk{constructor(e){this.Ir=e,this.buffer=new bt(Lv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Lv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Vv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){va(t)?ce(Vv,"Ignoring IndexedDB error during garbage collection: ",t):await ya(t)}await this.Vr(3e5)}))}}class gk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(ph.ce);const i=new pk(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Mv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,c,f,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),Ko()<=Fe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-w}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function yk(r,e){return new gk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.changes=new to((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&bl(i.mutation,o,En.empty(),it.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ue()){const o=js();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=Il();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=js();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ue())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,o){let l=Zr();const c=Pl(),f=(function(){return Pl()})();return t.forEach(((p,y)=>{const w=i.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof ls)?l=l.insert(y.key,y):w!==void 0?(c.set(y.key,w.mutation.getFieldMask()),bl(w.mutation,y,w.mutation.getFieldMask(),it.now())):c.set(y.key,En.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,w)=>c.set(y,w))),t.forEach(((y,w)=>f.set(y,new wk(w,c.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Pl();let o=new lt(((c,f)=>c-f)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let w=i.get(p)||En.empty();w=f.applyToLocalView(y,w),i.set(p,w);const T=(o.get(f.batchId)||Ue()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,w=p.value,T=Gw();w.forEach((x=>{if(!l.has(x)){const V=Yw(t.get(x),i.get(x));V!==null&&T.set(x,V),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return X.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ex(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(js());let f=Ml,p=l;return c.next((y=>X.forEach(y,((w,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(w)?X.resolve():this.remoteDocumentCache.getEntry(e,w).next((x=>{p=p.insert(w,x)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Ue()))).next((w=>({batchId:f,changes:Hw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((i=>{let o=Il();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Il();return this.indexManager.getCollectionParents(e,l).next((f=>X.forEach(f,(p=>{const y=(function(T,x){return new yh(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((w=>{w.forEach(((T,x)=>{c=c.insert(T,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,y)=>{const w=y.getKey();c.get(w)===null&&(c=c.insert(w,Xt.newInvalidDocument(w)))}));let f=Il();return c.forEach(((p,y)=>{const w=l.get(p);w!==void 0&&bl(w.mutation,y,En.empty(),it.now()),wh(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return X.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wr(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:ck(o.bundledQuery),readTime:wr(o.readTime)}})(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.overlays=new lt(_e.comparator),this.qr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=js();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=js(),l=t.length+1,c=new _e(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new lt(((y,w)=>y-w));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=l.get(y.largestBatchId);w===null&&(w=js(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=js(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return X.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Ux(t,i));let l=this.qr.get(t);l===void 0&&(l=Ue(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Qr=new bt(Ot.$r),this.Ur=new bt(Ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ot(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ot(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new _e(new rt([])),i=new Ot(t,e),o=new Ot(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new rt([])),i=new Ot(t,e),o=new Ot(t,e+1);let l=Ue();return this.Ur.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ot(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ot{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Ot.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jx(l,t,i,o);this.mutationQueue.push(c);for(const f of o)this.Zr=this.Zr.add(new Ot(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(c)}lookupMutationBatch(e,t){return X.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?bp:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ot(t,0),o=new Ot(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(c=>{const f=this.Xr(c.Yr);l.push(f)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bt(je);return t.forEach((o=>{const l=new Ot(o,0),c=new Ot(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{i=i.add(f.Yr)}))})),X.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;_e.isDocumentKey(l)||(l=l.child(""));const c=new Ot(new _e(l),0);let f=new bt(je);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Yr)),!0)}),c),X.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return X.forEach(t.mutations,(o=>{const l=new Ot(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ot(t,0),o=this.Zr.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.ri=e,this.docs=(function(){return new lt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let i=Zr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Xt.newInvalidDocument(o))})),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Zr();const c=t.path,f=new _e(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||JS(YS(w),i)<=0||(o.has(w.key)||wh(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se(9500)}ii(e,t){return X.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new kk(this)}getSize(e){return X.resolve(this.size)}}class kk extends vk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),X.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.persistence=e,this.si=new to((t=>Dp(t)),Op),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Up,this.targetCount=0,this.ai=ua.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),X.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ua(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Pr(t),X.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t){this.ui={},this.overlays={},this.ci=new ph(0),this.li=!1,this.li=!0,this.hi=new Ik,this.referenceDelegate=e(this),this.Pi=new Ck(this),this.indexManager=new hk,this.remoteDocumentCache=(function(o){return new xk(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new uk(t),this.Ii=new Ek(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new Sk(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const o=new Ak(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return X.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Ak extends ex{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Ri=new Up,this.Vi=null}static mi(e){return new zp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(i=>{const o=_e.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Yc{constructor(e,t){this.persistence=e,this.pi=new to((i=>rx(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=yk(this,t)}static mi(e,t){return new Yc(e,t)}Ei(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return X.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?X.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((f=>{f||(i++,l.removeEntry(c,Pe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),X.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pc(e.data.value)),t}br(e,t,i){return X.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return X.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ue(),o=Ue();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Bp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wI()?8:tx(Yt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Pk;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Ko()<=Fe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Ko()<=Fe.DEBUG&&ce("QueryEngine","Query:",Qo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ko()<=Fe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(t))):X.resolve())}ys(e,t){if(xv(t))return X.resolve(null);let i=vr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Xf(t,null,"F"),i=vr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ue(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.Ds(t,f);return this.Cs(t,y,c,p.readTime)?this.ys(e,Xf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,i,o){return xv(t)||o.isEqual(Pe.min())?X.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,o)?X.resolve(null):(Ko()<=Fe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Qo(t)),this.vs(e,c,t,XS(o,Ml)).next((f=>f)))}))}Ds(e,t){let i=new bt(Bw(e));return t.forEach(((o,l)=>{wh(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Ko()<=Fe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.ps.getDocumentsMatchingQuery(e,t,es.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="LocalStore",Rk=3e8;class Nk{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new lt(je),this.xs=new to((l=>Dp(l)),Op),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _k(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Dk(r,e,t,i){return new Nk(r,e,t,i)}async function d_(r,e){const t=Re(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let p=Ue();for(const y of o){c.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:f})))}))}))}function Ok(r,e){const t=Re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,w){const T=y.batch,x=T.keys();let V=X.resolve();return x.forEach((H=>{V=V.next((()=>w.getEntry(p,H))).next((W=>{const G=y.docVersions.get(H);Qe(G!==null,48541),W.version.compareTo(G)<0&&(T.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),w.addEntry(W)))}))})),V.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Ue();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function f_(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Mk(r,e){const t=Re(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((w,T)=>{const x=o.get(T);if(!x)return;f.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,T))));let V=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(Bt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):w.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(w.resumeToken,i)),o=o.insert(T,V),(function(W,G,ae){return W.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=Rk?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(x,V,w)&&f.push(t.Pi.updateTargetData(l,V))}));let p=Zr(),y=Ue();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(Vk(l,c,e.documentUpdates).next((w=>{p=w.ks,y=w.qs}))),!i.isEqual(Pe.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(w)}return X.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function Vk(r,e,t){let i=Ue(),o=Ue();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Zr();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Pe.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):ce($p,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function Lk(r,e){const t=Re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=bp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Fk(r,e){const t=Re(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,X.resolve(o)):t.Pi.allocateTargetId(i).next((c=>(o=new ji(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function tp(r,e,t){const i=Re(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!va(c))throw c;ce($p,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Fv(r,e,t){const i=Re(r);let o=Pe.min(),l=Ue();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,w){const T=Re(p),x=T.xs.get(w);return x!==void 0?X.resolve(T.Ms.get(x)):T.Pi.getTargetData(y,w)})(i,c,vr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?o:Pe.min(),t?l:Ue()))).next((f=>(jk(i,Ix(e),f),{documents:f,Qs:l})))))}function jk(r,e,t){let i=r.Os.get(e)||Pe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class jv{constructor(){this.activeTargetIds=Px()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uk{constructor(){this.Mo=new jv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="ConnectivityMonitor";class zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Uv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Uv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec=null;function np(){return Ec===null?Ec=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ec++,"0x"+Ec.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="RestConnection",Bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $k{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Hc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const c=np(),f=this.zo(e,t.toUriEncodedString());ce(Tf,`Sending RPC '${e}' ${c}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(f),w=pa(y);return this.Jo(e,f,p,i,w).then((T=>(ce(Tf,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw ia(Tf,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,o,l,c){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ga})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=Bk[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class Gk extends $k{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const c=np();return new Promise(((f,p)=>{const y=new gw;y.setWithCredentials(!0),y.listenOnce(yw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ac.NO_ERROR:const T=y.getResponseJson();ce(Kt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case Ac.TIMEOUT:ce(Kt,`RPC '${e}' ${c} timed out`),p(new we(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:const x=y.getStatus();if(ce(Kt,`RPC '${e}' ${c} failed with status:`,x,"response text:",y.getResponseText()),x>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const H=V==null?void 0:V.error;if(H&&H.status&&H.message){const W=(function(ae){const le=ae.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(le)>=0?le:J.UNKNOWN})(H.status);p(new we(W,H.message))}else p(new we(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new we(J.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(Kt,`RPC '${e}' ${c} completed.`)}}));const w=JSON.stringify(o);ce(Kt,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=np(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=_w(),f=ww(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const w=l.join("");ce(Kt,`Creating RPC '${e}' stream ${o}: ${w}`,p);const T=c.createWebChannel(w,p);this.I_(T);let x=!1,V=!1;const H=new Hk({Yo:G=>{V?ce(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(x||(ce(Kt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),x=!0),ce(Kt,`RPC '${e}' stream ${o} sending:`,G),T.send(G))},Zo:()=>T.close()}),W=(G,ae,le)=>{G.listen(ae,(U=>{try{le(U)}catch(q){setTimeout((()=>{throw q}),0)}}))};return W(T,Tl.EventType.OPEN,(()=>{V||(ce(Kt,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),W(T,Tl.EventType.CLOSE,(()=>{V||(V=!0,ce(Kt,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(T))})),W(T,Tl.EventType.ERROR,(G=>{V||(V=!0,ia(Kt,`RPC '${e}' stream ${o} transport errored. Name:`,G.name,"Message:",G.message),H.a_(new we(J.UNAVAILABLE,"The operation could not be completed")))})),W(T,Tl.EventType.MESSAGE,(G=>{var ae;if(!V){const le=G.data[0];Qe(!!le,16349);const U=le,q=(U==null?void 0:U.error)||((ae=U[0])==null?void 0:ae.error);if(q){ce(Kt,`RPC '${e}' stream ${o} received error:`,q);const ne=q.status;let Q=(function(A){const R=Et[A];if(R!==void 0)return e_(R)})(ne),k=q.message;Q===void 0&&(Q=J.INTERNAL,k="Unknown error status: "+ne+" with message "+q.message),V=!0,H.a_(new we(Q,k)),T.close()}else ce(Kt,`RPC '${e}' stream ${o} received:`,le),H.u_(le)}})),W(f,vw.STAT_EVENT,(G=>{G.stat===Hf.PROXY?ce(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):G.stat===Hf.NOPROXY&&ce(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(r){return new Qx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="PersistentStream";class m_{constructor(e,t,i,o,l,c,f,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new p_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Jr(t.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new we(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Bv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Bv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wk extends m_{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Jx(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?wr(c.readTime):Pe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ep(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=Qf(p)?{documents:tk(l,p)}:{query:nk(l,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=r_(l,c.resumeToken);const y=Yf(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Pe.min())>0){f.readTime=Xc(l,c.snapshotVersion.toTimestamp());const y=Yf(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=ik(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ep(this.serializer),t.removeTarget=e,this.q_(t)}}class qk extends m_{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ek(e.writeResults,e.commitTime),i=wr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ep(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Zx(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{}class Qk extends Kk{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new we(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Jf(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(J.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Jf(t,i),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Xk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jr(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class Yk{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{no(this)&&(ce(Qs,"Restarting streams for network reachability change."),await(async function(p){const y=Re(p);y.Ea.add(4),await Kl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Sh(y)})(this))}))})),this.Ra=new Xk(i,o)}}async function Sh(r){if(no(r))for(const e of r.da)await e(!0)}async function Kl(r){for(const e of r.da)await e(!1)}function g_(r,e){const t=Re(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qp(t)?Wp(t):wa(t).O_()&&Gp(t,e))}function Hp(r,e){const t=Re(r),i=wa(t);t.Ia.delete(e),i.O_()&&y_(t,e),t.Ia.size===0&&(i.O_()?i.L_():no(t)&&t.Ra.set("Unknown"))}function Gp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wa(r).Y_(e)}function y_(r,e){r.Va.Ue(e),wa(r).Z_(e)}function Wp(r){r.Va=new Gx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),wa(r).start(),r.Ra.ua()}function qp(r){return no(r)&&!wa(r).x_()&&r.Ia.size>0}function no(r){return Re(r).Ea.size===0}function v_(r){r.Va=void 0}async function Jk(r){r.Ra.set("Online")}async function Zk(r){r.Ia.forEach(((e,t)=>{Gp(r,e)}))}async function eC(r,e){v_(r),qp(r)?(r.Ra.ha(e),Wp(r)):r.Ra.set("Unknown")}async function tC(r,e,t){if(r.Ra.set("Online"),e instanceof n_&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(i){ce(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jc(r,i)}else if(e instanceof Nc?r.Va.Ze(e):e instanceof t_?r.Va.st(e):r.Va.tt(e),!t.isEqual(Pe.min()))try{const i=await f_(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,y)=>{const w=l.Ia.get(p);if(!w)return;l.Ia.set(p,w.withResumeToken(Bt.EMPTY_BYTE_STRING,w.snapshotVersion)),y_(l,p);const T=new ji(w.target,p,y,w.sequenceNumber);Gp(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){ce(Qs,"Failed to raise snapshot:",i),await Jc(r,i)}}async function Jc(r,e,t){if(!va(e))throw e;r.Ea.add(1),await Kl(r),r.Ra.set("Offline"),t||(t=()=>f_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(Qs,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Sh(r)}))}function w_(r,e){return e().catch((t=>Jc(r,t,e)))}async function xh(r){const e=Re(r),t=is(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bp;for(;nC(e);)try{const o=await Lk(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,rC(e,o)}catch(o){await Jc(e,o)}__(e)&&E_(e)}function nC(r){return no(r)&&r.Ta.length<10}function rC(r,e){r.Ta.push(e);const t=is(r);t.O_()&&t.X_&&t.ea(e.mutations)}function __(r){return no(r)&&!is(r).x_()&&r.Ta.length>0}function E_(r){is(r).start()}async function iC(r){is(r).ra()}async function sC(r){const e=is(r);for(const t of r.Ta)e.ea(t.mutations)}async function oC(r,e,t){const i=r.Ta.shift(),o=Lp.from(i,e,t);await w_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await xh(r)}async function aC(r,e){e&&is(r).X_&&await(async function(i,o){if((function(c){return Bx(c)&&c!==J.ABORTED})(o.code)){const l=i.Ta.shift();is(i).B_(),await w_(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await xh(i)}})(r,e),__(r)&&E_(r)}async function $v(r,e){const t=Re(r);t.asyncQueue.verifyOperationInProgress(),ce(Qs,"RemoteStore received new credentials");const i=no(t);t.Ea.add(3),await Kl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sh(t)}async function lC(r,e){const t=Re(r);e?(t.Ea.delete(2),await Sh(t)):e||(t.Ea.add(2),await Kl(t),t.Ra.set("Unknown"))}function wa(r){return r.ma||(r.ma=(function(t,i,o){const l=Re(t);return l.sa(),new Wk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:Jk.bind(null,r),t_:Zk.bind(null,r),r_:eC.bind(null,r),H_:tC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),qp(r)?Wp(r):r.Ra.set("Unknown")):(await r.ma.stop(),v_(r))}))),r.ma}function is(r){return r.fa||(r.fa=(function(t,i,o){const l=Re(t);return l.sa(),new qk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:iC.bind(null,r),r_:aC.bind(null,r),ta:sC.bind(null,r),na:oC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await xh(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(Qs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,f=new Kp(e,t,c,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(r,e){if(Jr("AsyncQueue",`${e}: ${r}`),va(r))return new we(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{static emptySet(e){return new Jo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=Il(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.ga=new lt(_e.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ca{constructor(e,t,i,o,l,c,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new ca(e,t,Jo.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class cC{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=Gv(),l.forEach(((c,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new we(J.ABORTED,"Firestore shutting down"))}}function Gv(){return new to((r=>zw(r)),vh)}async function hC(r,e){const t=Re(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new uC,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Qp(c,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Xp(t)}async function dC(r,e){const t=Re(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function fC(r,e){const t=Re(r);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(o)&&(i=!0);c.wa=o}}i&&Xp(t)}function pC(r,e,t){const i=Re(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Xp(r){r.Ca.forEach((e=>{e.next()}))}var rp,Wv;(Wv=rp||(rp={})).Ma="default",Wv.Cache="cache";class mC{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ca(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this.key=e}}class I_{constructor(e){this.key=e}}class gC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=Bw(e),this.tu=new Jo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Hv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,T)=>{const x=o.get(w),V=wh(this.query,T)?T:null,H=!!x&&this.mutatedKeys.has(x.key),W=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let G=!1;x&&V?x.data.isEqual(V.data)?H!==W&&(i.track({type:3,doc:V}),G=!0):this.su(x,V)||(i.track({type:2,doc:V}),G=!0,(p&&this.eu(V,p)>0||y&&this.eu(V,y)<0)&&(f=!0)):!x&&V?(i.track({type:0,doc:V}),G=!0):x&&!V&&(i.track({type:1,doc:x}),G=!0,(p||y)&&(f=!0)),G&&(V?(c=c.add(V),l=W?l.add(w):l.delete(w)):(c=c.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{tu:c,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((w,T)=>(function(V,H){const W=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:G})}};return W(V)-W(H)})(w.type,T.type)||this.eu(w.doc,T.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,c.length!==0||y?{snapshot:new ca(this.query,e.tu,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new I_(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new T_(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ca.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yp="SyncEngine";class yC{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class vC{constructor(e){this.key=e,this.hu=!1}}class wC{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new to((f=>zw(f)),vh),this.Iu=new Map,this.Eu=new Set,this.du=new lt(_e.comparator),this.Au=new Map,this.Ru=new Up,this.Vu={},this.mu=new Map,this.fu=ua.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _C(r,e,t=!0){const i=P_(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await S_(i,e,t,!0),o}async function EC(r,e){const t=P_(r);await S_(t,e,!0,!1)}async function S_(r,e,t,i){const o=await Fk(r.localStore,vr(e)),l=o.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await TC(r,e,l,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&g_(r.remoteStore,o),f}async function TC(r,e,t,i,o){r.pu=(T,x,V)=>(async function(W,G,ae,le){let U=G.view.ru(ae);U.Cs&&(U=await Fv(W.localStore,G.query,!1).then((({documents:k})=>G.view.ru(k,U))));const q=le&&le.targetChanges.get(G.targetId),ne=le&&le.targetMismatches.get(G.targetId)!=null,Q=G.view.applyChanges(U,W.isPrimaryClient,q,ne);return Kv(W,G.targetId,Q.au),Q.snapshot})(r,T,x,V);const l=await Fv(r.localStore,e,!0),c=new gC(e,l.Qs),f=c.ru(l.documents),p=ql.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=c.applyChanges(f,r.isPrimaryClient,p);Kv(r,t,y.au);const w=new yC(e,t,c);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function IC(r,e,t){const i=Re(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((c=>!vh(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await tp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Hp(i.remoteStore,o.targetId),ip(i,o.targetId)})).catch(ya)):(ip(i,o.targetId),await tp(i.localStore,o.targetId,!0))}async function SC(r,e){const t=Re(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Hp(t.remoteStore,i.targetId))}async function xC(r,e,t){const i=NC(r);try{const o=await(function(c,f){const p=Re(c),y=it.now(),w=f.reduce(((V,H)=>V.add(H.key)),Ue());let T,x;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let H=Zr(),W=Ue();return p.Ns.getEntries(V,w).next((G=>{H=G,H.forEach(((ae,le)=>{le.isValidDocument()||(W=W.add(ae))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,H))).next((G=>{T=G;const ae=[];for(const le of f){const U=Lx(le,T.get(le.key).overlayedDocument);U!=null&&ae.push(new ls(le.key,U,Ow(U.value.mapValue),Kn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,ae,f)})).next((G=>{x=G;const ae=G.applyToLocalDocumentSet(T,W);return p.documentOverlayCache.saveOverlays(V,G.batchId,ae)}))})).then((()=>({batchId:x.batchId,changes:Hw(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let y=c.Vu[c.currentUser.toKey()];y||(y=new lt(je)),y=y.insert(f,p),c.Vu[c.currentUser.toKey()]=y})(i,o.batchId,t),await Ql(i,o.changes),await xh(i.remoteStore)}catch(o){const l=Qp(o,"Failed to persist write");t.reject(l)}}async function x_(r,e){const t=Re(r);try{const i=await Mk(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Qe(c.hu,14607):o.removedDocuments.size>0&&(Qe(c.hu,42227),c.hu=!1))})),await Ql(t,i,e)}catch(i){await ya(i)}}function qv(r,e,t){const i=Re(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=Re(c);p.onlineState=f;let y=!1;p.queries.forEach(((w,T)=>{for(const x of T.Sa)x.va(f)&&(y=!0)})),y&&Xp(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function kC(r,e,t){const i=Re(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let c=new lt(_e.comparator);c=c.insert(l,Xt.newNoDocument(l,Pe.min()));const f=Ue().add(l),p=new Th(Pe.min(),new Map,new lt(je),c,f);await x_(i,p),i.du=i.du.remove(l),i.Au.delete(e),Jp(i)}else await tp(i.localStore,e,!1).then((()=>ip(i,e,t))).catch(ya)}async function CC(r,e){const t=Re(r),i=e.batch.batchId;try{const o=await Ok(t.localStore,e);C_(t,i,null),k_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ql(t,o)}catch(o){await ya(o)}}async function AC(r,e,t){const i=Re(r);try{const o=await(function(c,f){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return p.mutationQueue.lookupMutationBatch(y,f).next((T=>(Qe(T!==null,37113),w=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>p.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);C_(i,e,t),k_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ql(i,o)}catch(o){await ya(o)}}function k_(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function C_(r,e,t){const i=Re(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function ip(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||A_(r,i)}))}function A_(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Hp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Jp(r))}function Kv(r,e,t){for(const i of t)i instanceof T_?(r.Ru.addReference(i.key,e),PC(r,i)):i instanceof I_?(ce(Yp,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||A_(r,i.key)):Se(19791,{wu:i})}function PC(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ce(Yp,"New document in limbo: "+t),r.Eu.add(i),Jp(r))}function Jp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new _e(rt.fromString(e)),i=r.fu.next();r.Au.set(i,new vC(t)),r.du=r.du.insert(t,i),g_(r.remoteStore,new ji(vr(Mp(t.path)),i,"TargetPurposeLimboResolution",ph.ce))}}async function Ql(r,e,t){const i=Re(r),o=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{c.push(i.pu(p,e,t).then((y=>{var w;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Bp.As(p.targetId,y);l.push(T)}})))})),await Promise.all(c),i.Pu.H_(o),await(async function(p,y){const w=Re(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>X.forEach(y,(x=>X.forEach(x.Es,(V=>w.persistence.referenceDelegate.addReference(T,x.targetId,V))).next((()=>X.forEach(x.ds,(V=>w.persistence.referenceDelegate.removeReference(T,x.targetId,V)))))))))}catch(T){if(!va(T))throw T;ce($p,"Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const V=w.Ms.get(x),H=V.snapshotVersion,W=V.withLastLimboFreeSnapshotVersion(H);w.Ms=w.Ms.insert(x,W)}}})(i.localStore,l))}async function bC(r,e){const t=Re(r);if(!t.currentUser.isEqual(e)){ce(Yp,"User change. New user:",e.toKey());const i=await d_(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new we(J.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ql(t,i.Ls)}}function RC(r,e){const t=Re(r),i=t.Au.get(e);if(i&&i.hu)return Ue().add(i.key);{let o=Ue();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function P_(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=x_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kC.bind(null,e),e.Pu.H_=fC.bind(null,e.eventManager),e.Pu.yu=pC.bind(null,e.eventManager),e}function NC(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AC.bind(null,e),e}class Zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Dk(this.persistence,new bk,e.initialUser,this.serializer)}Cu(e){return new h_(zp.mi,this.serializer)}Du(e){return new Uk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zc.provider={build:()=>new Zc};class DC extends Zc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Yc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new mk(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new h_((i=>Yc.mi(i,t)),this.serializer)}}class sp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bC.bind(null,this.syncEngine),await lC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new cC})()}createDatastore(e){const t=Ih(e.databaseInfo.databaseId),i=(function(l){return new Gk(l)})(e.databaseInfo);return(function(l,c,f,p){return new Qk(l,c,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,f){return new Yk(i,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>qv(this.syncEngine,t,0)),(function(){return zv.v()?new zv:new zk})())}createSyncEngine(e,t){return(function(o,l,c,f,p,y,w){const T=new wC(o,l,c,f,p,y);return w&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);ce(Qs,"RemoteStore shutting down."),l.Ea.add(5),await Kl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}sp.provider={build:()=>new sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="FirestoreClient";class MC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=Ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ce(ss,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ce(ss,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Qp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sf(r,e){r.asyncQueue.verifyOperationInProgress(),ce(ss,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await d_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Qv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await VC(r);ce(ss,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>$v(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>$v(e.remoteStore,o))),r._onlineComponents=e}async function VC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(ss,"Using user provided OfflineComponentProvider");try{await Sf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ia("Error using user provided cache. Falling back to memory cache: "+t),await Sf(r,new Zc)}}else ce(ss,"Using default OfflineComponentProvider"),await Sf(r,new DC(void 0));return r._offlineComponents}async function b_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(ss,"Using user provided OnlineComponentProvider"),await Qv(r,r._uninitializedComponentsProvider._online)):(ce(ss,"Using default OnlineComponentProvider"),await Qv(r,new sp))),r._onlineComponents}function LC(r){return b_(r).then((e=>e.syncEngine))}async function FC(r){const e=await b_(r),t=e.eventManager;return t.onListen=_C.bind(null,e.syncEngine),t.onUnlisten=IC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=SC.bind(null,e.syncEngine),t}function jC(r,e,t={}){const i=new Qi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,p,y){const w=new OC({next:x=>{w.Nu(),c.enqueueAndForget((()=>dC(l,T)));const V=x.docs.has(f);!V&&x.fromCache?y.reject(new we(J.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&p&&p.source==="server"?y.reject(new we(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new mC(Mp(f.path),w,{includeMetadataChanges:!0,qa:!0});return hC(l,T)})(await FC(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="firestore.googleapis.com",Yv=!0;class Jv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=N_,this.ssl=Yv}else this.host=e.host,this.ssl=e.ssl??Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fk)throw new we(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new jS;switch(i.type){case"firstParty":return new $S(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Xv.get(t);i&&(ce("ComponentProvider","Removing Datastore"),Xv.delete(t),i.terminate())})(this),Promise.resolve()}}function UC(r,e,t,i={}){var y;r=Zi(r,kh);const o=pa(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(aw(`https://${f}`),lw("Firestore",!0)),l.host!==N_&&l.host!==f&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:i};if(!Ji(p,c)&&(r._setSettings(p),i.mockUserToken)){let w,T;if(typeof i.mockUserToken=="string")w=i.mockUserToken,T=Qt.MOCK_USER;else{w=cI(i.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new we(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Qt(x)}r._authCredentials=new US(new Tw(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Zp(this.firestore,e,this._query)}}class St{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Gl(t,St._jsonSchema))return new St(e,i||null,new _e(rt.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:It("string",St._jsonSchemaVersion),referencePath:It("string")};class Xi extends Zp{constructor(e,t,i){super(e,t,Mp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new _e(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function zC(r,e,...t){if(r=Jt(r),Iw("collection","path",e),r instanceof kh){const i=rt.fromString(e,...t);return dv(i),new Xi(r,null,i)}{if(!(r instanceof St||r instanceof Xi))throw new we(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(rt.fromString(e,...t));return dv(i),new Xi(r.firestore,null,i)}}function Tn(r,e,...t){if(r=Jt(r),arguments.length===1&&(e=Ap.newId()),Iw("doc","path",e),r instanceof kh){const i=rt.fromString(e,...t);return hv(i),new St(r,null,new _e(i))}{if(!(r instanceof St||r instanceof Xi))throw new we(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(rt.fromString(e,...t));return hv(i),new St(r.firestore,r instanceof Xi?r.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="AsyncQueue";class e0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new p_(this,"async_queue_retry"),this._c=()=>{const i=If();i&&ce(Zv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!va(e))throw e;ce(Zv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Jr("INTERNAL UNHANDLED ERROR: ",t0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Kp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:t0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function t0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Xl extends kh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new e0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e0(e),this._firestoreClient=void 0,await e}}}function BC(r,e){const t=typeof r=="object"?r:dw(),i=typeof r=="string"?r:Hc,o=kp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=lI("firestore");l&&UC(o,...l)}return o}function D_(r){if(r._terminated)throw new we(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||$C(r),r._firestoreClient}function $C(r){var i,o,l;const e=r._freezeSettings(),t=(function(f,p,y,w){return new ox(f,p,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,R_(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new MC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(Bt.fromBase64String(e))}catch(t){throw new we(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gl(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:It("string",Nn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_r._jsonSchemaVersion}}static fromJSON(e){if(Gl(e,_r._jsonSchema))return new _r(e.latitude,e.longitude)}}_r._jsonSchemaVersion="firestore/geoPoint/1.0",_r._jsonSchema={type:It("string",_r._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gl(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Er(e.vectorValues);throw new we(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:It("string",Er._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=/^__.*__$/;class GC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wl(e,this.data,t,this.fieldTransforms)}}class O_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function M_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class Ph{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ph({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return eh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(M_(this.Ac)&&HC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ih(e)}Cc(e,t,i,o=!1){return new Ph({Ac:e,methodName:t,Dc:i,path:zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function em(r){const e=r._freezeSettings(),t=Ih(r._databaseId);return new WC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function V_(r,e,t,i,o,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);nm("Data must be an object, but it was:",c,i);const f=L_(i,c);let p,y;if(l.merge)p=new En(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const x=op(e,T,t);if(!c.contains(x))throw new we(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);j_(w,x)||w.push(x)}p=new En(w),y=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=c.fieldTransforms;return new GC(new cn(f),p,y)}class bh extends Ah{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}function qC(r,e,t){return new Ph({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tm extends Ah{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=qC(this,e,!0),i=this.vc.map((l=>Yl(l,t))),o=new la(i);return new Dx(e.path,o)}isEqual(e){return e instanceof tm&&Ji(this.vc,e.vc)}}function KC(r,e,t,i){const o=r.Cc(1,e,t);nm("Data must be an object, but it was:",o,i);const l=[],c=cn.empty();as(i,((p,y)=>{const w=rm(e,p,t);y=Jt(y);const T=o.yc(w);if(y instanceof bh)l.push(w);else{const x=Yl(y,T);x!=null&&(l.push(w),c.set(w,x))}}));const f=new En(l);return new O_(c,f,o.fieldTransforms)}function QC(r,e,t,i,o,l){const c=r.Cc(1,e,t),f=[op(e,i,t)],p=[o];if(l.length%2!=0)throw new we(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(op(e,l[x])),p.push(l[x+1]);const y=[],w=cn.empty();for(let x=f.length-1;x>=0;--x)if(!j_(y,f[x])){const V=f[x];let H=p[x];H=Jt(H);const W=c.yc(V);if(H instanceof bh)y.push(V);else{const G=Yl(H,W);G!=null&&(y.push(V),w.set(V,G))}}const T=new En(y);return new O_(w,T,c.fieldTransforms)}function Yl(r,e){if(F_(r=Jt(r)))return nm("Unsupported field value:",e,r),L_(r,e);if(r instanceof Ah)return(function(i,o){if(!M_(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const f of i){let p=Yl(f,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bx(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=it.fromDate(i);return{timestampValue:Xc(o.serializer,l)}}if(i instanceof it){const l=new it(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xc(o.serializer,l)}}if(i instanceof _r)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Nn)return{bytesValue:r_(o.serializer,i._byteString)};if(i instanceof St){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Er)return(function(c,f){return{mapValue:{fields:{[Nw]:{stringValue:Dw},[Gc]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Vp(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Pp(i)}`)})(r,e)}function L_(r,e){const t={};return kw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(r,((i,o)=>{const l=Yl(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function F_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof it||r instanceof _r||r instanceof Nn||r instanceof St||r instanceof Ah||r instanceof Er)}function nm(r,e,t){if(!F_(t)||!Sw(t)){const i=Pp(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function op(r,e,t){if((e=Jt(e))instanceof Ch)return e._internalPath;if(typeof e=="string")return rm(r,e);throw eh("Field path arguments must be of type string or ",r,!1,void 0,t)}const XC=new RegExp("[~\\*/\\[\\]]");function rm(r,e,t){if(e.search(XC)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Ch(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function eh(r,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new we(J.INVALID_ARGUMENT,f+r+p)}function j_(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(z_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class YC extends U_{data(){return super.data()}}function z_(r,e){return typeof e=="string"?rm(r,e):e instanceof Ch?e._internalPath:e._delegate._internalPath}class JC{convertValue(e,t="none"){switch(rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return as(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[Gc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>mt(c.doubleValue)));return new Er(t)}convertGeoPoint(e){return new _r(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=gh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Vl(e));default:return null}}convertTimestamp(e){const t=ts(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=rt.fromString(e);Qe(u_(i),9688,{name:e});const o=new Ll(i.get(1),i.get(3)),l=new _e(i.popFirst(5));return o.isEqual(t)||Jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class xl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hs extends U_{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(z_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:It("string",Hs._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class Dc extends Hs{data(e={}){return super.data(e)}}class Rl{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new xl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Dc(this._firestore,this._userDataWriter,i.key,i,new xl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new Dc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new xl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Dc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new xl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),w=c.indexOf(f.doc.key)),{type:ZC(f.type),doc:p,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r){r=Zi(r,St);const e=Zi(r.firestore,Xl);return jC(D_(e),r._key).then((t=>nA(e,r,t)))}Rl._jsonSchemaVersion="firestore/querySnapshot/1.0",Rl._jsonSchema={type:It("string",Rl._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class eA extends JC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function ap(r,e,t){r=Zi(r,St);const i=Zi(r.firestore,Xl),o=B_(r.converter,e);return im(i,[V_(em(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Kn.none())])}function os(r,e,t,...i){r=Zi(r,St);const o=Zi(r.firestore,Xl),l=em(o);let c;return c=typeof(e=Jt(e))=="string"||e instanceof Ch?QC(l,"updateDoc",r._key,e,t,i):KC(l,"updateDoc",r._key,e),im(o,[c.toMutation(r._key,Kn.exists(!0))])}function tA(r,e){const t=Zi(r.firestore,Xl),i=Tn(r),o=B_(r.converter,e);return im(t,[V_(em(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Kn.exists(!1))]).then((()=>i))}function im(r,e){return(function(i,o){const l=new Qi;return i.asyncQueue.enqueueAndForget((async()=>xC(await LC(i),o,l))),l.promise})(D_(r),e)}function nA(r,e,t){const i=t.docs.get(e._key),o=new eA(r);return new Hs(r,o,e._key,i,new xl(t.hasPendingWrites,t.fromCache),e.converter)}function lp(...r){return new tm("arrayUnion",r)}(function(e,t=!0){(function(o){ga=o})(ma),ra(new qs("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Xl(new zS(i.getProvider("auth-internal")),new HS(c,i.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new we(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(y.options.projectId,w)})(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),qi(av,lv,e),qi(av,lv,"esm2020")})();const rA={apiKey:"AIzaSyDhrI1HLd0EAxADVSlMutaBx4C_ImS8CYY",authDomain:"web-gallery-16ddc.firebaseapp.com",projectId:"web-gallery-16ddc",storageBucket:"web-gallery-16ddc.firebasestorage.app",messagingSenderId:"946670463872",appId:"1:946670463872:web:d64e24e38859e94598af65"},iA=hw(rA),In=BC(iA),Dn="gallery",On="metadata",Gs="photo_chunks",sA="deleted_photos",oA=500,aA=async()=>{const r=Tn(In,Dn,On),e=await ei(r);if(!e.exists())return await ap(r,{albums:[],photoChunkIds:[]}),{photos:[],albums:[]};const t=e.data(),i=t.albums||[],o=t.photoChunkIds||[];if(o.length===0)return{photos:[],albums:i};const l=o.map(async p=>{const y=Tn(In,Dn,On,Gs,p),w=await ei(y);return w.exists()?(w.data().data||[]).map(x=>({...x,_chunkId:p})):[]});return{photos:(await Promise.all(l)).flat(),albums:i}},lA=async r=>{const e=Tn(In,Dn,On);let i=(await ei(e)).data();i||(i={albums:[],photoChunkIds:[]},await ap(e,i));let o=i.photoChunkIds||[],l=o.length>0?o[o.length-1]:null,c=!1;if(!l)c=!0;else{const f=Tn(In,Dn,On,Gs,l),p=await ei(f);p.exists()?(p.data().data||[]).length>=oA&&(c=!0):c=!0}if(c){l=`chunk_${Date.now()}`;const f=Tn(In,Dn,On,Gs,l);await ap(f,{data:[r]}),await os(e,{photoChunkIds:lp(l)})}else{const f=Tn(In,Dn,On,Gs,l);await os(f,{data:lp(r)})}return l},uA=async(r,e,t)=>{const i=Tn(In,Dn,On,Gs,e),o=await ei(i);if(o.exists()){const l=o.data().data,c=l.findIndex(f=>f.id===r);if(c>-1){const f=[...l];f[c]={...f[c],...t},await os(i,{data:f})}else throw new Error(`Photo with id ${r} not found in chunk ${e}.`)}},cA=async(r,e)=>{const t=Tn(In,Dn,On,Gs,e),i=await ei(t);if(!i.exists())throw new Error("Chunk not found");const o=i.data().data;if(!o.find(f=>f.id===r))throw new Error("Photo not found");const c=o.filter(f=>f.id!==r);return await os(t,{data:c}),{deletedAlbumId:void 0}},hA=async(r,e)=>{const t={};r.forEach(({photoId:o,chunkId:l})=>{t[l]||(t[l]=[]),t[l].push(o)});const i=Object.entries(t).map(async([o,l])=>{const c=Tn(In,Dn,On,Gs,o),f=await ei(c);if(f.exists()){const y=f.data().data.map(w=>l.includes(w.id)?{...w,albumId:e}:w);await os(c,{data:y})}});await Promise.all(i)},dA=async r=>{const e=Tn(In,Dn,On);await os(e,{albums:lp(r)})},n0=async(r,e)=>{const t=Tn(In,Dn,On),i=await ei(t);if(i.exists()){const o=i.data(),l=o.albums.findIndex(c=>c.id===r);if(l>-1){const c=[...o.albums];c[l]={...c[l],...e},await os(t,{albums:c})}}},r0=async r=>{const e=Tn(In,Dn,On),t=await ei(e);if(t.exists()){const o=t.data().albums.filter(l=>l.id!==r);await os(e,{albums:o})}},fA=async r=>{await tA(zC(In,sA),{photoId:r.id,url:r.url,deletedAt:new Date().toISOString(),albumId:r.albumId})},ha=(r,e=600)=>{if(!r.includes("cloudinary.com"))return r;if(r.includes("/upload/f_auto,q_auto"))return r.replace(/w_\d+/,`w_${e}`);const t=r.split("/upload/");return t.length!==2?r:`${t[0]}/upload/f_auto,q_auto,w_${e}/${t[1]}`},pA=async r=>{var o;const e="deheni3we",t="gallery_preset",i=new FormData;i.append("file",r),i.append("upload_preset",t);try{const l=await fetch(`https://api.cloudinary.com/v1_1/${e}/image/upload`,{method:"POST",body:i});if(!l.ok){const f=await l.json();throw console.error("Cloudinary upload error details:",f),new Error(`Upload failed: ${((o=f.error)==null?void 0:o.message)||l.statusText}`)}return(await l.json()).secure_url}catch(l){throw console.error("Cloudinary upload exception:",l),l}};var Rh=typeof self<"u"?self:global;const Ul=typeof navigator<"u",mA=Ul&&typeof HTMLImageElement>"u",th=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Nh=Rh.Buffer,Tc=Rh.BigInt,Dh=!!Nh,gA=r=>r;function nh(r,e=gA){if(th)try{return typeof require=="function"?Promise.resolve(e(require(r))):import(r).then(e)}catch{console.warn(`Couldn't load ${r}`)}}let sm=Rh.fetch;const yA=r=>sm=r;if(!Rh.fetch){const r=nh("http",(i=>i)),e=nh("https",(i=>i)),t=(i,{headers:o}={})=>new Promise((async(l,c)=>{let{port:f,hostname:p,pathname:y,protocol:w,search:T}=new URL(i);const x={method:"GET",hostname:p,path:encodeURI(y)+T,headers:o};f!==""&&(x.port=Number(f));const V=(w==="https:"?await e:await r).request(x,(H=>{if(H.statusCode===301||H.statusCode===302){let W=new URL(H.headers.location,i).toString();return t(W,{headers:o}).then(l).catch(c)}l({status:H.statusCode,arrayBuffer:()=>new Promise((W=>{let G=[];H.on("data",(ae=>G.push(ae))),H.on("end",(()=>W(Buffer.concat(G))))}))})}));V.on("error",c),V.end()}));yA(t)}function xe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const rh=r=>$_(r)?void 0:r,vA=r=>r!==void 0;function $_(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(vA).length===0)}function xt(r){let e=new Error(r);throw delete e.stack,e}function Us(r){return(r=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(r).trim())===""?void 0:r}function up(r){let e=(function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048})(r);return r.jfif.enabled&&(e+=50),r.xmp.enabled&&(e+=2e4),r.iptc.enabled&&(e+=14e3),r.icc.enabled&&(e+=6e3),e}const cp=r=>String.fromCharCode.apply(null,r),i0=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function H_(r){return i0?i0.decode(r):Dh?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(cp(r)))}class hn{static from(e,t){return e instanceof this&&e.le===t?e:new hn(e,void 0,void 0,t)}constructor(e,t=0,i,o){if(typeof o=="boolean"&&(this.le=o),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let l=new DataView(e,t,i);this._swapDataView(l)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof hn){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&xt("Creating view outside of available memory in ArrayBuffer");let l=new DataView(e.buffer,t,i);this._swapDataView(l)}else if(typeof e=="number"){let l=new DataView(new ArrayBuffer(e));this._swapDataView(l)}else xt("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=hn){return e instanceof DataView||e instanceof hn?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||xt("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new hn(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return H_(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return cp(i)}getUnicodeString(e=0,t=this.byteLength){const i=[];for(let o=0;o<t&&e+o<this.byteLength;o+=2)i.push(this.getUint16(e+o));return cp(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function hp(r,e){xt(`${r} '${e}' was not loaded, try using full build of exifr.`)}class om extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||hp(this.kind,e),t&&(e in t||(function(i,o){xt(`Unknown ${i} '${o}'.`)})(this.kind,e),t[e].enabled||hp(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var xr=new om("file parser"),Tt=new om("segment parser"),Cr=new om("file reader");function wA(r,e){return typeof r=="string"?s0(r,e):Ul&&!mA&&r instanceof HTMLImageElement?s0(r.src,e):r instanceof Uint8Array||r instanceof ArrayBuffer||r instanceof DataView?new hn(r):Ul&&r instanceof Blob?dp(r,e,"blob",Ys):void xt("Invalid input argument")}function s0(r,e){return(t=r).startsWith("data:")||t.length>1e4?fp(r,e,"base64"):th&&r.includes("://")?dp(r,e,"url",Xs):th?fp(r,e,"fs"):Ul?dp(r,e,"url",Xs):void xt("Invalid input argument");var t}async function dp(r,e,t,i){return Cr.has(t)?fp(r,e,t):i?(async function(o,l){let c=await l(o);return new hn(c)})(r,i):void xt(`Parser ${t} is not loaded`)}async function fp(r,e,t){let i=new(Cr.get(t))(r,e);return await i.read(),i}const Xs=r=>sm(r).then((e=>e.arrayBuffer())),Ys=r=>new Promise(((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(r)}));class _A extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function gt(r,e,t){let i=new _A;for(let[o,l]of t)i.set(o,l);if(Array.isArray(e))for(let o of e)r.set(o,i);else r.set(e,i);return i}function Js(r,e,t){let i,o=r.get(e);for(i of t)o.set(i[0],i[1])}const Mt=new Map,Xn=new Map,Yi=new Map,Ui=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],_a=["jfif","xmp","icc","iptc","ihdr"],Zs=["tiff",..._a],ht=["ifd0","ifd1","exif","gps","interop"],zi=[...Zs,...ht],Bi=["makerNote","userComment"],Ea=["translateKeys","translateValues","reviveValues","multiSegment"],$i=[...Ea,"sanitize","mergeOutput","silentErrors"];class G_{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class wl extends G_{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,o){if(super(),xe(this,"enabled",!1),xe(this,"skip",new Set),xe(this,"pick",new Set),xe(this,"deps",new Set),xe(this,"translateKeys",!1),xe(this,"translateValues",!1),xe(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(o),this.canBeFiltered=ht.includes(e),this.canBeFiltered&&(this.dict=Mt.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:l,skip:c}=i;l&&l.length>0&&this.translateTagSet(l,this.pick),c&&c.length>0&&this.translateTagSet(c,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:xt(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of Ea)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,o,{tagKeys:l,tagValues:c}=this.dict;for(i of e)typeof i=="string"?(o=c.indexOf(i),o===-1&&(o=l.indexOf(Number(i))),o!==-1&&t.add(Number(l[o]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ih(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ih(this.pick,this.deps)}}var tn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},o0=new Map;class ro extends G_{static useCached(e){let t=o0.get(e);return t!==void 0||(t=new this(e),o0.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):xt(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Ul?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Ui)this[e]=tn[e];for(e of $i)this[e]=tn[e];for(e of Bi)this[e]=tn[e];for(e of zi)this[e]=new wl(e,tn[e],void 0,this)}setupFromTrue(){let e;for(e of Ui)this[e]=tn[e];for(e of $i)this[e]=tn[e];for(e of Bi)this[e]=!0;for(e of zi)this[e]=new wl(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Ui)this[t]=tn[t];for(t of $i)this[t]=tn[t];for(t of Bi)this[t]=tn[t];for(t of zi)this[t]=new wl(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,ht)}setupFromObject(e){let t;for(t of(ht.ifd0=ht.ifd0||ht.image,ht.ifd1=ht.ifd1||ht.thumbnail,Object.assign(this,e),Ui))this[t]=xf(e[t],tn[t]);for(t of $i)this[t]=xf(e[t],tn[t]);for(t of Bi)this[t]=xf(e[t],tn[t]);for(t of Zs)this[t]=new wl(t,tn[t],e[t],this);for(t of ht)this[t]=new wl(t,tn[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ht,zi),e.tiff===!0?this.batchEnableWithBool(ht,!0):e.tiff===!1?this.batchEnableWithUserValue(ht,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ht):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ht)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let o=t[i];this[i].enabled=o!==!1&&o!==void 0}}setupGlobalFilters(e,t,i,o=i){if(e&&e.length){for(let c of o)this[c].enabled=!1;let l=a0(e,i);for(let[c,f]of l)ih(this[c].pick,f),this[c].enabled=!0}else if(t&&t.length){let l=a0(t,i);for(let[c,f]of l)ih(this[c].skip,f)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:o,icc:l}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),o.enabled||e.skip.add(33723),l.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:o}=this;o.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=ht.some((l=>this[l].enabled===!0))||this.makerNote||this.userComment;for(let l of ht)this[l].finalizeFilters()}get onlyTiff(){return!_a.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Zs)this[e].enabled&&!Tt.has(e)&&hp("segment parser",e)}}function a0(r,e){let t,i,o,l,c=[];for(o of e){for(l of(t=Mt.get(o),i=[],t))(r.includes(l[0])||r.includes(l[1]))&&i.push(l[0]);i.length&&c.push([o,i])}return c}function xf(r,e){return r!==void 0?r:e!==void 0?e:void 0}function ih(r,e){for(let t of e)r.add(t)}xe(ro,"default",tn);class us{constructor(e){xe(this,"parsers",{}),xe(this,"output",{}),xe(this,"errors",[]),xe(this,"pushToErrors",(t=>this.errors.push(t))),this.options=ro.useCached(e)}async read(e){this.file=await wA(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,o]of xr)if(o.canHandle(e,t))return this.fileParser=new o(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),xt("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),rh(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async i=>{let o=await i.parse();i.assignToOutput(e,o)}));this.options.silentErrors&&(t=t.map((i=>i.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,i=Tt.get("tiff",e);var o;if(t.tiff?o={start:0,type:"tiff"}:t.jpeg&&(o=await this.fileParser.getOrFindSegment("tiff")),o===void 0)return;let l=await this.fileParser.ensureSegmentChunk(o),c=this.parsers.tiff=new i(l,e,t),f=await c.extractThumbnail();return t.close&&t.close(),f}}async function Oh(r,e){let t=new us(e);return await t.read(r),t.parse()}var EA=Object.freeze({__proto__:null,parse:Oh,Exifr:us,fileParsers:xr,segmentParsers:Tt,fileReaders:Cr,tagKeys:Mt,tagValues:Xn,tagRevivers:Yi,createDictionary:gt,extendDictionary:Js,fetchUrlAsArrayBuffer:Xs,readBlobAsArrayBuffer:Ys,chunkedProps:Ui,otherSegments:_a,segments:Zs,tiffBlocks:ht,segmentsAndBlocks:zi,tiffExtractables:Bi,inheritables:Ea,allFormatters:$i,Options:ro});class Mh{constructor(e,t,i){xe(this,"errors",[]),xe(this,"ensureSegmentChunk",(async o=>{let l=o.start,c=o.size||65536;if(this.file.chunked)if(this.file.available(l,c))o.chunk=this.file.subarray(l,c);else try{o.chunk=await this.file.readChunk(l,c)}catch(f){xt(`Couldn't read segment: ${JSON.stringify(o)}. ${f.message}`)}else this.file.byteLength>l+c?o.chunk=this.file.subarray(l,c):o.size===void 0?o.chunk=this.file.subarray(l):xt("Segment unreachable: "+JSON.stringify(o));return o.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(Tt.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:o}=t,l=this.options[i];if(l&&l.enabled){let c=this.parsers[i];c&&c.append||c||this.createParser(i,o)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class Wn{static findPosition(e,t){let i=e.getUint16(t+2)+2,o=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,l=t+o,c=i-o;return{offset:t,length:i,headerLength:o,start:l,size:c,end:l+c}}static parse(e,t={}){return new this(e,new ro({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof hn?e:new hn(e)}constructor(e,t={},i){xe(this,"errors",[]),xe(this,"raw",new Map),xe(this,"handleError",(o=>{if(!this.options.silentErrors)throw o;this.errors.push(o.message)})),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=Yi.get(t),o=Xn.get(t),l=Mt.get(t),c=this.options[t],f=c.reviveValues&&!!i,p=c.translateValues&&!!o,y=c.translateKeys&&!!l,w={};for(let[T,x]of e)f&&i.has(T)?x=i.get(T)(x):p&&o.has(T)&&(x=this.translateValue(x,o.get(T))),y&&l.has(T)&&(T=l.get(T)||T),w[T]=x;return w}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}}xe(Wn,"headerLength",4),xe(Wn,"type",void 0),xe(Wn,"multiSegment",!1),xe(Wn,"canHandle",(()=>!1));function TA(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function IA(r){return r>=224&&r<=239}function SA(r,e,t){for(let[i,o]of Tt)if(o.canHandle(r,e,t))return i}class l0 extends Mh{constructor(...e){super(...e),xe(this,"appSegments",[]),xe(this,"jpegSegments",[]),xe(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Tt.keyList())):(e=e===void 0?Tt.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&Tt.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:i,findAll:o,wanted:l,remaining:c}=this;if(!o&&this.file.chunked&&(o=Array.from(l).some((f=>{let p=Tt.get(f),y=this.options[f];return p.multiSegment&&y.multiSegment})),o&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let f=!1;for(;c.size>0&&!f&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:p}=i,y=this.appSegments.some((w=>!this.file.available(w.offset||w.start,w.length||w.size)));if(f=e>p&&!y?!await i.readNextChunk(e):!await i.readNextChunk(p),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let i,o,l,c,f,p,{file:y,findAll:w,wanted:T,remaining:x,options:V}=this;for(;e<t;e++)if(y.getUint8(e)===255){if(i=y.getUint8(e+1),IA(i)){if(o=y.getUint16(e+2),l=SA(y,e,o),l&&T.has(l)&&(c=Tt.get(l),f=c.findPosition(y,e),p=V[l],f.type=l,this.appSegments.push(f),!w&&(c.multiSegment&&p.multiSegment?(this.unfinishedMultiSegment=f.chunkNumber<f.chunkCount,this.unfinishedMultiSegment||x.delete(l)):x.delete(l),x.size===0)))break;V.recordUnknownSegments&&(f=Wn.findPosition(y,e),f.marker=i,this.unknownSegments.push(f)),e+=o+1}else if(TA(i)){if(o=y.getUint16(e+2),i===218&&V.stopAfterSos!==!1)return;V.recordJpegSegments&&this.jpegSegments.push({offset:e,length:o,marker:i}),e+=o+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,i){let o,l,c,f=new Map;for(let p=0;p<t.length;p++)o=t[p],l=o[i],f.has(l)?c=f.get(l):f.set(l,c=[]),c.push(o);return Array.from(f)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,i])=>{let o=Tt.get(t,this.options);return o.handleMultiSegments?{type:t,chunk:o.handleMultiSegments(i)}:i[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}xe(l0,"type","jpeg"),xr.set("jpeg",l0);const xA=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class kA extends Wn{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:o,skip:l}=this.options[t];o=new Set(o);let c=o.size>0,f=l.size===0,p=this.chunk.getUint16(e);e+=2;for(let y=0;y<p;y++){let w=this.chunk.getUint16(e);if(c){if(o.has(w)&&(i.set(w,this.parseTag(e,w,t)),o.delete(w),o.size===0))break}else!f&&l.has(w)||i.set(w,this.parseTag(e,w,t));e+=12}return i}parseTag(e,t,i){let{chunk:o}=this,l=o.getUint16(e+2),c=o.getUint32(e+4),f=xA[l];if(f*c<=4?e+=8:e=o.getUint32(e+8),(l<1||l>13)&&xt(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${l}, offset ${e}`),e>o.byteLength&&xt(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${l}, offset ${e} is outside of chunk size ${o.byteLength}`),l===1)return o.getUint8Array(e,c);if(l===2)return Us(o.getString(e,c));if(l===7)return o.getUint8Array(e,c);if(c===1)return this.parseTagValue(l,e);{let p=new((function(w){switch(w){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(l))(c),y=f;for(let w=0;w<c;w++)p[w]=this.parseTagValue(l,e),e+=y;return p}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:xt(`Invalid tiff type ${e}`)}}}class kf extends kA{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&xt("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&xt(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,up(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,up(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",u0(...e.get(2),e.get(1))),e.set("longitude",u0(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,o={};for(t of ht)if(e=this[t],!$_(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(o,i)}else o[t]=i;return this.makerNote&&(o.makerNote=this.makerNote),this.userComment&&(o.userComment=this.userComment),o}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,o]of Object.entries(t))this.assignObjectToOutput(e,i,o)}}function u0(r,e,t,i){var o=r+e/60+t/3600;return i!=="S"&&i!=="W"||(o*=-1),o}xe(kf,"type","tiff"),xe(kf,"headerLength",10),Tt.set("tiff",kf);var CA=Object.freeze({__proto__:null,default:EA,Exifr:us,fileParsers:xr,segmentParsers:Tt,fileReaders:Cr,tagKeys:Mt,tagValues:Xn,tagRevivers:Yi,createDictionary:gt,extendDictionary:Js,fetchUrlAsArrayBuffer:Xs,readBlobAsArrayBuffer:Ys,chunkedProps:Ui,otherSegments:_a,segments:Zs,tiffBlocks:ht,segmentsAndBlocks:zi,tiffExtractables:Bi,inheritables:Ea,allFormatters:$i,Options:ro,parse:Oh});const am={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},lm=Object.assign({},am,{firstChunkSize:4e4,gps:[1,2,3,4]});async function W_(r){let e=new us(lm);await e.read(r);let t=await e.parse();if(t&&t.gps){let{latitude:i,longitude:o}=t.gps;return{latitude:i,longitude:o}}}const um=Object.assign({},am,{tiff:!1,ifd1:!0,mergeOutput:!1});async function q_(r){let e=new us(um);await e.read(r);let t=await e.extractThumbnail();return t&&Dh?Nh.from(t):t}async function K_(r){let e=await this.thumbnail(r);if(e!==void 0){let t=new Blob([e]);return URL.createObjectURL(t)}}const cm=Object.assign({},am,{firstChunkSize:4e4,ifd0:[274]});async function hm(r){let e=new us(cm);await e.read(r);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const dm=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let zs=!0,Bs=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let e=r.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;zs=Number(t)+.1*Number(i)<13.4,Bs=!1}}else if(r.includes("OS X 10")){let[,e]=r.match(/OS X 10[_.](\d+)/);zs=Bs=Number(e)<15}if(r.includes("Chrome/")){let[,e]=r.match(/Chrome\/(\d+)/);zs=Bs=Number(e)<81}else if(r.includes("Firefox/")){let[,e]=r.match(/Firefox\/(\d+)/);zs=Bs=Number(e)<77}}async function Q_(r){let e=await hm(r);return Object.assign({canvas:zs,css:Bs},dm[e])}class AA extends hn{constructor(...e){super(...e),xe(this,"ranges",new PA),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let o=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(o)}else{let o=e+t;if(o>this.byteLength){let{dataView:l}=this._extend(o);this._swapDataView(l)}}}_extend(e){let t;t=Dh?Nh.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let o=super.set(e,t);return this.ranges.add(t,o.byteLength),o}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class PA{constructor(){xe(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let o=e+t,l=this.list.filter((c=>c0(e,c.offset,o)||c0(e,c.end,o)));if(l.length>0){e=Math.min(e,...l.map((f=>f.offset))),o=Math.max(o,...l.map((f=>f.end))),t=o-e;let c=l.shift();c.offset=e,c.length=t,c.end=o,this.list=this.list.filter((f=>!l.includes(f)))}else this.list.push({offset:e,length:t,end:o})}available(e,t){let i=e+t;return this.list.some((o=>o.offset<=e&&i<=o.end))}}function c0(r,e,t){return r<=e&&e<=t}class Vh extends AA{constructor(e,t){super(0),xe(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=await this.readChunk(e,t);return!!i&&i.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Cr.set("blob",class extends Vh{async readWhole(){this.chunked=!1;let r=await Ys(this.input);this._swapArrayBuffer(r)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(r,e){let t=e?r+e:void 0,i=this.input.slice(r,t),o=await Ys(i);return this.set(o,r,!0)}});var bA=Object.freeze({__proto__:null,default:CA,Exifr:us,fileParsers:xr,segmentParsers:Tt,fileReaders:Cr,tagKeys:Mt,tagValues:Xn,tagRevivers:Yi,createDictionary:gt,extendDictionary:Js,fetchUrlAsArrayBuffer:Xs,readBlobAsArrayBuffer:Ys,chunkedProps:Ui,otherSegments:_a,segments:Zs,tiffBlocks:ht,segmentsAndBlocks:zi,tiffExtractables:Bi,inheritables:Ea,allFormatters:$i,Options:ro,parse:Oh,gpsOnlyOptions:lm,gps:W_,thumbnailOnlyOptions:um,thumbnail:q_,thumbnailUrl:K_,orientationOnlyOptions:cm,orientation:hm,rotations:dm,get rotateCanvas(){return zs},get rotateCss(){return Bs},rotation:Q_});Cr.set("url",class extends Vh{async readWhole(){this.chunked=!1;let r=await Xs(this.input);r instanceof ArrayBuffer?this._swapArrayBuffer(r):r instanceof Uint8Array&&this._swapBuffer(r)}async _readChunk(r,e){let t=e?r+e-1:void 0,i=this.options.httpHeaders||{};(r||t)&&(i.range=`bytes=${[r,t].join("-")}`);let o=await sm(this.input,{headers:i}),l=await o.arrayBuffer(),c=l.byteLength;if(o.status!==416)return c!==e&&(this.size=r+c),this.set(l,r,!0)}});hn.prototype.getUint64=function(r){let e=this.getUint32(r),t=this.getUint32(r+4);return e<1048575?e<<32|t:typeof Tc!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Tc(e)<<Tc(32)|Tc(t)):void xt("Trying to read 64b value but JS can only handle 53b numbers.")};class RA extends Mh{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let i=this.parseBoxHead(e);if(t.push(i),i.length===0)break;e+=i.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((i=>i.kind===t))}parseBoxHead(e){let t=this.file.getUint32(e),i=this.file.getString(e+4,4),o=e+8;return t===1&&(t=this.file.getUint64(e+8),o+=8),{offset:e,length:t,kind:i,start:o}}parseBoxFullHead(e){if(e.version!==void 0)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class X_ extends RA{static canHandle(e,t){if(t!==0)return!1;let i=e.getUint16(2);if(i>50)return!1;let o=16,l=[];for(;o<i;)l.push(e.getString(o,4)),o+=4;return l.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;t.kind!=="meta";)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,i){await this.file.ensureChunk(t,i);let o=this.file.subarray(t,i);this.createParser(e,o)}async findIcc(e){let t=this.findBox(e,"iprp");if(t===void 0)return;let i=this.findBox(t,"ipco");if(i===void 0)return;let o=this.findBox(i,"colr");o!==void 0&&await this.registerSegment("icc",o.offset+12,o.length)}async findExif(e){let t=this.findBox(e,"iinf");if(t===void 0)return;let i=this.findBox(e,"iloc");if(i===void 0)return;let o=this.findExifLocIdInIinf(t),l=this.findExtentInIloc(i,o);if(l===void 0)return;let[c,f]=l;await this.file.ensureChunk(c,f);let p=4+this.file.getUint32(c);c+=p,f-=p,await this.registerSegment("tiff",c,f)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,i,o,l,c=e.start,f=this.file.getUint16(c);for(c+=2;f--;){if(t=this.parseBoxHead(c),this.parseBoxFullHead(t),i=t.start,t.version>=2&&(o=t.version===3?4:2,l=this.file.getString(i+o+2,4),l==="Exif"))return this.file.getUintBytes(i,o);c+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let i=e.start,[o,l]=this.get8bits(i++),[c,f]=this.get8bits(i++),p=e.version===2?4:2,y=e.version===1||e.version===2?2:0,w=f+o+l,T=e.version===2?4:2,x=this.file.getUintBytes(i,T);for(i+=T;x--;){let V=this.file.getUintBytes(i,p);i+=p+y+2+c;let H=this.file.getUint16(i);if(i+=2,V===t)return H>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(i+f,o),this.file.getUintBytes(i+f+o,l)];i+=H*w}}}class Y_ extends X_{}xe(Y_,"type","heic");class h0 extends X_{}xe(h0,"type","avif"),xr.set("heic",Y_),xr.set("avif",h0),gt(Mt,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),gt(Mt,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),gt(Mt,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),gt(Xn,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Nl=gt(Xn,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const d0={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Nl.set(37392,d0),Nl.set(41488,d0);const Cf={0:"Normal",1:"Low",2:"High"};function f0(r){return typeof r=="object"&&r.length!==void 0?r[0]:r}function p0(r){let e=Array.from(r).slice(1);return e[1]>15&&(e=e.map((t=>String.fromCharCode(t)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function Af(r){if(typeof r=="string"){var[e,t,i,o,l,c]=r.trim().split(/[-: ]/g).map(Number),f=new Date(e,t-1,i);return Number.isNaN(o)||Number.isNaN(l)||Number.isNaN(c)||(f.setHours(o),f.setMinutes(l),f.setSeconds(c)),Number.isNaN(+f)?r:f}}function _l(r){if(typeof r=="string")return r;let e=[];if(r[1]===0&&r[r.length-1]===0)for(let t=0;t<r.length;t+=2)e.push(m0(r[t+1],r[t]));else for(let t=0;t<r.length;t+=2)e.push(m0(r[t],r[t+1]));return Us(String.fromCodePoint(...e))}function m0(r,e){return r<<8|e}Nl.set(41992,Cf),Nl.set(41993,Cf),Nl.set(41994,Cf),gt(Yi,["ifd0","ifd1"],[[50827,function(r){return typeof r!="string"?H_(r):r}],[306,Af],[40091,_l],[40092,_l],[40093,_l],[40094,_l],[40095,_l]]),gt(Yi,"exif",[[40960,p0],[36864,p0],[36867,Af],[36868,Af],[40962,f0],[40963,f0]]),gt(Yi,"gps",[[0,r=>Array.from(r).join(".")],[7,r=>Array.from(r).join(":")]]);class Pf extends Wn{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1752462448&&e.getString(t+4,20)==="http://ns.adobe.com/"}static headerLength(e,t){return e.getString(t+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,t){let i=super.findPosition(e,t);return i.multiSegment=i.extended=i.headerLength===79,i.multiSegment?(i.chunkCount=e.getUint8(t+72),i.chunkNumber=e.getUint8(t+76),e.getUint8(t+77)!==0&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(e){return e.map((t=>t.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:hn.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(l){let c={},f={};for(let p of t1)c[p]=[],f[p]=0;return l.replace(MA,((p,y,w)=>{if(y==="<"){let T=++f[w];return c[w].push(T),`${p}#${T}`}return`${p}#${c[w].pop()}`}))})(e);let t=Zo.findAll(e,"rdf","Description");t.length===0&&t.push(new Zo("rdf","Description",void 0,e));let i,o={};for(let l of t)for(let c of l.properties)i=OA(c.ns,o),J_(c,i);return(function(l){let c;for(let f in l)c=l[f]=rh(l[f]),c===void 0&&delete l[f];return rh(l)})(o)}assignToOutput(e,t){if(this.localOptions.parse)for(let[i,o]of Object.entries(t))switch(i){case"tiff":this.assignObjectToOutput(e,"ifd0",o);break;case"exif":this.assignObjectToOutput(e,"exif",o);break;case"xmlns":break;default:this.assignObjectToOutput(e,i,o)}else e.xmp=t}}xe(Pf,"type","xmp"),xe(Pf,"multiSegment",!0),Tt.set("xmp",Pf);class sh{static findAll(e){return Z_(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(sh.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],o=e[3].slice(1,-1);return o=e1(o),new sh(t,i,o)}constructor(e,t,i){this.ns=e,this.name=t,this.value=i}serialize(){return this.value}}class Zo{static findAll(e,t,i){if(t!==void 0||i!==void 0){t=t||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var o=new RegExp(`<(${t}):(${i})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else o=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Z_(e,o).map(Zo.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],o=e[4],l=e[8];return new Zo(t,i,o,l)}constructor(e,t,i,o){this.ns=e,this.name=t,this.attrString=i,this.innerXml=o,this.attrs=sh.findAll(i),this.children=Zo.findAll(o),this.value=this.children.length===0?e1(o):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return e==="rdf"&&(t==="Seq"||t==="Bag"||t==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return DA(this.children.map(NA));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let t of this.properties)J_(t,e);return this.value!==void 0&&(e.value=this.value),rh(e)}}function J_(r,e){let t=r.serialize();t!==void 0&&(e[r.name]=t)}var NA=r=>r.serialize(),DA=r=>r.length===1?r[0]:r,OA=(r,e)=>e[r]?e[r]:e[r]={};function Z_(r,e){let t,i=[];if(!r)return i;for(;(t=e.exec(r))!==null;)i.push(t);return i}function e1(r){if((function(i){return i==null||i==="null"||i==="undefined"||i===""||i.trim()===""})(r))return;let e=Number(r);if(!Number.isNaN(e))return e;let t=r.toLowerCase();return t==="true"||t!=="false"&&r.trim()}const t1=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],MA=new RegExp(`(<|\\/)(${t1.join("|")})`,"g");var n1=Object.freeze({__proto__:null,default:bA,Exifr:us,fileParsers:xr,segmentParsers:Tt,fileReaders:Cr,tagKeys:Mt,tagValues:Xn,tagRevivers:Yi,createDictionary:gt,extendDictionary:Js,fetchUrlAsArrayBuffer:Xs,readBlobAsArrayBuffer:Ys,chunkedProps:Ui,otherSegments:_a,segments:Zs,tiffBlocks:ht,segmentsAndBlocks:zi,tiffExtractables:Bi,inheritables:Ea,allFormatters:$i,Options:ro,parse:Oh,gpsOnlyOptions:lm,gps:W_,thumbnailOnlyOptions:um,thumbnail:q_,thumbnailUrl:K_,orientationOnlyOptions:cm,orientation:hm,rotations:dm,get rotateCanvas(){return zs},get rotateCss(){return Bs},rotation:Q_});let g0=nh("fs",(r=>r.promises));Cr.set("fs",class extends Vh{async readWhole(){this.chunked=!1,this.fs=await g0;let r=await this.fs.readFile(this.input);this._swapBuffer(r)}async readChunked(){this.chunked=!0,this.fs=await g0,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(r,e){this.fh===void 0&&await this.open(),r+e>this.size&&(e=this.size-r);var t=this.subarray(r,e,!0);return await this.fh.read(t.dataView,0,e,r),t}async close(){if(this.fh){let r=this.fh;this.fh=void 0,await r.close()}}});Cr.set("base64",class extends Vh{constructor(...r){super(...r),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(r,e){let t,i,o=this.input;r===void 0?(r=0,t=0,i=0):(t=4*Math.floor(r/3),i=r-t/4*3),e===void 0&&(e=this.size);let l=r+e,c=t+4*Math.ceil(l/3);o=o.slice(t,c);let f=Math.min(e,this.size-r);if(Dh){let p=Nh.from(o,"base64").slice(i,i+f);return this.set(p,r,!0)}{let p=this.subarray(r,f,!0),y=atob(o),w=p.toUint8();for(let T=0;T<f;T++)w[T]=y.charCodeAt(i+T);return p}}});class y0 extends Mh{static canHandle(e,t){return t===18761||t===19789}extendOptions(e){let{ifd0:t,xmp:i,iptc:o,icc:l}=e;i.enabled&&t.deps.add(700),o.enabled&&t.deps.add(33723),l.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:i,icc:o}=this.options;if(e.enabled||t.enabled||i.enabled||o.enabled){let l=Math.max(up(this.options),this.options.chunkSize);await this.file.ensureChunk(0,l),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}xe(y0,"type","tiff"),xr.set("tiff",y0);let VA=nh("zlib");const LA=["ihdr","iccp","text","itxt","exif"];class v0 extends Mh{constructor(...e){super(...e),xe(this,"catchError",(t=>this.errors.push(t))),xe(this,"metaChunks",[]),xe(this,"unknownChunks",[])}static canHandle(e,t){return t===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:i}=this;for(;e<t;){let o=i.getUint32(e),l=i.getUint32(e+4),c=i.getString(e+4,4).toLowerCase(),f=o+4+4+4,p={type:c,offset:e,length:f,start:e+4+4,size:o,marker:l};LA.includes(c)?this.metaChunks.push(p):this.unknownChunks.push(p),e+=f}}parseTextChunks(){let e=this.metaChunks.filter((t=>t.type==="text"));for(let t of e){let[i,o]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(i,o)}}injectKeyValToIhdr(e,t){let i=this.parsers.ihdr;i&&i.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find((t=>t.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((t=>t.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((t=>t.type==="itxt"));for(let t of e)t.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find((f=>f.type==="iccp"));if(!e)return;let{chunk:t}=e,i=t.getUint8Array(0,81),o=0;for(;o<80&&i[o]!==0;)o++;let l=o+2,c=t.getString(0,o);if(this.injectKeyValToIhdr("ProfileName",c),th){let f=await VA,p=t.getUint8Array(l);p=f.inflateSync(p),this.injectSegment("icc",p)}}}xe(v0,"type","png"),xr.set("png",v0),gt(Mt,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Js(Mt,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let w0=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Js(Mt,"ifd0",w0),Js(Mt,"exif",w0),gt(Xn,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class bf extends Wn{static canHandle(e,t){return e.getUint8(t+1)===224&&e.getUint32(t+4)===1246120262&&e.getUint8(t+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}xe(bf,"type","jfif"),xe(bf,"headerLength",9),Tt.set("jfif",bf),gt(Mt,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class _0 extends Wn{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}xe(_0,"type","ihdr"),Tt.set("ihdr",_0),gt(Mt,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),gt(Xn,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Oc extends Wn{static canHandle(e,t){return e.getUint8(t+1)===226&&e.getUint32(t+4)===1229144927}static findPosition(e,t){let i=super.findPosition(e,t);return i.chunkNumber=e.getUint8(t+16),i.chunkCount=e.getUint8(t+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(e){return(function(t){let i=(function(o){let l=o[0].constructor,c=0;for(let y of o)c+=y.length;let f=new l(c),p=0;for(let y of o)f.set(y,p),p+=y.length;return f})(t.map((o=>o.chunk.toUint8())));return new hn(i)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&xt("ICC header is too short");for(let[t,i]of Object.entries(FA)){t=parseInt(t,10);let o=i(this.chunk,t);o!=="\0\0\0\0"&&e.set(t,o)}}parseTags(){let e,t,i,o,l,{raw:c}=this,f=this.chunk.getUint32(128),p=132,y=this.chunk.byteLength;for(;f--;){if(e=this.chunk.getString(p,4),t=this.chunk.getUint32(p+4),i=this.chunk.getUint32(p+8),o=this.chunk.getString(t,4),t+i>y)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");l=this.parseTag(o,t,i),l!==void 0&&l!=="\0\0\0\0"&&c.set(e,l),p+=12}}parseTag(e,t,i){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,i);case"sig ":return this.parseSig(t)}if(!(t+i>this.chunk.byteLength))return this.chunk.getUint8Array(t,i)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return Us(this.chunk.getString(e+12,t))}parseText(e,t){return Us(this.chunk.getString(e+8,t-8))}parseSig(e){return Us(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,i=t.getUint32(e+8),o=t.getUint32(e+12),l=e+16,c=[];for(let f=0;f<i;f++){let p=t.getString(l+0,2),y=t.getString(l+2,2),w=t.getUint32(l+4),T=t.getUint32(l+8)+e,x=Us(t.getUnicodeString(T,w));c.push({lang:p,country:y,text:x}),l+=o}return i===1?c[0].text:c}translateValue(e,t){return typeof e=="string"?t[e]||t[e.toLowerCase()]||e:t[e]||e}}xe(Oc,"type","icc"),xe(Oc,"multiSegment",!0),xe(Oc,"headerLength",18);const FA={4:Wr,8:function(r,e){return[r.getUint8(e),r.getUint8(e+1)>>4,r.getUint8(e+1)%16].map((t=>t.toString(10))).join(".")},12:Wr,16:Wr,20:Wr,24:function(r,e){const t=r.getUint16(e),i=r.getUint16(e+2)-1,o=r.getUint16(e+4),l=r.getUint16(e+6),c=r.getUint16(e+8),f=r.getUint16(e+10);return new Date(Date.UTC(t,i,o,l,c,f))},36:Wr,40:Wr,48:Wr,52:Wr,64:(r,e)=>r.getUint32(e),80:Wr};function Wr(r,e){return Us(r.getString(e,4))}Tt.set("icc",Oc),gt(Mt,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Ic={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},E0={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};gt(Xn,"icc",[[4,Ic],[12,E0],[40,Object.assign({},Ic,E0)],[48,Ic],[80,Ic],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Sc extends Wn{static canHandle(e,t,i){return e.getUint8(t+1)===237&&e.getString(t+4,9)==="Photoshop"&&this.containsIptc8bim(e,t,i)!==void 0}static headerLength(e,t,i){let o,l=this.containsIptc8bim(e,t,i);if(l!==void 0)return o=e.getUint8(t+l+7),o%2!=0&&(o+=1),o===0&&(o=4),l+8+o}static containsIptc8bim(e,t,i){for(let o=0;o<i;o++)if(this.isIptcSegmentHead(e,t+o))return o}static isIptcSegmentHead(e,t){return e.getUint8(t)===56&&e.getUint32(t)===943868237&&e.getUint16(t+4)===1028}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,i=!1;for(let o=0;o<t;o++)if(this.chunk.getUint8(o)===28&&this.chunk.getUint8(o+1)===2){i=!0;let l=this.chunk.getUint16(o+3),c=this.chunk.getUint8(o+2),f=this.chunk.getLatin1String(o+5,l);e.set(c,this.pluralizeValue(e.get(c),f)),o+=4+l}else if(i)break;return this.translate(),this.output}pluralizeValue(e,t){return e!==void 0?e instanceof Array?(e.push(t),e):[e,t]:t}}xe(Sc,"type","iptc"),xe(Sc,"translateValues",!1),xe(Sc,"reviveValues",!1),Tt.set("iptc",Sc),gt(Mt,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),gt(Xn,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);async function r1(r,e){try{const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${r}&lon=${e}&zoom=10`,{headers:{"Accept-Language":"en","User-Agent":"GalleryApp/1.0"}});if(!t.ok)throw new Error("Geocoding failed");const o=(await t.json()).address,l=o.city||o.town||o.village||o.county||o.state,c=o.country;return l&&c?`${l}, ${c}`:l||c||void 0}catch(t){console.warn("Failed to get city name:",t);return}}const ri=()=>{const[r,e]=Y.useState([]),[t,i]=Y.useState([]),[o,l]=Y.useState(!0),[c,f]=Y.useState(null),p=Y.useCallback(async()=>{try{l(!0);const{photos:U,albums:q}=await aA();e(U.sort((ne,Q)=>new Date(Q.date).getTime()-new Date(ne.date).getTime())),i(q)}catch(U){f("Failed to fetch gallery data."),console.error(U)}finally{l(!1)}},[]);Y.useEffect(()=>{p()},[p]);const y=Y.useMemo(()=>t.map(q=>{const ne=r.filter(I=>I.albumId===q.id);let Q;q.coverPhotoId&&(Q=r.find(I=>I.id===q.coverPhotoId)),!Q&&ne.length>0&&(Q=ne[0]);let k;if(ne.length>0){const I=ne.map(A=>new Date(A.takenAt||A.date).getFullYear());k={start:Math.min(...I),end:Math.max(...I)}}return{...q,photoCount:ne.length,coverPhotoUrl:Q==null?void 0:Q.url,yearRange:k}}).sort((q,ne)=>{var I,A;const Q=((I=q.yearRange)==null?void 0:I.end)||0,k=((A=ne.yearRange)==null?void 0:A.end)||0;return Q!==k?k-Q:q.name.localeCompare(ne.name)}),[t,r]),w=async(U,q)=>{try{const ne=r.find(Q=>Q.id===U);if(!ne)throw new Error("Photo not found in local state");await uA(U,ne._chunkId,q),e(Q=>Q.map(k=>k.id===U?{...k,...q}:k))}catch(ne){throw console.error(ne),ne}},T=async U=>{try{const q=r.find(ne=>ne.id===U);if(!q)throw new Error("Photo not found in local state");await fA(q),await cA(U,q._chunkId),e(ne=>ne.filter(Q=>Q.id!==U))}catch(q){throw console.error(q),q}},x=async(U,q,ne)=>{try{if(q.theme&&ne&&q.theme!==ne){const Q=t.filter(k=>k.theme===ne).map(k=>n0(k.id,{theme:q.theme}));await Promise.all(Q)}await n0(U,q),i(Q=>Q.map(k=>k.id===U?{...k,...q}:k))}catch(Q){throw console.error("Failed to update album:",Q),Q}},V=async U=>{try{await r0(U),i(q=>q.filter(ne=>ne.id!==U)),p()}catch(q){throw console.error(q),q}},H=async(U,q,ne)=>{try{const Q=r.filter(k=>k.albumId===U).map(k=>({photoId:k.id,chunkId:k._chunkId}));Q.length>0&&await hA(Q,q),ne&&await r0(U),p()}catch(Q){throw console.error(Q),Q}},W=async(U,q,ne)=>{try{const Q={id:`album_${Date.now()}`,name:U,description:q,theme:ne,createdAt:new Date().toISOString()};return await dA(Q),i(k=>[...k,Q]),Q.id}catch(Q){throw console.error(Q),Q}},G=async(U,q,ne,Q)=>{var M;let k=Q||{};if(!Q)try{const C=await n1.parse(U,{tiff:!0,exif:!0,gps:!0});C&&(k={takenAt:(M=C.DateTimeOriginal)==null?void 0:M.toISOString(),cameraMake:C.Make,cameraModel:C.Model,fNumber:C.FNumber,exposureTime:C.ExposureTime,iso:C.ISO,gps:C.latitude&&C.longitude?{latitude:C.latitude,longitude:C.longitude}:void 0})}catch(C){console.warn(`Failed to extract EXIF data for ${U.name}:`,C)}if(k.gps&&!k.locationName){const C=await r1(k.gps.latitude,k.gps.longitude);C&&(k.locationName=C)}const I=await pA(U),A=new Image;A.src=I,await A.decode();const R={id:`photo_${Date.now()}-${Math.random().toString(36).substr(2,9)}`,url:I,date:new Date().toISOString().split("T")[0],title:q,albumId:ne,width:A.width,height:A.height,aspectRatio:A.width>A.height?"landscape":"portrait",...k};Object.keys(R).forEach(C=>{R[C]===void 0&&delete R[C]});const N=await lA(R);return{...R,_chunkId:N}};return{photos:r,albums:y,loading:o,error:c,refetch:p,uploadAndAddPhoto:async(U,q,ne,Q)=>{try{const k=await G(U,q,ne,Q);e(I=>[k,...I])}catch(k){throw console.error(k),k}},batchUploadPhotos:async(U,q,ne)=>{try{let Q=0;const k=U.length,I=[],A=3;for(let R=0;R<U.length;R+=A){const M=U.slice(R,R+A).map(async Ae=>{const He=await G(Ae,Ae.name.replace(/\.[^/.]+$/,""),q);return Q++,ne==null||ne(Q,k),He}),C=await Promise.all(M);I.push(...C)}e(R=>[...I,...R])}catch(Q){throw console.error(Q),Q}},createAlbum:W,updatePhotoDetails:w,deletePhotoItem:T,updateAlbum:x,deleteAlbumItem:V,transferAlbumPhotos:H}};function fm({albums:r,selectedAlbumId:e,onSelect:t,onOpenChange:i}){const[o,l]=Y.useState(!1),[c,f]=Y.useState("");Y.useEffect(()=>{i==null||i(o)},[o,i]);const p=Y.useMemo(()=>r.filter(w=>w.name.toLowerCase().includes(c.toLowerCase())||w.theme.toLowerCase().includes(c.toLowerCase())),[r,c]),y=r.find(w=>w.id===e);return E.jsxs("div",{className:"relative",children:[E.jsx("button",{type:"button",onClick:()=>l(!o),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white text-left focus:outline-none focus:border-white/40",children:y?`${y.name} (${y.theme})`:"Select an album..."}),o&&E.jsxs("div",{className:"absolute z-10 top-full mt-1 w-full bg-zinc-800 border border-white/10 rounded-lg shadow-lg p-2 space-y-2",children:[E.jsxs("div",{className:"relative",children:[E.jsx(Z0,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),E.jsx("input",{type:"text",placeholder:"Search albums...",value:c,onChange:w=>f(w.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-black/50 border border-white/10 rounded text-sm text-white"})]}),E.jsxs("div",{className:"max-h-40 min-h-[10rem] overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-600",children:[p.map(w=>E.jsxs("button",{type:"button",onClick:()=>{t(w.id),l(!1)},className:"w-full text-left px-2 py-1.5 rounded hover:bg-white/10 flex justify-between items-center",children:[E.jsxs("span",{className:"text-white",children:[w.name," ",E.jsxs("span",{className:"text-white/50",children:["(",w.theme,")"]})]}),e===w.id&&E.jsx(TT,{className:"w-4 h-4 text-blue-400"})]},w.id)),p.length===0&&E.jsx("div",{className:"flex items-center justify-center h-full",children:E.jsx("p",{className:"text-sm text-white/40",children:"No albums found."})})]})]})]})}const zl={HOME_GRID:400,GALLERY_GRID_PORTRAIT:400,GALLERY_GRID_LANDSCAPE:800,ALBUM_COVER:800,VIEWER_THUMBNAIL:100},Wo={BREAKPOINTS:[800,1200,1600,2e3,2400],MAX_WIDTH_LANDSCAPE:2400,MAX_WIDTH_PORTRAIT:1800,MIN_WIDTH:800},i1=(r,e,t)=>{const i=Math.min(e||1,2),o=r*i;let l=Wo.BREAKPOINTS.find(f=>f>=o)||Wo.BREAKPOINTS[Wo.BREAKPOINTS.length-1];const c=t==="portrait"?Wo.MAX_WIDTH_PORTRAIT:Wo.MAX_WIDTH_LANDSCAPE;return Math.max(Math.min(l,c),Wo.MIN_WIDTH)},jA=(r,e)=>r<768&&e>=800?400:e;function pm({photos:r,initialIndex:e,onClose:t,albumName:i,showThumbnails:o=!1,isEditMode:l=!1}){const[c,f]=Y.useState(e),[p,y]=Y.useState(!1),[w,T]=Y.useState(!1),[x,V]=Y.useState(1600),H=Y.useRef(null),{albums:W,updatePhotoDetails:G,deletePhotoItem:ae,updateAlbum:le}=ri(),U=r[c],[q,ne]=Y.useState((U==null?void 0:U.title)||""),[Q,k]=Y.useState((U==null?void 0:U.albumId)||""),[I,A]=Y.useState(!1),[R,N]=Y.useState(!1),[M,C]=Y.useState(!1);Y.useEffect(()=>{U&&(ne(U.title),k(U.albumId))},[U]);const Ae=Y.useMemo(()=>!U||!U.albumId?null:W.find(b=>b.id===U.albumId),[U,W]),He=Y.useMemo(()=>Ae?Ae.coverPhotoId?Ae.coverPhotoId===U.id:Ae.coverPhotoUrl===U.url:!1,[Ae,U]),Be=async()=>{if(U){A(!0);try{await G(U.id,{title:q,albumId:Q}),y(!1)}catch(b){console.error("Failed to save photo details:",b),alert("Failed to save changes.")}finally{A(!1)}}},Ve=async()=>{if(U&&confirm(`Are you sure you want to delete "${U.title}"? This action cannot be undone.`)){N(!0);try{await ae(U.id),t()}catch(b){console.error("Failed to delete photo:",b),alert("Failed to delete photo.")}finally{N(!1)}}},B=async()=>{if(!(!U||!Ae)){C(!0);try{await le(Ae.id,{coverPhotoId:U.id})}catch(b){console.error("Failed to set cover photo:",b),alert("Failed to set cover photo.")}finally{C(!1)}}},se=Y.useCallback(()=>{f(b=>b===0?r.length-1:b-1)},[r.length]),ie=Y.useCallback(()=>{f(b=>b===r.length-1?0:b+1)},[r.length]);return Y.useEffect(()=>{const b=K=>{K.key==="ArrowLeft"&&se(),K.key==="ArrowRight"&&ie(),K.key==="Escape"&&(w?T(!1):p?y(!1):t()),K.key==="i"&&y(he=>!he)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[se,ie,t,p,w]),Y.useEffect(()=>{if(o&&H.current){const b=H.current.children[c];b&&b.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[c,o]),Y.useEffect(()=>{if(!U)return;const b=()=>{const ye=i1(window.innerWidth,window.devicePixelRatio,U.aspectRatio);V(ye)};b();let K;const he=()=>{clearTimeout(K),K=window.setTimeout(b,150)};return window.addEventListener("resize",he),()=>{window.removeEventListener("resize",he),clearTimeout(K)}},[U]),U?E.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",onClick:t,children:[E.jsxs("div",{className:`absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-20 pointer-events-none transition-opacity duration-300 ${w?"opacity-0":"opacity-100"}`,children:[E.jsxs("button",{onClick:b=>{b.stopPropagation(),t()},className:"pointer-events-auto text-white/60 hover:text-white flex items-center gap-2 transition-colors p-2",children:[E.jsx(Ip,{className:"w-8 h-8"}),i&&E.jsx("span",{className:"text-lg font-light drop-shadow-md",children:i})]}),E.jsx("button",{onClick:b=>{b.stopPropagation(),y(!p)},className:`pointer-events-auto p-2 rounded-full transition-colors mr-2 ${p?"bg-white text-black":"bg-black/20 text-white/80 hover:text-white"}`,children:E.jsx(jT,{className:"w-6 h-6"})})]}),E.jsxs("div",{className:"flex-1 flex overflow-hidden relative",onClick:b=>b.stopPropagation(),children:[E.jsxs("div",{className:`relative flex-1 flex items-center justify-center transition-all duration-300 ease-in-out ${w?"p-0":"p-4 md:p-12"} ${p&&!w?"mr-80":"mr-0"}`,onClick:()=>T(!w),children:[E.jsx("button",{onClick:b=>{b.stopPropagation(),se()},className:`absolute left-4 z-10 text-white/60 hover:text-white transition-all duration-300 ${w?"opacity-0 hover:opacity-100":"opacity-100"}`,children:E.jsx(Lf,{className:"w-10 h-10"})}),E.jsx("button",{onClick:b=>{b.stopPropagation(),ie()},className:`absolute right-4 z-10 text-white/60 hover:text-white transition-all duration-300 ${w?"opacity-0 hover:opacity-100":"opacity-100"}`,children:E.jsx(Ff,{className:"w-10 h-10"})}),E.jsx("img",{src:ha(U.url,x),alt:U.title,className:`max-w-full max-h-full object-contain shadow-2xl animate-fade-in cursor-pointer transition-transform duration-300 ${w?"scale-100":""}`},U.id)]}),E.jsx("div",{className:`bg-zinc-900 border-l border-white/10 overflow-y-auto transition-all duration-300 ease-in-out absolute right-0 top-0 bottom-0 z-20 ${p&&!w?"w-80 translate-x-0":"w-0 translate-x-full border-none"}`,children:E.jsxs("div",{className:"p-6 w-80 flex flex-col h-full",children:[E.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l?E.jsx("input",{type:"text",value:q,onChange:b=>ne(b.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-1 text-xl text-white focus:outline-none focus:border-white/40 font-light"}):E.jsx("h3",{className:"text-xl text-white font-light",children:U.title}),E.jsx("button",{onClick:()=>y(!1),className:"text-white/40 hover:text-white ml-4",children:E.jsx(fa,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"space-y-6 text-white flex-1",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center gap-2 text-white/60 text-sm mb-2",children:[E.jsx(Q0,{className:"w-4 h-4 flex-shrink-0"}),E.jsx("span",{children:U.takenAt?new Date(U.takenAt).toLocaleDateString():U.date})]}),(U.location||U.locationName)&&E.jsxs("div",{className:"flex items-center gap-2 text-white/60 text-sm",children:[E.jsx(jc,{className:"w-4 h-4 flex-shrink-0"}),E.jsx("span",{children:U.location||U.locationName})]})]}),E.jsxs("div",{className:"border-t border-white/10 pt-4",children:[E.jsx("h4",{className:"text-xs font-bold text-white/40 uppercase mb-2",children:"Album"}),l?E.jsx(fm,{albums:W,selectedAlbumId:Q,onSelect:k}):E.jsxs("div",{className:"flex items-center gap-2 text-white/80 text-sm",children:[E.jsx(MT,{className:"w-4 h-4 flex-shrink-0"}),E.jsx("span",{children:(Ae==null?void 0:Ae.name)||"Uncategorized"})]})]}),(U.cameraModel||U.fNumber)&&E.jsxs("div",{className:"border-t border-white/10 pt-4 space-y-3",children:[E.jsx("h4",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:"EXIF Data"}),U.cameraModel&&E.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[E.jsx(X0,{className:"w-4 h-4 flex-shrink-0"}),E.jsxs("span",{children:[U.cameraMake," ",U.cameraModel]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-white/80",children:[U.fNumber&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(K0,{className:"w-4 h-4 flex-shrink-0"}),E.jsxs("span",{children:["f/",Number(U.fNumber.toFixed(4))]})]}),U.exposureTime&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Y0,{className:"w-4 h-4 flex-shrink-0"}),E.jsxs("span",{children:["1/",Math.round(1/U.exposureTime),"s"]})]}),U.iso&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xs font-bold border border-white/40 px-1 rounded flex-shrink-0",children:"ISO"}),E.jsx("span",{children:U.iso})]})]})]}),U.gps&&E.jsx("div",{className:"border-t border-white/10 pt-4",children:E.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${U.gps.latitude},${U.gps.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[E.jsx(jc,{className:"w-4 h-4 flex-shrink-0"}),"View on Map"]})})]}),l&&E.jsxs("div",{className:"mt-auto pt-6 space-y-3",children:[E.jsxs("button",{onClick:B,disabled:M||He,className:`w-full font-medium py-2 rounded flex items-center justify-center gap-2 transition-colors ${He?"bg-green-600/20 text-green-400 cursor-default":"bg-zinc-800 text-white hover:bg-zinc-700"}`,children:[M?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(LT,{className:"w-4 h-4"}),He?"Current Cover Image":"Set as Cover Image"]}),E.jsxs("button",{onClick:Be,disabled:I,className:"w-full bg-white text-black font-medium py-2 rounded hover:bg-white/90 disabled:opacity-50 flex items-center justify-center gap-2",children:[I?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(J0,{className:"w-4 h-4"}),I?"Saving...":"Save Changes"]}),E.jsxs("button",{onClick:Ve,disabled:R,className:"w-full bg-red-600 text-white font-medium py-2 rounded hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[R?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(ew,{className:"w-4 h-4"}),R?"Deleting...":"Delete Photo"]})]})]})})]}),o&&E.jsx("div",{className:`h-20 bg-black/80 backdrop-blur-sm border-t border-white/10 flex items-center justify-center px-4 z-20 transition-transform duration-300 ${w?"translate-y-full":"translate-y-0"}`,onClick:b=>b.stopPropagation(),children:E.jsx("div",{ref:H,className:"flex gap-2 overflow-x-auto max-w-full px-4 py-2 scrollbar-hide",children:r.map((b,K)=>{const he=W.find(Ne=>Ne.id===b.albumId),ye=he&&he.coverPhotoUrl===b.url;return E.jsx("button",{onClick:()=>f(K),className:`relative flex-shrink-0 w-12 h-12 rounded overflow-hidden transition-all duration-300 
                    ${K===c?"ring-2 ring-white scale-110 opacity-100":"opacity-40 hover:opacity-70 hover:scale-105"}
                    ${l&&ye?"ring-2 ring-yellow-400 ring-offset-1 ring-offset-black animate-pulse":""}
                  `,children:E.jsx("img",{src:ha(b.url,zl.VIEWER_THUMBNAIL),alt:"",className:"w-full h-full object-cover"})},b.id)})})})]}):null}const Rf=20;function UA({albumId:r,onBack:e,isEditMode:t=!1}){const[i,o]=Y.useState(null),[l,c]=Y.useState(""),[f,p]=Y.useState(1),[y,w]=Y.useState(window.innerWidth),{photos:T,albums:x,loading:V,error:H}=ri();Y.useEffect(()=>{const q=()=>w(window.innerWidth);return window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]),Y.useEffect(()=>{p(1)},[l,r]);const W=Y.useMemo(()=>{const ne=[...T.filter(k=>{var I;if(r&&k.albumId!==r)return!1;if(l){const A=l.toLowerCase(),R=x.find(N=>N.id===k.albumId);return k.title.toLowerCase().includes(A)||((I=k.locationName)==null?void 0:I.toLowerCase().includes(A))||(k.takenAt||k.date).toLowerCase().includes(A)||(R==null?void 0:R.name.toLowerCase().includes(A))||(R==null?void 0:R.theme.toLowerCase().includes(A))}return!0}).sort((k,I)=>{const A=new Date(k.takenAt||k.date).getTime();return new Date(I.takenAt||I.date).getTime()-A})];let Q=0;for(let k=0;k<ne.length-1;k++){const I=Q%6,A=ne[k],R=ne[k+1],N=A.aspectRatio==="landscape"?2:1,M=R.aspectRatio==="landscape"?2:1;I===4&&N===1&&M===2&&([ne[k],ne[k+1]]=[R,A]);const C=ne[k].aspectRatio==="landscape"?2:1;Q+=C}return ne},[T,x,r,l]),G=Math.ceil(W.length/Rf),ae=Y.useMemo(()=>{const q=(f-1)*Rf;return W.slice(q,q+Rf)},[W,f]),le=Y.useMemo(()=>r?x.find(q=>q.id===r):null,[x,r]),U=q=>{p(q),window.scrollTo({top:0,behavior:"smooth"})};return V?E.jsx("div",{className:"text-white text-center py-12",children:"Loading..."}):H?E.jsx("div",{className:"text-red-500 text-center py-12",children:H}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 py-12",children:[E.jsx("div",{className:"mb-8",children:r&&le?E.jsxs(E.Fragment,{children:[E.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-white/60 hover:text-white mb-4 transition-colors",children:[E.jsx(Ip,{className:"w-4 h-4"}),"Back to Albums"]}),E.jsx("h2",{className:"text-3xl text-white font-light",children:le.name}),E.jsx("p",{className:"text-white/60 mt-2",children:le.description})]}):E.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx(Z0,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),E.jsx("input",{type:"text",placeholder:"Search by title, location, date, album, or theme...",value:l,onChange:q=>c(q.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-full text-white placeholder-white/40 focus:outline-none focus:border-white/60 transition-colors"})]}),G>1&&E.jsxs("div",{className:"flex justify-center items-center gap-4",children:[E.jsx("button",{onClick:()=>U(f-1),disabled:f===1,className:"p-2 rounded-full hover:bg-white/10 disabled:opacity-30 disabled:hover:bg-transparent text-white transition-colors",children:E.jsx(Lf,{className:"w-5 h-5"})}),E.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:Math.min(5,G)},(q,ne)=>{let Q=ne+1;return G>5&&(f>3&&(Q=f-2+ne),Q>G&&(Q=G-4+ne)),E.jsx("button",{onClick:()=>U(Q),className:`w-8 h-8 rounded-full text-sm font-medium transition-all ${f===Q?"bg-white text-black scale-110":"text-white/60 hover:text-white hover:bg-white/10"}`,children:Q},Q)})}),E.jsx("button",{onClick:()=>U(f+1),disabled:f===G,className:"p-2 rounded-full hover:bg-white/10 disabled:opacity-30 disabled:hover:bg-transparent text-white transition-colors",children:E.jsx(Ff,{className:"w-5 h-5"})})]})]})}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-0",children:ae.map(q=>E.jsx("div",{className:`p-1.5 ${q.aspectRatio==="landscape"?"md:col-span-2":""}`,children:E.jsxs("div",{className:`group relative overflow-hidden cursor-pointer rounded-lg w-full h-full aspect-square ${q.aspectRatio==="landscape"?"md:aspect-[3/2]":"md:aspect-[3/4]"}`,onClick:()=>o(q),children:[E.jsx("img",{src:ha(q.url,jA(y,q.aspectRatio==="portrait"?zl.GALLERY_GRID_PORTRAIT:zl.GALLERY_GRID_LANDSCAPE)),alt:q.title,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),E.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors duration-300 flex items-end p-4 opacity-0 group-hover:opacity-100",children:E.jsxs("div",{className:"text-white",children:[E.jsx("p",{className:"text-sm font-medium truncate",children:q.title}),E.jsx("p",{className:"text-xs text-white/60",children:q.date})]})})]})},q.id))}),W.length===0&&E.jsx("div",{className:"text-center py-20 text-white/40",children:E.jsx("p",{children:"No photos found for your search."})}),G>1&&E.jsxs("div",{className:"flex justify-center items-center gap-4 mt-12",children:[E.jsx("button",{onClick:()=>U(f-1),disabled:f===1,className:"p-2 rounded-full hover:bg-white/10 disabled:opacity-30 disabled:hover:bg-transparent text-white transition-colors",children:E.jsx(Lf,{className:"w-5 h-5"})}),E.jsxs("span",{className:"text-white/60 text-sm",children:["Page ",f," of ",G]}),E.jsx("button",{onClick:()=>U(f+1),disabled:f===G,className:"p-2 rounded-full hover:bg-white/10 disabled:opacity-30 disabled:hover:bg-transparent text-white transition-colors",children:E.jsx(Ff,{className:"w-5 h-5"})})]})]}),i&&E.jsx(pm,{photos:W,initialIndex:W.findIndex(q=>q.id===i.id),onClose:()=>o(null),albumName:le==null?void 0:le.name,isEditMode:t})]})}function s1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zA=s1,o1=new $l("auth","Firebase",s1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Sp("@firebase/auth");function BA(r,...e){oh.logLevel<=Fe.WARN&&oh.warn(`Auth (${ma}): ${r}`,...e)}function Mc(r,...e){oh.logLevel<=Fe.ERROR&&oh.error(`Auth (${ma}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(r,...e){throw gm(r,...e)}function Qn(r,...e){return gm(r,...e)}function mm(r,e,t){const i={...zA(),[e]:t};return new $l("auth","Firebase",i).create(e,{appName:r.name})}function Ws(r){return mm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $A(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&kr(r,"argument-error"),mm(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gm(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return o1.create(r,...e)}function Ce(r,e,...t){if(!r)throw gm(e,...t)}function Qr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mc(e),new Error(e)}function ti(r,e){r||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function HA(){return T0()==="http:"||T0()==="https:"}function T0(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HA()||gI()||"connection"in navigator)?navigator.onLine:!0}function WA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ti(t>e,"Short delay should be less than long delay!"),this.isMobile=fI()||yI()}get(){return GA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(r,e){ti(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QA=new Jl(3e4,6e4);function vm(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ta(r,e,t,i,o={}){return l1(r,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Hl({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...l};return mI()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&pa(r.emulatorConfig.host)&&(y.credentials="include"),a1.fetch()(await u1(r,r.config.apiHost,t,f),y)})}async function l1(r,e,t){r._canInitEmulator=!1;const i={...qA,...e};try{const o=new YA(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw xc(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw xc(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw xc(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw xc(r,"user-disabled",c);const w=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw mm(r,w,y);kr(r,w)}}catch(o){if(o instanceof ni)throw o;kr(r,"network-request-failed",{message:String(o)})}}async function XA(r,e,t,i,o={}){const l=await Ta(r,e,t,i,o);return"mfaPendingCredential"in l&&kr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function u1(r,e,t,i){const o=`${e}${t}?${i}`,l=r,c=l.config.emulator?ym(r.config,o):`${r.config.apiScheme}://${o}`;return KA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class YA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Qn(this.auth,"network-request-failed")),QA.get())})}}function xc(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Qn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(r,e){return Ta(r,"POST","/v1/accounts:delete",e)}async function ah(r,e){return Ta(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZA(r,e=!1){const t=Jt(r),i=await t.getIdToken(e),o=wm(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Dl(Nf(o.auth_time)),issuedAtTime:Dl(Nf(o.iat)),expirationTime:Dl(Nf(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Nf(r){return Number(r)*1e3}function wm(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const o=rw(t);return o?JSON.parse(o):(Mc("Failed to decode base64 JWT payload"),null)}catch(o){return Mc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function I0(r){const e=wm(r);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ni&&e2(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function e2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(r){var T;const e=r.auth,t=await r.getIdToken(),i=await Bl(r,ah(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?c1(o.providerUserInfo):[],c=r2(r.providerData,l),f=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!(c!=null&&c.length),y=f?p:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new mp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,w)}async function n2(r){const e=Jt(r);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r2(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function c1(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(r,e){const t=await l1(r,{},async()=>{const i=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,c=await u1(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return r.emulatorConfig&&pa(r.emulatorConfig.host)&&(p.credentials="include"),a1.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function s2(r,e){return Ta(r,"POST","/v2/accounts:revokeToken",vm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=I0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await i2(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new ea;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ea,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(r,e){Ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class qn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new t2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new mp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZA(this,e)}reload(){return n2(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await Bl(this,JA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:V,providerData:H,stsTokenManager:W}=t;Ce(T&&W,e,"internal-error");const G=ea.fromJSON(this.name,W);Ce(typeof T=="string",e,"internal-error"),Oi(i,e.name),Oi(o,e.name),Ce(typeof x=="boolean",e,"internal-error"),Ce(typeof V=="boolean",e,"internal-error"),Oi(l,e.name),Oi(c,e.name),Oi(f,e.name),Oi(p,e.name),Oi(y,e.name),Oi(w,e.name);const ae=new qn({uid:T,auth:e,email:o,emailVerified:x,displayName:i,isAnonymous:V,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:G,createdAt:y,lastLoginAt:w});return H&&Array.isArray(H)&&(ae.providerData=H.map(le=>({...le}))),p&&(ae._redirectEventId=p),ae}static async _fromIdTokenResponse(e,t,i=!1){const o=new ea;o.updateFromServerResponse(t);const l=new qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await lh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?c1(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new ea;f.updateFromIdToken(i);const p=new qn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new mp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map;function Xr(r){ti(r instanceof Function,"Expected a class definition");let e=S0.get(r);return e?(ti(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,S0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}h1.type="NONE";const x0=h1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r,e,t){return`firebase:${r}:${e}:${t}`}class ta{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Vc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Vc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ah(this.auth,{idToken:e}).catch(()=>{});return t?qn._fromGetAccountInfoResponse(this.auth,t,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ta(Xr(x0),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Xr(x0);const c=Vc(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(c);if(w){let T;if(typeof w=="string"){const x=await ah(e,{idToken:w}).catch(()=>{});if(!x)break;T=await qn._fromGetAccountInfoResponse(e,x,w)}else T=qn._fromJSON(e,w);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ta(l,e,i):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new ta(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y1(e))return"Blackberry";if(v1(e))return"Webos";if(f1(e))return"Safari";if((e.includes("chrome/")||p1(e))&&!e.includes("edge/"))return"Chrome";if(g1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function d1(r=Yt()){return/firefox\//i.test(r)}function f1(r=Yt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p1(r=Yt()){return/crios\//i.test(r)}function m1(r=Yt()){return/iemobile/i.test(r)}function g1(r=Yt()){return/android/i.test(r)}function y1(r=Yt()){return/blackberry/i.test(r)}function v1(r=Yt()){return/webos/i.test(r)}function _m(r=Yt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function o2(r=Yt()){var e;return _m(r)&&!!((e=window.navigator)!=null&&e.standalone)}function a2(){return vI()&&document.documentMode===10}function w1(r=Yt()){return _m(r)||g1(r)||v1(r)||y1(r)||/windows phone/i.test(r)||m1(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(r,e=[]){let t;switch(r){case"Browser":t=k0(Yt());break;case"Worker":t=`${k0(Yt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ma}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(r,e={}){return Ta(r,"GET","/v2/passwordPolicy",vm(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=6;class h2{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??c2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C0(this),this.idTokenSubscription=new C0(this),this.beforeStateQueue=new l2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ta.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ah(this,{idToken:e}),i=await qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Gn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(Ws(this));const t=e?Jt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u2(this),t=new h2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await s2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await ta.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&BA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Lh(r){return Jt(r)}class C0{constructor(e){this.auth=e,this.observer=null,this.addObserver=kI(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Em={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f2(r){Em=r}function p2(r){return Em.loadJS(r)}function m2(){return Em.gapiScript}function g2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(r,e){const t=kp(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ji(l,e??{}))return o;kr(o,"already-initialized")}return t.initialize({options:e})}function v2(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Xr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function w2(r,e,t){const i=Lh(r);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=E1(e),{host:c,port:f}=_2(e),p=f===null?"":`:${f}`,y={url:`${l}//${c}${p}/`},w=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Ji(y,i.config.emulator)&&Ji(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,pa(c)?(aw(`${l}//${c}${p}`),lw("Auth",!0)):E2()}function E1(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _2(r){const e=E1(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:A0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:A0(c)}}}function A0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function E2(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,t){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(r,e){return XA(r,"POST","/v1/accounts:signInWithIdp",vm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="http://localhost";class eo extends T1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const c=new eo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return na(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,na(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,na(e,t)}buildRequest(){const e={requestUri:T2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends Tm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Zl{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Zl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eo._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Kr.credential(t,i)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Zl{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Zl{constructor(){super("twitter.com")}static credential(e,t){return eo._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Fi.credential(t,i)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await qn._fromIdTokenResponse(e,i,o),c=P0(i);return new da({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=P0(i);return new da({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function P0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends ni{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,uh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new uh(e,t,i,o)}}function I1(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?uh._fromErrorAndOperation(r,l,e,i):l})}async function I2(r,e,t=!1){const i=await Bl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return da._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(r,e,t=!1){const{auth:i}=r;if(Gn(i.app))return Promise.reject(Ws(i));const o="reauthenticate";try{const l=await Bl(r,I1(i,o,e,r),t);Ce(l.idToken,i,"internal-error");const c=wm(l.idToken);Ce(c,i,"internal-error");const{sub:f}=c;return Ce(r.uid===f,i,"user-mismatch"),da._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&kr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(r,e,t=!1){if(Gn(r.app))return Promise.reject(Ws(r));const i="signIn",o=await I1(r,i,e),l=await da._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function k2(r,e,t,i){return Jt(r).onIdTokenChanged(e,t,i)}function C2(r,e,t){return Jt(r).beforeAuthStateChanged(e,t)}function A2(r,e,t,i){return Jt(r).onAuthStateChanged(e,t,i)}function P2(r){return Jt(r).signOut()}const ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=1e3,R2=10;class x1 extends S1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);a2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,R2):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},b2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}x1.type="LOCAL";const N2=x1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends S1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}k1.type="SESSION";const C1=k1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,l)),p=await D2(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const y=Im("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(T){const x=T;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(w),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function M2(r){Tr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function V2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L2(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function F2(){return A1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="firebaseLocalStorageDb",j2=1,hh="firebaseLocalStorage",b1="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jh(r,e){return r.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function U2(){const r=indexedDB.deleteDatabase(P1);return new eu(r).toPromise()}function gp(){const r=indexedDB.open(P1,j2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(hh,{keyPath:b1})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(hh)?e(i):(i.close(),await U2(),e(await gp()))})})}async function b0(r,e,t){const i=jh(r,!0).put({[b1]:e,value:t});return new eu(i).toPromise()}async function z2(r,e){const t=jh(r,!1).get(e),i=await new eu(t).toPromise();return i===void 0?null:i.value}function R0(r,e){const t=jh(r,!0).delete(e);return new eu(t).toPromise()}const B2=800,$2=3;class R1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>$2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fh._getInstance(F2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await V2(),!this.activeServiceWorker)return;this.sender=new O2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gp();return await b0(e,ch,"1"),await R0(e,ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>b0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>z2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>R0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=jh(o,!1).getAll();return new eu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R1.type="LOCAL";const H2=R1;new Jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(r,e){return e?Xr(e):(Ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends T1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function G2(r){return x2(r.auth,new Sm(r),r.bypassAuthState)}function W2(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),S2(t,new Sm(r),r.bypassAuthState)}async function q2(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),I2(t,new Sm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G2;case"linkViaPopup":case"linkViaRedirect":return q2;case"reauthViaPopup":case"reauthViaRedirect":return W2;default:kr(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new Jl(2e3,1e4);async function Q2(r,e,t){if(Gn(r.app))return Promise.reject(Qn(r,"operation-not-supported-in-this-environment"));const i=Lh(r);$A(r,e,Tm);const o=N1(i,t);return new $s(i,"signInViaPopup",e,o).executeNotNull()}class $s extends D1{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=Im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K2.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="pendingRedirect",Lc=new Map;class Y2 extends D1{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Lc.get(this.auth._key());if(!e){try{const i=await J2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Lc.set(this.auth._key(),e)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J2(r,e){const t=tP(e),i=eP(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Z2(r,e){Lc.set(r._key(),e)}function eP(r){return Xr(r._redirectPersistence)}function tP(r){return Vc(X2,r.config.apiKey,r.name)}async function nP(r,e,t=!1){if(Gn(r.app))return Promise.reject(Ws(r));const i=Lh(r),o=N1(i,e),c=await new Y2(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=600*1e3;class iP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!O1(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Qn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rP&&this.cachedEventUids.clear(),this.cachedEventUids.has(N0(e))}saveEventToCache(e){this.cachedEventUids.add(N0(e)),this.lastProcessedEventTime=Date.now()}}function N0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function O1({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sP(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O1(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(r,e={}){return Ta(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lP=/^https?/;async function uP(r){if(r.config.emulator)return;const{authorizedDomains:e}=await oP(r);for(const t of e)try{if(cP(t))return}catch{}kr(r,"unauthorized-domain")}function cP(r){const e=pp(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!lP.test(t))return!1;if(aP.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new Jl(3e4,6e4);function D0(){const r=Tr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function dP(r){return new Promise((e,t)=>{var o,l,c;function i(){D0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D0(),t(Qn(r,"network-request-failed"))},timeout:hP.get()})}if((l=(o=Tr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Tr().gapi)!=null&&c.load)i();else{const f=g2("iframefcb");return Tr()[f]=()=>{gapi.load?i():t(Qn(r,"network-request-failed"))},p2(`${m2()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Fc=null,e})}let Fc=null;function fP(r){return Fc=Fc||dP(r),Fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=new Jl(5e3,15e3),mP="__/auth/iframe",gP="emulator/auth/iframe",yP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wP(r){const e=r.config;Ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?ym(e,gP):`https://${r.config.authDomain}/${mP}`,i={apiKey:e.apiKey,appName:r.name,v:ma},o=vP.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Hl(i).slice(1)}`}async function _P(r){const e=await fP(r),t=Tr().gapi;return Ce(t,r,"internal-error"),e.open({where:document.body,url:wP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yP,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=Qn(r,"network-request-failed"),f=Tr().setTimeout(()=>{l(c)},pP.get());function p(){Tr().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TP=500,IP=600,SP="_blank",xP="http://localhost";class O0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kP(r,e,t,i=TP,o=IP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...EP,width:i.toString(),height:o.toString(),top:l,left:c},y=Yt().toLowerCase();t&&(f=p1(y)?SP:t),d1(y)&&(e=e||xP,p.scrollbars="yes");const w=Object.entries(p).reduce((x,[V,H])=>`${x}${V}=${H},`,"");if(o2(y)&&f!=="_self")return CP(e||"",f),new O0(null);const T=window.open(e||"",f,w);Ce(T,r,"popup-blocked");try{T.focus()}catch{}return new O0(T)}function CP(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="__/auth/handler",PP="emulator/auth/handler",bP=encodeURIComponent("fac");async function M0(r,e,t,i,o,l){Ce(r.config.authDomain,r,"auth-domain-config-required"),Ce(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ma,eventId:o};if(e instanceof Tm){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",xI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))c[w]=T}if(e instanceof Zl){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(c.scopes=w.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const p=await r._getAppCheckToken(),y=p?`#${bP}=${encodeURIComponent(p)}`:"";return`${RP(r)}?${Hl(f).slice(1)}${y}`}function RP({config:r}){return r.emulator?ym(r,PP):`https://${r.authDomain}/${AP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="webStorageSupport";class NP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=C1,this._completeRedirectFn=nP,this._overrideRedirectResult=Z2}async _openPopup(e,t,i,o){var c;ti((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await M0(e,t,i,pp(),o);return kP(e,l,Im())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await M0(e,t,i,pp(),o);return M2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ti(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await _P(e),i=new iP(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Df,{type:Df},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Df];l!==void 0&&t(!!l),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return w1()||f1()||_m()}}const DP=NP;var V0="@firebase/auth",L0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VP(r){ra(new qs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_1(r)},y=new d2(i,o,l,p);return v2(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ra(new qs("auth-internal",e=>{const t=Lh(e.getProvider("auth").getImmediate());return(i=>new OP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qi(V0,L0,MP(r)),qi(V0,L0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=300,FP=ow("authIdTokenMaxAge")||LP;let F0=null;const jP=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FP)return;const o=t==null?void 0:t.token;F0!==o&&(F0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function yp(r=dw()){const e=kp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=y2(r,{popupRedirectResolver:DP,persistence:[H2,N2,C1]}),i=ow("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=jP(l.toString());C2(t,c,()=>c(t.currentUser)),k2(t,f=>c(f))}}const o=iw("auth");return o&&w2(t,`http://${o}`),t}function UP(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}f2({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Qn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",UP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VP("Browser");function zP({activeTab:r,onTabChange:e,user:t,isEditMode:i,onEditModeToggle:o,onUploadClick:l}){const[c,f]=Y.useState(!1),p=[{id:"home",label:"Home"},{id:"photos",label:"Photos"},{id:"albums",label:"Albums"}],y=async()=>{try{const x=yp(),V=new Kr;V.setCustomParameters({prompt:"select_account"}),await Q2(x,V),f(!1)}catch(x){console.error("Login failed:",x),x.code==="auth/popup-closed-by-user"||x.code==="auth/cancelled-popup-request"||alert(`Login failed: ${x.message}`)}},w=async()=>{try{await P2(yp()),f(!1)}catch(x){console.error("Logout failed:",x)}},T=x=>{e(x),f(!1)};return E.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 border-b border-white/10 transition-colors duration-200 ${c?"bg-zinc-900":"bg-black/80 backdrop-blur-md"}`,children:[E.jsx("div",{className:"w-full px-6",children:E.jsxs("div",{className:"flex items-center justify-between h-14",children:[E.jsx("div",{className:"text-white font-bold tracking-wider cursor-pointer z-50",onClick:()=>T("home"),children:"GALLERY"}),E.jsx("div",{className:"hidden md:flex gap-8 absolute left-1/2 transform -translate-x-1/2",children:p.map(x=>E.jsxs("button",{onClick:()=>e(x.id),className:`text-sm transition-colors relative py-4 ${r===x.id?"text-white":"text-white/60 hover:text-white/80"}`,children:[x.label,r===x.id&&E.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white"})]},x.id))}),E.jsx("div",{className:"hidden md:flex items-center gap-4",children:t?E.jsxs(E.Fragment,{children:[E.jsxs("button",{onClick:o,className:`w-24 flex items-center justify-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${i?"bg-zinc-800 text-white animate-rotating-border":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:[E.jsx("span",{className:"w-4 h-4 inline-flex items-center justify-center",children:i?E.jsx(Ky,{className:"w-4 h-4"}):E.jsx(Wy,{className:"w-4 h-4"})}),i?"Editor":"Viewer"]}),E.jsxs("button",{onClick:l,className:"flex items-center gap-2 bg-white text-black px-3 py-1.5 rounded-full text-sm font-medium hover:bg-white/90 transition-colors",children:[E.jsx(Uc,{className:"w-4 h-4"}),"Upload"]}),E.jsx("button",{onClick:w,className:"text-sm text-white/60 hover:text-white",children:"Logout"})]}):E.jsx("button",{onClick:y,className:"text-sm text-white/60 hover:text-white",children:"Authenticate"})}),E.jsx("button",{className:"md:hidden text-white p-2 z-50",onClick:()=>f(!c),children:c?E.jsx(fa,{className:"w-6 h-6"}):E.jsx($T,{className:"w-6 h-6"})})]})}),c&&E.jsx("div",{className:"fixed inset-0 top-14 bg-zinc-900 z-40 md:hidden flex flex-col p-6 animate-in slide-in-from-top-5 duration-200",children:E.jsxs("div",{className:"flex flex-col gap-6",children:[E.jsx("div",{className:"flex flex-col gap-4 border-b border-white/10 pb-6",children:p.map(x=>E.jsx("button",{onClick:()=>T(x.id),className:`text-lg font-medium text-left transition-colors ${r===x.id?"text-white":"text-white/60 hover:text-white/80"}`,children:x.label},x.id))}),E.jsx("div",{className:"flex flex-col gap-4",children:t?E.jsxs(E.Fragment,{children:[E.jsxs("button",{onClick:()=>{o(),f(!1)},className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-base font-medium transition-all border ${i?"bg-zinc-800 text-white border-white shadow-[0_0_10px_rgba(255,255,255,0.3)] animate-pulse":"bg-white/10 text-white/80 border-transparent hover:bg-white/20"}`,children:[i?E.jsx(Ky,{className:"w-5 h-5"}):E.jsx(Wy,{className:"w-5 h-5"}),i?"Editor":"Viewer"]}),E.jsxs("button",{onClick:()=>{l(),f(!1)},className:"flex items-center justify-center gap-2 bg-white text-black px-4 py-3 rounded-lg text-base font-medium hover:bg-white/90 transition-colors",children:[E.jsx(Uc,{className:"w-5 h-5"}),"Upload Photos"]}),E.jsx("button",{onClick:w,className:"text-base text-white/60 hover:text-white py-2 text-left",children:"Logout"})]}):E.jsx("button",{onClick:y,className:"text-base text-white/60 hover:text-white py-2 text-left",children:"Authenticate"})})]})})]})}function BP({isEditMode:r}){const[e,t]=Y.useState(0),[i,o]=Y.useState(null),[l,c]=Y.useState(1200),{photos:f,loading:p,error:y}=ri(),w=f.sort((V,H)=>{const W=new Date(V.takenAt||V.date).getTime();return new Date(H.takenAt||H.date).getTime()-W}),T=w.slice(0,12);Y.useEffect(()=>{if(T.length===0)return;const V=setInterval(()=>{t(H=>(H+1)%T.length)},4e3);return()=>clearInterval(V)},[T.length]);const x=T[e]||f[0];return Y.useEffect(()=>{if(!x)return;const V=()=>{const G=i1(window.innerWidth,window.devicePixelRatio,x.aspectRatio);c(G)};V();let H;const W=()=>{clearTimeout(H),H=window.setTimeout(V,150)};return window.addEventListener("resize",W),()=>{window.removeEventListener("resize",W),clearTimeout(H)}},[x]),p?E.jsx("div",{className:"text-white text-center py-12",children:"Loading..."}):y?E.jsx("div",{className:"text-red-500 text-center py-12",children:y}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"min-h-[calc(100vh-56px)] px-6 py-12",children:[x&&E.jsxs("div",{className:"max-w-6xl mx-auto",children:[E.jsxs("div",{className:"relative aspect-[16/10] rounded-lg overflow-hidden cursor-pointer group",onClick:()=>o(x),children:[E.jsx("img",{src:ha(x.url,l),alt:x.title,className:"w-full h-full object-cover animate-fade-in"},x.id),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:[E.jsx("h2",{className:"text-white mb-2",children:x.title}),E.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60",children:[E.jsx("span",{children:x.date}),x.location&&E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(jc,{className:"w-4 h-4"}),E.jsx("span",{children:x.location})]})]})]})]}),E.jsx("div",{className:"flex justify-center gap-2 mt-6",children:T.map((V,H)=>E.jsx("button",{onClick:()=>t(H),className:`h-1 rounded-full transition-all ${H===e?"w-8 bg-white":"w-1 bg-white/30 hover:bg-white/50"}`},H))})]}),E.jsxs("div",{className:"max-w-6xl mx-auto mt-16",children:[E.jsx("h3",{className:"text-white mb-6",children:"Recent Photos"}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:w.slice(0,20).map(V=>E.jsx("div",{className:"aspect-square rounded overflow-hidden cursor-pointer group",onClick:()=>o(V),children:E.jsx("img",{src:ha(V.url,zl.HOME_GRID),alt:V.title,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"})},V.id))})]})]}),i&&E.jsx(pm,{photos:w,initialIndex:w.findIndex(V=>V.id===i.id),onClose:()=>o(null),albumName:void 0,isEditMode:r})]})}function $P({onAlbumClick:r,isEditMode:e=!1,onAddNewAlbum:t,onEditAlbum:i,onTransferAlbum:o}){const{albums:l,loading:c,error:f}=ri(),p=Y.useMemo(()=>l?l.reduce((y,w)=>{const T=w.theme||"Uncategorized";return y[T]||(y[T]=[]),y[T].push(w),y},{}):{},[l]);return c?E.jsx("div",{className:"text-white text-center py-12",children:"Loading..."}):f?E.jsx("div",{className:"text-red-500 text-center py-12",children:f}):E.jsx("div",{className:"max-w-full mx-auto py-12",children:E.jsxs("div",{className:"space-y-12",children:[e&&E.jsxs("section",{children:[E.jsx("h3",{className:"text-xl text-white font-semibold mb-4 px-6",children:"Add a new album"}),E.jsxs("div",{className:"flex overflow-x-auto space-x-6 px-6 pb-4 -mx-6 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent",children:[E.jsx("div",{className:"w-6 flex-shrink-0"})," ",E.jsx("div",{className:"group w-[25rem] flex-shrink-0 cursor-pointer",onClick:t,children:E.jsx("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden mb-3 border-2 border-dashed border-white/20 hover:border-white/40 transition-colors flex items-center justify-center",children:E.jsxs("div",{className:"text-center text-white/60 group-hover:text-white/80 transition-colors",children:[E.jsx(Uc,{className:"w-12 h-12 mx-auto"}),E.jsx("p",{className:"mt-2",children:"Add New Album"})]})})})]})]}),Object.entries(p).map(([y,w])=>E.jsxs("section",{children:[E.jsx("h3",{className:"text-xl text-white font-semibold mb-4 px-6",children:y}),E.jsxs("div",{className:"flex overflow-x-auto space-x-6 px-6 pb-4 -mx-6 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent",children:[E.jsx("div",{className:"w-6 flex-shrink-0"})," ",w.map(T=>E.jsxs("div",{className:"group w-[25rem] flex-shrink-0 cursor-pointer relative",onClick:()=>r(T.id),children:[E.jsxs("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden mb-3",children:[T.coverPhotoUrl?E.jsx("img",{src:ha(T.coverPhotoUrl,zl.ALBUM_COVER),alt:T.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}):E.jsx("div",{className:"w-full h-full bg-zinc-800 flex items-center justify-center text-white/20",children:E.jsx(qy,{className:"w-12 h-12"})}),E.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300"}),E.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/60 text-white px-2.5 py-0.5 rounded-full text-xs backdrop-blur-sm border border-white/10 opacity-75 group-hover:opacity-100 transition-opacity",children:[T.photoCount," photos"]}),e&&E.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[E.jsx("button",{onClick:x=>{x.stopPropagation(),o==null||o(T)},className:"bg-black/60 text-white p-2 rounded-full backdrop-blur-sm border border-white/10 hover:bg-black/80",title:"Transfer Photos",children:E.jsx(Vf,{className:"w-4 h-4"})}),E.jsx("button",{onClick:x=>{x.stopPropagation(),i==null||i(T)},className:"bg-black/60 text-white p-2 rounded-full backdrop-blur-sm border border-white/10 hover:bg-black/80",title:"Edit Album",children:E.jsx(GT,{className:"w-4 h-4"})})]})]}),E.jsxs("div",{className:"flex justify-between items-start gap-4",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"text-white font-medium group-hover:text-white/80 transition-colors truncate",children:T.name}),E.jsx("p",{className:"text-white/60 text-sm line-clamp-1 mt-0.5",children:T.description||"No description"})]}),T.yearRange&&E.jsx("div",{className:"text-sm text-white/40 flex-shrink-0 mt-0.5",children:T.yearRange.start===T.yearRange.end?T.yearRange.start:`${T.yearRange.start}${T.yearRange.end}`})]})]},T.id)),E.jsx("div",{className:"w-6 flex-shrink-0"})," "]})]},y)),l.length===0&&!e&&E.jsxs("div",{className:"col-span-full text-center py-20 text-white/40 px-6",children:[E.jsx(qy,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),E.jsx("p",{className:"text-lg",children:"No albums yet"}),E.jsx("p",{className:"text-sm mt-2",children:"Upload a photo to create your first album"})]})]})})}function HP({albumId:r,onBack:e,isEditMode:t=!1}){const{photos:i,albums:o}=ri(),l=Y.useMemo(()=>i.filter(f=>f.albumId===r).sort((f,p)=>{const y=new Date(f.takenAt||f.date).getTime(),w=new Date(p.takenAt||p.date).getTime();return y-w}),[i,r]),c=o.find(f=>f.id===r);return!c||l.length===0?E.jsxs("div",{className:"min-h-[calc(100vh-56px)] flex flex-col items-center justify-center text-white",children:[E.jsx("p",{className:"text-xl mb-4",children:"No photos in this album"}),E.jsxs("button",{onClick:e,className:"text-blue-400 hover:text-blue-300 flex items-center gap-2",children:[E.jsx(Ip,{className:"w-4 h-4"})," Back to Albums"]})]}):E.jsx(pm,{photos:l,initialIndex:0,onClose:e,albumName:c.name,showThumbnails:!0,isEditMode:t})}function GP(r,e=[]){let t=[];function i(l,c){const f=Y.createContext(c),p=t.length;t=[...t,c];const y=T=>{var ae;const{scope:x,children:V,...H}=T,W=((ae=x==null?void 0:x[r])==null?void 0:ae[p])||f,G=Y.useMemo(()=>H,Object.values(H));return E.jsx(W.Provider,{value:G,children:V})};y.displayName=l+"Provider";function w(T,x){var W;const V=((W=x==null?void 0:x[r])==null?void 0:W[p])||f,H=Y.useContext(V);if(H)return H;if(c!==void 0)return c;throw new Error(`\`${T}\` must be used within \`${l}\``)}return[y,w]}const o=()=>{const l=t.map(c=>Y.createContext(c));return function(f){const p=(f==null?void 0:f[r])||l;return Y.useMemo(()=>({[`__scope${r}`]:{...f,[r]:p}}),[f,p])}};return o.scopeName=r,[i,WP(o,...e)]}function WP(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const i=r.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=i.reduce((f,{useScope:p,scopeName:y})=>{const T=p(l)[`__scope${y}`];return{...f,...T}},{});return Y.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}W0();function j0(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function qP(...r){return e=>{let t=!1;const i=r.map(o=>{const l=j0(o,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():j0(r[o],null)}}}}var M1=Y.forwardRef((r,e)=>{const{children:t,...i}=r,o=Y.Children.toArray(t),l=o.find(QP);if(l){const c=l.props.children,f=o.map(p=>p===l?Y.Children.count(c)>1?Y.Children.only(null):Y.isValidElement(c)?c.props.children:null:p);return E.jsx(vp,{...i,ref:e,children:Y.isValidElement(c)?Y.cloneElement(c,void 0,f):null})}return E.jsx(vp,{...i,ref:e,children:t})});M1.displayName="Slot";var vp=Y.forwardRef((r,e)=>{const{children:t,...i}=r;if(Y.isValidElement(t)){const o=YP(t),l=XP(i,t.props);return t.type!==Y.Fragment&&(l.ref=e?qP(e,o):o),Y.cloneElement(t,l)}return Y.Children.count(t)>1?Y.Children.only(null):null});vp.displayName="SlotClone";var KP=({children:r})=>E.jsx(E.Fragment,{children:r});function QP(r){return Y.isValidElement(r)&&r.type===KP}function XP(r,e){const t={...e};for(const i in e){const o=r[i],l=e[i];/^on[A-Z]/.test(i)?o&&l?t[i]=(...f)=>{l(...f),o(...f)}:o&&(t[i]=o):i==="style"?t[i]={...o,...l}:i==="className"&&(t[i]=[o,l].filter(Boolean).join(" "))}return{...r,...t}}function YP(r){var i,o;let e=(i=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(o=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var JP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],V1=JP.reduce((r,e)=>{const t=Y.forwardRef((i,o)=>{const{asChild:l,...c}=i,f=l?M1:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(f,{...c,ref:o})});return t.displayName=`Primitive.${e}`,{...r,[e]:t}},{}),xm="Progress",km=100,[ZP]=GP(xm),[eb,tb]=ZP(xm),L1=Y.forwardRef((r,e)=>{const{__scopeProgress:t,value:i=null,max:o,getValueLabel:l=nb,...c}=r;(o||o===0)&&!U0(o)&&console.error(rb(`${o}`,"Progress"));const f=U0(o)?o:km;i!==null&&!z0(i,f)&&console.error(ib(`${i}`,"Progress"));const p=z0(i,f)?i:null,y=dh(p)?l(p,f):void 0;return E.jsx(eb,{scope:t,value:p,max:f,children:E.jsx(V1.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":dh(p)?p:void 0,"aria-valuetext":y,role:"progressbar","data-state":U1(p,f),"data-value":p??void 0,"data-max":f,...c,ref:e})})});L1.displayName=xm;var F1="ProgressIndicator",j1=Y.forwardRef((r,e)=>{const{__scopeProgress:t,...i}=r,o=tb(F1,t);return E.jsx(V1.div,{"data-state":U1(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...i,ref:e})});j1.displayName=F1;function nb(r,e){return`${Math.round(r/e*100)}%`}function U1(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function dh(r){return typeof r=="number"}function U0(r){return dh(r)&&!isNaN(r)&&r>0}function z0(r,e){return dh(r)&&!isNaN(r)&&r<=e&&r>=0}function rb(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${km}\`.`}function ib(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${km} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var sb=L1,ob=j1;function z1(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=z1(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function ab(){for(var r,e,t=0,i="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=z1(r))&&(i&&(i+=" "),i+=e);return i}const Cm="-",lb=r=>{const e=cb(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=r;return{getClassGroupId:c=>{const f=c.split(Cm);return f[0]===""&&f.length!==1&&f.shift(),B1(f,e)||ub(c)},getConflictingClassGroupIds:(c,f)=>{const p=t[c]||[];return f&&i[c]?[...p,...i[c]]:p}}},B1=(r,e)=>{var c;if(r.length===0)return e.classGroupId;const t=r[0],i=e.nextPart.get(t),o=i?B1(r.slice(1),i):void 0;if(o)return o;if(e.validators.length===0)return;const l=r.join(Cm);return(c=e.validators.find(({validator:f})=>f(l)))==null?void 0:c.classGroupId},B0=/^\[(.+)\]$/,ub=r=>{if(B0.test(r)){const e=B0.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},cb=r=>{const{theme:e,classGroups:t}=r,i={nextPart:new Map,validators:[]};for(const o in t)wp(t[o],i,o,e);return i},wp=(r,e,t,i)=>{r.forEach(o=>{if(typeof o=="string"){const l=o===""?e:$0(e,o);l.classGroupId=t;return}if(typeof o=="function"){if(hb(o)){wp(o(i),e,t,i);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([l,c])=>{wp(c,$0(e,l),t,i)})})},$0=(r,e)=>{let t=r;return e.split(Cm).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},hb=r=>r.isThemeGetter,db=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const o=(l,c)=>{t.set(l,c),e++,e>r&&(e=0,i=t,t=new Map)};return{get(l){let c=t.get(l);if(c!==void 0)return c;if((c=i.get(l))!==void 0)return o(l,c),c},set(l,c){t.has(l)?t.set(l,c):o(l,c)}}},_p="!",Ep=":",fb=Ep.length,pb=r=>{const{prefix:e,experimentalParseClassName:t}=r;let i=o=>{const l=[];let c=0,f=0,p=0,y;for(let H=0;H<o.length;H++){let W=o[H];if(c===0&&f===0){if(W===Ep){l.push(o.slice(p,H)),p=H+fb;continue}if(W==="/"){y=H;continue}}W==="["?c++:W==="]"?c--:W==="("?f++:W===")"&&f--}const w=l.length===0?o:o.substring(p),T=mb(w),x=T!==w,V=y&&y>p?y-p:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:T,maybePostfixModifierPosition:V}};if(e){const o=e+Ep,l=i;i=c=>c.startsWith(o)?l(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const o=i;i=l=>t({className:l,parseClassName:o})}return i},mb=r=>r.endsWith(_p)?r.substring(0,r.length-1):r.startsWith(_p)?r.substring(1):r,gb=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const o=[];let l=[];return i.forEach(c=>{c[0]==="["||e[c]?(o.push(...l.sort(),c),l=[]):l.push(c)}),o.push(...l.sort()),o}},yb=r=>({cache:db(r.cacheSize),parseClassName:pb(r),sortModifiers:gb(r),...lb(r)}),vb=/\s+/,wb=(r,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:l}=e,c=[],f=r.trim().split(vb);let p="";for(let y=f.length-1;y>=0;y-=1){const w=f[y],{isExternal:T,modifiers:x,hasImportantModifier:V,baseClassName:H,maybePostfixModifierPosition:W}=t(w);if(T){p=w+(p.length>0?" "+p:p);continue}let G=!!W,ae=i(G?H.substring(0,W):H);if(!ae){if(!G){p=w+(p.length>0?" "+p:p);continue}if(ae=i(H),!ae){p=w+(p.length>0?" "+p:p);continue}G=!1}const le=l(x).join(":"),U=V?le+_p:le,q=U+ae;if(c.includes(q))continue;c.push(q);const ne=o(ae,G);for(let Q=0;Q<ne.length;++Q){const k=ne[Q];c.push(U+k)}p=w+(p.length>0?" "+p:p)}return p};function _b(){let r=0,e,t,i="";for(;r<arguments.length;)(e=arguments[r++])&&(t=$1(e))&&(i&&(i+=" "),i+=t);return i}const $1=r=>{if(typeof r=="string")return r;let e,t="";for(let i=0;i<r.length;i++)r[i]&&(e=$1(r[i]))&&(t&&(t+=" "),t+=e);return t};function Eb(r,...e){let t,i,o,l=c;function c(p){const y=e.reduce((w,T)=>T(w),r());return t=yb(y),i=t.cache.get,o=t.cache.set,l=f,f(p)}function f(p){const y=i(p);if(y)return y;const w=wb(p,t);return o(p,w),w}return function(){return l(_b.apply(null,arguments))}}const At=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},H1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,G1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Tb=/^\d+\/\d+$/,Ib=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Sb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,kb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Cb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qo=r=>Tb.test(r),Oe=r=>!!r&&!Number.isNaN(Number(r)),Mi=r=>!!r&&Number.isInteger(Number(r)),Of=r=>r.endsWith("%")&&Oe(r.slice(0,-1)),qr=r=>Ib.test(r),Ab=()=>!0,Pb=r=>Sb.test(r)&&!xb.test(r),W1=()=>!1,bb=r=>kb.test(r),Rb=r=>Cb.test(r),Nb=r=>!pe(r)&&!me(r),Db=r=>Ia(r,Q1,W1),pe=r=>H1.test(r),Ls=r=>Ia(r,X1,Pb),Mf=r=>Ia(r,Fb,Oe),H0=r=>Ia(r,q1,W1),Ob=r=>Ia(r,K1,Rb),kc=r=>Ia(r,Y1,bb),me=r=>G1.test(r),El=r=>Sa(r,X1),Mb=r=>Sa(r,jb),G0=r=>Sa(r,q1),Vb=r=>Sa(r,Q1),Lb=r=>Sa(r,K1),Cc=r=>Sa(r,Y1,!0),Ia=(r,e,t)=>{const i=H1.exec(r);return i?i[1]?e(i[1]):t(i[2]):!1},Sa=(r,e,t=!1)=>{const i=G1.exec(r);return i?i[1]?e(i[1]):t:!1},q1=r=>r==="position"||r==="percentage",K1=r=>r==="image"||r==="url",Q1=r=>r==="length"||r==="size"||r==="bg-size",X1=r=>r==="length",Fb=r=>r==="number",jb=r=>r==="family-name",Y1=r=>r==="shadow",Ub=()=>{const r=At("color"),e=At("font"),t=At("text"),i=At("font-weight"),o=At("tracking"),l=At("leading"),c=At("breakpoint"),f=At("container"),p=At("spacing"),y=At("radius"),w=At("shadow"),T=At("inset-shadow"),x=At("text-shadow"),V=At("drop-shadow"),H=At("blur"),W=At("perspective"),G=At("aspect"),ae=At("ease"),le=At("animate"),U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ne=()=>[...q(),me,pe],Q=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],I=()=>[me,pe,p],A=()=>[qo,"full","auto",...I()],R=()=>[Mi,"none","subgrid",me,pe],N=()=>["auto",{span:["full",Mi,me,pe]},Mi,me,pe],M=()=>[Mi,"auto",me,pe],C=()=>["auto","min","max","fr",me,pe],Ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],He=()=>["start","end","center","stretch","center-safe","end-safe"],Be=()=>["auto",...I()],Ve=()=>[qo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],B=()=>[r,me,pe],se=()=>[...q(),G0,H0,{position:[me,pe]}],ie=()=>["no-repeat",{repeat:["","x","y","space","round"]}],b=()=>["auto","cover","contain",Vb,Db,{size:[me,pe]}],K=()=>[Of,El,Ls],he=()=>["","none","full",y,me,pe],ye=()=>["",Oe,El,Ls],Ne=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ie=()=>[Oe,Of,G0,H0],Le=()=>["","none",H,me,pe],We=()=>["none",Oe,me,pe],yt=()=>["none",Oe,me,pe],Yn=()=>[Oe,me,pe],Jn=()=>[qo,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qr],breakpoint:[qr],color:[Ab],container:[qr],"drop-shadow":[qr],ease:["in","out","in-out"],font:[Nb],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qr],shadow:[qr],spacing:["px",Oe],text:[qr],"text-shadow":[qr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qo,pe,me,G]}],container:["container"],columns:[{columns:[Oe,pe,me,f]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ne()}],overflow:[{overflow:Q()}],"overflow-x":[{"overflow-x":Q()}],"overflow-y":[{"overflow-y":Q()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Mi,"auto",me,pe]}],basis:[{basis:[qo,"full","auto",f,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Oe,qo,"auto","initial","none",pe]}],grow:[{grow:["",Oe,me,pe]}],shrink:[{shrink:["",Oe,me,pe]}],order:[{order:[Mi,"first","last","none",me,pe]}],"grid-cols":[{"grid-cols":R()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":R()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":C()}],"auto-rows":[{"auto-rows":C()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...Ae(),"normal"]}],"justify-items":[{"justify-items":[...He(),"normal"]}],"justify-self":[{"justify-self":["auto",...He()]}],"align-content":[{content:["normal",...Ae()]}],"align-items":[{items:[...He(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...He(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ae()}],"place-items":[{"place-items":[...He(),"baseline"]}],"place-self":[{"place-self":["auto",...He()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:Be()}],mx:[{mx:Be()}],my:[{my:Be()}],ms:[{ms:Be()}],me:[{me:Be()}],mt:[{mt:Be()}],mr:[{mr:Be()}],mb:[{mb:Be()}],ml:[{ml:Be()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ve()}],w:[{w:[f,"screen",...Ve()]}],"min-w":[{"min-w":[f,"screen","none",...Ve()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[c]},...Ve()]}],h:[{h:["screen",...Ve()]}],"min-h":[{"min-h":["screen","none",...Ve()]}],"max-h":[{"max-h":["screen",...Ve()]}],"font-size":[{text:["base",t,El,Ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,me,Mf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Of,pe]}],"font-family":[{font:[Mb,pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,me,pe]}],"line-clamp":[{"line-clamp":[Oe,"none",me,Mf]}],leading:[{leading:[l,...I()]}],"list-image":[{"list-image":["none",me,pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",me,pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[Oe,"from-font","auto",me,Ls]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Oe,"auto",me,pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me,pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me,pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:ie()}],"bg-size":[{bg:b()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mi,me,pe],radial:["",me,pe],conic:[Mi,me,pe]},Lb,Ob]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:he()}],"rounded-s":[{"rounded-s":he()}],"rounded-e":[{"rounded-e":he()}],"rounded-t":[{"rounded-t":he()}],"rounded-r":[{"rounded-r":he()}],"rounded-b":[{"rounded-b":he()}],"rounded-l":[{"rounded-l":he()}],"rounded-ss":[{"rounded-ss":he()}],"rounded-se":[{"rounded-se":he()}],"rounded-ee":[{"rounded-ee":he()}],"rounded-es":[{"rounded-es":he()}],"rounded-tl":[{"rounded-tl":he()}],"rounded-tr":[{"rounded-tr":he()}],"rounded-br":[{"rounded-br":he()}],"rounded-bl":[{"rounded-bl":he()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Oe,me,pe]}],"outline-w":[{outline:["",Oe,El,Ls]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",w,Cc,kc]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",T,Cc,kc]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Oe,Ls]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",x,Cc,kc]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Oe,me,pe]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Oe]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ie()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":Ie()}],"mask-image-t-to-pos":[{"mask-t-to":Ie()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":Ie()}],"mask-image-r-to-pos":[{"mask-r-to":Ie()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":Ie()}],"mask-image-b-to-pos":[{"mask-b-to":Ie()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":Ie()}],"mask-image-l-to-pos":[{"mask-l-to":Ie()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":Ie()}],"mask-image-x-to-pos":[{"mask-x-to":Ie()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":Ie()}],"mask-image-y-to-pos":[{"mask-y-to":Ie()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[me,pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ie()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":q()}],"mask-image-conic-pos":[{"mask-conic":[Oe]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ie()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:ie()}],"mask-size":[{mask:b()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",me,pe]}],filter:[{filter:["","none",me,pe]}],blur:[{blur:Le()}],brightness:[{brightness:[Oe,me,pe]}],contrast:[{contrast:[Oe,me,pe]}],"drop-shadow":[{"drop-shadow":["","none",V,Cc,kc]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Oe,me,pe]}],"hue-rotate":[{"hue-rotate":[Oe,me,pe]}],invert:[{invert:["",Oe,me,pe]}],saturate:[{saturate:[Oe,me,pe]}],sepia:[{sepia:["",Oe,me,pe]}],"backdrop-filter":[{"backdrop-filter":["","none",me,pe]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[Oe,me,pe]}],"backdrop-contrast":[{"backdrop-contrast":[Oe,me,pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Oe,me,pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Oe,me,pe]}],"backdrop-invert":[{"backdrop-invert":["",Oe,me,pe]}],"backdrop-opacity":[{"backdrop-opacity":[Oe,me,pe]}],"backdrop-saturate":[{"backdrop-saturate":[Oe,me,pe]}],"backdrop-sepia":[{"backdrop-sepia":["",Oe,me,pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",me,pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Oe,"initial",me,pe]}],ease:[{ease:["linear","initial",ae,me,pe]}],delay:[{delay:[Oe,me,pe]}],animate:[{animate:["none",le,me,pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[W,me,pe]}],"perspective-origin":[{"perspective-origin":ne()}],rotate:[{rotate:We()}],"rotate-x":[{"rotate-x":We()}],"rotate-y":[{"rotate-y":We()}],"rotate-z":[{"rotate-z":We()}],scale:[{scale:yt()}],"scale-x":[{"scale-x":yt()}],"scale-y":[{"scale-y":yt()}],"scale-z":[{"scale-z":yt()}],"scale-3d":["scale-3d"],skew:[{skew:Yn()}],"skew-x":[{"skew-x":Yn()}],"skew-y":[{"skew-y":Yn()}],transform:[{transform:[me,pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:ne()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Jn()}],"translate-x":[{"translate-x":Jn()}],"translate-y":[{"translate-y":Jn()}],"translate-z":[{"translate-z":Jn()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me,pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me,pe]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Oe,El,Ls,Mf]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},zb=Eb(Ub);function Bb(...r){return zb(ab(r))}function $b({className:r,value:e,...t}){return E.jsx(sb,{"data-slot":"progress",className:Bb("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...t,children:E.jsx(ob,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function Hb({isOpen:r,onClose:e}){const[t,i]=Y.useState([]),[o,l]=Y.useState(""),[c,f]=Y.useState(""),[p,y]=Y.useState(null),[w,T]=Y.useState(!1),[x,V]=Y.useState(""),[H,W]=Y.useState(""),[G,ae]=Y.useState(""),[le,U]=Y.useState(!1),[q,ne]=Y.useState({completed:0,total:0}),[Q,k]=Y.useState(!1),{uploadAndAddPhoto:I,batchUploadPhotos:A,createAlbum:R,deleteAlbumItem:N,albums:M}=ri();if(Y.useEffect(()=>{if(t.length!==1){y(null);return}(async()=>{try{const se=await n1.parse(t[0],{tiff:!0,exif:!0,gps:!0});let ie={};if(se)if(ie={takenAt:se.DateTimeOriginal?se.DateTimeOriginal.toISOString():void 0,cameraMake:se.Make,cameraModel:se.Model,fNumber:se.FNumber,exposureTime:se.ExposureTime,iso:se.ISO,gps:se.latitude&&se.longitude?{latitude:se.latitude,longitude:se.longitude}:void 0},ie.gps){y(ie);const b=await r1(ie.gps.latitude,ie.gps.longitude);b&&y(K=>K?{...K,locationName:b}:{locationName:b})}else y(ie)}catch(se){console.warn("Failed to extract EXIF data for preview:",se),y(null)}})()},[t]),!r)return null;const C=()=>{i([]),l(""),f(""),T(!1),V(""),W(""),ae(""),y(null),ne({completed:0,total:0}),k(!1)},Ae=B=>{B.target.files&&i(Array.from(B.target.files))},He=async B=>{if(B.preventDefault(),t.length===0||t.length===1&&!o)return;U(!0),ne({completed:0,total:t.length});let se=c,ie=null;try{if(w){if(!x||!G){alert("Please fill in album details"),U(!1);return}const b=await R(x,H,G);se=b,ie=b}if(!se){alert("Please select or create an album"),U(!1);return}try{t.length===1?(await I(t[0],o,se,p||void 0),ne({completed:1,total:1})):await A(t,se,(b,K)=>{ne({completed:b,total:K})})}catch(b){throw ie&&(console.warn(`Photo upload failed. Rolling back album creation for albumId: ${ie}`),await N(ie)),b}e(),C()}catch(b){console.error("Upload failed:",b),alert(`Upload failed: ${b.message||"Unknown error"}`)}finally{U(!1)}},Be=t.length===1,Ve=q.total>0?q.completed/q.total*100:0;return E.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-zinc-900 rounded-lg w-full max-w-md p-6 relative border border-white/10 max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-700 transition-all duration-300",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white",children:E.jsx(fa,{className:"w-6 h-6"})}),E.jsx("h2",{className:"text-xl text-white font-semibold mb-6",children:Be?"Upload Photo":t.length>1?`Upload ${t.length} Photos`:"Upload Photos"}),E.jsxs("form",{onSubmit:He,className:"space-y-4",children:[E.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-lg p-8 text-center hover:border-white/40 transition-colors cursor-pointer relative",children:[E.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Ae,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),t.length>0?E.jsx("div",{className:"text-white",children:Be?E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"font-medium truncate",children:t[0].name}),E.jsxs("p",{className:"text-sm text-white/60 mt-1",children:[(t[0].size/1024/1024).toFixed(2)," MB"]})]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"flex justify-center mb-2",children:E.jsxs("div",{className:"relative",children:[E.jsx(AT,{className:"w-8 h-8 text-white/80"}),E.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t.length})]})}),E.jsxs("p",{className:"font-medium",children:[t.length," photos selected"]}),E.jsxs("p",{className:"text-sm text-white/60 mt-1",children:[(t.reduce((B,se)=>B+se.size,0)/1024/1024).toFixed(2)," MB Total"]})]})}):E.jsxs("div",{className:"text-white/60",children:[E.jsx(JT,{className:"w-8 h-8 mx-auto mb-2"}),E.jsx("p",{children:"Click or drag to upload images"})]})]}),Be&&p&&E.jsxs("div",{className:"bg-white/5 p-3 rounded border border-white/10 text-sm space-y-2",children:[E.jsx("h4",{className:"text-xs text-white/40 font-bold uppercase",children:"Photo Info"}),p.takenAt&&E.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[E.jsx(Q0,{className:"w-4 h-4"}),E.jsx("span",{children:new Date(p.takenAt).toLocaleString()})]}),p.cameraModel&&E.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[E.jsx(X0,{className:"w-4 h-4"}),E.jsxs("span",{children:[p.cameraMake," ",p.cameraModel]})]}),p.gps&&E.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[E.jsx(jc,{className:"w-4 h-4"}),E.jsx("span",{children:p.locationName?p.locationName:`GPS: ${p.gps.latitude.toFixed(4)}, ${p.gps.longitude.toFixed(4)}`})]}),E.jsxs("div",{className:"grid grid-cols-3 gap-2 text-white/70",children:[p.fNumber&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(K0,{className:"w-4 h-4"}),E.jsxs("span",{children:["f/",p.fNumber.toFixed(1)]})]}),p.exposureTime&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Y0,{className:"w-4 h-4"}),E.jsxs("span",{children:["1/",Math.round(1/p.exposureTime),"s"]})]}),p.iso&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xs font-bold border border-white/40 px-1 rounded",children:"ISO"}),E.jsx("span",{children:p.iso})]})]})]}),Be&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Title"}),E.jsx("input",{type:"text",value:o,onChange:B=>l(B.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"Enter photo title",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Album"}),w?E.jsxs("div",{className:"space-y-3 bg-white/5 p-3 rounded border border-white/10",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("span",{className:"text-sm text-white font-medium",children:"New Album"}),E.jsx("button",{type:"button",onClick:()=>T(!1),className:"text-xs text-white/40 hover:text-white",children:"Cancel"})]}),E.jsx("input",{type:"text",value:G,onChange:B=>ae(B.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white text-sm",placeholder:"Theme (e.g. Travel)"}),E.jsx("input",{type:"text",value:x,onChange:B=>V(B.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white text-sm",placeholder:"Album Name"}),E.jsx("textarea",{value:H,onChange:B=>W(B.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white text-sm",placeholder:"Description (Optional)",rows:2})]}):E.jsxs("div",{className:"space-y-2",children:[E.jsx("div",{className:"transition-all duration-300 ease-in-out",style:{marginBottom:Q?"14rem":"0"},children:E.jsx(fm,{albums:M,selectedAlbumId:c,onSelect:f,onOpenChange:k})}),E.jsxs("button",{type:"button",onClick:()=>{T(!0),f("")},className:"text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[E.jsx(Uc,{className:"w-3 h-3"})," Create new album"]})]})]}),le&&E.jsxs("div",{className:"space-y-1 pt-2",children:[E.jsx($b,{value:Ve,className:"w-full h-2 bg-white/10 [&>div]:bg-white"}),E.jsxs("p",{className:"text-xs text-white/60 text-right",children:[q.completed," / ",q.total]})]}),E.jsx("button",{type:"submit",disabled:t.length===0||Be&&!o||le||!c&&!w,className:"w-full bg-white text-black font-medium py-2 rounded hover:bg-white/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-6",children:le?E.jsxs(E.Fragment,{children:[E.jsx(Hi,{className:"w-4 h-4 animate-spin"}),(t.length>1,"Uploading...")]}):t.length>1?"Upload All Photos":"Upload Photo"})]})]})})}function Gb({isOpen:r,onClose:e}){const[t,i]=Y.useState(""),[o,l]=Y.useState(""),[c,f]=Y.useState(""),[p,y]=Y.useState(!1),{createAlbum:w}=ri();if(!r)return null;const T=async x=>{if(x.preventDefault(),!(!t||!o))try{y(!0),await w(t,c,o),e(),i(""),l(""),f("")}catch(V){console.error("Failed to create album:",V),alert(`Failed to create album: ${V.message}`)}finally{y(!1)}};return E.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-zinc-900 rounded-lg w-full max-w-md p-6 relative border border-white/10",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white",children:E.jsx(fa,{className:"w-6 h-6"})}),E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:E.jsx(DT,{className:"w-5 h-5 text-white"})}),E.jsx("h2",{className:"text-xl text-white font-semibold",children:"Create New Album"})]}),E.jsxs("form",{onSubmit:T,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Theme"}),E.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"e.g. Travel, Events",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Album Name"}),E.jsx("input",{type:"text",value:t,onChange:x=>i(x.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"e.g. Summer Trip 2023",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Description"}),E.jsx("textarea",{value:c,onChange:x=>f(x.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40 resize-none",placeholder:"Optional description...",rows:3})]}),E.jsx("button",{type:"submit",disabled:!t||!o||p,className:"w-full bg-white text-black font-medium py-2 rounded hover:bg-white/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-6",children:p?E.jsxs(E.Fragment,{children:[E.jsx(Hi,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):"Create Album"})]})]})})}function Wb({isOpen:r,onClose:e,album:t}){const[i,o]=Y.useState(""),[l,c]=Y.useState(""),[f,p]=Y.useState(""),[y,w]=Y.useState(!1),[T,x]=Y.useState(!1),{updateAlbum:V,deleteAlbumItem:H}=ri();if(Y.useEffect(()=>{t&&(o(t.name),c(t.theme),p(t.description))},[t]),!r||!t)return null;const W=async ae=>{if(ae.preventDefault(),!(!i||!l))try{w(!0),await V(t.id,{name:i,theme:l,description:f},t.theme),e()}catch(le){console.error("Failed to update album:",le),alert(`Failed to update album: ${le.message}`)}finally{w(!1)}},G=async()=>{if(confirm(`Are you sure you want to delete the album "${t.name}"? All photos within this album will become uncategorized. This action cannot be undone.`))try{x(!0),await H(t.id),e()}catch(ae){console.error("Failed to delete album:",ae),alert(`Failed to delete album: ${ae.message}`)}finally{x(!1)}};return E.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-zinc-900 rounded-lg w-full max-w-md p-6 relative border border-white/10",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white",children:E.jsx(fa,{className:"w-6 h-6"})}),E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:E.jsx(bT,{className:"w-5 h-5 text-white"})}),E.jsx("h2",{className:"text-xl text-white font-semibold",children:"Edit Album"})]}),E.jsxs("form",{onSubmit:W,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Theme"}),E.jsx("input",{type:"text",value:l,onChange:ae=>c(ae.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"e.g. Travel, Events",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Album Name"}),E.jsx("input",{type:"text",value:i,onChange:ae=>o(ae.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"e.g. Summer Trip 2023",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Description"}),E.jsx("textarea",{value:f,onChange:ae=>p(ae.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40 resize-none",placeholder:"Optional description...",rows:3})]}),E.jsxs("div",{className:"flex gap-3 pt-4",children:[E.jsxs("button",{type:"button",onClick:G,disabled:T||y,className:"w-full bg-red-600 text-white font-medium py-2 rounded hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[T?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(ew,{className:"w-4 h-4"}),T?"Deleting...":"Delete"]}),E.jsxs("button",{type:"submit",disabled:!i||!l||y||T,className:"w-full bg-white text-black font-medium py-2 rounded hover:bg-white/90 disabled:opacity-50 flex items-center justify-center gap-2",children:[y?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(J0,{className:"w-4 h-4"}),y?"Saving...":"Save Changes"]})]})]})]})})}function qb({isOpen:r,onClose:e,sourceAlbum:t}){const[i,o]=Y.useState(""),[l,c]=Y.useState(!0),[f,p]=Y.useState(!1),{albums:y,transferAlbumPhotos:w}=ri();if(Y.useEffect(()=>{r||(o(""),c(!0))},[r]),!r||!t)return null;const T=async V=>{if(V.preventDefault(),!(!i||i===t.id)&&confirm(`Are you sure you want to transfer all photos from "${t.name}" to the selected album?`))try{p(!0),await w(t.id,i,l),e()}catch(H){console.error("Failed to transfer photos:",H),alert(`Failed to transfer photos: ${H.message}`)}finally{p(!1)}},x=y.filter(V=>V.id!==t.id);return E.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-zinc-900 rounded-lg w-full max-w-md p-6 relative border border-white/10",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white",children:E.jsx(fa,{className:"w-6 h-6"})}),E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:E.jsx(Vf,{className:"w-5 h-5 text-white"})}),E.jsx("h2",{className:"text-xl text-white font-semibold",children:"Transfer Album"})]}),E.jsxs("form",{onSubmit:T,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"From"}),E.jsx("p",{className:"font-medium text-white p-2 bg-black/20 rounded",children:t.name})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"To"}),E.jsx(fm,{albums:x,selectedAlbumId:i,onSelect:o})]}),E.jsx("div",{className:"pt-2",children:E.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/80",children:[E.jsx("input",{type:"checkbox",checked:l,onChange:V=>c(V.target.checked),className:"w-4 h-4 rounded bg-black/50 border-white/20 text-blue-500 focus:ring-blue-500"}),'Delete "',t.name,'" album after transfer']})}),E.jsx("div",{className:"pt-4",children:E.jsxs("button",{type:"submit",disabled:!i||f,className:"w-full bg-blue-600 text-white font-medium py-2 rounded hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[f?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(Vf,{className:"w-4 h-4"}),f?"Transferring...":`Transfer ${t.photoCount} Photos`]})})]})]})})}function Kb(){const[r,e]=Y.useState("home"),[t,i]=Y.useState(null),[o,l]=Y.useState(null),[c,f]=Y.useState(!1),[p,y]=Y.useState(!1),[w,T]=Y.useState(!1),[x,V]=Y.useState(null),[H,W]=Y.useState(null);Y.useEffect(()=>{const q=yp(),ne=A2(q,Q=>{l(Q),Q||f(!1)});return()=>ne()},[]);const G=q=>{e(q),i(null)},ae=q=>{i(q)},le=()=>{i(null)},U=()=>{o&&f(q=>!q)};return E.jsxs("div",{className:"min-h-screen bg-black",children:[E.jsx(zP,{activeTab:r,onTabChange:G,user:o,isEditMode:c,onEditModeToggle:U,onUploadClick:()=>y(!0)}),E.jsx(Hb,{isOpen:p,onClose:()=>y(!1)}),E.jsx(Gb,{isOpen:w,onClose:()=>T(!1)}),E.jsx(Wb,{isOpen:!!x,onClose:()=>V(null),album:x}),E.jsx(qb,{isOpen:!!H,onClose:()=>W(null),sourceAlbum:H}),E.jsxs("main",{className:"pt-14",children:[r==="home"&&E.jsx(BP,{isEditMode:c}),r==="photos"&&E.jsx(UA,{isEditMode:c}),r==="albums"&&(t?E.jsx(HP,{albumId:t,onBack:le,isEditMode:c}):E.jsx($P,{onAlbumClick:ae,isEditMode:c,onAddNewAlbum:()=>T(!0),onEditAlbum:V,onTransferAlbum:W}))]})]})}hT.createRoot(document.getElementById("root")).render(E.jsx(Kb,{}));
