(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var cf={exports:{}},vl={},hf={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function tT(){if(Dy)return Me;Dy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function x(b){return b===null||typeof b!="object"?null:(b=T&&b[T]||b["@@iterator"],typeof b=="function"?b:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,$={};function W(b,q,he){this.props=b,this.context=q,this.refs=$,this.updater=he||M}W.prototype.isReactComponent={},W.prototype.setState=function(b,q){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,q,"setState")},W.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function le(){}le.prototype=W.prototype;function ae(b,q,he){this.props=b,this.context=q,this.refs=$,this.updater=he||M}var j=ae.prototype=new le;j.constructor=ae,z(j,W.prototype),j.isPureReactComponent=!0;var K=Array.isArray,ne=Object.prototype.hasOwnProperty,Y={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(b,q,he){var ye,Ne={},De=null,Ie=null;if(q!=null)for(ye in q.ref!==void 0&&(Ie=q.ref),q.key!==void 0&&(De=""+q.key),q)ne.call(q,ye)&&!C.hasOwnProperty(ye)&&(Ne[ye]=q[ye]);var Le=arguments.length-2;if(Le===1)Ne.children=he;else if(1<Le){for(var We=Array(Le),yt=0;yt<Le;yt++)We[yt]=arguments[yt+2];Ne.children=We}if(b&&b.defaultProps)for(ye in Le=b.defaultProps,Le)Ne[ye]===void 0&&(Ne[ye]=Le[ye]);return{$$typeof:r,type:b,key:De,ref:Ie,props:Ne,_owner:Y.current}}function A(b,q){return{$$typeof:r,type:b.type,key:q,ref:b.ref,props:b.props,_owner:b._owner}}function N(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function D(b){var q={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(he){return q[he]})}var V=/\/+/g;function k(b,q){return typeof b=="object"&&b!==null&&b.key!=null?D(""+b.key):q.toString(36)}function Ae(b,q,he,ye,Ne){var De=typeof b;(De==="undefined"||De==="boolean")&&(b=null);var Ie=!1;if(b===null)Ie=!0;else switch(De){case"string":case"number":Ie=!0;break;case"object":switch(b.$$typeof){case r:case e:Ie=!0}}if(Ie)return Ie=b,Ne=Ne(Ie),b=ye===""?"."+k(Ie,0):ye,K(Ne)?(he="",b!=null&&(he=b.replace(V,"$&/")+"/"),Ae(Ne,q,he,"",function(yt){return yt})):Ne!=null&&(N(Ne)&&(Ne=A(Ne,he+(!Ne.key||Ie&&Ie.key===Ne.key?"":(""+Ne.key).replace(V,"$&/")+"/")+b)),q.push(Ne)),1;if(Ie=0,ye=ye===""?".":ye+":",K(b))for(var Le=0;Le<b.length;Le++){De=b[Le];var We=ye+k(De,Le);Ie+=Ae(De,q,he,We,Ne)}else if(We=x(b),typeof We=="function")for(b=We.call(b),Le=0;!(De=b.next()).done;)De=De.value,We=ye+k(De,Le++),Ie+=Ae(De,q,he,We,Ne);else if(De==="object")throw q=String(b),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return Ie}function He(b,q,he){if(b==null)return b;var ye=[],Ne=0;return Ae(b,ye,"","",function(De){return q.call(he,De,Ne++)}),ye}function Be(b){if(b._status===-1){var q=b._result;q=q(),q.then(function(he){(b._status===0||b._status===-1)&&(b._status=1,b._result=he)},function(he){(b._status===0||b._status===-1)&&(b._status=2,b._result=he)}),b._status===-1&&(b._status=0,b._result=q)}if(b._status===1)return b._result.default;throw b._result}var Ve={current:null},H={transition:null},se={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:H,ReactCurrentOwner:Y};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:He,forEach:function(b,q,he){He(b,function(){q.apply(this,arguments)},he)},count:function(b){var q=0;return He(b,function(){q++}),q},toArray:function(b){return He(b,function(q){return q})||[]},only:function(b){if(!N(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Me.Component=W,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=ae,Me.StrictMode=i,Me.Suspense=p,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Me.act=ie,Me.cloneElement=function(b,q,he){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var ye=z({},b.props),Ne=b.key,De=b.ref,Ie=b._owner;if(q!=null){if(q.ref!==void 0&&(De=q.ref,Ie=Y.current),q.key!==void 0&&(Ne=""+q.key),b.type&&b.type.defaultProps)var Le=b.type.defaultProps;for(We in q)ne.call(q,We)&&!C.hasOwnProperty(We)&&(ye[We]=q[We]===void 0&&Le!==void 0?Le[We]:q[We])}var We=arguments.length-2;if(We===1)ye.children=he;else if(1<We){Le=Array(We);for(var yt=0;yt<We;yt++)Le[yt]=arguments[yt+2];ye.children=Le}return{$$typeof:r,type:b.type,key:Ne,ref:De,props:ye,_owner:Ie}},Me.createContext=function(b){return b={$$typeof:c,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},Me.createElement=S,Me.createFactory=function(b){var q=S.bind(null,b);return q.type=b,q},Me.createRef=function(){return{current:null}},Me.forwardRef=function(b){return{$$typeof:f,render:b}},Me.isValidElement=N,Me.lazy=function(b){return{$$typeof:_,_payload:{_status:-1,_result:b},_init:Be}},Me.memo=function(b,q){return{$$typeof:y,type:b,compare:q===void 0?null:q}},Me.startTransition=function(b){var q=H.transition;H.transition={};try{b()}finally{H.transition=q}},Me.unstable_act=ie,Me.useCallback=function(b,q){return Ve.current.useCallback(b,q)},Me.useContext=function(b){return Ve.current.useContext(b)},Me.useDebugValue=function(){},Me.useDeferredValue=function(b){return Ve.current.useDeferredValue(b)},Me.useEffect=function(b,q){return Ve.current.useEffect(b,q)},Me.useId=function(){return Ve.current.useId()},Me.useImperativeHandle=function(b,q,he){return Ve.current.useImperativeHandle(b,q,he)},Me.useInsertionEffect=function(b,q){return Ve.current.useInsertionEffect(b,q)},Me.useLayoutEffect=function(b,q){return Ve.current.useLayoutEffect(b,q)},Me.useMemo=function(b,q){return Ve.current.useMemo(b,q)},Me.useReducer=function(b,q,he){return Ve.current.useReducer(b,q,he)},Me.useRef=function(b){return Ve.current.useRef(b)},Me.useState=function(b){return Ve.current.useState(b)},Me.useSyncExternalStore=function(b,q,he){return Ve.current.useSyncExternalStore(b,q,he)},Me.useTransition=function(){return Ve.current.useTransition()},Me.version="18.3.1",Me}var Oy;function _p(){return Oy||(Oy=1,hf.exports=tT()),hf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function nT(){if(My)return vl;My=1;var r=_p(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,y){var _,T={},x=null,M=null;y!==void 0&&(x=""+y),p.key!==void 0&&(x=""+p.key),p.ref!==void 0&&(M=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(T[_]=p[_]);if(f&&f.defaultProps)for(_ in p=f.defaultProps,p)T[_]===void 0&&(T[_]=p[_]);return{$$typeof:e,type:f,key:x,ref:M,props:T,_owner:o.current}}return vl.Fragment=t,vl.jsx=c,vl.jsxs=c,vl}var Vy;function rT(){return Vy||(Vy=1,cf.exports=nT()),cf.exports}var E=rT(),gc={},df={exports:{}},ln={},ff={exports:{}},pf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function iT(){return Ly||(Ly=1,(function(r){function e(H,se){var ie=H.length;H.push(se);e:for(;0<ie;){var b=ie-1>>>1,q=H[b];if(0<o(q,se))H[b]=se,H[ie]=q,ie=b;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var se=H[0],ie=H.pop();if(ie!==se){H[0]=ie;e:for(var b=0,q=H.length,he=q>>>1;b<he;){var ye=2*(b+1)-1,Ne=H[ye],De=ye+1,Ie=H[De];if(0>o(Ne,ie))De<q&&0>o(Ie,Ne)?(H[b]=Ie,H[De]=ie,b=De):(H[b]=Ne,H[ye]=ie,b=ye);else if(De<q&&0>o(Ie,ie))H[b]=Ie,H[De]=ie,b=De;else break e}}return se}function o(H,se){var ie=H.sortIndex-se.sortIndex;return ie!==0?ie:H.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var p=[],y=[],_=1,T=null,x=3,M=!1,z=!1,$=!1,W=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(H){for(var se=t(y);se!==null;){if(se.callback===null)i(y);else if(se.startTime<=H)i(y),se.sortIndex=se.expirationTime,e(p,se);else break;se=t(y)}}function K(H){if($=!1,j(H),!z)if(t(p)!==null)z=!0,Be(ne);else{var se=t(y);se!==null&&Ve(K,se.startTime-H)}}function ne(H,se){z=!1,$&&($=!1,le(S),S=-1),M=!0;var ie=x;try{for(j(se),T=t(p);T!==null&&(!(T.expirationTime>se)||H&&!D());){var b=T.callback;if(typeof b=="function"){T.callback=null,x=T.priorityLevel;var q=b(T.expirationTime<=se);se=r.unstable_now(),typeof q=="function"?T.callback=q:T===t(p)&&i(p),j(se)}else i(p);T=t(p)}if(T!==null)var he=!0;else{var ye=t(y);ye!==null&&Ve(K,ye.startTime-se),he=!1}return he}finally{T=null,x=ie,M=!1}}var Y=!1,C=null,S=-1,A=5,N=-1;function D(){return!(r.unstable_now()-N<A)}function V(){if(C!==null){var H=r.unstable_now();N=H;var se=!0;try{se=C(!0,H)}finally{se?k():(Y=!1,C=null)}}else Y=!1}var k;if(typeof ae=="function")k=function(){ae(V)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,He=Ae.port2;Ae.port1.onmessage=V,k=function(){He.postMessage(null)}}else k=function(){W(V,0)};function Be(H){C=H,Y||(Y=!0,k())}function Ve(H,se){S=W(function(){H(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){z||M||(z=!0,Be(ne))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(H){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var ie=x;x=se;try{return H()}finally{x=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,se){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=x;x=H;try{return se()}finally{x=ie}},r.unstable_scheduleCallback=function(H,se,ie){var b=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?b+ie:b):ie=b,H){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ie+q,H={id:_++,callback:se,priorityLevel:H,startTime:ie,expirationTime:q,sortIndex:-1},ie>b?(H.sortIndex=ie,e(y,H),t(p)===null&&H===t(y)&&($?(le(S),S=-1):$=!0,Ve(K,ie-b))):(H.sortIndex=q,e(p,H),z||M||(z=!0,Be(ne))),H},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(H){var se=x;return function(){var ie=x;x=se;try{return H.apply(this,arguments)}finally{x=ie}}}})(pf)),pf}var Fy;function sT(){return Fy||(Fy=1,ff.exports=iT()),ff.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function oT(){if(Uy)return ln;Uy=1;var r=_p(),e=sT();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},T={};function x(n){return p.call(T,n)?!0:p.call(_,n)?!1:y.test(n)?T[n]=!0:(_[n]=!0,!1)}function M(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function z(n,s,a,h){if(s===null||typeof s>"u"||M(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,a,h,d,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){W[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];W[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){W[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){W[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){W[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){W[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){W[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){W[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){W[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var le=/[\-:]([a-z])/g;function ae(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(le,ae);W[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(le,ae);W[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(le,ae);W[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){W[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),W.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){W[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function j(n,s,a,h){var d=W.hasOwnProperty(s)?W[s]:null;(d!==null?d.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(z(s,a,d,h)&&(a=null),h||d===null?x(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,h=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var K=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),Y=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),H=Symbol.iterator;function se(n){return n===null||typeof n!="object"?null:(n=H&&n[H]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,b;function q(n){if(b===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+n}var he=!1;function ye(n,s){if(!n||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var h=B}Reflect.construct(n,[],s)}else{try{s.call()}catch(B){h=B}n.call(s.prototype)}else{try{throw Error()}catch(B){h=B}n()}}catch(B){if(B&&h&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),m=h.stack.split(`
`),w=d.length-1,P=m.length-1;1<=w&&0<=P&&d[w]!==m[P];)P--;for(;1<=w&&0<=P;w--,P--)if(d[w]!==m[P]){if(w!==1||P!==1)do if(w--,P--,0>P||d[w]!==m[P]){var R=`
`+d[w].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=w&&0<=P);break}}}finally{he=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?q(n):""}function Ne(n){switch(n.tag){case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return n=ye(n.type,!1),n;case 11:return n=ye(n.type.render,!1),n;case 1:return n=ye(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case Y:return"Portal";case A:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case Ae:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case He:return s=n.displayName||null,s!==null?s:De(n.type)||"Memo";case Be:s=n._payload,n=n._init;try{return De(n(s))}catch{}}return null}function Ie(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function We(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yt(n){var s=We(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){h=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Yn(n){n._valueTracker||(n._valueTracker=yt(n))}function Jn(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=We(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function ii(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function io(n,s){var a=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function tu(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Le(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function so(n,s){s=s.checked,s!=null&&j(n,"checked",s,!1)}function cs(n,s){so(n,s);var a=Le(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?vt(n,s.type,a):s.hasOwnProperty("defaultValue")&&vt(n,s.type,Le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function xa(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function vt(n,s,a){(s!=="number"||ii(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var dt=Array.isArray;function Mn(n,s,a,h){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Le(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,h&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function ka(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ca(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(dt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Le(a)}}function nu(n,s){var a=Le(s.value),h=Le(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function si(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Aa(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oo(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Aa(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var oi,ru=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(oi=oi||document.createElement("div"),oi.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=oi.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function hs(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iu=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(n){iu.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ai[s]=ai[n]})});function li(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ai.hasOwnProperty(n)&&ai[n]?(""+s).trim():s+"px"}function ao(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=li(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,d):n[a]=d}}var Pa=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vn(n,s){if(s){if(Pa[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function lo(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function uo(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ar=null,Pr=null,ut=null;function ba(n){if(n=rl(n)){if(typeof Ar!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Ru(s),Ar(n.stateNode,n.type,s))}}function ci(n){Pr?ut?ut.push(n):ut=[n]:Pr=n}function hi(){if(Pr){var n=Pr,s=ut;if(ut=Pr=null,ba(n),s)for(n=0;n<s.length;n++)ba(s[n])}}function su(n,s){return n(s)}function ou(){}var Zn=!1;function au(n,s,a){if(Zn)return n(s,a);Zn=!0;try{return su(n,s,a)}finally{Zn=!1,(Pr!==null||ut!==null)&&(ou(),hi())}}function ds(n,s){var a=n.stateNode;if(a===null)return null;var h=Ru(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var di=!1;if(f)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){di=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{di=!1}function lu(n,s,a,h,d,m,w,P,R){var B=Array.prototype.slice.call(arguments,3);try{s.apply(a,B)}catch(ee){this.onError(ee)}}var br=!1,er=null,co=!1,Sn=null,uu={onError:function(n){br=!0,er=n}};function cu(n,s,a,h,d,m,w,P,R){br=!1,er=null,lu.apply(uu,arguments)}function Ra(n,s,a,h,d,m,w,P,R){if(cu.apply(this,arguments),br){if(br){var B=er;br=!1,er=null}else throw Error(t(198));co||(co=!0,Sn=B)}}function Ln(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Na(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function hu(n){if(Ln(n)!==n)throw Error(t(188))}function du(n){var s=n.alternate;if(!s){if(s=Ln(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return hu(d),n;if(m===h)return hu(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=m;else{for(var w=!1,P=d.child;P;){if(P===a){w=!0,a=d,h=m;break}if(P===h){w=!0,h=d,a=m;break}P=P.sibling}if(!w){for(P=m.child;P;){if(P===a){w=!0,a=m,h=d;break}if(P===h){w=!0,h=m,a=d;break}P=P.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function fu(n){return n=du(n),n!==null?fs(n):null}function fs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=fs(n);if(s!==null)return s;n=n.sibling}return null}var Da=e.unstable_scheduleCallback,ho=e.unstable_cancelCallback,ps=e.unstable_shouldYield,Rr=e.unstable_requestPaint,et=e.unstable_now,jh=e.unstable_getCurrentPriorityLevel,fo=e.unstable_ImmediatePriority,Oa=e.unstable_UserBlockingPriority,ms=e.unstable_NormalPriority,Ma=e.unstable_LowPriority,po=e.unstable_IdlePriority,gs=null,dn=null;function pu(n){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(gs,n,void 0,(n.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:ys,tr=Math.log,xn=Math.LN2;function ys(n){return n>>>=0,n===0?32:31-(tr(n)/xn|0)|0}var nr=64,pi=4194304;function Ke(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Nr(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var P=w&~d;P!==0?h=Ke(P):(m&=w,m!==0&&(h=Ke(m)))}else w=a&~d,w!==0?h=Ke(w):m!==0&&(h=Ke(m));if(h===0)return 0;if(s!==0&&s!==h&&(s&d)===0&&(d=h&-h,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-fn(s),d=1<<a,h|=n[a],s&=~d;return h}function vs(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _s(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-fn(m),P=1<<w,R=d[w];R===-1?((P&a)===0||(P&h)!==0)&&(d[w]=vs(P,s)):R<=s&&(n.expiredLanes|=P),m&=~P}}function Va(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function La(){var n=nr;return nr<<=1,(nr&4194240)===0&&(nr=64),n}function Fa(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ws(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-fn(s),n[s]=a}function zh(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-fn(a),m=1<<d;s[d]=0,h[d]=-1,n[d]=-1,a&=~m}}function Ua(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-fn(a),d=1<<h;d&s|n[h]&s&&(n[h]|=s),a&=~d}}var ze=0;function rr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ja,mo,za,Ba,$a,ir=!1,go=[],sr=null,or=null,Vt=null,Es=new Map,Dr=new Map,pn=[],mu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mi(n,s){switch(n){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":Es.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dr.delete(s.pointerId)}}function Fn(n,s,a,h,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[d]},s!==null&&(s=rl(s),s!==null&&mo(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function gu(n,s,a,h,d){switch(s){case"focusin":return sr=Fn(sr,n,s,a,h,d),!0;case"dragenter":return or=Fn(or,n,s,a,h,d),!0;case"mouseover":return Vt=Fn(Vt,n,s,a,h,d),!0;case"pointerover":var m=d.pointerId;return Es.set(m,Fn(Es.get(m)||null,n,s,a,h,d)),!0;case"gotpointercapture":return m=d.pointerId,Dr.set(m,Fn(Dr.get(m)||null,n,s,a,h,d)),!0}return!1}function yo(n){var s=xs(n.target);if(s!==null){var a=Ln(s);if(a!==null){if(s=a.tag,s===13){if(s=Na(a),s!==null){n.blockedOn=s,$a(n.priority,function(){za(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Je(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=vo(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);ui=h,a.target.dispatchEvent(h),ui=null}else return s=rl(a),s!==null&&mo(s),n.blockedOn=a,!1;s.shift()}return!0}function yu(n,s,a){Je(n)&&a.delete(s)}function Bh(){ir=!1,sr!==null&&Je(sr)&&(sr=null),or!==null&&Je(or)&&(or=null),Vt!==null&&Je(Vt)&&(Vt=null),Es.forEach(yu),Dr.forEach(yu)}function gi(n,s){n.blockedOn===s&&(n.blockedOn=null,ir||(ir=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bh)))}function yi(n){function s(d){return gi(d,n)}if(0<go.length){gi(go[0],n);for(var a=1;a<go.length;a++){var h=go[a];h.blockedOn===n&&(h.blockedOn=null)}}for(sr!==null&&gi(sr,n),or!==null&&gi(or,n),Vt!==null&&gi(Vt,n),Es.forEach(s),Dr.forEach(s),a=0;a<pn.length;a++)h=pn[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<pn.length&&(a=pn[0],a.blockedOn===null);)yo(a),a.blockedOn===null&&pn.shift()}var Or=K.ReactCurrentBatchConfig,Mr=!0;function ar(n,s,a,h){var d=ze,m=Or.transition;Or.transition=null;try{ze=1,Ha(n,s,a,h)}finally{ze=d,Or.transition=m}}function vu(n,s,a,h){var d=ze,m=Or.transition;Or.transition=null;try{ze=4,Ha(n,s,a,h)}finally{ze=d,Or.transition=m}}function Ha(n,s,a,h){if(Mr){var d=vo(n,s,a,h);if(d===null)Zh(n,s,h,lr,a),mi(n,h);else if(gu(d,n,s,a,h))h.stopPropagation();else if(mi(n,h),s&4&&-1<mu.indexOf(n)){for(;d!==null;){var m=rl(d);if(m!==null&&ja(m),m=vo(n,s,a,h),m===null&&Zh(n,s,h,lr,a),m===d)break;d=m}d!==null&&h.stopPropagation()}else Zh(n,s,h,null,a)}}var lr=null;function vo(n,s,a,h){if(lr=null,n=uo(h),n=xs(n),n!==null)if(s=Ln(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Na(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return lr=n,null}function _o(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jh()){case fo:return 1;case Oa:return 4;case ms:case Ma:return 16;case po:return 536870912;default:return 16}default:return 16}}var mn=null,wo=null,Vr=null;function _u(){if(Vr)return Vr;var n,s=wo,a=s.length,h,d="value"in mn?mn.value:mn.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(h=1;h<=w&&s[a-h]===d[m-h];h++);return Vr=d.slice(n,1<h?1-h:void 0)}function Ts(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ur(){return!0}function Ga(){return!1}function $t(n){function s(a,h,d,m,w){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(m):m[P]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ur:Ga,this.isPropagationStopped=Ga,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),s}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=$t(cr),vi=ie({},cr,{view:0,detail:0}),Eo=$t(vi),To,Io,gn,Ss=ie({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:be,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gn&&(gn&&n.type==="mousemove"?(To=n.screenX-gn.screenX,Io=n.screenY-gn.screenY):Io=To=0,gn=n),To)},movementY:function(n){return"movementY"in n?n.movementY:Io}}),Wa=$t(Ss),wu=ie({},Ss,{dataTransfer:0}),Eu=$t(wu),So=ie({},vi,{relatedTarget:0}),Lt=$t(So),Tu=ie({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Iu=$t(Tu),_i=ie({},cr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=$t(_i),g=ie({},cr,{data:0}),v=$t(g),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=G[n])?!!s[n]:!1}function be(){return oe}var ft=ie({},vi,{key:function(n){if(n.key){var s=I[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ts(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:be,charCode:function(n){return n.type==="keypress"?Ts(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ts(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xe=$t(ft),_t=ie({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yn=$t(_t),Lr=ie({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:be}),hr=$t(Lr),dr=ie({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xo=$t(dr),qa=ie({},Ss,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Q1=$t(qa),X1=[9,13,27,32],$h=f&&"CompositionEvent"in window,Ka=null;f&&"documentMode"in document&&(Ka=document.documentMode);var Y1=f&&"TextEvent"in window&&!Ka,xm=f&&(!$h||Ka&&8<Ka&&11>=Ka),km=" ",Cm=!1;function Am(n,s){switch(n){case"keyup":return X1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ko=!1;function J1(n,s){switch(n){case"compositionend":return Pm(s);case"keypress":return s.which!==32?null:(Cm=!0,km);case"textInput":return n=s.data,n===km&&Cm?null:n;default:return null}}function Z1(n,s){if(ko)return n==="compositionend"||!$h&&Am(n,s)?(n=_u(),Vr=wo=mn=null,ko=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xm&&s.locale!=="ko"?null:s.data;default:return null}}var eE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!eE[n.type]:s==="textarea"}function Rm(n,s,a,h){ci(h),s=Au(s,"onChange"),0<s.length&&(a=new Is("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var Qa=null,Xa=null;function tE(n){Qm(n,0)}function Su(n){var s=Ro(n);if(Jn(s))return n}function nE(n,s){if(n==="change")return s}var Nm=!1;if(f){var Hh;if(f){var Gh="oninput"in document;if(!Gh){var Dm=document.createElement("div");Dm.setAttribute("oninput","return;"),Gh=typeof Dm.oninput=="function"}Hh=Gh}else Hh=!1;Nm=Hh&&(!document.documentMode||9<document.documentMode)}function Om(){Qa&&(Qa.detachEvent("onpropertychange",Mm),Xa=Qa=null)}function Mm(n){if(n.propertyName==="value"&&Su(Xa)){var s=[];Rm(s,Xa,n,uo(n)),au(tE,s)}}function rE(n,s,a){n==="focusin"?(Om(),Qa=s,Xa=a,Qa.attachEvent("onpropertychange",Mm)):n==="focusout"&&Om()}function iE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Su(Xa)}function sE(n,s){if(n==="click")return Su(s)}function oE(n,s){if(n==="input"||n==="change")return Su(s)}function aE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Un=typeof Object.is=="function"?Object.is:aE;function Ya(n,s){if(Un(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(s,d)||!Un(n[d],s[d]))return!1}return!0}function Vm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Lm(n,s){var a=Vm(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vm(a)}}function Fm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Fm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Um(){for(var n=window,s=ii();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=ii(n.document)}return s}function Wh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function lE(n){var s=Um(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Fm(a.ownerDocument.documentElement,a)){if(h!==null&&Wh(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(h.start,d);h=h.end===void 0?m:Math.min(h.end,d),!n.extend&&m>h&&(d=h,h=m,m=d),d=Lm(a,m);var w=Lm(a,h);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>h?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var uE=f&&"documentMode"in document&&11>=document.documentMode,Co=null,qh=null,Ja=null,Kh=!1;function jm(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Kh||Co==null||Co!==ii(h)||(h=Co,"selectionStart"in h&&Wh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ja&&Ya(Ja,h)||(Ja=h,h=Au(qh,"onSelect"),0<h.length&&(s=new Is("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=Co)))}function xu(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ao={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},Qh={},zm={};f&&(zm=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function ku(n){if(Qh[n])return Qh[n];if(!Ao[n])return n;var s=Ao[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in zm)return Qh[n]=s[a];return n}var Bm=ku("animationend"),$m=ku("animationiteration"),Hm=ku("animationstart"),Gm=ku("transitionend"),Wm=new Map,qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(n,s){Wm.set(n,s),l(s,[n])}for(var Xh=0;Xh<qm.length;Xh++){var Yh=qm[Xh],cE=Yh.toLowerCase(),hE=Yh[0].toUpperCase()+Yh.slice(1);wi(cE,"on"+hE)}wi(Bm,"onAnimationEnd"),wi($m,"onAnimationIteration"),wi(Hm,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(Gm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Za));function Km(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,Ra(h,s,void 0,n),n.currentTarget=null}function Qm(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],d=h.event;h=h.listeners;e:{var m=void 0;if(s)for(var w=h.length-1;0<=w;w--){var P=h[w],R=P.instance,B=P.currentTarget;if(P=P.listener,R!==m&&d.isPropagationStopped())break e;Km(d,P,B),m=R}else for(w=0;w<h.length;w++){if(P=h[w],R=P.instance,B=P.currentTarget,P=P.listener,R!==m&&d.isPropagationStopped())break e;Km(d,P,B),m=R}}}if(co)throw n=Sn,co=!1,Sn=null,n}function tt(n,s){var a=s[sd];a===void 0&&(a=s[sd]=new Set);var h=n+"__bubble";a.has(h)||(Xm(s,n,2,!1),a.add(h))}function Jh(n,s,a){var h=0;s&&(h|=4),Xm(a,n,h,s)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function el(n){if(!n[Cu]){n[Cu]=!0,i.forEach(function(a){a!=="selectionchange"&&(dE.has(a)||Jh(a,!1,n),Jh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Cu]||(s[Cu]=!0,Jh("selectionchange",!1,s))}}function Xm(n,s,a,h){switch(_o(s)){case 1:var d=ar;break;case 4:d=vu;break;default:d=Ha}a=d.bind(null,s,a,n),d=void 0,!di||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),h?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Zh(n,s,a,h,d){var m=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var P=h.stateNode.containerInfo;if(P===d||P.nodeType===8&&P.parentNode===d)break;if(w===4)for(w=h.return;w!==null;){var R=w.tag;if((R===3||R===4)&&(R=w.stateNode.containerInfo,R===d||R.nodeType===8&&R.parentNode===d))return;w=w.return}for(;P!==null;){if(w=xs(P),w===null)return;if(R=w.tag,R===5||R===6){h=m=w;continue e}P=P.parentNode}}h=h.return}au(function(){var B=m,ee=uo(a),te=[];e:{var Z=Wm.get(n);if(Z!==void 0){var ue=Is,fe=n;switch(n){case"keypress":if(Ts(a)===0)break e;case"keydown":case"keyup":ue=Xe;break;case"focusin":fe="focus",ue=Lt;break;case"focusout":fe="blur",ue=Lt;break;case"beforeblur":case"afterblur":ue=Lt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=hr;break;case Bm:case $m:case Hm:ue=Iu;break;case Gm:ue=xo;break;case"scroll":ue=Eo;break;case"wheel":ue=Q1;break;case"copy":case"cut":case"paste":ue=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=yn}var ge=(s&4)!==0,pt=!ge&&n==="scroll",L=ge?Z!==null?Z+"Capture":null:Z;ge=[];for(var O=B,U;O!==null;){U=O;var re=U.stateNode;if(U.tag===5&&re!==null&&(U=re,L!==null&&(re=ds(O,L),re!=null&&ge.push(tl(O,re,U)))),pt)break;O=O.return}0<ge.length&&(Z=new ue(Z,fe,null,a,ee),te.push({event:Z,listeners:ge}))}}if((s&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",Z&&a!==ui&&(fe=a.relatedTarget||a.fromElement)&&(xs(fe)||fe[Fr]))break e;if((ue||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,ue?(fe=a.relatedTarget||a.toElement,ue=B,fe=fe?xs(fe):null,fe!==null&&(pt=Ln(fe),fe!==pt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=B),ue!==fe)){if(ge=Wa,re="onMouseLeave",L="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ge=yn,re="onPointerLeave",L="onPointerEnter",O="pointer"),pt=ue==null?Z:Ro(ue),U=fe==null?Z:Ro(fe),Z=new ge(re,O+"leave",ue,a,ee),Z.target=pt,Z.relatedTarget=U,re=null,xs(ee)===B&&(ge=new ge(L,O+"enter",fe,a,ee),ge.target=U,ge.relatedTarget=pt,re=ge),pt=re,ue&&fe)t:{for(ge=ue,L=fe,O=0,U=ge;U;U=Po(U))O++;for(U=0,re=L;re;re=Po(re))U++;for(;0<O-U;)ge=Po(ge),O--;for(;0<U-O;)L=Po(L),U--;for(;O--;){if(ge===L||L!==null&&ge===L.alternate)break t;ge=Po(ge),L=Po(L)}ge=null}else ge=null;ue!==null&&Ym(te,Z,ue,ge,!1),fe!==null&&pt!==null&&Ym(te,pt,fe,ge,!0)}}e:{if(Z=B?Ro(B):window,ue=Z.nodeName&&Z.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Z.type==="file")var ve=nE;else if(bm(Z))if(Nm)ve=oE;else{ve=iE;var Ee=rE}else(ue=Z.nodeName)&&ue.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ve=sE);if(ve&&(ve=ve(n,B))){Rm(te,ve,a,ee);break e}Ee&&Ee(n,Z,B),n==="focusout"&&(Ee=Z._wrapperState)&&Ee.controlled&&Z.type==="number"&&vt(Z,"number",Z.value)}switch(Ee=B?Ro(B):window,n){case"focusin":(bm(Ee)||Ee.contentEditable==="true")&&(Co=Ee,qh=B,Ja=null);break;case"focusout":Ja=qh=Co=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,jm(te,a,ee);break;case"selectionchange":if(uE)break;case"keydown":case"keyup":jm(te,a,ee)}var Te;if($h)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else ko?Am(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(xm&&a.locale!=="ko"&&(ko||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&ko&&(Te=_u()):(mn=ee,wo="value"in mn?mn.value:mn.textContent,ko=!0)),Ee=Au(B,ke),0<Ee.length&&(ke=new v(ke,n,null,a,ee),te.push({event:ke,listeners:Ee}),Te?ke.data=Te:(Te=Pm(a),Te!==null&&(ke.data=Te)))),(Te=Y1?J1(n,a):Z1(n,a))&&(B=Au(B,"onBeforeInput"),0<B.length&&(ee=new v("onBeforeInput","beforeinput",null,a,ee),te.push({event:ee,listeners:B}),ee.data=Te))}Qm(te,s)})}function tl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Au(n,s){for(var a=s+"Capture",h=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ds(n,a),m!=null&&h.unshift(tl(n,m,d)),m=ds(n,s),m!=null&&h.push(tl(n,m,d))),n=n.return}return h}function Po(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ym(n,s,a,h,d){for(var m=s._reactName,w=[];a!==null&&a!==h;){var P=a,R=P.alternate,B=P.stateNode;if(R!==null&&R===h)break;P.tag===5&&B!==null&&(P=B,d?(R=ds(a,m),R!=null&&w.unshift(tl(a,R,P))):d||(R=ds(a,m),R!=null&&w.push(tl(a,R,P)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var fE=/\r\n?/g,pE=/\u0000|\uFFFD/g;function Jm(n){return(typeof n=="string"?n:""+n).replace(fE,`
`).replace(pE,"")}function Pu(n,s,a){if(s=Jm(s),Jm(n)!==s&&a)throw Error(t(425))}function bu(){}var ed=null,td=null;function nd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rd=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,Zm=typeof Promise=="function"?Promise:void 0,gE=typeof queueMicrotask=="function"?queueMicrotask:typeof Zm<"u"?function(n){return Zm.resolve(null).then(n).catch(yE)}:rd;function yE(n){setTimeout(function(){throw n})}function id(n,s){var a=s,h=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){n.removeChild(d),yi(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);yi(s)}function Ei(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function eg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var bo=Math.random().toString(36).slice(2),fr="__reactFiber$"+bo,nl="__reactProps$"+bo,Fr="__reactContainer$"+bo,sd="__reactEvents$"+bo,vE="__reactListeners$"+bo,_E="__reactHandles$"+bo;function xs(n){var s=n[fr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Fr]||a[fr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=eg(n);n!==null;){if(a=n[fr])return a;n=eg(n)}return s}n=a,a=n.parentNode}return null}function rl(n){return n=n[fr]||n[Fr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ro(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ru(n){return n[nl]||null}var od=[],No=-1;function Ti(n){return{current:n}}function nt(n){0>No||(n.current=od[No],od[No]=null,No--)}function Ze(n,s){No++,od[No]=n.current,n.current=s}var Ii={},Ht=Ti(Ii),nn=Ti(!1),ks=Ii;function Do(n,s){var a=n.type.contextTypes;if(!a)return Ii;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function rn(n){return n=n.childContextTypes,n!=null}function Nu(){nt(nn),nt(Ht)}function tg(n,s,a){if(Ht.current!==Ii)throw Error(t(168));Ze(Ht,s),Ze(nn,a)}function ng(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in s))throw Error(t(108,Ie(n)||"Unknown",d));return ie({},a,h)}function Du(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ii,ks=Ht.current,Ze(Ht,n),Ze(nn,nn.current),!0}function rg(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=ng(n,s,ks),h.__reactInternalMemoizedMergedChildContext=n,nt(nn),nt(Ht),Ze(Ht,n)):nt(nn),Ze(nn,a)}var Ur=null,Ou=!1,ad=!1;function ig(n){Ur===null?Ur=[n]:Ur.push(n)}function wE(n){Ou=!0,ig(n)}function Si(){if(!ad&&Ur!==null){ad=!0;var n=0,s=ze;try{var a=Ur;for(ze=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Ur=null,Ou=!1}catch(d){throw Ur!==null&&(Ur=Ur.slice(n+1)),Da(fo,Si),d}finally{ze=s,ad=!1}}return null}var Oo=[],Mo=0,Mu=null,Vu=0,kn=[],Cn=0,Cs=null,jr=1,zr="";function As(n,s){Oo[Mo++]=Vu,Oo[Mo++]=Mu,Mu=n,Vu=s}function sg(n,s,a){kn[Cn++]=jr,kn[Cn++]=zr,kn[Cn++]=Cs,Cs=n;var h=jr;n=zr;var d=32-fn(h)-1;h&=~(1<<d),a+=1;var m=32-fn(s)+d;if(30<m){var w=d-d%5;m=(h&(1<<w)-1).toString(32),h>>=w,d-=w,jr=1<<32-fn(s)+d|a<<d|h,zr=m+n}else jr=1<<m|a<<d|h,zr=n}function ld(n){n.return!==null&&(As(n,1),sg(n,1,0))}function ud(n){for(;n===Mu;)Mu=Oo[--Mo],Oo[Mo]=null,Vu=Oo[--Mo],Oo[Mo]=null;for(;n===Cs;)Cs=kn[--Cn],kn[Cn]=null,zr=kn[--Cn],kn[Cn]=null,jr=kn[--Cn],kn[Cn]=null}var vn=null,_n=null,st=!1,jn=null;function og(n,s){var a=Rn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function ag(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,vn=n,_n=Ei(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,vn=n,_n=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Cs!==null?{id:jr,overflow:zr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Rn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,vn=n,_n=null,!0):!1;default:return!1}}function cd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function hd(n){if(st){var s=_n;if(s){var a=s;if(!ag(n,s)){if(cd(n))throw Error(t(418));s=Ei(a.nextSibling);var h=vn;s&&ag(n,s)?og(h,a):(n.flags=n.flags&-4097|2,st=!1,vn=n)}}else{if(cd(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,vn=n}}}function lg(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vn=n}function Lu(n){if(n!==vn)return!1;if(!st)return lg(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!nd(n.type,n.memoizedProps)),s&&(s=_n)){if(cd(n))throw ug(),Error(t(418));for(;s;)og(n,s),s=Ei(s.nextSibling)}if(lg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){_n=Ei(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}_n=null}}else _n=vn?Ei(n.stateNode.nextSibling):null;return!0}function ug(){for(var n=_n;n;)n=Ei(n.nextSibling)}function Vo(){_n=vn=null,st=!1}function dd(n){jn===null?jn=[n]:jn.push(n)}var EE=K.ReactCurrentBatchConfig;function il(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var d=h,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var P=d.refs;w===null?delete P[m]:P[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Fu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function cg(n){var s=n._init;return s(n._payload)}function hg(n){function s(L,O){if(n){var U=L.deletions;U===null?(L.deletions=[O],L.flags|=16):U.push(O)}}function a(L,O){if(!n)return null;for(;O!==null;)s(L,O),O=O.sibling;return null}function h(L,O){for(L=new Map;O!==null;)O.key!==null?L.set(O.key,O):L.set(O.index,O),O=O.sibling;return L}function d(L,O){return L=Ni(L,O),L.index=0,L.sibling=null,L}function m(L,O,U){return L.index=U,n?(U=L.alternate,U!==null?(U=U.index,U<O?(L.flags|=2,O):U):(L.flags|=2,O)):(L.flags|=1048576,O)}function w(L){return n&&L.alternate===null&&(L.flags|=2),L}function P(L,O,U,re){return O===null||O.tag!==6?(O=rf(U,L.mode,re),O.return=L,O):(O=d(O,U),O.return=L,O)}function R(L,O,U,re){var ve=U.type;return ve===C?ee(L,O,U.props.children,re,U.key):O!==null&&(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Be&&cg(ve)===O.type)?(re=d(O,U.props),re.ref=il(L,O,U),re.return=L,re):(re=lc(U.type,U.key,U.props,null,L.mode,re),re.ref=il(L,O,U),re.return=L,re)}function B(L,O,U,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=sf(U,L.mode,re),O.return=L,O):(O=d(O,U.children||[]),O.return=L,O)}function ee(L,O,U,re,ve){return O===null||O.tag!==7?(O=Vs(U,L.mode,re,ve),O.return=L,O):(O=d(O,U),O.return=L,O)}function te(L,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return O=rf(""+O,L.mode,U),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ne:return U=lc(O.type,O.key,O.props,null,L.mode,U),U.ref=il(L,null,O),U.return=L,U;case Y:return O=sf(O,L.mode,U),O.return=L,O;case Be:var re=O._init;return te(L,re(O._payload),U)}if(dt(O)||se(O))return O=Vs(O,L.mode,U,null),O.return=L,O;Fu(L,O)}return null}function Z(L,O,U,re){var ve=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ve!==null?null:P(L,O,""+U,re);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case ne:return U.key===ve?R(L,O,U,re):null;case Y:return U.key===ve?B(L,O,U,re):null;case Be:return ve=U._init,Z(L,O,ve(U._payload),re)}if(dt(U)||se(U))return ve!==null?null:ee(L,O,U,re,null);Fu(L,U)}return null}function ue(L,O,U,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number")return L=L.get(U)||null,P(O,L,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ne:return L=L.get(re.key===null?U:re.key)||null,R(O,L,re,ve);case Y:return L=L.get(re.key===null?U:re.key)||null,B(O,L,re,ve);case Be:var Ee=re._init;return ue(L,O,U,Ee(re._payload),ve)}if(dt(re)||se(re))return L=L.get(U)||null,ee(O,L,re,ve,null);Fu(O,re)}return null}function fe(L,O,U,re){for(var ve=null,Ee=null,Te=O,ke=O=0,Dt=null;Te!==null&&ke<U.length;ke++){Te.index>ke?(Dt=Te,Te=null):Dt=Te.sibling;var qe=Z(L,Te,U[ke],re);if(qe===null){Te===null&&(Te=Dt);break}n&&Te&&qe.alternate===null&&s(L,Te),O=m(qe,O,ke),Ee===null?ve=qe:Ee.sibling=qe,Ee=qe,Te=Dt}if(ke===U.length)return a(L,Te),st&&As(L,ke),ve;if(Te===null){for(;ke<U.length;ke++)Te=te(L,U[ke],re),Te!==null&&(O=m(Te,O,ke),Ee===null?ve=Te:Ee.sibling=Te,Ee=Te);return st&&As(L,ke),ve}for(Te=h(L,Te);ke<U.length;ke++)Dt=ue(Te,L,ke,U[ke],re),Dt!==null&&(n&&Dt.alternate!==null&&Te.delete(Dt.key===null?ke:Dt.key),O=m(Dt,O,ke),Ee===null?ve=Dt:Ee.sibling=Dt,Ee=Dt);return n&&Te.forEach(function(Di){return s(L,Di)}),st&&As(L,ke),ve}function ge(L,O,U,re){var ve=se(U);if(typeof ve!="function")throw Error(t(150));if(U=ve.call(U),U==null)throw Error(t(151));for(var Ee=ve=null,Te=O,ke=O=0,Dt=null,qe=U.next();Te!==null&&!qe.done;ke++,qe=U.next()){Te.index>ke?(Dt=Te,Te=null):Dt=Te.sibling;var Di=Z(L,Te,qe.value,re);if(Di===null){Te===null&&(Te=Dt);break}n&&Te&&Di.alternate===null&&s(L,Te),O=m(Di,O,ke),Ee===null?ve=Di:Ee.sibling=Di,Ee=Di,Te=Dt}if(qe.done)return a(L,Te),st&&As(L,ke),ve;if(Te===null){for(;!qe.done;ke++,qe=U.next())qe=te(L,qe.value,re),qe!==null&&(O=m(qe,O,ke),Ee===null?ve=qe:Ee.sibling=qe,Ee=qe);return st&&As(L,ke),ve}for(Te=h(L,Te);!qe.done;ke++,qe=U.next())qe=ue(Te,L,ke,qe.value,re),qe!==null&&(n&&qe.alternate!==null&&Te.delete(qe.key===null?ke:qe.key),O=m(qe,O,ke),Ee===null?ve=qe:Ee.sibling=qe,Ee=qe);return n&&Te.forEach(function(eT){return s(L,eT)}),st&&As(L,ke),ve}function pt(L,O,U,re){if(typeof U=="object"&&U!==null&&U.type===C&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case ne:e:{for(var ve=U.key,Ee=O;Ee!==null;){if(Ee.key===ve){if(ve=U.type,ve===C){if(Ee.tag===7){a(L,Ee.sibling),O=d(Ee,U.props.children),O.return=L,L=O;break e}}else if(Ee.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Be&&cg(ve)===Ee.type){a(L,Ee.sibling),O=d(Ee,U.props),O.ref=il(L,Ee,U),O.return=L,L=O;break e}a(L,Ee);break}else s(L,Ee);Ee=Ee.sibling}U.type===C?(O=Vs(U.props.children,L.mode,re,U.key),O.return=L,L=O):(re=lc(U.type,U.key,U.props,null,L.mode,re),re.ref=il(L,O,U),re.return=L,L=re)}return w(L);case Y:e:{for(Ee=U.key;O!==null;){if(O.key===Ee)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(L,O.sibling),O=d(O,U.children||[]),O.return=L,L=O;break e}else{a(L,O);break}else s(L,O);O=O.sibling}O=sf(U,L.mode,re),O.return=L,L=O}return w(L);case Be:return Ee=U._init,pt(L,O,Ee(U._payload),re)}if(dt(U))return fe(L,O,U,re);if(se(U))return ge(L,O,U,re);Fu(L,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,O!==null&&O.tag===6?(a(L,O.sibling),O=d(O,U),O.return=L,L=O):(a(L,O),O=rf(U,L.mode,re),O.return=L,L=O),w(L)):a(L,O)}return pt}var Lo=hg(!0),dg=hg(!1),Uu=Ti(null),ju=null,Fo=null,fd=null;function pd(){fd=Fo=ju=null}function md(n){var s=Uu.current;nt(Uu),n._currentValue=s}function gd(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function Uo(n,s){ju=n,fd=Fo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(sn=!0),n.firstContext=null)}function An(n){var s=n._currentValue;if(fd!==n)if(n={context:n,memoizedValue:s,next:null},Fo===null){if(ju===null)throw Error(t(308));Fo=n,ju.dependencies={lanes:0,firstContext:n}}else Fo=Fo.next=n;return s}var Ps=null;function yd(n){Ps===null?Ps=[n]:Ps.push(n)}function fg(n,s,a,h){var d=s.interleaved;return d===null?(a.next=a,yd(s)):(a.next=d.next,d.next=a),s.interleaved=a,Br(n,h)}function Br(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var xi=!1;function vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pg(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function $r(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ki(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ge&2)!==0){var d=h.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),h.pending=s,Br(n,a)}return d=h.interleaved,d===null?(s.next=s,yd(h)):(s.next=d.next,d.next=s),h.interleaved=s,Br(n,a)}function zu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Ua(n,a)}}function mg(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Bu(n,s,a,h){var d=n.updateQueue;xi=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,P=d.shared.pending;if(P!==null){d.shared.pending=null;var R=P,B=R.next;R.next=null,w===null?m=B:w.next=B,w=R;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,P=ee.lastBaseUpdate,P!==w&&(P===null?ee.firstBaseUpdate=B:P.next=B,ee.lastBaseUpdate=R))}if(m!==null){var te=d.baseState;w=0,ee=B=R=null,P=m;do{var Z=P.lane,ue=P.eventTime;if((h&Z)===Z){ee!==null&&(ee=ee.next={eventTime:ue,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var fe=n,ge=P;switch(Z=s,ue=a,ge.tag){case 1:if(fe=ge.payload,typeof fe=="function"){te=fe.call(ue,te,Z);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ge.payload,Z=typeof fe=="function"?fe.call(ue,te,Z):fe,Z==null)break e;te=ie({},te,Z);break e;case 2:xi=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,Z=d.effects,Z===null?d.effects=[P]:Z.push(P))}else ue={eventTime:ue,lane:Z,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ee===null?(B=ee=ue,R=te):ee=ee.next=ue,w|=Z;if(P=P.next,P===null){if(P=d.shared.pending,P===null)break;Z=P,P=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);if(ee===null&&(R=te),d.baseState=R,d.firstBaseUpdate=B,d.lastBaseUpdate=ee,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);Ns|=w,n.lanes=w,n.memoizedState=te}}function gg(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var sl={},pr=Ti(sl),ol=Ti(sl),al=Ti(sl);function bs(n){if(n===sl)throw Error(t(174));return n}function _d(n,s){switch(Ze(al,s),Ze(ol,n),Ze(pr,sl),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:oo(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=oo(s,n)}nt(pr),Ze(pr,s)}function jo(){nt(pr),nt(ol),nt(al)}function yg(n){bs(al.current);var s=bs(pr.current),a=oo(s,n.type);s!==a&&(Ze(ol,n),Ze(pr,a))}function wd(n){ol.current===n&&(nt(pr),nt(ol))}var ot=Ti(0);function $u(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ed=[];function Td(){for(var n=0;n<Ed.length;n++)Ed[n]._workInProgressVersionPrimary=null;Ed.length=0}var Hu=K.ReactCurrentDispatcher,Id=K.ReactCurrentBatchConfig,Rs=0,at=null,kt=null,Rt=null,Gu=!1,ll=!1,ul=0,TE=0;function Gt(){throw Error(t(321))}function Sd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Un(n[a],s[a]))return!1;return!0}function xd(n,s,a,h,d,m){if(Rs=m,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Hu.current=n===null||n.memoizedState===null?kE:CE,n=a(h,d),ll){m=0;do{if(ll=!1,ul=0,25<=m)throw Error(t(301));m+=1,Rt=kt=null,s.updateQueue=null,Hu.current=AE,n=a(h,d)}while(ll)}if(Hu.current=Ku,s=kt!==null&&kt.next!==null,Rs=0,Rt=kt=at=null,Gu=!1,s)throw Error(t(300));return n}function kd(){var n=ul!==0;return ul=0,n}function mr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?at.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Pn(){if(kt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var s=Rt===null?at.memoizedState:Rt.next;if(s!==null)Rt=s,kt=n;else{if(n===null)throw Error(t(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Rt===null?at.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function cl(n,s){return typeof s=="function"?s(n):s}function Cd(n){var s=Pn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=kt,d=h.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}h.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,h=h.baseState;var P=w=null,R=null,B=m;do{var ee=B.lane;if((Rs&ee)===ee)R!==null&&(R=R.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),h=B.hasEagerState?B.eagerState:n(h,B.action);else{var te={lane:ee,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};R===null?(P=R=te,w=h):R=R.next=te,at.lanes|=ee,Ns|=ee}B=B.next}while(B!==null&&B!==m);R===null?w=h:R.next=P,Un(h,s.memoizedState)||(sn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=R,a.lastRenderedState=h}if(n=a.interleaved,n!==null){d=n;do m=d.lane,at.lanes|=m,Ns|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ad(n){var s=Pn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);Un(m,s.memoizedState)||(sn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,h]}function vg(){}function _g(n,s){var a=at,h=Pn(),d=s(),m=!Un(h.memoizedState,d);if(m&&(h.memoizedState=d,sn=!0),h=h.queue,Pd(Tg.bind(null,a,h,n),[n]),h.getSnapshot!==s||m||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,hl(9,Eg.bind(null,a,h,d,s),void 0,null),Nt===null)throw Error(t(349));(Rs&30)!==0||wg(a,s,d)}return d}function wg(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Eg(n,s,a,h){s.value=a,s.getSnapshot=h,Ig(s)&&Sg(n)}function Tg(n,s,a){return a(function(){Ig(s)&&Sg(n)})}function Ig(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Un(n,a)}catch{return!0}}function Sg(n){var s=Br(n,1);s!==null&&Hn(s,n,1,-1)}function xg(n){var s=mr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:n},s.queue=n,n=n.dispatch=xE.bind(null,at,n),[s.memoizedState,n]}function hl(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function kg(){return Pn().memoizedState}function Wu(n,s,a,h){var d=mr();at.flags|=n,d.memoizedState=hl(1|s,a,void 0,h===void 0?null:h)}function qu(n,s,a,h){var d=Pn();h=h===void 0?null:h;var m=void 0;if(kt!==null){var w=kt.memoizedState;if(m=w.destroy,h!==null&&Sd(h,w.deps)){d.memoizedState=hl(s,a,m,h);return}}at.flags|=n,d.memoizedState=hl(1|s,a,m,h)}function Cg(n,s){return Wu(8390656,8,n,s)}function Pd(n,s){return qu(2048,8,n,s)}function Ag(n,s){return qu(4,2,n,s)}function Pg(n,s){return qu(4,4,n,s)}function bg(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Rg(n,s,a){return a=a!=null?a.concat([n]):null,qu(4,4,bg.bind(null,s,n),a)}function bd(){}function Ng(n,s){var a=Pn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Sd(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function Dg(n,s){var a=Pn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Sd(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function Og(n,s,a){return(Rs&21)===0?(n.baseState&&(n.baseState=!1,sn=!0),n.memoizedState=a):(Un(a,s)||(a=La(),at.lanes|=a,Ns|=a,n.baseState=!0),s)}function IE(n,s){var a=ze;ze=a!==0&&4>a?a:4,n(!0);var h=Id.transition;Id.transition={};try{n(!1),s()}finally{ze=a,Id.transition=h}}function Mg(){return Pn().memoizedState}function SE(n,s,a){var h=bi(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Vg(n))Lg(s,a);else if(a=fg(n,s,a,h),a!==null){var d=en();Hn(a,n,h,d),Fg(a,s,h)}}function xE(n,s,a){var h=bi(n),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vg(n))Lg(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,P=m(w,a);if(d.hasEagerState=!0,d.eagerState=P,Un(P,w)){var R=s.interleaved;R===null?(d.next=d,yd(s)):(d.next=R.next,R.next=d),s.interleaved=d;return}}catch{}finally{}a=fg(n,s,d,h),a!==null&&(d=en(),Hn(a,n,h,d),Fg(a,s,h))}}function Vg(n){var s=n.alternate;return n===at||s!==null&&s===at}function Lg(n,s){ll=Gu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Fg(n,s,a){if((a&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Ua(n,a)}}var Ku={readContext:An,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},kE={readContext:An,useCallback:function(n,s){return mr().memoizedState=[n,s===void 0?null:s],n},useContext:An,useEffect:Cg,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Wu(4194308,4,bg.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Wu(4194308,4,n,s)},useInsertionEffect:function(n,s){return Wu(4,2,n,s)},useMemo:function(n,s){var a=mr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=mr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=SE.bind(null,at,n),[h.memoizedState,n]},useRef:function(n){var s=mr();return n={current:n},s.memoizedState=n},useState:xg,useDebugValue:bd,useDeferredValue:function(n){return mr().memoizedState=n},useTransition:function(){var n=xg(!1),s=n[0];return n=IE.bind(null,n[1]),mr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=at,d=mr();if(st){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Nt===null)throw Error(t(349));(Rs&30)!==0||wg(h,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,Cg(Tg.bind(null,h,m,n),[n]),h.flags|=2048,hl(9,Eg.bind(null,h,m,a,s),void 0,null),a},useId:function(){var n=mr(),s=Nt.identifierPrefix;if(st){var a=zr,h=jr;a=(h&~(1<<32-fn(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=ul++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=TE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},CE={readContext:An,useCallback:Ng,useContext:An,useEffect:Pd,useImperativeHandle:Rg,useInsertionEffect:Ag,useLayoutEffect:Pg,useMemo:Dg,useReducer:Cd,useRef:kg,useState:function(){return Cd(cl)},useDebugValue:bd,useDeferredValue:function(n){var s=Pn();return Og(s,kt.memoizedState,n)},useTransition:function(){var n=Cd(cl)[0],s=Pn().memoizedState;return[n,s]},useMutableSource:vg,useSyncExternalStore:_g,useId:Mg,unstable_isNewReconciler:!1},AE={readContext:An,useCallback:Ng,useContext:An,useEffect:Pd,useImperativeHandle:Rg,useInsertionEffect:Ag,useLayoutEffect:Pg,useMemo:Dg,useReducer:Ad,useRef:kg,useState:function(){return Ad(cl)},useDebugValue:bd,useDeferredValue:function(n){var s=Pn();return kt===null?s.memoizedState=n:Og(s,kt.memoizedState,n)},useTransition:function(){var n=Ad(cl)[0],s=Pn().memoizedState;return[n,s]},useMutableSource:vg,useSyncExternalStore:_g,useId:Mg,unstable_isNewReconciler:!1};function zn(n,s){if(n&&n.defaultProps){s=ie({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Rd(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:ie({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Qu={isMounted:function(n){return(n=n._reactInternals)?Ln(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=en(),d=bi(n),m=$r(h,d);m.payload=s,a!=null&&(m.callback=a),s=ki(n,m,d),s!==null&&(Hn(s,n,d,h),zu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=en(),d=bi(n),m=$r(h,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=ki(n,m,d),s!==null&&(Hn(s,n,d,h),zu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=en(),h=bi(n),d=$r(a,h);d.tag=2,s!=null&&(d.callback=s),s=ki(n,d,h),s!==null&&(Hn(s,n,h,a),zu(s,n,h))}};function Ug(n,s,a,h,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,m,w):s.prototype&&s.prototype.isPureReactComponent?!Ya(a,h)||!Ya(d,m):!0}function jg(n,s,a){var h=!1,d=Ii,m=s.contextType;return typeof m=="object"&&m!==null?m=An(m):(d=rn(s)?ks:Ht.current,h=s.contextTypes,m=(h=h!=null)?Do(n,d):Ii),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Qu,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function zg(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&Qu.enqueueReplaceState(s,s.state,null)}function Nd(n,s,a,h){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},vd(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=An(m):(m=rn(s)?ks:Ht.current,d.context=Do(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(Rd(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Qu.enqueueReplaceState(d,d.state,null),Bu(n,a,d,h),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function zo(n,s){try{var a="",h=s;do a+=Ne(h),h=h.return;while(h);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function Dd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Od(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var PE=typeof WeakMap=="function"?WeakMap:Map;function Bg(n,s,a){a=$r(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){nc||(nc=!0,Qd=h),Od(n,s)},a}function $g(n,s,a){a=$r(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var d=s.value;a.payload=function(){return h(d)},a.callback=function(){Od(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Od(n,s),typeof h!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Hg(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new PE;var d=new Set;h.set(s,d)}else d=h.get(s),d===void 0&&(d=new Set,h.set(s,d));d.has(a)||(d.add(a),n=$E.bind(null,n,s,a),s.then(n,n))}function Gg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Wg(n,s,a,h,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=$r(-1,1),s.tag=2,ki(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var bE=K.ReactCurrentOwner,sn=!1;function Zt(n,s,a,h){s.child=n===null?dg(s,null,a,h):Lo(s,n.child,a,h)}function qg(n,s,a,h,d){a=a.render;var m=s.ref;return Uo(s,d),h=xd(n,s,a,h,m,d),a=kd(),n!==null&&!sn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Hr(n,s,d)):(st&&a&&ld(s),s.flags|=1,Zt(n,s,h,d),s.child)}function Kg(n,s,a,h,d){if(n===null){var m=a.type;return typeof m=="function"&&!nf(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,Qg(n,s,m,h,d)):(n=lc(a.type,null,h,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ya,a(w,h)&&n.ref===s.ref)return Hr(n,s,d)}return s.flags|=1,n=Ni(m,h),n.ref=s.ref,n.return=s,s.child=n}function Qg(n,s,a,h,d){if(n!==null){var m=n.memoizedProps;if(Ya(m,h)&&n.ref===s.ref)if(sn=!1,s.pendingProps=h=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(sn=!0);else return s.lanes=n.lanes,Hr(n,s,d)}return Md(n,s,a,h,d)}function Xg(n,s,a){var h=s.pendingProps,d=h.children,m=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze($o,wn),wn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ze($o,wn),wn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,Ze($o,wn),wn|=h}else m!==null?(h=m.baseLanes|a,s.memoizedState=null):h=a,Ze($o,wn),wn|=h;return Zt(n,s,d,a),s.child}function Yg(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Md(n,s,a,h,d){var m=rn(a)?ks:Ht.current;return m=Do(s,m),Uo(s,d),a=xd(n,s,a,h,m,d),h=kd(),n!==null&&!sn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Hr(n,s,d)):(st&&h&&ld(s),s.flags|=1,Zt(n,s,a,d),s.child)}function Jg(n,s,a,h,d){if(rn(a)){var m=!0;Du(s)}else m=!1;if(Uo(s,d),s.stateNode===null)Yu(n,s),jg(s,a,h),Nd(s,a,h,d),h=!0;else if(n===null){var w=s.stateNode,P=s.memoizedProps;w.props=P;var R=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=An(B):(B=rn(a)?ks:Ht.current,B=Do(s,B));var ee=a.getDerivedStateFromProps,te=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function";te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==h||R!==B)&&zg(s,w,h,B),xi=!1;var Z=s.memoizedState;w.state=Z,Bu(s,h,w,d),R=s.memoizedState,P!==h||Z!==R||nn.current||xi?(typeof ee=="function"&&(Rd(s,a,ee,h),R=s.memoizedState),(P=xi||Ug(s,a,P,h,Z,R,B))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=R),w.props=h,w.state=R,w.context=B,h=P):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,pg(n,s),P=s.memoizedProps,B=s.type===s.elementType?P:zn(s.type,P),w.props=B,te=s.pendingProps,Z=w.context,R=a.contextType,typeof R=="object"&&R!==null?R=An(R):(R=rn(a)?ks:Ht.current,R=Do(s,R));var ue=a.getDerivedStateFromProps;(ee=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==te||Z!==R)&&zg(s,w,h,R),xi=!1,Z=s.memoizedState,w.state=Z,Bu(s,h,w,d);var fe=s.memoizedState;P!==te||Z!==fe||nn.current||xi?(typeof ue=="function"&&(Rd(s,a,ue,h),fe=s.memoizedState),(B=xi||Ug(s,a,B,h,Z,fe,R)||!1)?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,fe,R),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,fe,R)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=fe),w.props=h,w.state=fe,w.context=R,h=B):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),h=!1)}return Vd(n,s,a,h,m,d)}function Vd(n,s,a,h,d,m){Yg(n,s);var w=(s.flags&128)!==0;if(!h&&!w)return d&&rg(s,a,!1),Hr(n,s,m);h=s.stateNode,bE.current=s;var P=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&w?(s.child=Lo(s,n.child,null,m),s.child=Lo(s,null,P,m)):Zt(n,s,P,m),s.memoizedState=h.state,d&&rg(s,a,!0),s.child}function Zg(n){var s=n.stateNode;s.pendingContext?tg(n,s.pendingContext,s.pendingContext!==s.context):s.context&&tg(n,s.context,!1),_d(n,s.containerInfo)}function ey(n,s,a,h,d){return Vo(),dd(d),s.flags|=256,Zt(n,s,a,h),s.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Fd(n){return{baseLanes:n,cachePool:null,transitions:null}}function ty(n,s,a){var h=s.pendingProps,d=ot.current,m=!1,w=(s.flags&128)!==0,P;if((P=w)||(P=n!==null&&n.memoizedState===null?!1:(d&2)!==0),P?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ze(ot,d&1),n===null)return hd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,n=h.fallback,m?(h=s.mode,m=s.child,w={mode:"hidden",children:w},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=uc(w,h,0,null),n=Vs(n,h,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=Fd(a),s.memoizedState=Ld,n):Ud(s,w));if(d=n.memoizedState,d!==null&&(P=d.dehydrated,P!==null))return RE(n,s,w,h,P,d,a);if(m){m=h.fallback,w=s.mode,d=n.child,P=d.sibling;var R={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==d?(h=s.child,h.childLanes=0,h.pendingProps=R,s.deletions=null):(h=Ni(d,R),h.subtreeFlags=d.subtreeFlags&14680064),P!==null?m=Ni(P,m):(m=Vs(m,w,a,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,w=n.child.memoizedState,w=w===null?Fd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=Ld,h}return m=n.child,n=m.sibling,h=Ni(m,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function Ud(n,s){return s=uc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Xu(n,s,a,h){return h!==null&&dd(h),Lo(s,n.child,null,a),n=Ud(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function RE(n,s,a,h,d,m,w){if(a)return s.flags&256?(s.flags&=-257,h=Dd(Error(t(422))),Xu(n,s,w,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=h.fallback,d=s.mode,h=uc({mode:"visible",children:h.children},d,0,null),m=Vs(m,d,w,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,(s.mode&1)!==0&&Lo(s,n.child,null,w),s.child.memoizedState=Fd(w),s.memoizedState=Ld,m);if((s.mode&1)===0)return Xu(n,s,w,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var P=h.dgst;return h=P,m=Error(t(419)),h=Dd(m,h,void 0),Xu(n,s,w,h)}if(P=(w&n.childLanes)!==0,sn||P){if(h=Nt,h!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Br(n,d),Hn(h,n,d,-1))}return tf(),h=Dd(Error(t(421))),Xu(n,s,w,h)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=HE.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,_n=Ei(d.nextSibling),vn=s,st=!0,jn=null,n!==null&&(kn[Cn++]=jr,kn[Cn++]=zr,kn[Cn++]=Cs,jr=n.id,zr=n.overflow,Cs=s),s=Ud(s,h.children),s.flags|=4096,s)}function ny(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),gd(n.return,s,a)}function jd(n,s,a,h,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=d)}function ry(n,s,a){var h=s.pendingProps,d=h.revealOrder,m=h.tail;if(Zt(n,s,h.children,a),h=ot.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ny(n,a,s);else if(n.tag===19)ny(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Ze(ot,h),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&$u(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),jd(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&$u(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}jd(s,!0,a,null,m);break;case"together":jd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Hr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ns|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Ni(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ni(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function NE(n,s,a){switch(s.tag){case 3:Zg(s),Vo();break;case 5:yg(s);break;case 1:rn(s.type)&&Du(s);break;case 4:_d(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,d=s.memoizedProps.value;Ze(Uu,h._currentValue),h._currentValue=d;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ze(ot,ot.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?ty(n,s,a):(Ze(ot,ot.current&1),n=Hr(n,s,a),n!==null?n.sibling:null);Ze(ot,ot.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(n.flags&128)!==0){if(h)return ry(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ze(ot,ot.current),h)break;return null;case 22:case 23:return s.lanes=0,Xg(n,s,a)}return Hr(n,s,a)}var iy,zd,sy,oy;iy=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},zd=function(){},sy=function(n,s,a,h){var d=n.memoizedProps;if(d!==h){n=s.stateNode,bs(pr.current);var m=null;switch(a){case"input":d=io(n,d),h=io(n,h),m=[];break;case"select":d=ie({},d,{value:void 0}),h=ie({},h,{value:void 0}),m=[];break;case"textarea":d=ka(n,d),h=ka(n,h),m=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=bu)}Vn(a,h);var w;a=null;for(B in d)if(!h.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var P=d[B];for(w in P)P.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in h){var R=h[B];if(P=d!=null?d[B]:void 0,h.hasOwnProperty(B)&&R!==P&&(R!=null||P!=null))if(B==="style")if(P){for(w in P)!P.hasOwnProperty(w)||R&&R.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in R)R.hasOwnProperty(w)&&P[w]!==R[w]&&(a||(a={}),a[w]=R[w])}else a||(m||(m=[]),m.push(B,a)),a=R;else B==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,P=P?P.__html:void 0,R!=null&&P!==R&&(m=m||[]).push(B,R)):B==="children"?typeof R!="string"&&typeof R!="number"||(m=m||[]).push(B,""+R):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(R!=null&&B==="onScroll"&&tt("scroll",n),m||P===R||(m=[])):(m=m||[]).push(B,R))}a&&(m=m||[]).push("style",a);var B=m;(s.updateQueue=B)&&(s.flags|=4)}},oy=function(n,s,a,h){a!==h&&(s.flags|=4)};function dl(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Wt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function DE(n,s,a){var h=s.pendingProps;switch(ud(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(s),null;case 1:return rn(s.type)&&Nu(),Wt(s),null;case 3:return h=s.stateNode,jo(),nt(nn),nt(Ht),Td(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Lu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jn!==null&&(Jd(jn),jn=null))),zd(n,s),Wt(s),null;case 5:wd(s);var d=bs(al.current);if(a=s.type,n!==null&&s.stateNode!=null)sy(n,s,a,h,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Wt(s),null}if(n=bs(pr.current),Lu(s)){h=s.stateNode,a=s.type;var m=s.memoizedProps;switch(h[fr]=s,h[nl]=m,n=(s.mode&1)!==0,a){case"dialog":tt("cancel",h),tt("close",h);break;case"iframe":case"object":case"embed":tt("load",h);break;case"video":case"audio":for(d=0;d<Za.length;d++)tt(Za[d],h);break;case"source":tt("error",h);break;case"img":case"image":case"link":tt("error",h),tt("load",h);break;case"details":tt("toggle",h);break;case"input":tu(h,m),tt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},tt("invalid",h);break;case"textarea":Ca(h,m),tt("invalid",h)}Vn(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var P=m[w];w==="children"?typeof P=="string"?h.textContent!==P&&(m.suppressHydrationWarning!==!0&&Pu(h.textContent,P,n),d=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(m.suppressHydrationWarning!==!0&&Pu(h.textContent,P,n),d=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&tt("scroll",h)}switch(a){case"input":Yn(h),xa(h,m,!0);break;case"textarea":Yn(h),si(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=bu)}h=d,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Aa(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(a,{is:h.is}):(n=w.createElement(a),a==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,a),n[fr]=s,n[nl]=h,iy(n,s,!1,!1),s.stateNode=n;e:{switch(w=lo(a,h),a){case"dialog":tt("cancel",n),tt("close",n),d=h;break;case"iframe":case"object":case"embed":tt("load",n),d=h;break;case"video":case"audio":for(d=0;d<Za.length;d++)tt(Za[d],n);d=h;break;case"source":tt("error",n),d=h;break;case"img":case"image":case"link":tt("error",n),tt("load",n),d=h;break;case"details":tt("toggle",n),d=h;break;case"input":tu(n,h),d=io(n,h),tt("invalid",n);break;case"option":d=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},d=ie({},h,{value:void 0}),tt("invalid",n);break;case"textarea":Ca(n,h),d=ka(n,h),tt("invalid",n);break;default:d=h}Vn(a,d),P=d;for(m in P)if(P.hasOwnProperty(m)){var R=P[m];m==="style"?ao(n,R):m==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&ru(n,R)):m==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&hs(n,R):typeof R=="number"&&hs(n,""+R):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?R!=null&&m==="onScroll"&&tt("scroll",n):R!=null&&j(n,m,R,w))}switch(a){case"input":Yn(n),xa(n,h,!1);break;case"textarea":Yn(n),si(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Le(h.value));break;case"select":n.multiple=!!h.multiple,m=h.value,m!=null?Mn(n,!!h.multiple,m,!1):h.defaultValue!=null&&Mn(n,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=bu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Wt(s),null;case 6:if(n&&s.stateNode!=null)oy(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=bs(al.current),bs(pr.current),Lu(s)){if(h=s.stateNode,a=s.memoizedProps,h[fr]=s,(m=h.nodeValue!==a)&&(n=vn,n!==null))switch(n.tag){case 3:Pu(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pu(h.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[fr]=s,s.stateNode=h}return Wt(s),null;case 13:if(nt(ot),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&_n!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ug(),Vo(),s.flags|=98560,m=!1;else if(m=Lu(s),h!==null&&h.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[fr]=s}else Vo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Wt(s),m=!1}else jn!==null&&(Jd(jn),jn=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ot.current&1)!==0?Ct===0&&(Ct=3):tf())),s.updateQueue!==null&&(s.flags|=4),Wt(s),null);case 4:return jo(),zd(n,s),n===null&&el(s.stateNode.containerInfo),Wt(s),null;case 10:return md(s.type._context),Wt(s),null;case 17:return rn(s.type)&&Nu(),Wt(s),null;case 19:if(nt(ot),m=s.memoizedState,m===null)return Wt(s),null;if(h=(s.flags&128)!==0,w=m.rendering,w===null)if(h)dl(m,!1);else{if(Ct!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=$u(n),w!==null){for(s.flags|=128,dl(m,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)m=a,n=h,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ze(ot,ot.current&1|2),s.child}n=n.sibling}m.tail!==null&&et()>Ho&&(s.flags|=128,h=!0,dl(m,!1),s.lanes=4194304)}else{if(!h)if(n=$u(w),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),dl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!st)return Wt(s),null}else 2*et()-m.renderingStartTime>Ho&&a!==1073741824&&(s.flags|=128,h=!0,dl(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=et(),s.sibling=null,a=ot.current,Ze(ot,h?a&1|2:a&1),s):(Wt(s),null);case 22:case 23:return ef(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(wn&1073741824)!==0&&(Wt(s),s.subtreeFlags&6&&(s.flags|=8192)):Wt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function OE(n,s){switch(ud(s),s.tag){case 1:return rn(s.type)&&Nu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return jo(),nt(nn),nt(Ht),Td(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return wd(s),null;case 13:if(nt(ot),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Vo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return nt(ot),null;case 4:return jo(),null;case 10:return md(s.type._context),null;case 22:case 23:return ef(),null;case 24:return null;default:return null}}var Ju=!1,qt=!1,ME=typeof WeakSet=="function"?WeakSet:Set,de=null;function Bo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ct(n,s,h)}else a.current=null}function Bd(n,s,a){try{a()}catch(h){ct(n,s,h)}}var ay=!1;function VE(n,s){if(ed=Mr,n=Um(),Wh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,P=-1,R=-1,B=0,ee=0,te=n,Z=null;t:for(;;){for(var ue;te!==a||d!==0&&te.nodeType!==3||(P=w+d),te!==m||h!==0&&te.nodeType!==3||(R=w+h),te.nodeType===3&&(w+=te.nodeValue.length),(ue=te.firstChild)!==null;)Z=te,te=ue;for(;;){if(te===n)break t;if(Z===a&&++B===d&&(P=w),Z===m&&++ee===h&&(R=w),(ue=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=ue}a=P===-1||R===-1?null:{start:P,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(td={focusedElem:n,selectionRange:a},Mr=!1,de=s;de!==null;)if(s=de,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,de=n;else for(;de!==null;){s=de;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var ge=fe.memoizedProps,pt=fe.memoizedState,L=s.stateNode,O=L.getSnapshotBeforeUpdate(s.elementType===s.type?ge:zn(s.type,ge),pt);L.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ct(s,s.return,re)}if(n=s.sibling,n!==null){n.return=s.return,de=n;break}de=s.return}return fe=ay,ay=!1,fe}function fl(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Bd(s,a,m)}d=d.next}while(d!==h)}}function Zu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function $d(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ly(n){var s=n.alternate;s!==null&&(n.alternate=null,ly(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[fr],delete s[nl],delete s[sd],delete s[vE],delete s[_E])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function uy(n){return n.tag===5||n.tag===3||n.tag===4}function cy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||uy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hd(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=bu));else if(h!==4&&(n=n.child,n!==null))for(Hd(n,s,a),n=n.sibling;n!==null;)Hd(n,s,a),n=n.sibling}function Gd(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Gd(n,s,a),n=n.sibling;n!==null;)Gd(n,s,a),n=n.sibling}var Ft=null,Bn=!1;function Ci(n,s,a){for(a=a.child;a!==null;)hy(n,s,a),a=a.sibling}function hy(n,s,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(gs,a)}catch{}switch(a.tag){case 5:qt||Bo(a,s);case 6:var h=Ft,d=Bn;Ft=null,Ci(n,s,a),Ft=h,Bn=d,Ft!==null&&(Bn?(n=Ft,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ft.removeChild(a.stateNode));break;case 18:Ft!==null&&(Bn?(n=Ft,a=a.stateNode,n.nodeType===8?id(n.parentNode,a):n.nodeType===1&&id(n,a),yi(n)):id(Ft,a.stateNode));break;case 4:h=Ft,d=Bn,Ft=a.stateNode.containerInfo,Bn=!0,Ci(n,s,a),Ft=h,Bn=d;break;case 0:case 11:case 14:case 15:if(!qt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Bd(a,s,w),d=d.next}while(d!==h)}Ci(n,s,a);break;case 1:if(!qt&&(Bo(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(P){ct(a,s,P)}Ci(n,s,a);break;case 21:Ci(n,s,a);break;case 22:a.mode&1?(qt=(h=qt)||a.memoizedState!==null,Ci(n,s,a),qt=h):Ci(n,s,a);break;default:Ci(n,s,a)}}function dy(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new ME),s.forEach(function(h){var d=GE.bind(null,n,h);a.has(h)||(a.add(h),h.then(d,d))})}}function $n(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var m=n,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 5:Ft=P.stateNode,Bn=!1;break e;case 3:Ft=P.stateNode.containerInfo,Bn=!0;break e;case 4:Ft=P.stateNode.containerInfo,Bn=!0;break e}P=P.return}if(Ft===null)throw Error(t(160));hy(m,w,d),Ft=null,Bn=!1;var R=d.alternate;R!==null&&(R.return=null),d.return=null}catch(B){ct(d,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)fy(s,n),s=s.sibling}function fy(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if($n(s,n),gr(n),h&4){try{fl(3,n,n.return),Zu(3,n)}catch(ge){ct(n,n.return,ge)}try{fl(5,n,n.return)}catch(ge){ct(n,n.return,ge)}}break;case 1:$n(s,n),gr(n),h&512&&a!==null&&Bo(a,a.return);break;case 5:if($n(s,n),gr(n),h&512&&a!==null&&Bo(a,a.return),n.flags&32){var d=n.stateNode;try{hs(d,"")}catch(ge){ct(n,n.return,ge)}}if(h&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,P=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{P==="input"&&m.type==="radio"&&m.name!=null&&so(d,m),lo(P,w);var B=lo(P,m);for(w=0;w<R.length;w+=2){var ee=R[w],te=R[w+1];ee==="style"?ao(d,te):ee==="dangerouslySetInnerHTML"?ru(d,te):ee==="children"?hs(d,te):j(d,ee,te,B)}switch(P){case"input":cs(d,m);break;case"textarea":nu(d,m);break;case"select":var Z=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ue=m.value;ue!=null?Mn(d,!!m.multiple,ue,!1):Z!==!!m.multiple&&(m.defaultValue!=null?Mn(d,!!m.multiple,m.defaultValue,!0):Mn(d,!!m.multiple,m.multiple?[]:"",!1))}d[nl]=m}catch(ge){ct(n,n.return,ge)}}break;case 6:if($n(s,n),gr(n),h&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(ge){ct(n,n.return,ge)}}break;case 3:if($n(s,n),gr(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{yi(s.containerInfo)}catch(ge){ct(n,n.return,ge)}break;case 4:$n(s,n),gr(n);break;case 13:$n(s,n),gr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Kd=et())),h&4&&dy(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(qt=(B=qt)||ee,$n(s,n),qt=B):$n(s,n),gr(n),h&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!ee&&(n.mode&1)!==0)for(de=n,ee=n.child;ee!==null;){for(te=de=ee;de!==null;){switch(Z=de,ue=Z.child,Z.tag){case 0:case 11:case 14:case 15:fl(4,Z,Z.return);break;case 1:Bo(Z,Z.return);var fe=Z.stateNode;if(typeof fe.componentWillUnmount=="function"){h=Z,a=Z.return;try{s=h,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(ge){ct(h,a,ge)}}break;case 5:Bo(Z,Z.return);break;case 22:if(Z.memoizedState!==null){gy(te);continue}}ue!==null?(ue.return=Z,de=ue):gy(te)}ee=ee.sibling}e:for(ee=null,te=n;;){if(te.tag===5){if(ee===null){ee=te;try{d=te.stateNode,B?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(P=te.stateNode,R=te.memoizedProps.style,w=R!=null&&R.hasOwnProperty("display")?R.display:null,P.style.display=li("display",w))}catch(ge){ct(n,n.return,ge)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=B?"":te.memoizedProps}catch(ge){ct(n,n.return,ge)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:$n(s,n),gr(n),h&4&&dy(n);break;case 21:break;default:$n(s,n),gr(n)}}function gr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(uy(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(hs(d,""),h.flags&=-33);var m=cy(n);Gd(n,m,d);break;case 3:case 4:var w=h.stateNode.containerInfo,P=cy(n);Hd(n,P,w);break;default:throw Error(t(161))}}catch(R){ct(n,n.return,R)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function LE(n,s,a){de=n,py(n)}function py(n,s,a){for(var h=(n.mode&1)!==0;de!==null;){var d=de,m=d.child;if(d.tag===22&&h){var w=d.memoizedState!==null||Ju;if(!w){var P=d.alternate,R=P!==null&&P.memoizedState!==null||qt;P=Ju;var B=qt;if(Ju=w,(qt=R)&&!B)for(de=d;de!==null;)w=de,R=w.child,w.tag===22&&w.memoizedState!==null?yy(d):R!==null?(R.return=w,de=R):yy(d);for(;m!==null;)de=m,py(m),m=m.sibling;de=d,Ju=P,qt=B}my(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,de=m):my(n)}}function my(n){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:qt||Zu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!qt)if(a===null)h.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:zn(s.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&gg(s,m,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}gg(s,w,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var ee=B.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&yi(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||s.flags&512&&$d(s)}catch(Z){ct(s,s.return,Z)}}if(s===n){de=null;break}if(a=s.sibling,a!==null){a.return=s.return,de=a;break}de=s.return}}function gy(n){for(;de!==null;){var s=de;if(s===n){de=null;break}var a=s.sibling;if(a!==null){a.return=s.return,de=a;break}de=s.return}}function yy(n){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Zu(4,s)}catch(R){ct(s,a,R)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var d=s.return;try{h.componentDidMount()}catch(R){ct(s,d,R)}}var m=s.return;try{$d(s)}catch(R){ct(s,m,R)}break;case 5:var w=s.return;try{$d(s)}catch(R){ct(s,w,R)}}}catch(R){ct(s,s.return,R)}if(s===n){de=null;break}var P=s.sibling;if(P!==null){P.return=s.return,de=P;break}de=s.return}}var FE=Math.ceil,ec=K.ReactCurrentDispatcher,Wd=K.ReactCurrentOwner,bn=K.ReactCurrentBatchConfig,Ge=0,Nt=null,wt=null,Ut=0,wn=0,$o=Ti(0),Ct=0,pl=null,Ns=0,tc=0,qd=0,ml=null,on=null,Kd=0,Ho=1/0,Gr=null,nc=!1,Qd=null,Ai=null,rc=!1,Pi=null,ic=0,gl=0,Xd=null,sc=-1,oc=0;function en(){return(Ge&6)!==0?et():sc!==-1?sc:sc=et()}function bi(n){return(n.mode&1)===0?1:(Ge&2)!==0&&Ut!==0?Ut&-Ut:EE.transition!==null?(oc===0&&(oc=La()),oc):(n=ze,n!==0||(n=window.event,n=n===void 0?16:_o(n.type)),n)}function Hn(n,s,a,h){if(50<gl)throw gl=0,Xd=null,Error(t(185));ws(n,a,h),((Ge&2)===0||n!==Nt)&&(n===Nt&&((Ge&2)===0&&(tc|=a),Ct===4&&Ri(n,Ut)),an(n,h),a===1&&Ge===0&&(s.mode&1)===0&&(Ho=et()+500,Ou&&Si()))}function an(n,s){var a=n.callbackNode;_s(n,s);var h=Nr(n,n===Nt?Ut:0);if(h===0)a!==null&&ho(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&ho(a),s===1)n.tag===0?wE(_y.bind(null,n)):ig(_y.bind(null,n)),gE(function(){(Ge&6)===0&&Si()}),a=null;else{switch(rr(h)){case 1:a=fo;break;case 4:a=Oa;break;case 16:a=ms;break;case 536870912:a=po;break;default:a=ms}a=Cy(a,vy.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function vy(n,s){if(sc=-1,oc=0,(Ge&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Go()&&n.callbackNode!==a)return null;var h=Nr(n,n===Nt?Ut:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=ac(n,h);else{s=h;var d=Ge;Ge|=2;var m=Ey();(Nt!==n||Ut!==s)&&(Gr=null,Ho=et()+500,Os(n,s));do try{zE();break}catch(P){wy(n,P)}while(!0);pd(),ec.current=m,Ge=d,wt!==null?s=0:(Nt=null,Ut=0,s=Ct)}if(s!==0){if(s===2&&(d=Va(n),d!==0&&(h=d,s=Yd(n,d))),s===1)throw a=pl,Os(n,0),Ri(n,h),an(n,et()),a;if(s===6)Ri(n,h);else{if(d=n.current.alternate,(h&30)===0&&!UE(d)&&(s=ac(n,h),s===2&&(m=Va(n),m!==0&&(h=m,s=Yd(n,m))),s===1))throw a=pl,Os(n,0),Ri(n,h),an(n,et()),a;switch(n.finishedWork=d,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Ms(n,on,Gr);break;case 3:if(Ri(n,h),(h&130023424)===h&&(s=Kd+500-et(),10<s)){if(Nr(n,0)!==0)break;if(d=n.suspendedLanes,(d&h)!==h){en(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=rd(Ms.bind(null,n,on,Gr),s);break}Ms(n,on,Gr);break;case 4:if(Ri(n,h),(h&4194240)===h)break;for(s=n.eventTimes,d=-1;0<h;){var w=31-fn(h);m=1<<w,w=s[w],w>d&&(d=w),h&=~m}if(h=d,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*FE(h/1960))-h,10<h){n.timeoutHandle=rd(Ms.bind(null,n,on,Gr),h);break}Ms(n,on,Gr);break;case 5:Ms(n,on,Gr);break;default:throw Error(t(329))}}}return an(n,et()),n.callbackNode===a?vy.bind(null,n):null}function Yd(n,s){var a=ml;return n.current.memoizedState.isDehydrated&&(Os(n,s).flags|=256),n=ac(n,s),n!==2&&(s=on,on=a,s!==null&&Jd(s)),n}function Jd(n){on===null?on=n:on.push.apply(on,n)}function UE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],m=d.getSnapshot;d=d.value;try{if(!Un(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ri(n,s){for(s&=~qd,s&=~tc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-fn(s),h=1<<a;n[a]=-1,s&=~h}}function _y(n){if((Ge&6)!==0)throw Error(t(327));Go();var s=Nr(n,0);if((s&1)===0)return an(n,et()),null;var a=ac(n,s);if(n.tag!==0&&a===2){var h=Va(n);h!==0&&(s=h,a=Yd(n,h))}if(a===1)throw a=pl,Os(n,0),Ri(n,s),an(n,et()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Ms(n,on,Gr),an(n,et()),null}function Zd(n,s){var a=Ge;Ge|=1;try{return n(s)}finally{Ge=a,Ge===0&&(Ho=et()+500,Ou&&Si())}}function Ds(n){Pi!==null&&Pi.tag===0&&(Ge&6)===0&&Go();var s=Ge;Ge|=1;var a=bn.transition,h=ze;try{if(bn.transition=null,ze=1,n)return n()}finally{ze=h,bn.transition=a,Ge=s,(Ge&6)===0&&Si()}}function ef(){wn=$o.current,nt($o)}function Os(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,mE(a)),wt!==null)for(a=wt.return;a!==null;){var h=a;switch(ud(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Nu();break;case 3:jo(),nt(nn),nt(Ht),Td();break;case 5:wd(h);break;case 4:jo();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:md(h.type._context);break;case 22:case 23:ef()}a=a.return}if(Nt=n,wt=n=Ni(n.current,null),Ut=wn=s,Ct=0,pl=null,qd=tc=Ns=0,on=ml=null,Ps!==null){for(s=0;s<Ps.length;s++)if(a=Ps[s],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,h.next=w}a.pending=h}Ps=null}return n}function wy(n,s){do{var a=wt;try{if(pd(),Hu.current=Ku,Gu){for(var h=at.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}Gu=!1}if(Rs=0,Rt=kt=at=null,ll=!1,ul=0,Wd.current=null,a===null||a.return===null){Ct=1,pl=s,wt=null;break}e:{var m=n,w=a.return,P=a,R=s;if(s=Ut,P.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var B=R,ee=P,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ue=Gg(w);if(ue!==null){ue.flags&=-257,Wg(ue,w,P,m,s),ue.mode&1&&Hg(m,B,s),s=ue,R=B;var fe=s.updateQueue;if(fe===null){var ge=new Set;ge.add(R),s.updateQueue=ge}else fe.add(R);break e}else{if((s&1)===0){Hg(m,B,s),tf();break e}R=Error(t(426))}}else if(st&&P.mode&1){var pt=Gg(w);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),Wg(pt,w,P,m,s),dd(zo(R,P));break e}}m=R=zo(R,P),Ct!==4&&(Ct=2),ml===null?ml=[m]:ml.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var L=Bg(m,R,s);mg(m,L);break e;case 1:P=R;var O=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Ai===null||!Ai.has(U)))){m.flags|=65536,s&=-s,m.lanes|=s;var re=$g(m,P,s);mg(m,re);break e}}m=m.return}while(m!==null)}Iy(a)}catch(ve){s=ve,wt===a&&a!==null&&(wt=a=a.return);continue}break}while(!0)}function Ey(){var n=ec.current;return ec.current=Ku,n===null?Ku:n}function tf(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Nt===null||(Ns&268435455)===0&&(tc&268435455)===0||Ri(Nt,Ut)}function ac(n,s){var a=Ge;Ge|=2;var h=Ey();(Nt!==n||Ut!==s)&&(Gr=null,Os(n,s));do try{jE();break}catch(d){wy(n,d)}while(!0);if(pd(),Ge=a,ec.current=h,wt!==null)throw Error(t(261));return Nt=null,Ut=0,Ct}function jE(){for(;wt!==null;)Ty(wt)}function zE(){for(;wt!==null&&!ps();)Ty(wt)}function Ty(n){var s=ky(n.alternate,n,wn);n.memoizedProps=n.pendingProps,s===null?Iy(n):wt=s,Wd.current=null}function Iy(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=DE(a,s,wn),a!==null){wt=a;return}}else{if(a=OE(a,s),a!==null){a.flags&=32767,wt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,wt=null;return}}if(s=s.sibling,s!==null){wt=s;return}wt=s=n}while(s!==null);Ct===0&&(Ct=5)}function Ms(n,s,a){var h=ze,d=bn.transition;try{bn.transition=null,ze=1,BE(n,s,a,h)}finally{bn.transition=d,ze=h}return null}function BE(n,s,a,h){do Go();while(Pi!==null);if((Ge&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(zh(n,m),n===Nt&&(wt=Nt=null,Ut=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||rc||(rc=!0,Cy(ms,function(){return Go(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=bn.transition,bn.transition=null;var w=ze;ze=1;var P=Ge;Ge|=4,Wd.current=null,VE(n,a),fy(a,n),lE(td),Mr=!!ed,td=ed=null,n.current=a,LE(a),Rr(),Ge=P,ze=w,bn.transition=m}else n.current=a;if(rc&&(rc=!1,Pi=n,ic=d),m=n.pendingLanes,m===0&&(Ai=null),pu(a.stateNode),an(n,et()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(nc)throw nc=!1,n=Qd,Qd=null,n;return(ic&1)!==0&&n.tag!==0&&Go(),m=n.pendingLanes,(m&1)!==0?n===Xd?gl++:(gl=0,Xd=n):gl=0,Si(),null}function Go(){if(Pi!==null){var n=rr(ic),s=bn.transition,a=ze;try{if(bn.transition=null,ze=16>n?16:n,Pi===null)var h=!1;else{if(n=Pi,Pi=null,ic=0,(Ge&6)!==0)throw Error(t(331));var d=Ge;for(Ge|=4,de=n.current;de!==null;){var m=de,w=m.child;if((de.flags&16)!==0){var P=m.deletions;if(P!==null){for(var R=0;R<P.length;R++){var B=P[R];for(de=B;de!==null;){var ee=de;switch(ee.tag){case 0:case 11:case 15:fl(8,ee,m)}var te=ee.child;if(te!==null)te.return=ee,de=te;else for(;de!==null;){ee=de;var Z=ee.sibling,ue=ee.return;if(ly(ee),ee===B){de=null;break}if(Z!==null){Z.return=ue,de=Z;break}de=ue}}}var fe=m.alternate;if(fe!==null){var ge=fe.child;if(ge!==null){fe.child=null;do{var pt=ge.sibling;ge.sibling=null,ge=pt}while(ge!==null)}}de=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,de=w;else e:for(;de!==null;){if(m=de,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:fl(9,m,m.return)}var L=m.sibling;if(L!==null){L.return=m.return,de=L;break e}de=m.return}}var O=n.current;for(de=O;de!==null;){w=de;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,de=U;else e:for(w=O;de!==null;){if(P=de,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Zu(9,P)}}catch(ve){ct(P,P.return,ve)}if(P===w){de=null;break e}var re=P.sibling;if(re!==null){re.return=P.return,de=re;break e}de=P.return}}if(Ge=d,Si(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(gs,n)}catch{}h=!0}return h}finally{ze=a,bn.transition=s}}return!1}function Sy(n,s,a){s=zo(a,s),s=Bg(n,s,1),n=ki(n,s,1),s=en(),n!==null&&(ws(n,1,s),an(n,s))}function ct(n,s,a){if(n.tag===3)Sy(n,n,a);else for(;s!==null;){if(s.tag===3){Sy(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ai===null||!Ai.has(h))){n=zo(a,n),n=$g(s,n,1),s=ki(s,n,1),n=en(),s!==null&&(ws(s,1,n),an(s,n));break}}s=s.return}}function $E(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=en(),n.pingedLanes|=n.suspendedLanes&a,Nt===n&&(Ut&a)===a&&(Ct===4||Ct===3&&(Ut&130023424)===Ut&&500>et()-Kd?Os(n,0):qd|=a),an(n,s)}function xy(n,s){s===0&&((n.mode&1)===0?s=1:(s=pi,pi<<=1,(pi&130023424)===0&&(pi=4194304)));var a=en();n=Br(n,s),n!==null&&(ws(n,s,a),an(n,a))}function HE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),xy(n,a)}function GE(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),xy(n,a)}var ky;ky=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||nn.current)sn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return sn=!1,NE(n,s,a);sn=(n.flags&131072)!==0}else sn=!1,st&&(s.flags&1048576)!==0&&sg(s,Vu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Yu(n,s),n=s.pendingProps;var d=Do(s,Ht.current);Uo(s,a),d=xd(null,s,h,n,d,a);var m=kd();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rn(h)?(m=!0,Du(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,vd(s),d.updater=Qu,s.stateNode=d,d._reactInternals=s,Nd(s,h,n,a),s=Vd(null,s,h,!0,m,a)):(s.tag=0,st&&m&&ld(s),Zt(null,s,d,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Yu(n,s),n=s.pendingProps,d=h._init,h=d(h._payload),s.type=h,d=s.tag=qE(h),n=zn(h,n),d){case 0:s=Md(null,s,h,n,a);break e;case 1:s=Jg(null,s,h,n,a);break e;case 11:s=qg(null,s,h,n,a);break e;case 14:s=Kg(null,s,h,zn(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Md(n,s,h,d,a);case 1:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Jg(n,s,h,d,a);case 3:e:{if(Zg(s),n===null)throw Error(t(387));h=s.pendingProps,m=s.memoizedState,d=m.element,pg(n,s),Bu(s,h,null,a);var w=s.memoizedState;if(h=w.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=zo(Error(t(423)),s),s=ey(n,s,h,a,d);break e}else if(h!==d){d=zo(Error(t(424)),s),s=ey(n,s,h,a,d);break e}else for(_n=Ei(s.stateNode.containerInfo.firstChild),vn=s,st=!0,jn=null,a=dg(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Vo(),h===d){s=Hr(n,s,a);break e}Zt(n,s,h,a)}s=s.child}return s;case 5:return yg(s),n===null&&hd(s),h=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,nd(h,d)?w=null:m!==null&&nd(h,m)&&(s.flags|=32),Yg(n,s),Zt(n,s,w,a),s.child;case 6:return n===null&&hd(s),null;case 13:return ty(n,s,a);case 4:return _d(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Lo(s,null,h,a):Zt(n,s,h,a),s.child;case 11:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),qg(n,s,h,d,a);case 7:return Zt(n,s,s.pendingProps,a),s.child;case 8:return Zt(n,s,s.pendingProps.children,a),s.child;case 12:return Zt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,d=s.pendingProps,m=s.memoizedProps,w=d.value,Ze(Uu,h._currentValue),h._currentValue=w,m!==null)if(Un(m.value,w)){if(m.children===d.children&&!nn.current){s=Hr(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var P=m.dependencies;if(P!==null){w=m.child;for(var R=P.firstContext;R!==null;){if(R.context===h){if(m.tag===1){R=$r(-1,a&-a),R.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var ee=B.pending;ee===null?R.next=R:(R.next=ee.next,ee.next=R),B.pending=R}}m.lanes|=a,R=m.alternate,R!==null&&(R.lanes|=a),gd(m.return,a,s),P.lanes|=a;break}R=R.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,P=w.alternate,P!==null&&(P.lanes|=a),gd(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Zt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,h=s.pendingProps.children,Uo(s,a),d=An(d),h=h(d),s.flags|=1,Zt(n,s,h,a),s.child;case 14:return h=s.type,d=zn(h,s.pendingProps),d=zn(h.type,d),Kg(n,s,h,d,a);case 15:return Qg(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Yu(n,s),s.tag=1,rn(h)?(n=!0,Du(s)):n=!1,Uo(s,a),jg(s,h,d),Nd(s,h,d,a),Vd(null,s,h,!0,n,a);case 19:return ry(n,s,a);case 22:return Xg(n,s,a)}throw Error(t(156,s.tag))};function Cy(n,s){return Da(n,s)}function WE(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,s,a,h){return new WE(n,s,a,h)}function nf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qE(n){if(typeof n=="function")return nf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===He)return 14}return 2}function Ni(n,s){var a=n.alternate;return a===null?(a=Rn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function lc(n,s,a,h,d,m){var w=2;if(h=n,typeof n=="function")nf(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case C:return Vs(a.children,d,m,s);case S:w=8,d|=8;break;case A:return n=Rn(12,a,s,d|2),n.elementType=A,n.lanes=m,n;case k:return n=Rn(13,a,s,d),n.elementType=k,n.lanes=m,n;case Ae:return n=Rn(19,a,s,d),n.elementType=Ae,n.lanes=m,n;case Ve:return uc(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:w=10;break e;case D:w=9;break e;case V:w=11;break e;case He:w=14;break e;case Be:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Rn(w,a,s,d),s.elementType=n,s.type=h,s.lanes=m,s}function Vs(n,s,a,h){return n=Rn(7,n,h,s),n.lanes=a,n}function uc(n,s,a,h){return n=Rn(22,n,h,s),n.elementType=Ve,n.lanes=a,n.stateNode={isHidden:!1},n}function rf(n,s,a){return n=Rn(6,n,null,s),n.lanes=a,n}function sf(n,s,a){return s=Rn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function KE(n,s,a,h,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fa(0),this.expirationTimes=Fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fa(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function of(n,s,a,h,d,m,w,P,R){return n=new KE(n,s,a,P,R),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Rn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},vd(m),n}function QE(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function Ay(n){if(!n)return Ii;n=n._reactInternals;e:{if(Ln(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(rn(a))return ng(n,a,s)}return s}function Py(n,s,a,h,d,m,w,P,R){return n=of(a,h,!0,n,d,m,w,P,R),n.context=Ay(null),a=n.current,h=en(),d=bi(a),m=$r(h,d),m.callback=s??null,ki(a,m,d),n.current.lanes=d,ws(n,d,h),an(n,h),n}function cc(n,s,a,h){var d=s.current,m=en(),w=bi(d);return a=Ay(a),s.context===null?s.context=a:s.pendingContext=a,s=$r(m,w),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=ki(d,s,w),n!==null&&(Hn(n,d,w,m),zu(n,d,w)),w}function hc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function by(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function af(n,s){by(n,s),(n=n.alternate)&&by(n,s)}function XE(){return null}var Ry=typeof reportError=="function"?reportError:function(n){console.error(n)};function lf(n){this._internalRoot=n}dc.prototype.render=lf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));cc(n,s,null,null)},dc.prototype.unmount=lf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ds(function(){cc(null,n,null,null)}),s[Fr]=null}};function dc(n){this._internalRoot=n}dc.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ba();n={blockedOn:null,target:n,priority:s};for(var a=0;a<pn.length&&s!==0&&s<pn[a].priority;a++);pn.splice(a,0,n),a===0&&yo(n)}};function uf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ny(){}function YE(n,s,a,h,d){if(d){if(typeof h=="function"){var m=h;h=function(){var B=hc(w);m.call(B)}}var w=Py(s,h,n,0,null,!1,!1,"",Ny);return n._reactRootContainer=w,n[Fr]=w.current,el(n.nodeType===8?n.parentNode:n),Ds(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof h=="function"){var P=h;h=function(){var B=hc(R);P.call(B)}}var R=of(n,0,!1,null,null,!1,!1,"",Ny);return n._reactRootContainer=R,n[Fr]=R.current,el(n.nodeType===8?n.parentNode:n),Ds(function(){cc(s,R,a,h)}),R}function pc(n,s,a,h,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var P=d;d=function(){var R=hc(w);P.call(R)}}cc(s,w,n,d)}else w=YE(a,s,n,d,h);return hc(w)}ja=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Ke(s.pendingLanes);a!==0&&(Ua(s,a|1),an(s,et()),(Ge&6)===0&&(Ho=et()+500,Si()))}break;case 13:Ds(function(){var h=Br(n,1);if(h!==null){var d=en();Hn(h,n,1,d)}}),af(n,1)}},mo=function(n){if(n.tag===13){var s=Br(n,134217728);if(s!==null){var a=en();Hn(s,n,134217728,a)}af(n,134217728)}},za=function(n){if(n.tag===13){var s=bi(n),a=Br(n,s);if(a!==null){var h=en();Hn(a,n,s,h)}af(n,s)}},Ba=function(){return ze},$a=function(n,s){var a=ze;try{return ze=n,s()}finally{ze=a}},Ar=function(n,s,a){switch(s){case"input":if(cs(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var d=Ru(h);if(!d)throw Error(t(90));Jn(h),cs(h,d)}}}break;case"textarea":nu(n,a);break;case"select":s=a.value,s!=null&&Mn(n,!!a.multiple,s,!1)}},su=Zd,ou=Ds;var JE={usingClientEntryPoint:!1,Events:[rl,Ro,Ru,ci,hi,Zd]},yl={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZE={bundleType:yl.bundleType,version:yl.version,rendererPackageName:yl.rendererPackageName,rendererConfig:yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fu(n),n===null?null:n.stateNode},findFiberByHostInstance:yl.findFiberByHostInstance||XE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{gs=mc.inject(ZE),dn=mc}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JE,ln.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uf(s))throw Error(t(200));return QE(n,s,null,a)},ln.createRoot=function(n,s){if(!uf(n))throw Error(t(299));var a=!1,h="",d=Ry;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=of(n,1,!1,null,null,a,!1,h,d),n[Fr]=s.current,el(n.nodeType===8?n.parentNode:n),new lf(s)},ln.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=fu(s),n=n===null?null:n.stateNode,n},ln.flushSync=function(n){return Ds(n)},ln.hydrate=function(n,s,a){if(!fc(s))throw Error(t(200));return pc(null,n,s,!0,a)},ln.hydrateRoot=function(n,s,a){if(!uf(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,m="",w=Ry;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Py(s,null,n,1,a??null,d,!1,m,w),n[Fr]=s.current,el(n),h)for(n=0;n<h.length;n++)a=h[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new dc(s)},ln.render=function(n,s,a){if(!fc(s))throw Error(t(200));return pc(null,n,s,!1,a)},ln.unmountComponentAtNode=function(n){if(!fc(n))throw Error(t(40));return n._reactRootContainer?(Ds(function(){pc(null,null,n,!1,function(){n._reactRootContainer=null,n[Fr]=null})}),!0):!1},ln.unstable_batchedUpdates=Zd,ln.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!fc(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return pc(n,s,a,!1,h)},ln.version="18.3.1-next-f1338f8080-20240426",ln}var jy;function $0(){if(jy)return df.exports;jy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),df.exports=oT(),df.exports}var zy;function aT(){if(zy)return gc;zy=1;var r=$0();return gc.createRoot=r.createRoot,gc.hydrateRoot=r.hydrateRoot,gc}var lT=aT(),X=_p();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),By=r=>{const e=cT(r);return e.charAt(0).toUpperCase()+e.slice(1)},H0=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=X.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c,...f},p)=>X.createElement("svg",{ref:p,...hT,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:H0("lucide",o),...f},[...c.map(([y,_])=>X.createElement(y,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(r,e)=>{const t=X.forwardRef(({className:i,...o},l)=>X.createElement(dT,{ref:l,iconNode:e,className:H0(`lucide-${uT(By(r))}`,`lucide-${r}`,i),...o}));return t.displayName=By(r),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],G0=Ye("aperture",fT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wp=Ye("arrow-left",pT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Mf=Ye("arrow-right-left",mT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],W0=Ye("calendar",gT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],q0=Ye("camera",yT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_T=Ye("check",vT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ET=Ye("chevron-left",wT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],IT=Ye("chevron-right",TT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],K0=Ye("clock",ST);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$y=Ye("eye",xT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],CT=Ye("file-image",kT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["path",{d:"M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v3.3",key:"1k8050"}],["path",{d:"m21.7 19.4-.9-.3",key:"1qgwi9"}],["path",{d:"m15.2 16.9-.9-.3",key:"1t7mvx"}],["path",{d:"m16.6 21.7.3-.9",key:"1j67ps"}],["path",{d:"m19.1 15.2.3-.9",key:"18r7jp"}],["path",{d:"m19.6 21.7-.4-1",key:"z2vh2"}],["path",{d:"m16.8 15.3-.4-1",key:"1ei7r6"}],["path",{d:"m14.3 19.6 1-.4",key:"11sv9r"}],["path",{d:"m20.7 16.8 1-.4",key:"19m87a"}]],PT=Ye("folder-cog",AT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Hy=Ye("folder-open",bT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],NT=Ye("folder-plus",RT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],OT=Ye("folder",DT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],VT=Ye("image",MT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],FT=Ye("info",LT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hi=Ye("loader-circle",UT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Uc=Ye("map-pin",jT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],BT=Ye("menu",zT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],HT=Ye("pen",$T);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jc=Ye("plus",GT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Q0=Ye("save",WT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],X0=Ye("search",qT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Gy=Ye("square-pen",KT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Y0=Ye("trash-2",QT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],YT=Ye("upload",XT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fa=Ye("x",JT),ZT=()=>{};var Wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},eI=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],c=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Z0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],c=o+1<r.length,f=c?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,_=l>>2,T=(l&3)<<4|f>>4;let x=(f&15)<<2|y>>6,M=y&63;p||(M=64,c||(x=64)),i.push(t[_],t[T],t[x],t[M])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(J0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):eI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new tI;const x=l<<2|f>>4;if(i.push(x),y!==64){const M=f<<4&240|y>>2;if(i.push(M),T!==64){const z=y<<6&192|T;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class tI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nI=function(r){const e=J0(r);return Z0.encodeByteArray(e,!0)},zc=function(r){return nI(r).replace(/\./g,"")},e_=function(r){try{return Z0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=()=>rI().__FIREBASE_DEFAULTS__,sI=()=>{if(typeof process>"u"||typeof Wy>"u")return;const r=Wy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},oI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&e_(r[1]);return e&&JSON.parse(e)},fh=()=>{try{return ZT()||iI()||sI()||oI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},t_=r=>{var e,t;return(t=(e=fh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},aI=r=>{const e=t_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},n_=()=>{var r;return(r=fh())==null?void 0:r.config},r_=r=>{var e;return(e=fh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function i_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[zc(JSON.stringify(t)),zc(JSON.stringify(c)),""].join(".")}const kl={};function cI(){const r={prod:[],emulator:[]};for(const e of Object.keys(kl))kl[e]?r.emulator.push(e):r.prod.push(e);return r}function hI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let qy=!1;function s_(r,e){if(typeof window>"u"||typeof document>"u"||!pa(window.location.host)||kl[r]===e||kl[r]||qy)return;kl[r]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",l=cI().prod.length>0;function c(){const x=document.getElementById(i);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,M){x.setAttribute("width","24"),x.setAttribute("id",M),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{qy=!0,c()},x}function _(x,M){x.setAttribute("id",M),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=hI(i),M=t("text"),z=document.getElementById(M)||document.createElement("span"),$=t("learnmore"),W=document.getElementById($)||document.createElement("a"),le=t("preprendIcon"),ae=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const j=x.element;f(j),_(W,$);const K=y();p(ae,le),j.append(ae,z,W,K),document.body.appendChild(j)}l?(z.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function fI(){var e;const r=(e=fh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function gI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yI(){const r=Yt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function vI(){return!fI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _I(){try{return typeof indexedDB=="object"}catch{return!1}}function wI(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="FirebaseError";class ni extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=EI,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?TI(l,i):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new ni(o,f,i)}}function TI(r,e){return r.replace(II,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const II=/\{\$([^}]+)}/g;function SI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ji(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],c=e[o];if(Ky(l)&&Ky(c)){if(!Ji(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ky(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function xI(r,e){const t=new kI(r,e);return t.subscribe.bind(t)}class kI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");CI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=mf),o.error===void 0&&(o.error=mf),o.complete===void 0&&(o.complete=mf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function mf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(r){return r&&r._delegate?r._delegate:r}class qs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new lI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bI(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:PI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(r){return r===Fs?void 0:r}function bI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new AI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Fe||(Fe={}));const NI={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},DI=Fe.INFO,OI={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},MI=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=OI[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=DI,this._logHandler=MI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const VI=(r,e)=>e.some(t=>r instanceof t);let Qy,Xy;function LI(){return Qy||(Qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FI(){return Xy||(Xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o_=new WeakMap,Vf=new WeakMap,a_=new WeakMap,gf=new WeakMap,Tp=new WeakMap;function UI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Gi(r.result)),o()},c=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&o_.set(t,r)}).catch(()=>{}),Tp.set(e,r),e}function jI(r){if(Vf.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Vf.set(r,e)}let Lf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Vf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||a_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function zI(r){Lf=r(Lf)}function BI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(yf(this),e,...t);return a_.set(i,e.sort?e.sort():[e]),Gi(i)}:FI().includes(r)?function(...e){return r.apply(yf(this),e),Gi(o_.get(this))}:function(...e){return Gi(r.apply(yf(this),e))}}function $I(r){return typeof r=="function"?BI(r):(r instanceof IDBTransaction&&jI(r),VI(r,LI())?new Proxy(r,Lf):r)}function Gi(r){if(r instanceof IDBRequest)return UI(r);if(gf.has(r))return gf.get(r);const e=$I(r);return e!==r&&(gf.set(r,e),Tp.set(e,r)),e}const yf=r=>Tp.get(r);function HI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(r,e),f=Gi(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Gi(c.result),p.oldVersion,p.newVersion,Gi(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const GI=["get","getKey","getAll","getAllKeys","count"],WI=["put","add","delete","clear"],vf=new Map;function Yy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(vf.get(e))return vf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=WI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||GI.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return vf.set(e,l),l}zI(r=>({...r,get:(e,t,i)=>Yy(e,t)||r.get(e,t,i),has:(e,t)=>!!Yy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(KI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function KI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ff="@firebase/app",Jy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Ep("@firebase/app"),QI="@firebase/app-compat",XI="@firebase/analytics-compat",YI="@firebase/analytics",JI="@firebase/app-check-compat",ZI="@firebase/app-check",eS="@firebase/auth",tS="@firebase/auth-compat",nS="@firebase/database",rS="@firebase/data-connect",iS="@firebase/database-compat",sS="@firebase/functions",oS="@firebase/functions-compat",aS="@firebase/installations",lS="@firebase/installations-compat",uS="@firebase/messaging",cS="@firebase/messaging-compat",hS="@firebase/performance",dS="@firebase/performance-compat",fS="@firebase/remote-config",pS="@firebase/remote-config-compat",mS="@firebase/storage",gS="@firebase/storage-compat",yS="@firebase/firestore",vS="@firebase/ai",_S="@firebase/firestore-compat",wS="firebase",ES="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="[DEFAULT]",TS={[Ff]:"fire-core",[QI]:"fire-core-compat",[YI]:"fire-analytics",[XI]:"fire-analytics-compat",[ZI]:"fire-app-check",[JI]:"fire-app-check-compat",[eS]:"fire-auth",[tS]:"fire-auth-compat",[nS]:"fire-rtdb",[rS]:"fire-data-connect",[iS]:"fire-rtdb-compat",[sS]:"fire-fn",[oS]:"fire-fn-compat",[aS]:"fire-iid",[lS]:"fire-iid-compat",[uS]:"fire-fcm",[cS]:"fire-fcm-compat",[hS]:"fire-perf",[dS]:"fire-perf-compat",[fS]:"fire-rc",[pS]:"fire-rc-compat",[mS]:"fire-gcs",[gS]:"fire-gcs-compat",[yS]:"fire-fst",[_S]:"fire-fst-compat",[vS]:"fire-vertex","fire-js":"fire-js",[wS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Map,IS=new Map,jf=new Map;function Zy(r,e){try{r.container.addComponent(e)}catch(t){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ra(r){const e=r.name;if(jf.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;jf.set(e,r);for(const t of Bc.values())Zy(t,r);for(const t of IS.values())Zy(t,r);return!0}function Ip(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Gn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new $l("app","Firebase",SS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=ES;function l_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Uf,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Wi.create("bad-app-name",{appName:String(o)});if(t||(t=n_()),!t)throw Wi.create("no-options");const l=Bc.get(o);if(l){if(Ji(t,l.options)&&Ji(i,l.config))return l;throw Wi.create("duplicate-app",{appName:o})}const c=new RI(o);for(const p of jf.values())c.addComponent(p);const f=new xS(t,i,c);return Bc.set(o,f),f}function u_(r=Uf){const e=Bc.get(r);if(!e&&r===Uf&&n_())return l_();if(!e)throw Wi.create("no-app",{appName:r});return e}function qi(r,e,t){let i=TS[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(c.join(" "));return}ra(new qs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebase-heartbeat-database",CS=1,Ol="firebase-heartbeat-store";let _f=null;function c_(){return _f||(_f=HI(kS,CS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ol)}catch(t){console.warn(t)}}}}).catch(r=>{throw Wi.create("idb-open",{originalErrorMessage:r.message})})),_f}async function AS(r){try{const t=(await c_()).transaction(Ol),i=await t.objectStore(Ol).get(h_(r));return await t.done,i}catch(e){if(e instanceof ni)Yr.warn(e.message);else{const t=Wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(t.message)}}}async function ev(r,e){try{const i=(await c_()).transaction(Ol,"readwrite");await i.objectStore(Ol).put(e,h_(r)),await i.done}catch(t){if(t instanceof ni)Yr.warn(t.message);else{const i=Wi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Yr.warn(i.message)}}}function h_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=1024,bS=30;class RS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>bS){const c=OS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Yr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tv(),{heartbeatsToSend:i,unsentEntries:o}=NS(this._heartbeatsCache.heartbeats),l=zc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Yr.warn(t),""}}}function tv(){return new Date().toISOString().substring(0,10)}function NS(r,e=PS){const t=[];let i=r.slice();for(const o of r){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),nv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),nv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class DS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _I()?wI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nv(r){return zc(JSON.stringify({version:2,heartbeats:r})).length}function OS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r){ra(new qs("platform-logger",e=>new qI(e),"PRIVATE")),ra(new qs("heartbeat",e=>new RS(e),"PRIVATE")),qi(Ff,Jy,r),qi(Ff,Jy,"esm2020"),qi("fire-js","")}MS("");var VS="firebase",LS="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(VS,LS,"app");var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ki,d_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function A(){}A.prototype=S.prototype,C.F=S.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(N,D,V){for(var k=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)k[Ae-2]=arguments[Ae];return S.prototype[D].apply(N,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,S,A){A||(A=0);const N=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)N[D]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(D=0;D<16;++D)N[D]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=C.g[0],A=C.g[1],D=C.g[2];let V=C.g[3],k;k=S+(V^A&(D^V))+N[0]+3614090360&4294967295,S=A+(k<<7&4294967295|k>>>25),k=V+(D^S&(A^D))+N[1]+3905402710&4294967295,V=S+(k<<12&4294967295|k>>>20),k=D+(A^V&(S^A))+N[2]+606105819&4294967295,D=V+(k<<17&4294967295|k>>>15),k=A+(S^D&(V^S))+N[3]+3250441966&4294967295,A=D+(k<<22&4294967295|k>>>10),k=S+(V^A&(D^V))+N[4]+4118548399&4294967295,S=A+(k<<7&4294967295|k>>>25),k=V+(D^S&(A^D))+N[5]+1200080426&4294967295,V=S+(k<<12&4294967295|k>>>20),k=D+(A^V&(S^A))+N[6]+2821735955&4294967295,D=V+(k<<17&4294967295|k>>>15),k=A+(S^D&(V^S))+N[7]+4249261313&4294967295,A=D+(k<<22&4294967295|k>>>10),k=S+(V^A&(D^V))+N[8]+1770035416&4294967295,S=A+(k<<7&4294967295|k>>>25),k=V+(D^S&(A^D))+N[9]+2336552879&4294967295,V=S+(k<<12&4294967295|k>>>20),k=D+(A^V&(S^A))+N[10]+4294925233&4294967295,D=V+(k<<17&4294967295|k>>>15),k=A+(S^D&(V^S))+N[11]+2304563134&4294967295,A=D+(k<<22&4294967295|k>>>10),k=S+(V^A&(D^V))+N[12]+1804603682&4294967295,S=A+(k<<7&4294967295|k>>>25),k=V+(D^S&(A^D))+N[13]+4254626195&4294967295,V=S+(k<<12&4294967295|k>>>20),k=D+(A^V&(S^A))+N[14]+2792965006&4294967295,D=V+(k<<17&4294967295|k>>>15),k=A+(S^D&(V^S))+N[15]+1236535329&4294967295,A=D+(k<<22&4294967295|k>>>10),k=S+(D^V&(A^D))+N[1]+4129170786&4294967295,S=A+(k<<5&4294967295|k>>>27),k=V+(A^D&(S^A))+N[6]+3225465664&4294967295,V=S+(k<<9&4294967295|k>>>23),k=D+(S^A&(V^S))+N[11]+643717713&4294967295,D=V+(k<<14&4294967295|k>>>18),k=A+(V^S&(D^V))+N[0]+3921069994&4294967295,A=D+(k<<20&4294967295|k>>>12),k=S+(D^V&(A^D))+N[5]+3593408605&4294967295,S=A+(k<<5&4294967295|k>>>27),k=V+(A^D&(S^A))+N[10]+38016083&4294967295,V=S+(k<<9&4294967295|k>>>23),k=D+(S^A&(V^S))+N[15]+3634488961&4294967295,D=V+(k<<14&4294967295|k>>>18),k=A+(V^S&(D^V))+N[4]+3889429448&4294967295,A=D+(k<<20&4294967295|k>>>12),k=S+(D^V&(A^D))+N[9]+568446438&4294967295,S=A+(k<<5&4294967295|k>>>27),k=V+(A^D&(S^A))+N[14]+3275163606&4294967295,V=S+(k<<9&4294967295|k>>>23),k=D+(S^A&(V^S))+N[3]+4107603335&4294967295,D=V+(k<<14&4294967295|k>>>18),k=A+(V^S&(D^V))+N[8]+1163531501&4294967295,A=D+(k<<20&4294967295|k>>>12),k=S+(D^V&(A^D))+N[13]+2850285829&4294967295,S=A+(k<<5&4294967295|k>>>27),k=V+(A^D&(S^A))+N[2]+4243563512&4294967295,V=S+(k<<9&4294967295|k>>>23),k=D+(S^A&(V^S))+N[7]+1735328473&4294967295,D=V+(k<<14&4294967295|k>>>18),k=A+(V^S&(D^V))+N[12]+2368359562&4294967295,A=D+(k<<20&4294967295|k>>>12),k=S+(A^D^V)+N[5]+4294588738&4294967295,S=A+(k<<4&4294967295|k>>>28),k=V+(S^A^D)+N[8]+2272392833&4294967295,V=S+(k<<11&4294967295|k>>>21),k=D+(V^S^A)+N[11]+1839030562&4294967295,D=V+(k<<16&4294967295|k>>>16),k=A+(D^V^S)+N[14]+4259657740&4294967295,A=D+(k<<23&4294967295|k>>>9),k=S+(A^D^V)+N[1]+2763975236&4294967295,S=A+(k<<4&4294967295|k>>>28),k=V+(S^A^D)+N[4]+1272893353&4294967295,V=S+(k<<11&4294967295|k>>>21),k=D+(V^S^A)+N[7]+4139469664&4294967295,D=V+(k<<16&4294967295|k>>>16),k=A+(D^V^S)+N[10]+3200236656&4294967295,A=D+(k<<23&4294967295|k>>>9),k=S+(A^D^V)+N[13]+681279174&4294967295,S=A+(k<<4&4294967295|k>>>28),k=V+(S^A^D)+N[0]+3936430074&4294967295,V=S+(k<<11&4294967295|k>>>21),k=D+(V^S^A)+N[3]+3572445317&4294967295,D=V+(k<<16&4294967295|k>>>16),k=A+(D^V^S)+N[6]+76029189&4294967295,A=D+(k<<23&4294967295|k>>>9),k=S+(A^D^V)+N[9]+3654602809&4294967295,S=A+(k<<4&4294967295|k>>>28),k=V+(S^A^D)+N[12]+3873151461&4294967295,V=S+(k<<11&4294967295|k>>>21),k=D+(V^S^A)+N[15]+530742520&4294967295,D=V+(k<<16&4294967295|k>>>16),k=A+(D^V^S)+N[2]+3299628645&4294967295,A=D+(k<<23&4294967295|k>>>9),k=S+(D^(A|~V))+N[0]+4096336452&4294967295,S=A+(k<<6&4294967295|k>>>26),k=V+(A^(S|~D))+N[7]+1126891415&4294967295,V=S+(k<<10&4294967295|k>>>22),k=D+(S^(V|~A))+N[14]+2878612391&4294967295,D=V+(k<<15&4294967295|k>>>17),k=A+(V^(D|~S))+N[5]+4237533241&4294967295,A=D+(k<<21&4294967295|k>>>11),k=S+(D^(A|~V))+N[12]+1700485571&4294967295,S=A+(k<<6&4294967295|k>>>26),k=V+(A^(S|~D))+N[3]+2399980690&4294967295,V=S+(k<<10&4294967295|k>>>22),k=D+(S^(V|~A))+N[10]+4293915773&4294967295,D=V+(k<<15&4294967295|k>>>17),k=A+(V^(D|~S))+N[1]+2240044497&4294967295,A=D+(k<<21&4294967295|k>>>11),k=S+(D^(A|~V))+N[8]+1873313359&4294967295,S=A+(k<<6&4294967295|k>>>26),k=V+(A^(S|~D))+N[15]+4264355552&4294967295,V=S+(k<<10&4294967295|k>>>22),k=D+(S^(V|~A))+N[6]+2734768916&4294967295,D=V+(k<<15&4294967295|k>>>17),k=A+(V^(D|~S))+N[13]+1309151649&4294967295,A=D+(k<<21&4294967295|k>>>11),k=S+(D^(A|~V))+N[4]+4149444226&4294967295,S=A+(k<<6&4294967295|k>>>26),k=V+(A^(S|~D))+N[11]+3174756917&4294967295,V=S+(k<<10&4294967295|k>>>22),k=D+(S^(V|~A))+N[2]+718787259&4294967295,D=V+(k<<15&4294967295|k>>>17),k=A+(V^(D|~S))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+V&4294967295}i.prototype.v=function(C,S){S===void 0&&(S=C.length);const A=S-this.blockSize,N=this.C;let D=this.h,V=0;for(;V<S;){if(D==0)for(;V<=A;)o(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<S;)if(N[D++]=C.charCodeAt(V++),D==this.blockSize){o(this,N),D=0;break}}else for(;V<S;)if(N[D++]=C[V++],D==this.blockSize){o(this,N),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,A=0;A<4;++A)for(let N=0;N<32;N+=8)C[S++]=this.g[A]>>>N&255;return C};function l(C,S){var A=f;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=S(C)}function c(C,S){this.h=S;const A=[];let N=!0;for(let D=C.length-1;D>=0;D--){const V=C[D]|0;N&&V==S||(A[D]=V,N=!1)}this.g=A}var f={};function p(C){return-128<=C&&C<128?l(C,function(S){return new c([S|0],S<0?-1:0)}):new c([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return T;if(C<0)return W(y(-C));const S=[];let A=1;for(let N=0;C>=A;N++)S[N]=C/A|0,A*=4294967296;return new c(S,0)}function _(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return W(_(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(S,8));let N=T;for(let V=0;V<C.length;V+=8){var D=Math.min(8,C.length-V);const k=parseInt(C.substring(V,V+D),S);D<8?(D=y(Math.pow(S,D)),N=N.j(D).add(y(k))):(N=N.j(A),N=N.add(y(k)))}return N}var T=p(0),x=p(1),M=p(16777216);r=c.prototype,r.m=function(){if($(this))return-W(this).m();let C=0,S=1;for(let A=0;A<this.g.length;A++){const N=this.i(A);C+=(N>=0?N:4294967296+N)*S,S*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(z(this))return"0";if($(this))return"-"+W(this).toString(C);const S=y(Math.pow(C,6));var A=this;let N="";for(;;){const D=K(A,S).g;A=le(A,D.j(S));let V=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=D,z(A))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function z(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function $(C){return C.h==-1}r.l=function(C){return C=le(this,C),$(C)?-1:z(C)?0:1};function W(C){const S=C.g.length,A=[];for(let N=0;N<S;N++)A[N]=~C.g[N];return new c(A,~C.h).add(x)}r.abs=function(){return $(this)?W(this):this},r.add=function(C){const S=Math.max(this.g.length,C.g.length),A=[];let N=0;for(let D=0;D<=S;D++){let V=N+(this.i(D)&65535)+(C.i(D)&65535),k=(V>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);N=k>>>16,V&=65535,k&=65535,A[D]=k<<16|V}return new c(A,A[A.length-1]&-2147483648?-1:0)};function le(C,S){return C.add(W(S))}r.j=function(C){if(z(this)||z(C))return T;if($(this))return $(C)?W(this).j(W(C)):W(W(this).j(C));if($(C))return W(this.j(W(C)));if(this.l(M)<0&&C.l(M)<0)return y(this.m()*C.m());const S=this.g.length+C.g.length,A=[];for(var N=0;N<2*S;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(let D=0;D<C.g.length;D++){const V=this.i(N)>>>16,k=this.i(N)&65535,Ae=C.i(D)>>>16,He=C.i(D)&65535;A[2*N+2*D]+=k*He,ae(A,2*N+2*D),A[2*N+2*D+1]+=V*He,ae(A,2*N+2*D+1),A[2*N+2*D+1]+=k*Ae,ae(A,2*N+2*D+1),A[2*N+2*D+2]+=V*Ae,ae(A,2*N+2*D+2)}for(C=0;C<S;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=S;C<2*S;C++)A[C]=0;return new c(A,0)};function ae(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function j(C,S){this.g=C,this.h=S}function K(C,S){if(z(S))throw Error("division by zero");if(z(C))return new j(T,T);if($(C))return S=K(W(C),S),new j(W(S.g),W(S.h));if($(S))return S=K(C,W(S)),new j(W(S.g),S.h);if(C.g.length>30){if($(C)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var A=x,N=S;N.l(C)<=0;)A=ne(A),N=ne(N);var D=Y(A,1),V=Y(N,1);for(N=Y(N,2),A=Y(A,2);!z(N);){var k=V.add(N);k.l(C)<=0&&(D=D.add(A),V=k),N=Y(N,1),A=Y(A,1)}return S=le(C,D.j(S)),new j(D,S)}for(D=T;C.l(S)>=0;){for(A=Math.max(1,Math.floor(C.m()/S.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=y(A),k=V.j(S);$(k)||k.l(C)>0;)A-=N,V=y(A),k=V.j(S);z(V)&&(V=x),D=D.add(V),C=le(C,k)}return new j(D,C)}r.B=function(C){return K(this,C).h},r.and=function(C){const S=Math.max(this.g.length,C.g.length),A=[];for(let N=0;N<S;N++)A[N]=this.i(N)&C.i(N);return new c(A,this.h&C.h)},r.or=function(C){const S=Math.max(this.g.length,C.g.length),A=[];for(let N=0;N<S;N++)A[N]=this.i(N)|C.i(N);return new c(A,this.h|C.h)},r.xor=function(C){const S=Math.max(this.g.length,C.g.length),A=[];for(let N=0;N<S;N++)A[N]=this.i(N)^C.i(N);return new c(A,this.h^C.h)};function ne(C){const S=C.g.length+1,A=[];for(let N=0;N<S;N++)A[N]=C.i(N)<<1|C.i(N-1)>>>31;return new c(A,C.h)}function Y(C,S){const A=S>>5;S%=32;const N=C.g.length-A,D=[];for(let V=0;V<N;V++)D[V]=S>0?C.i(V+A)>>>S|C.i(V+A+1)<<32-S:C.i(V+A);return new c(D,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,d_=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,Ki=c}).apply(typeof rv<"u"?rv:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f_,Tl,p_,Ac,zf,m_,g_,y_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var F=u[I];if(!(F in v))break e;v=v[F]}u=u[u.length-1],I=v[u],g=g(I),g!=I&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var v=[],I;for(I in g)Object.prototype.hasOwnProperty.call(g,I)&&v.push([I,g[I]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,v){return u.call.apply(u.bind,arguments)}function y(u,g,v){return y=p,y.apply(null,arguments)}function _(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function T(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(I,F,G){for(var oe=Array(arguments.length-2),be=2;be<arguments.length;be++)oe[be-2]=arguments[be];return g.prototype[F].apply(I,oe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const g=u.length;if(g>0){const v=Array(g);for(let I=0;I<g;I++)v[I]=u[I];return v}return[]}function z(u,g){for(let I=1;I<arguments.length;I++){const F=arguments[I];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=u.length||0;const G=F.length||0;u.length=v+G;for(let oe=0;oe<G;oe++)u[v+oe]=F[oe]}else u.push(F)}}class ${constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function W(u){c.setTimeout(()=>{throw u},0)}function le(){var u=C;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ae{constructor(){this.h=this.g=null}add(g,v){const I=j.get();I.set(g,v),this.h?this.h.next=I:this.g=I,this.h=I}}var j=new $(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Y=!1,C=new ae,S=()=>{const u=Promise.resolve(void 0);ne=()=>{u.then(A)}};function A(){for(var u;u=le();){try{u.h.call(u.g)}catch(v){W(v)}var g=j;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Y=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};c.addEventListener("test",v,g),c.removeEventListener("test",v,g)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function Ae(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(Ae,D),Ae.prototype.init=function(u,g){const v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),Be=0;function Ve(u,g,v,I,F){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!I,this.ha=F,this.key=++Be,this.da=this.fa=!1}function H(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function se(u,g,v){for(const I in u)g.call(v,u[I],I,u)}function ie(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function b(u){const g={};for(const v in u)g[v]=u[v];return g}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(u,g){let v,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(v in I)u[v]=I[v];for(let G=0;G<q.length;G++)v=q[G],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,g,v,I,F){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const oe=De(u,g,I,F);return oe>-1?(g=u[oe],v||(g.fa=!1)):(g=new Ve(g,this.src,G,!!I,F),g.fa=v,u.push(g)),g};function Ne(u,g){const v=g.type;if(v in u.g){var I=u.g[v],F=Array.prototype.indexOf.call(I,g,void 0),G;(G=F>=0)&&Array.prototype.splice.call(I,F,1),G&&(H(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function De(u,g,v,I){for(let F=0;F<u.length;++F){const G=u[F];if(!G.da&&G.listener==g&&G.capture==!!v&&G.ha==I)return F}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),Le={};function We(u,g,v,I,F){if(Array.isArray(g)){for(let G=0;G<g.length;G++)We(u,g[G],v,I,F);return null}return v=xa(v),u&&u[He]?u.J(g,v,f(I)?!!I.capture:!1,F):yt(u,g,v,!1,I,F)}function yt(u,g,v,I,F,G){if(!g)throw Error("Invalid event type");const oe=f(F)?!!F.capture:!!F;let be=so(u);if(be||(u[Ie]=be=new ye(u)),v=be.add(g,v,I,oe,G),v.proxy)return v;if(I=Yn(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)V||(F=oe),F===void 0&&(F=!1),u.addEventListener(g.toString(),I,F);else if(u.attachEvent)u.attachEvent(io(g.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Yn(){function u(v){return g.call(u.src,u.listener,v)}const g=tu;return u}function Jn(u,g,v,I,F){if(Array.isArray(g))for(var G=0;G<g.length;G++)Jn(u,g[G],v,I,F);else I=f(I)?!!I.capture:!!I,v=xa(v),u&&u[He]?(u=u.i,G=String(g).toString(),G in u.g&&(g=u.g[G],v=De(g,v,I,F),v>-1&&(H(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[G],u.h--)))):u&&(u=so(u))&&(g=u.g[g.toString()],u=-1,g&&(u=De(g,v,I,F)),(v=u>-1?g[u]:null)&&ii(v))}function ii(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[He])Ne(g.i,u);else{var v=u.type,I=u.proxy;g.removeEventListener?g.removeEventListener(v,I,u.capture):g.detachEvent?g.detachEvent(io(v),I):g.addListener&&g.removeListener&&g.removeListener(I),(v=so(g))?(Ne(v,u),v.h==0&&(v.src=null,g[Ie]=null)):H(u)}}}function io(u){return u in Le?Le[u]:Le[u]="on"+u}function tu(u,g){if(u.da)u=!0;else{g=new Ae(g,this);const v=u.listener,I=u.ha||u.src;u.fa&&ii(u),u=v.call(I,g)}return u}function so(u){return u=u[Ie],u instanceof ye?u:null}var cs="__closure_events_fn_"+(Math.random()*1e9>>>0);function xa(u){return typeof u=="function"?u:(u[cs]||(u[cs]=function(g){return u.handleEvent(g)}),u[cs])}function vt(){N.call(this),this.i=new ye(this),this.M=this,this.G=null}T(vt,N),vt.prototype[He]=!0,vt.prototype.removeEventListener=function(u,g,v,I){Jn(this,u,g,v,I)};function dt(u,g){var v,I=u.G;if(I)for(v=[];I;I=I.G)v.push(I);if(u=u.M,I=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var F=g;g=new D(I,u),he(g,F)}F=!0;let G,oe;if(v)for(oe=v.length-1;oe>=0;oe--)G=g.g=v[oe],F=Mn(G,I,!0,g)&&F;if(G=g.g=u,F=Mn(G,I,!0,g)&&F,F=Mn(G,I,!1,g)&&F,v)for(oe=0;oe<v.length;oe++)G=g.g=v[oe],F=Mn(G,I,!1,g)&&F}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let I=0;I<v.length;I++)H(v[I]);delete u.g[g],u.h--}}this.G=null},vt.prototype.J=function(u,g,v,I){return this.i.add(String(u),g,!1,v,I)},vt.prototype.K=function(u,g,v,I){return this.i.add(String(u),g,!0,v,I)};function Mn(u,g,v,I){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let G=0;G<g.length;++G){const oe=g[G];if(oe&&!oe.da&&oe.capture==v){const be=oe.listener,ft=oe.ha||oe.src;oe.fa&&Ne(u.i,oe),F=be.call(ft,I)!==!1&&F}}return F&&!I.defaultPrevented}function ka(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:c.setTimeout(u,g||0)}function Ca(u){u.g=ka(()=>{u.g=null,u.i&&(u.i=!1,Ca(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class nu extends N{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ca(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function si(u){N.call(this),this.h=u,this.g={}}T(si,N);var Aa=[];function oo(u){se(u.g,function(g,v){this.g.hasOwnProperty(v)&&ii(g)},u),u.g={}}si.prototype.N=function(){si.Z.N.call(this),oo(this)},si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oi=c.JSON.stringify,ru=c.JSON.parse,hs=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function ai(){}function iu(){}var li={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ao(){D.call(this,"d")}T(ao,D);function Pa(){D.call(this,"c")}T(Pa,D);var Vn={},lo=null;function ui(){return lo=lo||new vt}Vn.Ia="serverreachability";function uo(u){D.call(this,Vn.Ia,u)}T(uo,D);function Ar(u){const g=ui();dt(g,new uo(g))}Vn.STAT_EVENT="statevent";function Pr(u,g){D.call(this,Vn.STAT_EVENT,u),this.stat=g}T(Pr,D);function ut(u){const g=ui();dt(g,new Pr(g,u))}Vn.Ja="timingevent";function ba(u,g){D.call(this,Vn.Ja,u),this.size=g}T(ba,D);function ci(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},g)}function hi(){this.g=!0}hi.prototype.ua=function(){this.g=!1};function su(u,g,v,I,F,G){u.info(function(){if(u.g)if(G){var oe="",be=G.split("&");for(let Xe=0;Xe<be.length;Xe++){var ft=be[Xe].split("=");if(ft.length>1){const _t=ft[0];ft=ft[1];const yn=_t.split("_");oe=yn.length>=2&&yn[1]=="type"?oe+(_t+"="+ft+"&"):oe+(_t+"=redacted&")}}}else oe=null;else oe=G;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+g+`
`+v+`
`+oe})}function ou(u,g,v,I,F,G,oe){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+g+`
`+v+`
`+G+" "+oe})}function Zn(u,g,v,I){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ds(u,v)+(I?" "+I:"")})}function au(u,g){u.info(function(){return"TIMEOUT: "+g})}hi.prototype.info=function(){};function ds(u,g){if(!u.g)return g;if(!g)return null;try{const G=JSON.parse(g);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var v=G[u];if(!(v.length<2)){var I=v[1];if(Array.isArray(I)&&!(I.length<1)){var F=I[0];if(F!="noop"&&F!="stop"&&F!="close")for(let oe=1;oe<I.length;oe++)I[oe]=""}}}}return oi(G)}catch{return g}}var di={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lu;function br(){}T(br,ai),br.prototype.g=function(){return new XMLHttpRequest},lu=new br;function er(u){return encodeURIComponent(String(u))}function co(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Sn(u,g,v,I){this.j=u,this.i=g,this.l=v,this.S=I||1,this.V=new si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new uu}function uu(){this.i=null,this.g="",this.h=!1}var cu={},Ra={};function Ln(u,g,v){u.M=1,u.A=Nr(xn(g)),u.u=v,u.R=!0,Na(u,null)}function Na(u,g){u.F=Date.now(),fs(u),u.B=xn(u.A);var v=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),Ba(v.i,"t",I),u.C=0,v=u.j.L,u.h=new uu,u.g=wu(u.j,v?g:null,!u.u),u.P>0&&(u.O=new nu(y(u.Y,u,u.g),u.P)),g=u.V,v=u.g,I=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Aa[0]=F.toString()),F=Aa);for(let G=0;G<F.length;G++){const oe=We(v,F[G],I||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=u.J?b(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ar(),su(u.i,u.v,u.B,u.l,u.S,u.u)}Sn.prototype.ba=function(u){u=u.target;const g=this.O;g&&ar(u)==3?g.j():this.Y(u)},Sn.prototype.Y=function(u){try{if(u==this.g)e:{const be=ar(this.g),ft=this.g.ya(),Xe=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||vu(this.g)))){this.K||be!=4||ft==7||(ft==8||Xe<=0?Ar(3):Ar(2)),ho(this);var g=this.g.ca();this.X=g;var v=hu(this);if(this.o=g==200,ou(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var I,F=this.g;if((I=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(I)){var G=I;break t}}G=null}if(u=G)Zn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,et(this,u);else{this.o=!1,this.m=3,ut(12),Rr(this),ps(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<v.length;)if(_t=fu(this,v),_t==Ra){be==4&&(this.m=4,ut(14),u=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==cu){this.m=4,ut(15),Zn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Zn(this.i,this.l,_t,null),et(this,_t);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||v.length!=0||this.h.h||(this.m=1,ut(16),u=!1),this.o=this.o&&u,!u)Zn(this.i,this.l,v,"[Invalid Chunked Response]"),Rr(this),ps(this);else if(v.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Is(oe),oe.P=!0,ut(11))}}else Zn(this.i,this.l,v,null),et(this,v);be==4&&Rr(this),this.o&&!this.K&&(be==4?To(this.j,this):(this.o=!1,fs(this)))}else Ha(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),Rr(this),ps(this)}}}catch{}finally{}};function hu(u){if(!du(u))return u.g.la();const g=vu(u.g);if(g==="")return"";let v="";const I=g.length,F=ar(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Rr(u),ps(u),"";u.h.i=new c.TextDecoder}for(let G=0;G<I;G++)u.h.h=!0,v+=u.h.i.decode(g[G],{stream:!(F&&G==I-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function du(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function fu(u,g){var v=u.C,I=g.indexOf(`
`,v);return I==-1?Ra:(v=Number(g.substring(v,I)),isNaN(v)?cu:(I+=1,I+v>g.length?Ra:(g=g.slice(I,I+v),u.C=I+v,g)))}Sn.prototype.cancel=function(){this.K=!0,Rr(this)};function fs(u){u.T=Date.now()+u.H,Da(u,u.H)}function Da(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ci(y(u.aa,u),g)}function ho(u){u.D&&(c.clearTimeout(u.D),u.D=null)}Sn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(au(this.i,this.B),this.M!=2&&(Ar(),ut(17)),Rr(this),this.m=2,ps(this)):Da(this,this.T-u)};function ps(u){u.j.I==0||u.K||To(u.j,u)}function Rr(u){ho(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,oo(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function et(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||Ma(v.h,u))){if(!u.L&&Ma(v.h,u)&&v.I==3){try{var I=v.Ba.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Eo(v),mn(v);else break e;cr(v),ut(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ci(y(v.Va,v),6e3));ms(v.h)<=1&&v.ta&&(v.ta=void 0)}else gn(v,11)}else if((u.L||v.g==u)&&Eo(v),!k(g))for(F=v.Ba.g.parse(g),g=0;g<F.length;g++){let Xe=F[g];const _t=Xe[0];if(!(_t<=v.K))if(v.K=_t,Xe=Xe[1],v.I==2)if(Xe[0]=="c"){v.M=Xe[1],v.ba=Xe[2];const yn=Xe[3];yn!=null&&(v.ka=yn,v.j.info("VER="+v.ka));const Lr=Xe[4];Lr!=null&&(v.za=Lr,v.j.info("SVER="+v.za));const hr=Xe[5];hr!=null&&typeof hr=="number"&&hr>0&&(I=1.5*hr,v.O=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const dr=u.g;if(dr){const xo=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var G=I.h;G.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(po(G,G.h),G.h=null))}if(I.G){const qa=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(I.wa=qa,Ke(I.J,I.G,qa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),I=v;var oe=u;if(I.na=Wa(I,I.L?I.ba:null,I.W),oe.L){gs(I.h,oe);var be=oe,ft=I.O;ft&&(be.H=ft),be.D&&(ho(be),fs(be)),I.g=oe}else $t(I);v.i.length>0&&Vr(v)}else Xe[0]!="stop"&&Xe[0]!="close"||gn(v,7);else v.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?gn(v,7):_o(v):Xe[0]!="noop"&&v.l&&v.l.qa(Xe),v.A=0)}}Ar(4)}catch{}}var jh=class{constructor(u,g){this.g=u,this.map=g}};function fo(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ms(u){return u.h?1:u.g?u.g.size:0}function Ma(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function po(u,g){u.g?u.g.add(g):u.h=g}function gs(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}fo.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function dn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return M(u.i)}var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fn(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const I=u[v].indexOf("=");let F,G=null;I>=0?(F=u[v].substring(0,I),G=u[v].substring(I+1)):F=u[v],g(F,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function tr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof tr?(this.l=u.l,ys(this,u.j),this.o=u.o,this.g=u.g,nr(this,u.u),this.h=u.h,pi(this,$a(u.i)),this.m=u.m):u&&(g=String(u).match(pu))?(this.l=!1,ys(this,g[1]||"",!0),this.o=vs(g[2]||""),this.g=vs(g[3]||"",!0),nr(this,g[4]),this.h=vs(g[5]||"",!0),pi(this,g[6]||"",!0),this.m=vs(g[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}tr.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(_s(g,La,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(_s(g,La,!0),"@"),u.push(er(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(_s(v,v.charAt(0)=="/"?ws:Fa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",_s(v,Ua)),u.join("")},tr.prototype.resolve=function(u){const g=xn(this);let v=!!u.j;v?ys(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var I=u.h;if(v)nr(g,u.u);else if(v=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var F=g.h.lastIndexOf("/");F!=-1&&(I=g.h.slice(0,F+1)+I)}if(F=I,F==".."||F==".")I="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){I=F.lastIndexOf("/",0)==0,F=F.split("/");const G=[];for(let oe=0;oe<F.length;){const be=F[oe++];be=="."?I&&oe==F.length&&G.push(""):be==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),I&&oe==F.length&&G.push("")):(G.push(be),I=!0)}I=G.join("/")}else I=F}return v?g.h=I:v=u.i.toString()!=="",v?pi(g,$a(u.i)):v=!!u.m,v&&(g.m=u.m),g};function xn(u){return new tr(u)}function ys(u,g,v){u.j=v?vs(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function nr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function pi(u,g,v){g instanceof ze?(u.i=g,go(u.i,u.l)):(v||(g=_s(g,zh)),u.i=new ze(g,u.l))}function Ke(u,g,v){u.i.set(g,v)}function Nr(u){return Ke(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function vs(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _s(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,Va),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Va(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var La=/[#\/\?@]/g,Fa=/[#\?:]/g,ws=/[#\?]/g,zh=/[#\?@]/g,Ua=/#/g;function ze(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function rr(u){u.g||(u.g=new Map,u.h=0,u.i&&fn(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=ze.prototype,r.add=function(u,g){rr(this),this.i=null,u=ir(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function ja(u,g){rr(u),g=ir(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function mo(u,g){return rr(u),g=ir(u,g),u.g.has(g)}r.forEach=function(u,g){rr(this),this.g.forEach(function(v,I){v.forEach(function(F){u.call(g,F,I,this)},this)},this)};function za(u,g){rr(u);let v=[];if(typeof g=="string")mo(u,g)&&(v=v.concat(u.g.get(ir(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}r.set=function(u,g){return rr(this),this.i=null,u=ir(this,u),mo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=za(this,u),u.length>0?String(u[0]):g):g};function Ba(u,g,v){ja(u,g),v.length>0&&(u.i=null,u.g.set(ir(u,g),M(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let I=0;I<g.length;I++){var v=g[I];const F=er(v);v=za(this,v);for(let G=0;G<v.length;G++){let oe=F;v[G]!==""&&(oe+="="+er(v[G])),u.push(oe)}}return this.i=u.join("&")};function $a(u){const g=new ze;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ir(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function go(u,g){g&&!u.j&&(rr(u),u.i=null,u.g.forEach(function(v,I){const F=I.toLowerCase();I!=F&&(ja(this,I),Ba(this,F,v))},u)),u.j=g}function sr(u,g){const v=new hi;if(c.Image){const I=new Image;I.onload=_(Vt,v,"TestLoadImage: loaded",!0,g,I),I.onerror=_(Vt,v,"TestLoadImage: error",!1,g,I),I.onabort=_(Vt,v,"TestLoadImage: abort",!1,g,I),I.ontimeout=_(Vt,v,"TestLoadImage: timeout",!1,g,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else g(!1)}function or(u,g){const v=new hi,I=new AbortController,F=setTimeout(()=>{I.abort(),Vt(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:I.signal}).then(G=>{clearTimeout(F),G.ok?Vt(v,"TestPingServer: ok",!0,g):Vt(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Vt(v,"TestPingServer: error",!1,g)})}function Vt(u,g,v,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(v)}catch{}}function Es(){this.g=new hs}function Dr(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Dr,ai),Dr.prototype.g=function(){return new pn(this.i,this.h)};function pn(u,g){vt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(pn,vt),r=pn.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Fn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||c).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mi(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mu(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function mu(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?mi(this):Fn(this),this.readyState==3&&mu(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,mi(this))},r.Na=function(u){this.g&&(this.response=u,mi(this))},r.ga=function(){this.g&&mi(this)};function mi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Fn(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Fn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(pn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gu(u){let g="";return se(u,function(v,I){g+=I,g+=":",g+=v,g+=`\r
`}),g}function yo(u,g,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=gu(v),typeof u=="string"?v!=null&&er(v):Ke(u,g,v))}function Je(u){vt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Je,vt);var yu=/^https?$/i,Bh=["POST","PUT"];r=Je.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lu.g(),this.g.onreadystatechange=x(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(G){gi(this,G);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)v.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const G of I.keys())v.set(G,I.get(G));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),F=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Bh,g,void 0)>=0)||I||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of v)this.g.setRequestHeader(G,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){gi(this,G)}};function gi(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,yi(u),Mr(u)}function yi(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,dt(this,"complete"),dt(this,"abort"),Mr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),Je.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Or(this):this.Xa())},r.Xa=function(){Or(this)};function Or(u){if(u.h&&typeof l<"u"){if(u.v&&ar(u)==4)setTimeout(u.Ca.bind(u),0);else if(dt(u,"readystatechange"),ar(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var I;if(I=G===0){let oe=String(u.D).match(pu)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),I=!yu.test(oe?oe.toLowerCase():"")}v=I}if(v)dt(u,"complete"),dt(u,"success");else{u.o=6;try{var F=ar(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",yi(u)}}finally{Mr(u)}}}}function Mr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||dt(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ar(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ar(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ru(g)}};function vu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(u){const g={};u=(u.g&&ar(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(k(u[I]))continue;var v=co(u[I]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=g[F]||[];g[F]=G,G.push(v)}ie(g,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lr(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function vo(u){this.za=0,this.i=[],this.j=new hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lr("baseRetryDelayMs",5e3,u),this.Za=lr("retryDelaySeedMs",1e4,u),this.Ta=lr("forwardChannelMaxRetries",2,u),this.va=lr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new fo(u&&u.concurrentRequestLimit),this.Ba=new Es,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=vo.prototype,r.ka=8,r.I=1,r.connect=function(u,g,v,I){ut(0),this.W=u,this.H=g||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.J=Wa(this,null,this.W),Vr(this)};function _o(u){if(wo(u),u.I==3){var g=u.V++,v=xn(u.J);if(Ke(v,"SID",u.M),Ke(v,"RID",g),Ke(v,"TYPE","terminate"),ur(u,v),g=new Sn(u,u.j,g),g.M=2,g.A=Nr(xn(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=g.A,v=!0),v||(g.g=wu(g.j,null),g.g.ea(g.A)),g.F=Date.now(),fs(g)}Ss(u)}function mn(u){u.g&&(Is(u),u.g.cancel(),u.g=null)}function wo(u){mn(u),u.v&&(c.clearTimeout(u.v),u.v=null),Eo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Vr(u){if(!Oa(u.h)&&!u.m){u.m=!0;var g=u.Ea;ne||S(),Y||(ne(),Y=!0),C.add(g,u),u.D=0}}function _u(u,g){return ms(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ci(y(u.Ea,u,g),Io(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Sn(this,this.j,u);let G=this.o;if(this.U&&(G?(G=b(G),he(G,this.U)):G=this.U),this.u!==null||this.R||(F.J=G,G=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ga(this,F,g),v=xn(this.J),Ke(v,"RID",u),Ke(v,"CVER",22),this.G&&Ke(v,"X-HTTP-Session-Id",this.G),ur(this,v),G&&(this.R?g="headers="+er(gu(G))+"&"+g:this.u&&yo(v,this.u,G)),po(this.h,F),this.Ra&&Ke(v,"TYPE","init"),this.S?(Ke(v,"$req",g),Ke(v,"SID","null"),F.U=!0,Ln(F,v,null)):Ln(F,v,g),this.I=2}}else this.I==3&&(u?Ts(this,u):this.i.length==0||Oa(this.h)||Ts(this))};function Ts(u,g){var v;g?v=g.l:v=u.V++;const I=xn(u.J);Ke(I,"SID",u.M),Ke(I,"RID",v),Ke(I,"AID",u.K),ur(u,I),u.u&&u.o&&yo(I,u.u,u.o),v=new Sn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ga(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),po(u.h,v),Ln(v,I,g)}function ur(u,g){u.H&&se(u.H,function(v,I){Ke(g,I,v)}),u.l&&se({},function(v,I){Ke(g,I,v)})}function Ga(u,g,v){v=Math.min(u.i.length,v);const I=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let be=-1;for(;;){const ft=["count="+v];be==-1?v>0?(be=F[0].g,ft.push("ofs="+be)):be=0:ft.push("ofs="+be);let Xe=!0;for(let _t=0;_t<v;_t++){var G=F[_t].g;const yn=F[_t].map;if(G-=be,G<0)be=Math.max(0,F[_t].g-100),Xe=!1;else try{G="req"+G+"_"||"";try{var oe=yn instanceof Map?yn:Object.entries(yn);for(const[Lr,hr]of oe){let dr=hr;f(hr)&&(dr=oi(hr)),ft.push(G+Lr+"="+encodeURIComponent(dr))}}catch(Lr){throw ft.push(G+"type="+encodeURIComponent("_badmap")),Lr}}catch{I&&I(yn)}}if(Xe){oe=ft.join("&");break e}}oe=void 0}return u=u.i.splice(0,v),g.G=u,oe}function $t(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ne||S(),Y||(ne(),Y=!0),C.add(g,u),u.A=0}}function cr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ci(y(u.Da,u),Io(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,vi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ci(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),mn(this),vi(this))};function Is(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function vi(u){u.g=new Sn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=xn(u.na);Ke(g,"RID","rpc"),Ke(g,"SID",u.M),Ke(g,"AID",u.K),Ke(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ke(g,"TO",u.ia),Ke(g,"TYPE","xmlhttp"),ur(u,g),u.u&&u.o&&yo(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Nr(xn(g)),v.u=null,v.R=!0,Na(v,u)}r.Va=function(){this.C!=null&&(this.C=null,mn(this),cr(this),ut(19))};function Eo(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function To(u,g){var v=null;if(u.g==g){Eo(u),Is(u),u.g=null;var I=2}else if(Ma(u.h,g))v=g.G,gs(u.h,g),I=1;else return;if(u.I!=0){if(g.o)if(I==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;I=ui(),dt(I,new ba(I,v)),Vr(u)}else $t(u);else if(F=g.m,F==3||F==0&&g.X>0||!(I==1&&_u(u,g)||I==2&&cr(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),F){case 1:gn(u,5);break;case 4:gn(u,10);break;case 3:gn(u,6);break;default:gn(u,2)}}}function Io(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function gn(u,g){if(u.j.info("Error code "+g),g==2){var v=y(u.bb,u),I=u.Ua;const F=!I;I=new tr(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ys(I,"https"),Nr(I),F?sr(I.toString(),v):or(I.toString(),v)}else ut(2);u.I=0,u.l&&u.l.pa(g),Ss(u),wo(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Ss(u){if(u.I=0,u.ja=[],u.l){const g=dn(u.h);(g.length!=0||u.i.length!=0)&&(z(u.ja,g),z(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function Wa(u,g,v){var I=v instanceof tr?xn(v):new tr(v);if(I.g!="")g&&(I.g=g+"."+I.g),nr(I,I.u);else{var F=c.location;I=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const G=new tr(null);I&&ys(G,I),g&&(G.g=g),F&&nr(G,F),v&&(G.h=v),I=G}return v=u.G,g=u.wa,v&&g&&Ke(I,v,g),Ke(I,"VER",u.ka),ur(u,I),I}function wu(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Je(new Dr({ab:v})):new Je(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eu(){}r=Eu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function So(){}So.prototype.g=function(u,g){return new Lt(u,g)};function Lt(u,g){vt.call(this),this.g=new vo(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new _i(this)}T(Lt,vt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){_o(this.g)},Lt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=oi(u),u=v);g.i.push(new jh(g.Ya++,u)),g.I==3&&Vr(g)},Lt.prototype.N=function(){this.g.l=null,delete this.j,_o(this.g),delete this.g,Lt.Z.N.call(this)};function Tu(u){ao.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(Tu,ao);function Iu(){Pa.call(this),this.status=1}T(Iu,Pa);function _i(u){this.g=u}T(_i,Eu),_i.prototype.ra=function(){dt(this.g,"a")},_i.prototype.qa=function(u){dt(this.g,new Tu(u))},_i.prototype.pa=function(u){dt(this.g,new Iu)},_i.prototype.oa=function(){dt(this.g,"b")},So.prototype.createWebChannel=So.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,y_=function(){return new So},g_=function(){return ui()},m_=Vn,zf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},di.NO_ERROR=0,di.TIMEOUT=8,di.HTTP_ERROR=6,Ac=di,fi.COMPLETE="complete",p_=fi,iu.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Tl=iu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,f_=Je}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const iv="@firebase/firestore",sv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Ep("@firebase/firestore");function Ko(){return Ks.logLevel}function ce(r,...e){if(Ks.logLevel<=Fe.DEBUG){const t=e.map(Sp);Ks.debug(`Firestore (${ga}): ${r}`,...t)}}function Jr(r,...e){if(Ks.logLevel<=Fe.ERROR){const t=e.map(Sp);Ks.error(`Firestore (${ga}): ${r}`,...t)}}function ia(r,...e){if(Ks.logLevel<=Fe.WARN){const t=e.map(Sp);Ks.warn(`Firestore (${ga}): ${r}`,...t)}}function Sp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,v_(r,i,t)}function v_(r,e,t){let i=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Jr(i),new Error(i)}function Qe(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||v_(e,o,i)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Qt.UNAUTHENTICATED)))}shutdown(){}}class US{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jS{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new __(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class zS{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BS{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new zS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $S{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ov(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ov(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=HS(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ue(r,e){return r<e?-1:r>e?1:0}function Bf(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return wf(o)===wf(l)?Ue(o,l):wf(o)?1:-1}return Ue(r.length,e.length)}const GS=55296,WS=57343;function wf(r){const e=r.charCodeAt(0);return e>=GS&&e<=WS}function sa(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__name__";class yr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=yr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const i=yr.isNumericId(e),o=yr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?yr.extractNumericId(e).compare(yr.extractNumericId(t)):Bf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ki.fromString(e.substring(4,e.length-2))}}class rt extends yr{construct(e,t,i){return new rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new rt(t)}static emptyPath(){return new rt([])}}const qS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends yr{construct(e,t,i){return new zt(e,t,i)}static isValidIdentifier(e){return qS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===av}static keyField(){return new zt([av])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new _e(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new _e(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(i+=f,o++):(l(),o++)}if(l(),c)throw new _e(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(rt.fromString(e))}static fromName(e){return new we(rt.fromString(e).popFirst(5))}static empty(){return new we(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r,e,t){if(!t)throw new _e(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function KS(r,e,t,i){if(e===!0&&i===!0)throw new _e(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function lv(r){if(!we.isDocumentKey(r))throw new _e(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function uv(r){if(we.isDocumentKey(r))throw new _e(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function E_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function kp(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Zi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new _e(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kp(r);throw new _e(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r,e){const t={typeString:r};return e&&(t.value=e),t}function Gl(r,e){if(!E_(r))throw new _e(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new _e(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,hv=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*hv);return new it(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cv)throw new _e(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hv}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gl(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:It("string",it._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new it(0,0))}static max(){return new Pe(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;function QS(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(i===1e9?new it(t+1,0):new it(t,i));return new es(o,we.empty(),e)}function XS(r){return new es(r.readTime,r.key,Ml)}class es{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new es(Pe.min(),we.empty(),Ml)}static max(){return new es(Pe.max(),we.empty(),Ml)}}function YS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Ue(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==JS)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,i)=>{t(e)}))}static reject(e){return new Q(((t,i)=>{i(e)}))}static waitFor(e){return new Q(((t,i)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next((o=>o?Q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Q(((i,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{c[y]=_,++f,f===l&&i(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new Q(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function ex(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function va(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ph.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=-1;function mh(r){return r==null}function $c(r){return r===0&&1/r==-1/0}function tx(r){return typeof r=="number"&&Number.isInteger(r)&&!$c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="";function nx(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=dv(e)),e=rx(r.get(t),e);return dv(e)}function rx(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case T_:t+="";break;default:t+=l}}return t}function dv(r){return r+T_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function as(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function I_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}}class vc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??jt.RED,this.left=o??jt.EMPTY,this.right=l??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new jt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new En([])}unionWith(e){let t=new bt(zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new S_("Invalid base64 string: "+l):l}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const ix=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const t=ix.exec(r);if(Qe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ns(r){return typeof r=="string"?Bt.fromBase64String(r):Bt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="server_timestamp",k_="__type__",C_="__previous_value__",A_="__local_write_time__";function Ap(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[k_])==null?void 0:i.stringValue)===x_}function gh(r){const e=r.mapValue.fields[C_];return Ap(e)?gh(e):e}function Vl(r){const e=ts(r.mapValue.fields[A_].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t,i,o,l,c,f,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const Hc="(default)";class Ll{constructor(e,t){this.projectId=e,this.database=t||Hc}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===Hc}isEqual(e){return e instanceof Ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="__type__",ox="__max__",_c={mapValue:{}},b_="__vector__",Gc="value";function rs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ap(r)?4:lx(r)?9007199254740991:ax(r)?10:11:Se(28295,{value:r})}function Ir(r,e){if(r===e)return!0;const t=rs(r);if(t!==rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Vl(r).isEqual(Vl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=ts(o.timestampValue),f=ts(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return ns(o.bytesValue).isEqual(ns(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return mt(o.geoPointValue.latitude)===mt(l.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return mt(o.integerValue)===mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=mt(o.doubleValue),f=mt(l.doubleValue);return c===f?$c(c)===$c(f):isNaN(c)&&isNaN(f)}return!1})(r,e);case 9:return sa(r.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(fv(c)!==fv(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Ir(c[p],f[p])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function Fl(r,e){return(r.values||[]).find((t=>Ir(t,e)))!==void 0}function oa(r,e){if(r===e)return 0;const t=rs(r),i=rs(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=mt(l.integerValue||l.doubleValue),p=mt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(r,e);case 3:return mv(r.timestampValue,e.timestampValue);case 4:return mv(Vl(r),Vl(e));case 5:return Bf(r.stringValue,e.stringValue);case 6:return(function(l,c){const f=ns(l),p=ns(c);return f.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let y=0;y<f.length&&y<p.length;y++){const _=Ue(f[y],p[y]);if(_!==0)return _}return Ue(f.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Ue(mt(l.latitude),mt(c.latitude));return f!==0?f:Ue(mt(l.longitude),mt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return gv(r.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,M,z,$;const f=l.fields||{},p=c.fields||{},y=(x=f[Gc])==null?void 0:x.arrayValue,_=(M=p[Gc])==null?void 0:M.arrayValue,T=Ue(((z=y==null?void 0:y.values)==null?void 0:z.length)||0,(($=_==null?void 0:_.values)==null?void 0:$.length)||0);return T!==0?T:gv(y,_)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===_c.mapValue&&c===_c.mapValue)return 0;if(l===_c.mapValue)return 1;if(c===_c.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const x=Bf(p[T],_[T]);if(x!==0)return x;const M=oa(f[p[T]],y[_[T]]);if(M!==0)return M}return Ue(p.length,_.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function mv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ue(r,e);const t=ts(r),i=ts(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function gv(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=oa(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function aa(r){return $f(r)}function $f(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=ts(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ns(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=$f(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${$f(t.fields[c])}`;return o+"}"})(r.mapValue):Se(61005,{value:r})}function Pc(r){switch(rs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gh(r);return e?16+Pc(e):16;case 5:return 2*r.stringValue.length;case 6:return ns(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Pc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return as(i.fields,((l,c)=>{o+=l.length+Pc(c)})),o})(r.mapValue);default:throw Se(13486,{value:r})}}function Hf(r){return!!r&&"integerValue"in r}function Pp(r){return!!r&&"arrayValue"in r}function yv(r){return!!r&&"nullValue"in r}function vv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function bc(r){return!!r&&"mapValue"in r}function ax(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[P_])==null?void 0:i.stringValue)===b_}function Cl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return as(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Cl(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cl(r.arrayValue.values[t]);return e}return{...r}}function lx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ox}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(t)}setAll(e){let t=zt.emptyPath(),i={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}c?i[f.lastSegment()]=Cl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());bc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];bc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){as(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new cn(Cl(this.value))}}function R_(r){const e=[];return as(r.fields,((t,i)=>{const o=new zt([t]);if(bc(i)){const l=R_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t,i,o,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Xt(e,0,Pe.min(),Pe.min(),Pe.min(),cn.empty(),0)}static newFoundDocument(e,t,i,o){return new Xt(e,1,t,Pe.min(),i,o,0)}static newNoDocument(e,t){return new Xt(e,2,t,Pe.min(),Pe.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,Pe.min(),Pe.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.position=e,this.inclusive=t}}function _v(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],c=r.position[o];if(l.field.isKeyField()?i=we.comparator(we.fromName(c.referenceValue),t.key):i=oa(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function wv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ir(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t="asc"){this.field=e,this.dir=t}}function ux(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{}class Pt extends N_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new hx(e,t,i):t==="array-contains"?new px(e,i):t==="in"?new mx(e,i):t==="not-in"?new gx(e,i):t==="array-contains-any"?new yx(e,i):new Pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new dx(e,i):new fx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(oa(t,this.value)):t!==null&&rs(this.value)===rs(t)&&this.matchesComparison(oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends N_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Sr(e,t)}matches(e){return D_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function D_(r){return r.op==="and"}function O_(r){return cx(r)&&D_(r)}function cx(r){for(const e of r.filters)if(e instanceof Sr)return!1;return!0}function Gf(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+aa(r.value);if(O_(r))return r.filters.map((e=>Gf(e))).join(",");{const e=r.filters.map((t=>Gf(t))).join(",");return`${r.op}(${e})`}}function M_(r,e){return r instanceof Pt?(function(i,o){return o instanceof Pt&&i.op===o.op&&i.field.isEqual(o.field)&&Ir(i.value,o.value)})(r,e):r instanceof Sr?(function(i,o){return o instanceof Sr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,f)=>l&&M_(c,o.filters[f])),!0):!1})(r,e):void Se(19439)}function V_(r){return r instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${aa(t.value)}`})(r):r instanceof Sr?(function(t){return t.op.toString()+" {"+t.getFilters().map(V_).join(" ,")+"}"})(r):"Filter"}class hx extends Pt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class dx extends Pt{constructor(e,t){super(e,"in",t),this.keys=L_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fx extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=L_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function L_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class px extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pp(t)&&Fl(t.arrayValue,this.value)}}class mx extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fl(this.value.arrayValue,t)}}class gx extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fl(this.value.arrayValue,t)}}class yx extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Fl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t=null,i=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Ev(r,e=null,t=[],i=[],o=null,l=null,c=null){return new vx(r,e,t,i,o,l,c)}function bp(r){const e=Re(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Gf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>aa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>aa(i))).join(",")),e.Te=t}return e.Te}function Rp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ux(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!M_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!wv(r.startAt,e.startAt)&&wv(r.endAt,e.endAt)}function Wf(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t=null,i=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _x(r,e,t,i,o,l,c,f){return new yh(r,e,t,i,o,l,c,f)}function Np(r){return new yh(r)}function Tv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function wx(r){return r.collectionGroup!==null}function Al(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new bt(zt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new qc(l,i))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new qc(zt.keyField(),i))}return e.Ie}function vr(r){const e=Re(r);return e.Ee||(e.Ee=Ex(e,Al(r))),e.Ee}function Ex(r,e){if(r.limitType==="F")return Ev(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new qc(o.field,l)}));const t=r.endAt?new Wc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Wc(r.startAt.position,r.startAt.inclusive):null;return Ev(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function qf(r,e,t){return new yh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function vh(r,e){return Rp(vr(r),vr(e))&&r.limitType===e.limitType}function F_(r){return`${bp(vr(r))}|lt:${r.limitType}`}function Qo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>V_(o))).join(", ")}]`),mh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>aa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>aa(o))).join(",")),`Target(${i})`})(vr(r))}; limitType=${r.limitType})`}function _h(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Al(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(c,f,p){const y=_v(c,f,p);return c.inclusive?y<=0:y<0})(i.startAt,Al(i),o)||i.endAt&&!(function(c,f,p){const y=_v(c,f,p);return c.inclusive?y>=0:y>0})(i.endAt,Al(i),o))})(r,e)}function Tx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function U_(r){return(e,t)=>{let i=!1;for(const o of Al(r)){const l=Ix(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function Ix(r,e,t){const i=r.field.isKeyField()?we.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),y=f.data.field(l);return p!==null&&y!==null?oa(p,y):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return I_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new lt(we.comparator);function Zr(){return Sx}const j_=new lt(we.comparator);function Il(...r){let e=j_;for(const t of r)e=e.insert(t.key,t);return e}function z_(r){let e=j_;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Us(){return Pl()}function B_(){return Pl()}function Pl(){return new to((r=>r.toString()),((r,e)=>r.isEqual(e)))}const xx=new lt(we.comparator),kx=new bt(we.comparator);function je(...r){let e=kx;for(const t of r)e=e.add(t);return e}const Cx=new bt(Ue);function Ax(){return Cx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function $_(r){return{integerValue:""+r}}function Px(r,e){return tx(e)?$_(e):Dp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this._=void 0}}function bx(r,e,t){return r instanceof Kc?(function(o,l){const c={fields:{[k_]:{stringValue:x_},[A_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ap(l)&&(l=gh(l)),l&&(c.fields[C_]=l),{mapValue:c}})(t,e):r instanceof la?G_(r,e):r instanceof Ul?W_(r,e):(function(o,l){const c=H_(o,l),f=Iv(c)+Iv(o.Ae);return Hf(c)&&Hf(o.Ae)?$_(f):Dp(o.serializer,f)})(r,e)}function Rx(r,e,t){return r instanceof la?G_(r,e):r instanceof Ul?W_(r,e):t}function H_(r,e){return r instanceof Qc?(function(i){return Hf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Kc extends wh{}class la extends wh{constructor(e){super(),this.elements=e}}function G_(r,e){const t=q_(e);for(const i of r.elements)t.some((o=>Ir(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Ul extends wh{constructor(e){super(),this.elements=e}}function W_(r,e){let t=q_(e);for(const i of r.elements)t=t.filter((o=>!Ir(o,i)));return{arrayValue:{values:t}}}class Qc extends wh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Iv(r){return mt(r.integerValue||r.doubleValue)}function q_(r){return Pp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t){this.field=e,this.transform=t}}function Dx(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof la&&o instanceof la||i instanceof Ul&&o instanceof Ul?sa(i.elements,o.elements,Ir):i instanceof Qc&&o instanceof Qc?Ir(i.Ae,o.Ae):i instanceof Kc&&o instanceof Kc})(r.transform,e.transform)}class Ox{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Eh{}function K_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new X_(r.key,Kn.none()):new Wl(r.key,r.data,Kn.none());{const t=r.data,i=cn.empty();let o=new bt(zt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new ls(r.key,i,new En(o.toArray()),Kn.none())}}function Mx(r,e,t){r instanceof Wl?(function(o,l,c){const f=o.value.clone(),p=xv(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):r instanceof ls?(function(o,l,c){if(!Rc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=xv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Q_(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function bl(r,e,t,i){return r instanceof Wl?(function(l,c,f,p){if(!Rc(l.precondition,c))return f;const y=l.value.clone(),_=kv(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof ls?(function(l,c,f,p){if(!Rc(l.precondition,c))return f;const y=kv(l.fieldTransforms,p,c),_=c.data;return _.setAll(Q_(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,f){return Rc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(r,e,t)}function Vx(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=H_(i.transform,o||null);l!=null&&(t===null&&(t=cn.empty()),t.set(i.field,l))}return t||null}function Sv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&sa(i,o,((l,c)=>Dx(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Wl extends Eh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ls extends Eh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Q_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function xv(r,e,t){const i=new Map;Qe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],c=l.transform,f=e.data.field(l.field);i.set(l.field,Rx(c,f,t[o]))}return i}function kv(r,e,t){const i=new Map;for(const o of r){const l=o.transform,c=t.data.field(o.field);i.set(o.field,bx(l,c,e))}return i}class X_ extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lx extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Mx(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=bl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=bl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=B_();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=K_(c,f);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Pe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,((t,i)=>Sv(t,i)))&&sa(this.baseMutations,e.baseMutations,((t,i)=>Sv(t,i)))}}class Op{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return xx})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new Op(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,$e;function zx(r){switch(r){case J.OK:return Se(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function Y_(r){if(r===void 0)return Jr("GRPC error has no .code"),J.UNKNOWN;switch(r){case Et.OK:return J.OK;case Et.CANCELLED:return J.CANCELLED;case Et.UNKNOWN:return J.UNKNOWN;case Et.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Et.INTERNAL:return J.INTERNAL;case Et.UNAVAILABLE:return J.UNAVAILABLE;case Et.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Et.NOT_FOUND:return J.NOT_FOUND;case Et.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Et.ABORTED:return J.ABORTED;case Et.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Et.DATA_LOSS:return J.DATA_LOSS;default:return Se(39323,{code:r})}}($e=Et||(Et={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Ki([4294967295,4294967295],0);function Cv(r){const e=Bx().encode(r),t=new d_;return t.update(e),new Uint8Array(t.digest())}function Av(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ki([t,i],0),new Ki([o,l],0)]}class Mp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Sl(`Invalid padding: ${t}`);if(i<0)throw new Sl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Sl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Sl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ki.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ki.fromNumber(i)));return o.compare($x)===1&&(o=new Ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Cv(e),[i,o]=Av(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Mp(l,o,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=Cv(e),[i,o]=Av(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Th(Pe.min(),o,new lt(Ue),Zr(),je())}}class ql{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ql(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class J_{constructor(e,t){this.targetId=e,this.Ce=t}}class Z_{constructor(e,t,i=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Pv{constructor(){this.ve=0,this.Fe=bv(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:l})}})),new ql(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=bv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Hx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zr(),this.Je=wc(),this.He=wc(),this.Ye=new lt(Ue)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Wf(l))if(i===0){const c=new we(l.path);this.et(t,c,Xt.newNoDocument(c,Pe.min()))}else Qe(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=ns(i).toUint8Array()}catch(p){if(p instanceof S_)return ia("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Mp(c,o,l)}catch(p){return ia(p instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Wf(f.target)){const p=new we(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Xt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=je();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Th(e,t,this.Ye,this.je,i);return this.je=Zr(),this.Je=wc(),this.He=wc(),this.Ye=new lt(Ue),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Pv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bt(Ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bt(Ue),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wc(){return new lt(we.comparator)}function bv(){return new lt(we.comparator)}const Gx={asc:"ASCENDING",desc:"DESCENDING"},Wx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qx={and:"AND",or:"OR"};class Kx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kf(r,e){return r.useProto3Json||mh(e)?e:{value:e}}function Xc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ew(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Qx(r,e){return Xc(r,e.toTimestamp())}function _r(r){return Qe(!!r,49232),Pe.fromTimestamp((function(t){const i=ts(t);return new it(i.seconds,i.nanos)})(r))}function Vp(r,e){return Qf(r,e).canonicalString()}function Qf(r,e){const t=(function(o){return new rt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function tw(r){const e=rt.fromString(r);return Qe(ow(e),10190,{key:e.toString()}),e}function Xf(r,e){return Vp(r.databaseId,e.path)}function Ef(r,e){const t=tw(e);if(t.get(1)!==r.databaseId.projectId)throw new _e(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new _e(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(rw(t))}function nw(r,e){return Vp(r.databaseId,e)}function Xx(r){const e=tw(r);return e.length===4?rt.emptyPath():rw(e)}function Yf(r){return new rt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function rw(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Rv(r,e,t){return{name:Xf(r,e),fields:t.value.mapValue.fields}}function Yx(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(Qe(_===void 0||typeof _=="string",58123),Bt.fromBase64String(_||"")):(Qe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Bt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(y){const _=y.code===void 0?J.UNKNOWN:Y_(y.code);return new _e(_,y.message||"")})(c);t=new Z_(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ef(r,i.document.name),l=_r(i.document.updateTime),c=i.document.createTime?_r(i.document.createTime):Pe.min(),f=new cn({mapValue:{fields:i.document.fields}}),p=Xt.newFoundDocument(o,l,c,f),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Nc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ef(r,i.document),l=i.readTime?_r(i.readTime):Pe.min(),c=Xt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Nc([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ef(r,i.document),l=i.removedTargetIds||[];t=new Nc([],l,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new jx(o,l),f=i.targetId;t=new J_(f,c)}}return t}function Jx(r,e){let t;if(e instanceof Wl)t={update:Rv(r,e.key,e.value)};else if(e instanceof X_)t={delete:Xf(r,e.key)};else if(e instanceof ls)t={update:Rv(r,e.key,e.data),updateMask:ak(e.fieldMask)};else{if(!(e instanceof Lx))return Se(16599,{Vt:e.type});t={verify:Xf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof Kc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof la)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ul)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Qc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Se(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Qx(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(r,e.precondition)),t}function Zx(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map((t=>(function(o,l){let c=o.updateTime?_r(o.updateTime):_r(l);return c.isEqual(Pe.min())&&(c=_r(l)),new Ox(c,o.transformResults||[])})(t,e)))):[]}function ek(r,e){return{documents:[nw(r,e.path)]}}function tk(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=nw(r,o);const l=(function(y){if(y.length!==0)return sw(Sr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((_=>(function(x){return{field:Xo(x.field),direction:ik(x.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Kf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function nk(r){let e=Xx(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const x=iw(T);return x instanceof Sr&&O_(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((x=>(function(z){return new qc(Yo(z.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(x)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let x;return x=typeof T=="object"?T.value:T,mh(x)?null:x})(t.limit));let p=null;t.startAt&&(p=(function(T){const x=!!T.before,M=T.values||[];return new Wc(M,x)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const x=!T.before,M=T.values||[];return new Wc(M,x)})(t.endAt)),_x(e,o,c,l,f,"F",p,y)}function rk(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Yo(t.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Yo(t.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Yo(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yo(t.unaryFilter.field);return Pt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Pt.create(Yo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Sr.create(t.compositeFilter.filters.map((i=>iw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function ik(r){return Gx[r]}function sk(r){return Wx[r]}function ok(r){return qx[r]}function Xo(r){return{fieldPath:r.canonicalString()}}function Yo(r){return zt.fromServerFormat(r.fieldPath)}function sw(r){return r instanceof Pt?(function(t){if(t.op==="=="){if(vv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NAN"}};if(yv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NAN"}};if(yv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(t.field),op:sk(t.op),value:t.value}}})(r):r instanceof Sr?(function(t){const i=t.getFilters().map((o=>sw(o)));return i.length===1?i[0]:{compositeFilter:{op:ok(t.op),filters:i}}})(r):Se(54877,{filter:r})}function ak(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ow(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t,i,o,l=Pe.min(),c=Pe.min(),f=Bt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.yt=e}}function uk(r){const e=nk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.Cn=new hk}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(es.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class hk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new bt(rt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new bt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aw=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(aw,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ua(0)}static cr(){return new ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="LruGarbageCollector",dk=1048576;function Ov([r,e],[t,i]){const o=Ue(r,t);return o===0?Ue(e,i):o}class fk{constructor(e){this.Ir=e,this.buffer=new bt(Ov),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ov(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Dv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){va(t)?ce(Dv,"Ignoring IndexedDB error during garbage collection: ",t):await ya(t)}await this.Vr(3e5)}))}}class mk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(ph.ce);const i=new fk(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Nv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,c,f,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),Ko()<=Fe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function gk(r,e){return new mk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.changes=new to((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&bl(i.mutation,o,En.empty(),it.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const o=Us();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=Il();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Us();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,o){let l=Zr();const c=Pl(),f=(function(){return Pl()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof ls)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),bl(_.mutation,y,_.mutation.getFieldMask(),it.now())):c.set(y.key,En.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>c.set(y,_))),t.forEach(((y,_)=>f.set(y,new vk(_,c.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Pl();let o=new lt(((c,f)=>c-f)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||En.empty();_=f.applyToLocalView(y,_),i.set(p,_);const T=(o.get(f.batchId)||je()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,_=p.value,T=B_();_.forEach((x=>{if(!l.has(x)){const M=K_(t.get(x),i.get(x));M!==null&&T.set(x,M),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return Q.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Q.resolve(Us());let f=Ml,p=l;return c.next((y=>Q.forEach(y,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(_)?Q.resolve():this.remoteDocumentCache.getEntry(e,_).next((x=>{p=p.insert(_,x)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,je()))).next((_=>({batchId:f,changes:z_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let o=Il();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Il();return this.indexManager.getCollectionParents(e,l).next((f=>Q.forEach(f,(p=>{const y=(function(T,x){return new yh(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((T,x)=>{c=c.insert(T,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,Xt.newInvalidDocument(_)))}));let f=Il();return c.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&bl(_.mutation,y,En.empty(),it.now()),_h(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:_r(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:uk(o.bundledQuery),readTime:_r(o.readTime)}})(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.overlays=new lt(we.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Us();return Q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),Q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const o=Us(),l=t.length+1,c=new we(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new lt(((y,_)=>y-_));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=Us(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const f=Us(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>f.set(y,_))),!(f.size()>=o)););return Q.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Ux(t,i));let l=this.qr.get(t);l===void 0&&(l=je(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this.Qr=new bt(Ot.$r),this.Ur=new bt(Ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ot(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ot(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new we(new rt([])),i=new Ot(t,e),o=new Ot(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new rt([])),i=new Ot(t,e),o=new Ot(t,e+1);let l=je();return this.Ur.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ot(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ot{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Ue(e.Yr,t.Yr)}static Kr(e,t){return Ue(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Ot.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Fx(l,t,i,o);this.mutationQueue.push(c);for(const f of o)this.Zr=this.Zr.add(new Ot(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Q.resolve(c)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Cp:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ot(t,0),o=new Ot(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(c=>{const f=this.Xr(c.Yr);l.push(f)})),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bt(Ue);return t.forEach((o=>{const l=new Ot(o,0),c=new Ot(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{i=i.add(f.Yr)}))})),Q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const c=new Ot(new we(l),0);let f=new bt(Ue);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Yr)),!0)}),c),Q.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Q.forEach(t.mutations,(o=>{const l=new Ot(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ot(t,0),o=this.Zr.firstAfterOrEqual(i);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.ri=e,this.docs=(function(){return new lt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let i=Zr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Xt.newInvalidDocument(o))})),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Zr();const c=t.path,f=new we(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||YS(XS(_),i)<=0||(o.has(_.key)||_h(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se(9500)}ii(e,t){return Q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new xk(this)}getSize(e){return Q.resolve(this.size)}}class xk extends yk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.persistence=e,this.si=new to((t=>bp(t)),Rp),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Lp,this.targetCount=0,this.ai=ua.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ua(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Q.waitFor(l).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),Q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this.ui={},this.overlays={},this.ci=new ph(0),this.li=!1,this.li=!0,this.hi=new Tk,this.referenceDelegate=e(this),this.Pi=new kk(this),this.indexManager=new ck,this.remoteDocumentCache=(function(o){return new Sk(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new lk(t),this.Ii=new wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ek,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new Ik(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const o=new Ck(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return Q.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Ck extends ZS{constructor(e){super(),this.currentSequenceNumber=e}}class Fp{constructor(e){this.persistence=e,this.Ri=new Lp,this.Vi=null}static mi(e){return new Fp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(i=>{const o=we.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Yc{constructor(e,t){this.persistence=e,this.pi=new to((i=>nx(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=gk(this,t)}static mi(e,t){return new Yc(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return Q.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?Q.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((f=>{f||(i++,l.removeEntry(c,Pe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pc(e.data.value)),t}br(e,t,i){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=je(),o=je();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Up(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vI()?8:ex(Yt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Ak;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Ko()<=Fe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Ko()<=Fe.DEBUG&&ce("QueryEngine","Query:",Qo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ko()<=Fe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(t))):Q.resolve())}ys(e,t){if(Tv(t))return Q.resolve(null);let i=vr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=qf(t,null,"F"),i=vr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=je(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.Ds(t,f);return this.Cs(t,y,c,p.readTime)?this.ys(e,qf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,i,o){return Tv(t)||o.isEqual(Pe.min())?Q.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,o)?Q.resolve(null):(Ko()<=Fe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Qo(t)),this.vs(e,c,t,QS(o,Ml)).next((f=>f)))}))}Ds(e,t){let i=new bt(U_(e));return t.forEach(((o,l)=>{_h(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Ko()<=Fe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.ps.getDocumentsMatchingQuery(e,t,es.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="LocalStore",bk=3e8;class Rk{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new lt(Ue),this.xs=new to((l=>bp(l)),Rp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _k(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Nk(r,e,t,i){return new Rk(r,e,t,i)}async function uw(r,e){const t=Re(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let p=je();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){f.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:f})))}))}))}function Dk(r,e){const t=Re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,_){const T=y.batch,x=T.keys();let M=Q.resolve();return x.forEach((z=>{M=M.next((()=>_.getEntry(p,z))).next(($=>{const W=y.docVersions.get(z);Qe(W!==null,48541),$.version.compareTo(W)<0&&(T.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),_.addEntry($)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=je();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function cw(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Ok(r,e){const t=Re(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((_,T)=>{const x=o.get(T);if(!x)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let M=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?M=M.withResumeToken(Bt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,i)),o=o.insert(T,M),(function($,W,le){return $.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=bk?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(x,M,_)&&f.push(t.Pi.updateTargetData(l,M))}));let p=Zr(),y=je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(Mk(l,c,e.documentUpdates).next((_=>{p=_.ks,y=_.qs}))),!i.isEqual(Pe.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return Q.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function Mk(r,e,t){let i=je(),o=je();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Zr();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Pe.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):ce(jp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function Vk(r,e){const t=Re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Cp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Lk(r,e){const t=Re(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,Q.resolve(o)):t.Pi.allocateTargetId(i).next((c=>(o=new Ui(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Jf(r,e,t){const i=Re(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!va(c))throw c;ce(jp,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Mv(r,e,t){const i=Re(r);let o=Pe.min(),l=je();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,_){const T=Re(p),x=T.xs.get(_);return x!==void 0?Q.resolve(T.Ms.get(x)):T.Pi.getTargetData(y,_)})(i,c,vr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?o:Pe.min(),t?l:je()))).next((f=>(Fk(i,Tx(e),f),{documents:f,Qs:l})))))}function Fk(r,e,t){let i=r.Os.get(e)||Pe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Vv{constructor(){this.activeTargetIds=Ax()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uk{constructor(){this.Mo=new Vv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="ConnectivityMonitor";class Fv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Lv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Lv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec=null;function Zf(){return Ec===null?Ec=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ec++,"0x"+Ec.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="RestConnection",zk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Hc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const c=Zf(),f=this.zo(e,t.toUriEncodedString());ce(Tf,`Sending RPC '${e}' ${c}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(f),_=pa(y);return this.Jo(e,f,p,i,_).then((T=>(ce(Tf,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw ia(Tf,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,o,l,c){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ga})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=zk[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class Hk extends Bk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const c=Zf();return new Promise(((f,p)=>{const y=new f_;y.setWithCredentials(!0),y.listenOnce(p_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ac.NO_ERROR:const T=y.getResponseJson();ce(Kt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case Ac.TIMEOUT:ce(Kt,`RPC '${e}' ${c} timed out`),p(new _e(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:const x=y.getStatus();if(ce(Kt,`RPC '${e}' ${c} failed with status:`,x,"response text:",y.getResponseText()),x>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const z=M==null?void 0:M.error;if(z&&z.status&&z.message){const $=(function(le){const ae=le.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ae)>=0?ae:J.UNKNOWN})(z.status);p(new _e($,z.message))}else p(new _e(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new _e(J.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(Kt,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);ce(Kt,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Zf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=y_(),f=g_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");ce(Kt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const T=c.createWebChannel(_,p);this.I_(T);let x=!1,M=!1;const z=new $k({Yo:W=>{M?ce(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(x||(ce(Kt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),x=!0),ce(Kt,`RPC '${e}' stream ${o} sending:`,W),T.send(W))},Zo:()=>T.close()}),$=(W,le,ae)=>{W.listen(le,(j=>{try{ae(j)}catch(K){setTimeout((()=>{throw K}),0)}}))};return $(T,Tl.EventType.OPEN,(()=>{M||(ce(Kt,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),$(T,Tl.EventType.CLOSE,(()=>{M||(M=!0,ce(Kt,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(T))})),$(T,Tl.EventType.ERROR,(W=>{M||(M=!0,ia(Kt,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),z.a_(new _e(J.UNAVAILABLE,"The operation could not be completed")))})),$(T,Tl.EventType.MESSAGE,(W=>{var le;if(!M){const ae=W.data[0];Qe(!!ae,16349);const j=ae,K=(j==null?void 0:j.error)||((le=j[0])==null?void 0:le.error);if(K){ce(Kt,`RPC '${e}' stream ${o} received error:`,K);const ne=K.status;let Y=(function(A){const N=Et[A];if(N!==void 0)return Y_(N)})(ne),C=K.message;Y===void 0&&(Y=J.INTERNAL,C="Unknown error status: "+ne+" with message "+K.message),M=!0,z.a_(new _e(Y,C)),T.close()}else ce(Kt,`RPC '${e}' stream ${o} received:`,ae),z.u_(ae)}})),$(f,m_.STAT_EVENT,(W=>{W.stat===zf.PROXY?ce(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):W.stat===zf.NOPROXY&&ce(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(r){return new Kx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="PersistentStream";class dw{constructor(e,t,i,o,l,c,f,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Jr(t.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new _e(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Uv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Uv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Gk extends dw{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Yx(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?_r(c.readTime):Pe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Yf(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=Wf(p)?{documents:ek(l,p)}:{query:tk(l,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=ew(l,c.resumeToken);const y=Kf(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Pe.min())>0){f.readTime=Xc(l,c.snapshotVersion.toTimestamp());const y=Kf(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=rk(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Yf(this.serializer),t.removeTarget=e,this.q_(t)}}class Wk extends dw{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Zx(e.writeResults,e.commitTime),i=_r(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Yf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Jx(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{}class Kk extends qk{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Qf(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(J.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Qf(t,i),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Qk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jr(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class Xk{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{no(this)&&(ce(Qs,"Restarting streams for network reachability change."),await(async function(p){const y=Re(p);y.Ea.add(4),await Kl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Sh(y)})(this))}))})),this.Ra=new Qk(i,o)}}async function Sh(r){if(no(r))for(const e of r.da)await e(!0)}async function Kl(r){for(const e of r.da)await e(!1)}function fw(r,e){const t=Re(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hp(t)?$p(t):_a(t).O_()&&Bp(t,e))}function zp(r,e){const t=Re(r),i=_a(t);t.Ia.delete(e),i.O_()&&pw(t,e),t.Ia.size===0&&(i.O_()?i.L_():no(t)&&t.Ra.set("Unknown"))}function Bp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(r).Y_(e)}function pw(r,e){r.Va.Ue(e),_a(r).Z_(e)}function $p(r){r.Va=new Hx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),_a(r).start(),r.Ra.ua()}function Hp(r){return no(r)&&!_a(r).x_()&&r.Ia.size>0}function no(r){return Re(r).Ea.size===0}function mw(r){r.Va=void 0}async function Yk(r){r.Ra.set("Online")}async function Jk(r){r.Ia.forEach(((e,t)=>{Bp(r,e)}))}async function Zk(r,e){mw(r),Hp(r)?(r.Ra.ha(e),$p(r)):r.Ra.set("Unknown")}async function eC(r,e,t){if(r.Ra.set("Online"),e instanceof Z_&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(i){ce(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jc(r,i)}else if(e instanceof Nc?r.Va.Ze(e):e instanceof J_?r.Va.st(e):r.Va.tt(e),!t.isEqual(Pe.min()))try{const i=await cw(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(y);_&&l.Ia.set(y,_.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,y)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(Bt.EMPTY_BYTE_STRING,_.snapshotVersion)),pw(l,p);const T=new Ui(_.target,p,y,_.sequenceNumber);Bp(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){ce(Qs,"Failed to raise snapshot:",i),await Jc(r,i)}}async function Jc(r,e,t){if(!va(e))throw e;r.Ea.add(1),await Kl(r),r.Ra.set("Offline"),t||(t=()=>cw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(Qs,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Sh(r)}))}function gw(r,e){return e().catch((t=>Jc(r,t,e)))}async function xh(r){const e=Re(r),t=is(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cp;for(;tC(e);)try{const o=await Vk(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,nC(e,o)}catch(o){await Jc(e,o)}yw(e)&&vw(e)}function tC(r){return no(r)&&r.Ta.length<10}function nC(r,e){r.Ta.push(e);const t=is(r);t.O_()&&t.X_&&t.ea(e.mutations)}function yw(r){return no(r)&&!is(r).x_()&&r.Ta.length>0}function vw(r){is(r).start()}async function rC(r){is(r).ra()}async function iC(r){const e=is(r);for(const t of r.Ta)e.ea(t.mutations)}async function sC(r,e,t){const i=r.Ta.shift(),o=Op.from(i,e,t);await gw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await xh(r)}async function oC(r,e){e&&is(r).X_&&await(async function(i,o){if((function(c){return zx(c)&&c!==J.ABORTED})(o.code)){const l=i.Ta.shift();is(i).B_(),await gw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await xh(i)}})(r,e),yw(r)&&vw(r)}async function jv(r,e){const t=Re(r);t.asyncQueue.verifyOperationInProgress(),ce(Qs,"RemoteStore received new credentials");const i=no(t);t.Ea.add(3),await Kl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sh(t)}async function aC(r,e){const t=Re(r);e?(t.Ea.delete(2),await Sh(t)):e||(t.Ea.add(2),await Kl(t),t.Ra.set("Unknown"))}function _a(r){return r.ma||(r.ma=(function(t,i,o){const l=Re(t);return l.sa(),new Gk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:Yk.bind(null,r),t_:Jk.bind(null,r),r_:Zk.bind(null,r),H_:eC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Hp(r)?$p(r):r.Ra.set("Unknown")):(await r.ma.stop(),mw(r))}))),r.ma}function is(r){return r.fa||(r.fa=(function(t,i,o){const l=Re(t);return l.sa(),new Wk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:rC.bind(null,r),r_:oC.bind(null,r),ta:iC.bind(null,r),na:sC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await xh(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(Qs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,f=new Gp(e,t,c,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(r,e){if(Jr("AsyncQueue",`${e}: ${r}`),va(r))return new _e(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{static emptySet(e){return new Jo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Il(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.ga=new lt(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ca{constructor(e,t,i,o,l,c,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new ca(e,t,Jo.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class uC{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=Bv(),l.forEach(((c,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new _e(J.ABORTED,"Firestore shutting down"))}}function Bv(){return new to((r=>F_(r)),vh)}async function cC(r,e){const t=Re(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new lC,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Wp(c,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&qp(t)}async function hC(r,e){const t=Re(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function dC(r,e){const t=Re(r);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(o)&&(i=!0);c.wa=o}}i&&qp(t)}function fC(r,e,t){const i=Re(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function qp(r){r.Ca.forEach((e=>{e.next()}))}var ep,$v;($v=ep||(ep={})).Ma="default",$v.Cache="cache";class pC{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ca(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.key=e}}class ww{constructor(e){this.key=e}}class mC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=U_(e),this.tu=new Jo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new zv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const x=o.get(_),M=_h(this.query,T)?T:null,z=!!x&&this.mutatedKeys.has(x.key),$=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let W=!1;x&&M?x.data.isEqual(M.data)?z!==$&&(i.track({type:3,doc:M}),W=!0):this.su(x,M)||(i.track({type:2,doc:M}),W=!0,(p&&this.eu(M,p)>0||y&&this.eu(M,y)<0)&&(f=!0)):!x&&M?(i.track({type:0,doc:M}),W=!0):x&&!M&&(i.track({type:1,doc:x}),W=!0,(p||y)&&(f=!0)),W&&(M?(c=c.add(M),l=$?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(M,z){const $=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:W})}};return $(M)-$(z)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,c.length!==0||y?{snapshot:new ca(this.query,e.tu,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new ww(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new _w(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ca.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kp="SyncEngine";class gC{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class yC{constructor(e){this.key=e,this.hu=!1}}class vC{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new to((f=>F_(f)),vh),this.Iu=new Map,this.Eu=new Set,this.du=new lt(we.comparator),this.Au=new Map,this.Ru=new Lp,this.Vu={},this.mu=new Map,this.fu=ua.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _C(r,e,t=!0){const i=kw(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Ew(i,e,t,!0),o}async function wC(r,e){const t=kw(r);await Ew(t,e,!0,!1)}async function Ew(r,e,t,i){const o=await Lk(r.localStore,vr(e)),l=o.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await EC(r,e,l,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&fw(r.remoteStore,o),f}async function EC(r,e,t,i,o){r.pu=(T,x,M)=>(async function($,W,le,ae){let j=W.view.ru(le);j.Cs&&(j=await Mv($.localStore,W.query,!1).then((({documents:C})=>W.view.ru(C,j))));const K=ae&&ae.targetChanges.get(W.targetId),ne=ae&&ae.targetMismatches.get(W.targetId)!=null,Y=W.view.applyChanges(j,$.isPrimaryClient,K,ne);return Gv($,W.targetId,Y.au),Y.snapshot})(r,T,x,M);const l=await Mv(r.localStore,e,!0),c=new mC(e,l.Qs),f=c.ru(l.documents),p=ql.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=c.applyChanges(f,r.isPrimaryClient,p);Gv(r,t,y.au);const _=new gC(e,t,c);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function TC(r,e,t){const i=Re(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((c=>!vh(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Jf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&zp(i.remoteStore,o.targetId),tp(i,o.targetId)})).catch(ya)):(tp(i,o.targetId),await Jf(i.localStore,o.targetId,!0))}async function IC(r,e){const t=Re(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),zp(t.remoteStore,i.targetId))}async function SC(r,e,t){const i=RC(r);try{const o=await(function(c,f){const p=Re(c),y=it.now(),_=f.reduce(((M,z)=>M.add(z.key)),je());let T,x;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let z=Zr(),$=je();return p.Ns.getEntries(M,_).next((W=>{z=W,z.forEach(((le,ae)=>{ae.isValidDocument()||($=$.add(le))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,z))).next((W=>{T=W;const le=[];for(const ae of f){const j=Vx(ae,T.get(ae.key).overlayedDocument);j!=null&&le.push(new ls(ae.key,j,R_(j.value.mapValue),Kn.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,le,f)})).next((W=>{x=W;const le=W.applyToLocalDocumentSet(T,$);return p.documentOverlayCache.saveOverlays(M,W.batchId,le)}))})).then((()=>({batchId:x.batchId,changes:z_(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let y=c.Vu[c.currentUser.toKey()];y||(y=new lt(Ue)),y=y.insert(f,p),c.Vu[c.currentUser.toKey()]=y})(i,o.batchId,t),await Ql(i,o.changes),await xh(i.remoteStore)}catch(o){const l=Wp(o,"Failed to persist write");t.reject(l)}}async function Tw(r,e){const t=Re(r);try{const i=await Ok(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Qe(c.hu,14607):o.removedDocuments.size>0&&(Qe(c.hu,42227),c.hu=!1))})),await Ql(t,i,e)}catch(i){await ya(i)}}function Hv(r,e,t){const i=Re(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=Re(c);p.onlineState=f;let y=!1;p.queries.forEach(((_,T)=>{for(const x of T.Sa)x.va(f)&&(y=!0)})),y&&qp(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xC(r,e,t){const i=Re(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let c=new lt(we.comparator);c=c.insert(l,Xt.newNoDocument(l,Pe.min()));const f=je().add(l),p=new Th(Pe.min(),new Map,new lt(Ue),c,f);await Tw(i,p),i.du=i.du.remove(l),i.Au.delete(e),Qp(i)}else await Jf(i.localStore,e,!1).then((()=>tp(i,e,t))).catch(ya)}async function kC(r,e){const t=Re(r),i=e.batch.batchId;try{const o=await Dk(t.localStore,e);Sw(t,i,null),Iw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ql(t,o)}catch(o){await ya(o)}}async function CC(r,e,t){const i=Re(r);try{const o=await(function(c,f){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,f).next((T=>(Qe(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);Sw(i,e,t),Iw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ql(i,o)}catch(o){await ya(o)}}function Iw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Sw(r,e,t){const i=Re(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function tp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||xw(r,i)}))}function xw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(zp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Qp(r))}function Gv(r,e,t){for(const i of t)i instanceof _w?(r.Ru.addReference(i.key,e),AC(r,i)):i instanceof ww?(ce(Kp,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||xw(r,i.key)):Se(19791,{wu:i})}function AC(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ce(Kp,"New document in limbo: "+t),r.Eu.add(i),Qp(r))}function Qp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(rt.fromString(e)),i=r.fu.next();r.Au.set(i,new yC(t)),r.du=r.du.insert(t,i),fw(r.remoteStore,new Ui(vr(Np(t.path)),i,"TargetPurposeLimboResolution",ph.ce))}}async function Ql(r,e,t){const i=Re(r),o=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{c.push(i.pu(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Up.As(p.targetId,y);l.push(T)}})))})),await Promise.all(c),i.Pu.H_(o),await(async function(p,y){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Q.forEach(y,(x=>Q.forEach(x.Es,(M=>_.persistence.referenceDelegate.addReference(T,x.targetId,M))).next((()=>Q.forEach(x.ds,(M=>_.persistence.referenceDelegate.removeReference(T,x.targetId,M)))))))))}catch(T){if(!va(T))throw T;ce(jp,"Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const M=_.Ms.get(x),z=M.snapshotVersion,$=M.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(x,$)}}})(i.localStore,l))}async function PC(r,e){const t=Re(r);if(!t.currentUser.isEqual(e)){ce(Kp,"User change. New user:",e.toKey());const i=await uw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new _e(J.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ql(t,i.Ls)}}function bC(r,e){const t=Re(r),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let o=je();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function kw(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xC.bind(null,e),e.Pu.H_=dC.bind(null,e.eventManager),e.Pu.yu=fC.bind(null,e.eventManager),e}function RC(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CC.bind(null,e),e}class Zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Nk(this.persistence,new Pk,e.initialUser,this.serializer)}Cu(e){return new lw(Fp.mi,this.serializer)}Du(e){return new Uk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zc.provider={build:()=>new Zc};class NC extends Zc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Yc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new pk(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new lw((i=>Yc.mi(i,t)),this.serializer)}}class np{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Hv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PC.bind(null,this.syncEngine),await aC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uC})()}createDatastore(e){const t=Ih(e.databaseInfo.databaseId),i=(function(l){return new Hk(l)})(e.databaseInfo);return(function(l,c,f,p){return new Kk(l,c,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,f){return new Xk(i,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Hv(this.syncEngine,t,0)),(function(){return Fv.v()?new Fv:new jk})())}createSyncEngine(e,t){return(function(o,l,c,f,p,y,_){const T=new vC(o,l,c,f,p,y);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);ce(Qs,"RemoteStore shutting down."),l.Ea.add(5),await Kl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="FirestoreClient";class OC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ce(ss,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ce(ss,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Wp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sf(r,e){r.asyncQueue.verifyOperationInProgress(),ce(ss,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await uw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Wv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await MC(r);ce(ss,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>jv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>jv(e.remoteStore,o))),r._onlineComponents=e}async function MC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(ss,"Using user provided OfflineComponentProvider");try{await Sf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ia("Error using user provided cache. Falling back to memory cache: "+t),await Sf(r,new Zc)}}else ce(ss,"Using default OfflineComponentProvider"),await Sf(r,new NC(void 0));return r._offlineComponents}async function Cw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(ss,"Using user provided OnlineComponentProvider"),await Wv(r,r._uninitializedComponentsProvider._online)):(ce(ss,"Using default OnlineComponentProvider"),await Wv(r,new np))),r._onlineComponents}function VC(r){return Cw(r).then((e=>e.syncEngine))}async function LC(r){const e=await Cw(r),t=e.eventManager;return t.onListen=_C.bind(null,e.syncEngine),t.onUnlisten=TC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IC.bind(null,e.syncEngine),t}function FC(r,e,t={}){const i=new Qi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,p,y){const _=new DC({next:x=>{_.Nu(),c.enqueueAndForget((()=>hC(l,T)));const M=x.docs.has(f);!M&&x.fromCache?y.reject(new _e(J.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&x.fromCache&&p&&p.source==="server"?y.reject(new _e(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new pC(Np(f.path),_,{includeMetadataChanges:!0,qa:!0});return cC(l,T)})(await LC(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="firestore.googleapis.com",Kv=!0;class Qv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pw,this.ssl=Kv}else this.host=e.host,this.ssl=e.ssl??Kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dk)throw new _e(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Aw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new FS;switch(i.type){case"firstParty":return new BS(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=qv.get(t);i&&(ce("ComponentProvider","Removing Datastore"),qv.delete(t),i.terminate())})(this),Promise.resolve()}}function UC(r,e,t,i={}){var y;r=Zi(r,kh);const o=pa(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(i_(`https://${f}`),s_("Firestore",!0)),l.host!==Pw&&l.host!==f&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:i};if(!Ji(p,c)&&(r._setSettings(p),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=Qt.MOCK_USER;else{_=uI(i.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new _e(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Qt(x)}r._authCredentials=new US(new __(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Xp(this.firestore,e,this._query)}}class St{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Gl(t,St._jsonSchema))return new St(e,i||null,new we(rt.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:It("string",St._jsonSchemaVersion),referencePath:It("string")};class Xi extends Xp{constructor(e,t,i){super(e,t,Np(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new we(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function jC(r,e,...t){if(r=Jt(r),w_("collection","path",e),r instanceof kh){const i=rt.fromString(e,...t);return uv(i),new Xi(r,null,i)}{if(!(r instanceof St||r instanceof Xi))throw new _e(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(rt.fromString(e,...t));return uv(i),new Xi(r.firestore,null,i)}}function Tn(r,e,...t){if(r=Jt(r),arguments.length===1&&(e=xp.newId()),w_("doc","path",e),r instanceof kh){const i=rt.fromString(e,...t);return lv(i),new St(r,null,new we(i))}{if(!(r instanceof St||r instanceof Xi))throw new _e(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(rt.fromString(e,...t));return lv(i),new St(r.firestore,r instanceof Xi?r.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="AsyncQueue";class Yv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hw(this,"async_queue_retry"),this._c=()=>{const i=If();i&&ce(Xv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!va(e))throw e;ce(Xv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Jr("INTERNAL UNHANDLED ERROR: ",Jv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Gp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:Jv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Jv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Xl extends kh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Yv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yv(e),this._firestoreClient=void 0,await e}}}function zC(r,e){const t=typeof r=="object"?r:u_(),i=typeof r=="string"?r:Hc,o=Ip(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=aI("firestore");l&&UC(o,...l)}return o}function bw(r){if(r._terminated)throw new _e(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||BC(r),r._firestoreClient}function BC(r){var i,o,l;const e=r._freezeSettings(),t=(function(f,p,y,_){return new sx(f,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Aw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new OC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nn(Bt.fromBase64String(e))}catch(t){throw new _e(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gl(e,Nn._jsonSchema))return Nn.fromBase64String(e.bytes)}}Nn._jsonSchemaVersion="firestore/bytes/1.0",Nn._jsonSchema={type:It("string",Nn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(Gl(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:It("string",wr._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gl(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Er(e.vectorValues);throw new _e(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:It("string",Er._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=/^__.*__$/;class HC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wl(e,this.data,t,this.fieldTransforms)}}class Rw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class Ph{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ph({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return eh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Nw(this.Ac)&&$C.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ih(e)}Cc(e,t,i,o=!1){return new Ph({Ac:e,methodName:t,Dc:i,path:zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yp(r){const e=r._freezeSettings(),t=Ih(r._databaseId);return new GC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Dw(r,e,t,i,o,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);Zp("Data must be an object, but it was:",c,i);const f=Ow(i,c);let p,y;if(l.merge)p=new En(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const x=rp(e,T,t);if(!c.contains(x))throw new _e(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Vw(_,x)||_.push(x)}p=new En(_),y=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=c.fieldTransforms;return new HC(new cn(f),p,y)}class bh extends Ah{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}function WC(r,e,t){return new Ph({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Jp extends Ah{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=WC(this,e,!0),i=this.vc.map((l=>Yl(l,t))),o=new la(i);return new Nx(e.path,o)}isEqual(e){return e instanceof Jp&&Ji(this.vc,e.vc)}}function qC(r,e,t,i){const o=r.Cc(1,e,t);Zp("Data must be an object, but it was:",o,i);const l=[],c=cn.empty();as(i,((p,y)=>{const _=em(e,p,t);y=Jt(y);const T=o.yc(_);if(y instanceof bh)l.push(_);else{const x=Yl(y,T);x!=null&&(l.push(_),c.set(_,x))}}));const f=new En(l);return new Rw(c,f,o.fieldTransforms)}function KC(r,e,t,i,o,l){const c=r.Cc(1,e,t),f=[rp(e,i,t)],p=[o];if(l.length%2!=0)throw new _e(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(rp(e,l[x])),p.push(l[x+1]);const y=[],_=cn.empty();for(let x=f.length-1;x>=0;--x)if(!Vw(y,f[x])){const M=f[x];let z=p[x];z=Jt(z);const $=c.yc(M);if(z instanceof bh)y.push(M);else{const W=Yl(z,$);W!=null&&(y.push(M),_.set(M,W))}}const T=new En(y);return new Rw(_,T,c.fieldTransforms)}function Yl(r,e){if(Mw(r=Jt(r)))return Zp("Unsupported field value:",e,r),Ow(r,e);if(r instanceof Ah)return(function(i,o){if(!Nw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const f of i){let p=Yl(f,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Px(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=it.fromDate(i);return{timestampValue:Xc(o.serializer,l)}}if(i instanceof it){const l=new it(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xc(o.serializer,l)}}if(i instanceof wr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Nn)return{bytesValue:ew(o.serializer,i._byteString)};if(i instanceof St){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Vp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Er)return(function(c,f){return{mapValue:{fields:{[P_]:{stringValue:b_},[Gc]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Dp(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${kp(i)}`)})(r,e)}function Ow(r,e){const t={};return I_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(r,((i,o)=>{const l=Yl(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Mw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof it||r instanceof wr||r instanceof Nn||r instanceof St||r instanceof Ah||r instanceof Er)}function Zp(r,e,t){if(!Mw(t)||!E_(t)){const i=kp(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function rp(r,e,t){if((e=Jt(e))instanceof Ch)return e._internalPath;if(typeof e=="string")return em(r,e);throw eh("Field path arguments must be of type string or ",r,!1,void 0,t)}const QC=new RegExp("[~\\*/\\[\\]]");function em(r,e,t){if(e.search(QC)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Ch(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function eh(r,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new _e(J.INVALID_ARGUMENT,f+r+p)}function Vw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class XC extends Lw{data(){return super.data()}}function Fw(r,e){return typeof e=="string"?em(r,e):e instanceof Ch?e._internalPath:e._delegate._internalPath}class YC{convertValue(e,t="none"){switch(rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return as(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[Gc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>mt(c.doubleValue)));return new Er(t)}convertGeoPoint(e){return new wr(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=gh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Vl(e));default:return null}}convertTimestamp(e){const t=ts(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=rt.fromString(e);Qe(ow(i),9688,{name:e});const o=new Ll(i.get(1),i.get(3)),l=new we(i.popFirst(5));return o.isEqual(t)||Jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class xl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hs extends Lw{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Fw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:It("string",Hs._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class Dc extends Hs{data(e={}){return super.data(e)}}class Rl{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new xl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Dc(this._firestore,this._userDataWriter,i.key,i,new xl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new Dc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new xl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Dc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new xl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:JC(f.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r){r=Zi(r,St);const e=Zi(r.firestore,Xl);return FC(bw(e),r._key).then((t=>tA(e,r,t)))}Rl._jsonSchemaVersion="firestore/querySnapshot/1.0",Rl._jsonSchema={type:It("string",Rl._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class ZC extends YC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function ip(r,e,t){r=Zi(r,St);const i=Zi(r.firestore,Xl),o=Uw(r.converter,e);return tm(i,[Dw(Yp(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Kn.none())])}function os(r,e,t,...i){r=Zi(r,St);const o=Zi(r.firestore,Xl),l=Yp(o);let c;return c=typeof(e=Jt(e))=="string"||e instanceof Ch?KC(l,"updateDoc",r._key,e,t,i):qC(l,"updateDoc",r._key,e),tm(o,[c.toMutation(r._key,Kn.exists(!0))])}function eA(r,e){const t=Zi(r.firestore,Xl),i=Tn(r),o=Uw(r.converter,e);return tm(t,[Dw(Yp(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Kn.exists(!1))]).then((()=>i))}function tm(r,e){return(function(i,o){const l=new Qi;return i.asyncQueue.enqueueAndForget((async()=>SC(await VC(i),o,l))),l.promise})(bw(r),e)}function tA(r,e,t){const i=t.docs.get(e._key),o=new ZC(r);return new Hs(r,o,e._key,i,new xl(t.hasPendingWrites,t.fromCache),e.converter)}function sp(...r){return new Jp("arrayUnion",r)}(function(e,t=!0){(function(o){ga=o})(ma),ra(new qs("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Xl(new jS(i.getProvider("auth-internal")),new $S(c,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new _e(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(y.options.projectId,_)})(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),qi(iv,sv,e),qi(iv,sv,"esm2020")})();const nA={apiKey:"AIzaSyDhrI1HLd0EAxADVSlMutaBx4C_ImS8CYY",authDomain:"web-gallery-16ddc.firebaseapp.com",projectId:"web-gallery-16ddc",storageBucket:"web-gallery-16ddc.firebasestorage.app",messagingSenderId:"946670463872",appId:"1:946670463872:web:d64e24e38859e94598af65"},rA=l_(nA),In=zC(rA),Dn="gallery",On="metadata",Gs="photo_chunks",iA="deleted_photos",sA=500,oA=async()=>{const r=Tn(In,Dn,On),e=await ei(r);if(!e.exists())return await ip(r,{albums:[],photoChunkIds:[]}),{photos:[],albums:[]};const t=e.data(),i=t.albums||[],o=t.photoChunkIds||[];if(o.length===0)return{photos:[],albums:i};const l=o.map(async p=>{const y=Tn(In,Dn,On,Gs,p),_=await ei(y);return _.exists()?(_.data().data||[]).map(x=>({...x,_chunkId:p})):[]});return{photos:(await Promise.all(l)).flat(),albums:i}},aA=async r=>{const e=Tn(In,Dn,On);let i=(await ei(e)).data();i||(i={albums:[],photoChunkIds:[]},await ip(e,i));let o=i.photoChunkIds||[],l=o.length>0?o[o.length-1]:null,c=!1;if(!l)c=!0;else{const f=Tn(In,Dn,On,Gs,l),p=await ei(f);p.exists()?(p.data().data||[]).length>=sA&&(c=!0):c=!0}if(c){l=`chunk_${Date.now()}`;const f=Tn(In,Dn,On,Gs,l);await ip(f,{data:[r]}),await os(e,{photoChunkIds:sp(l)})}else{const f=Tn(In,Dn,On,Gs,l);await os(f,{data:sp(r)})}return l},lA=async(r,e,t)=>{const i=Tn(In,Dn,On,Gs,e),o=await ei(i);if(o.exists()){const l=o.data().data,c=l.findIndex(f=>f.id===r);if(c>-1){const f=[...l];f[c]={...f[c],...t},await os(i,{data:f})}else throw new Error(`Photo with id ${r} not found in chunk ${e}.`)}},uA=async(r,e)=>{const t=Tn(In,Dn,On,Gs,e),i=await ei(t);if(!i.exists())throw new Error("Chunk not found");const o=i.data().data;if(!o.find(f=>f.id===r))throw new Error("Photo not found");const c=o.filter(f=>f.id!==r);return await os(t,{data:c}),{deletedAlbumId:void 0}},cA=async(r,e)=>{const t={};r.forEach(({photoId:o,chunkId:l})=>{t[l]||(t[l]=[]),t[l].push(o)});const i=Object.entries(t).map(async([o,l])=>{const c=Tn(In,Dn,On,Gs,o),f=await ei(c);if(f.exists()){const y=f.data().data.map(_=>l.includes(_.id)?{..._,albumId:e}:_);await os(c,{data:y})}});await Promise.all(i)},hA=async r=>{const e=Tn(In,Dn,On);await os(e,{albums:sp(r)})},Zv=async(r,e)=>{const t=Tn(In,Dn,On),i=await ei(t);if(i.exists()){const o=i.data(),l=o.albums.findIndex(c=>c.id===r);if(l>-1){const c=[...o.albums];c[l]={...c[l],...e},await os(t,{albums:c})}}},e0=async r=>{const e=Tn(In,Dn,On),t=await ei(e);if(t.exists()){const o=t.data().albums.filter(l=>l.id!==r);await os(e,{albums:o})}},dA=async r=>{await eA(jC(In,iA),{photoId:r.id,url:r.url,deletedAt:new Date().toISOString(),albumId:r.albumId})},ha=(r,e=600)=>{if(!r.includes("cloudinary.com"))return r;if(r.includes("/upload/f_auto,q_auto"))return r.replace(/w_\d+/,`w_${e}`);const t=r.split("/upload/");return t.length!==2?r:`${t[0]}/upload/f_auto,q_auto,w_${e}/${t[1]}`},fA=async r=>{var o;const e="deheni3we",t="gallery_preset",i=new FormData;i.append("file",r),i.append("upload_preset",t);try{const l=await fetch(`https://api.cloudinary.com/v1_1/${e}/image/upload`,{method:"POST",body:i});if(!l.ok){const f=await l.json();throw console.error("Cloudinary upload error details:",f),new Error(`Upload failed: ${((o=f.error)==null?void 0:o.message)||l.statusText}`)}return(await l.json()).secure_url}catch(l){throw console.error("Cloudinary upload exception:",l),l}};var Rh=typeof self<"u"?self:global;const jl=typeof navigator<"u",pA=jl&&typeof HTMLImageElement>"u",th=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Nh=Rh.Buffer,Tc=Rh.BigInt,Dh=!!Nh,mA=r=>r;function nh(r,e=mA){if(th)try{return typeof require=="function"?Promise.resolve(e(require(r))):import(r).then(e)}catch{console.warn(`Couldn't load ${r}`)}}let nm=Rh.fetch;const gA=r=>nm=r;if(!Rh.fetch){const r=nh("http",(i=>i)),e=nh("https",(i=>i)),t=(i,{headers:o}={})=>new Promise((async(l,c)=>{let{port:f,hostname:p,pathname:y,protocol:_,search:T}=new URL(i);const x={method:"GET",hostname:p,path:encodeURI(y)+T,headers:o};f!==""&&(x.port=Number(f));const M=(_==="https:"?await e:await r).request(x,(z=>{if(z.statusCode===301||z.statusCode===302){let $=new URL(z.headers.location,i).toString();return t($,{headers:o}).then(l).catch(c)}l({status:z.statusCode,arrayBuffer:()=>new Promise(($=>{let W=[];z.on("data",(le=>W.push(le))),z.on("end",(()=>$(Buffer.concat(W))))}))})}));M.on("error",c),M.end()}));gA(t)}function xe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const rh=r=>jw(r)?void 0:r,yA=r=>r!==void 0;function jw(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(yA).length===0)}function xt(r){let e=new Error(r);throw delete e.stack,e}function js(r){return(r=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(r).trim())===""?void 0:r}function op(r){let e=(function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048})(r);return r.jfif.enabled&&(e+=50),r.xmp.enabled&&(e+=2e4),r.iptc.enabled&&(e+=14e3),r.icc.enabled&&(e+=6e3),e}const ap=r=>String.fromCharCode.apply(null,r),t0=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function zw(r){return t0?t0.decode(r):Dh?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(ap(r)))}class hn{static from(e,t){return e instanceof this&&e.le===t?e:new hn(e,void 0,void 0,t)}constructor(e,t=0,i,o){if(typeof o=="boolean"&&(this.le=o),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let l=new DataView(e,t,i);this._swapDataView(l)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof hn){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&xt("Creating view outside of available memory in ArrayBuffer");let l=new DataView(e.buffer,t,i);this._swapDataView(l)}else if(typeof e=="number"){let l=new DataView(new ArrayBuffer(e));this._swapDataView(l)}else xt("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=hn){return e instanceof DataView||e instanceof hn?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||xt("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new hn(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return zw(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return ap(i)}getUnicodeString(e=0,t=this.byteLength){const i=[];for(let o=0;o<t&&e+o<this.byteLength;o+=2)i.push(this.getUint16(e+o));return ap(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function lp(r,e){xt(`${r} '${e}' was not loaded, try using full build of exifr.`)}class rm extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||lp(this.kind,e),t&&(e in t||(function(i,o){xt(`Unknown ${i} '${o}'.`)})(this.kind,e),t[e].enabled||lp(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var xr=new rm("file parser"),Tt=new rm("segment parser"),Cr=new rm("file reader");function vA(r,e){return typeof r=="string"?n0(r,e):jl&&!pA&&r instanceof HTMLImageElement?n0(r.src,e):r instanceof Uint8Array||r instanceof ArrayBuffer||r instanceof DataView?new hn(r):jl&&r instanceof Blob?up(r,e,"blob",Ys):void xt("Invalid input argument")}function n0(r,e){return(t=r).startsWith("data:")||t.length>1e4?cp(r,e,"base64"):th&&r.includes("://")?up(r,e,"url",Xs):th?cp(r,e,"fs"):jl?up(r,e,"url",Xs):void xt("Invalid input argument");var t}async function up(r,e,t,i){return Cr.has(t)?cp(r,e,t):i?(async function(o,l){let c=await l(o);return new hn(c)})(r,i):void xt(`Parser ${t} is not loaded`)}async function cp(r,e,t){let i=new(Cr.get(t))(r,e);return await i.read(),i}const Xs=r=>nm(r).then((e=>e.arrayBuffer())),Ys=r=>new Promise(((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(r)}));class _A extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function gt(r,e,t){let i=new _A;for(let[o,l]of t)i.set(o,l);if(Array.isArray(e))for(let o of e)r.set(o,i);else r.set(e,i);return i}function Js(r,e,t){let i,o=r.get(e);for(i of t)o.set(i[0],i[1])}const Mt=new Map,Xn=new Map,Yi=new Map,ji=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],wa=["jfif","xmp","icc","iptc","ihdr"],Zs=["tiff",...wa],ht=["ifd0","ifd1","exif","gps","interop"],zi=[...Zs,...ht],Bi=["makerNote","userComment"],Ea=["translateKeys","translateValues","reviveValues","multiSegment"],$i=[...Ea,"sanitize","mergeOutput","silentErrors"];class Bw{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class _l extends Bw{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,o){if(super(),xe(this,"enabled",!1),xe(this,"skip",new Set),xe(this,"pick",new Set),xe(this,"deps",new Set),xe(this,"translateKeys",!1),xe(this,"translateValues",!1),xe(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(o),this.canBeFiltered=ht.includes(e),this.canBeFiltered&&(this.dict=Mt.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:l,skip:c}=i;l&&l.length>0&&this.translateTagSet(l,this.pick),c&&c.length>0&&this.translateTagSet(c,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:xt(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of Ea)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,o,{tagKeys:l,tagValues:c}=this.dict;for(i of e)typeof i=="string"?(o=c.indexOf(i),o===-1&&(o=l.indexOf(Number(i))),o!==-1&&t.add(Number(l[o]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ih(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ih(this.pick,this.deps)}}var tn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},r0=new Map;class ro extends Bw{static useCached(e){let t=r0.get(e);return t!==void 0||(t=new this(e),r0.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):xt(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=jl?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of ji)this[e]=tn[e];for(e of $i)this[e]=tn[e];for(e of Bi)this[e]=tn[e];for(e of zi)this[e]=new _l(e,tn[e],void 0,this)}setupFromTrue(){let e;for(e of ji)this[e]=tn[e];for(e of $i)this[e]=tn[e];for(e of Bi)this[e]=!0;for(e of zi)this[e]=new _l(e,!0,void 0,this)}setupFromArray(e){let t;for(t of ji)this[t]=tn[t];for(t of $i)this[t]=tn[t];for(t of Bi)this[t]=tn[t];for(t of zi)this[t]=new _l(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,ht)}setupFromObject(e){let t;for(t of(ht.ifd0=ht.ifd0||ht.image,ht.ifd1=ht.ifd1||ht.thumbnail,Object.assign(this,e),ji))this[t]=xf(e[t],tn[t]);for(t of $i)this[t]=xf(e[t],tn[t]);for(t of Bi)this[t]=xf(e[t],tn[t]);for(t of Zs)this[t]=new _l(t,tn[t],e[t],this);for(t of ht)this[t]=new _l(t,tn[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ht,zi),e.tiff===!0?this.batchEnableWithBool(ht,!0):e.tiff===!1?this.batchEnableWithUserValue(ht,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ht):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ht)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let o=t[i];this[i].enabled=o!==!1&&o!==void 0}}setupGlobalFilters(e,t,i,o=i){if(e&&e.length){for(let c of o)this[c].enabled=!1;let l=i0(e,i);for(let[c,f]of l)ih(this[c].pick,f),this[c].enabled=!0}else if(t&&t.length){let l=i0(t,i);for(let[c,f]of l)ih(this[c].skip,f)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:o,icc:l}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),o.enabled||e.skip.add(33723),l.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:o}=this;o.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=ht.some((l=>this[l].enabled===!0))||this.makerNote||this.userComment;for(let l of ht)this[l].finalizeFilters()}get onlyTiff(){return!wa.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Zs)this[e].enabled&&!Tt.has(e)&&lp("segment parser",e)}}function i0(r,e){let t,i,o,l,c=[];for(o of e){for(l of(t=Mt.get(o),i=[],t))(r.includes(l[0])||r.includes(l[1]))&&i.push(l[0]);i.length&&c.push([o,i])}return c}function xf(r,e){return r!==void 0?r:e!==void 0?e:void 0}function ih(r,e){for(let t of e)r.add(t)}xe(ro,"default",tn);class us{constructor(e){xe(this,"parsers",{}),xe(this,"output",{}),xe(this,"errors",[]),xe(this,"pushToErrors",(t=>this.errors.push(t))),this.options=ro.useCached(e)}async read(e){this.file=await vA(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,o]of xr)if(o.canHandle(e,t))return this.fileParser=new o(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),xt("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),rh(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async i=>{let o=await i.parse();i.assignToOutput(e,o)}));this.options.silentErrors&&(t=t.map((i=>i.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,i=Tt.get("tiff",e);var o;if(t.tiff?o={start:0,type:"tiff"}:t.jpeg&&(o=await this.fileParser.getOrFindSegment("tiff")),o===void 0)return;let l=await this.fileParser.ensureSegmentChunk(o),c=this.parsers.tiff=new i(l,e,t),f=await c.extractThumbnail();return t.close&&t.close(),f}}async function Oh(r,e){let t=new us(e);return await t.read(r),t.parse()}var wA=Object.freeze({__proto__:null,parse:Oh,Exifr:us,fileParsers:xr,segmentParsers:Tt,fileReaders:Cr,tagKeys:Mt,tagValues:Xn,tagRevivers:Yi,createDictionary:gt,extendDictionary:Js,fetchUrlAsArrayBuffer:Xs,readBlobAsArrayBuffer:Ys,chunkedProps:ji,otherSegments:wa,segments:Zs,tiffBlocks:ht,segmentsAndBlocks:zi,tiffExtractables:Bi,inheritables:Ea,allFormatters:$i,Options:ro});class Mh{constructor(e,t,i){xe(this,"errors",[]),xe(this,"ensureSegmentChunk",(async o=>{let l=o.start,c=o.size||65536;if(this.file.chunked)if(this.file.available(l,c))o.chunk=this.file.subarray(l,c);else try{o.chunk=await this.file.readChunk(l,c)}catch(f){xt(`Couldn't read segment: ${JSON.stringify(o)}. ${f.message}`)}else this.file.byteLength>l+c?o.chunk=this.file.subarray(l,c):o.size===void 0?o.chunk=this.file.subarray(l):xt("Segment unreachable: "+JSON.stringify(o));return o.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(Tt.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:o}=t,l=this.options[i];if(l&&l.enabled){let c=this.parsers[i];c&&c.append||c||this.createParser(i,o)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class Wn{static findPosition(e,t){let i=e.getUint16(t+2)+2,o=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,l=t+o,c=i-o;return{offset:t,length:i,headerLength:o,start:l,size:c,end:l+c}}static parse(e,t={}){return new this(e,new ro({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof hn?e:new hn(e)}constructor(e,t={},i){xe(this,"errors",[]),xe(this,"raw",new Map),xe(this,"handleError",(o=>{if(!this.options.silentErrors)throw o;this.errors.push(o.message)})),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=Yi.get(t),o=Xn.get(t),l=Mt.get(t),c=this.options[t],f=c.reviveValues&&!!i,p=c.translateValues&&!!o,y=c.translateKeys&&!!l,_={};for(let[T,x]of e)f&&i.has(T)?x=i.get(T)(x):p&&o.has(T)&&(x=this.translateValue(x,o.get(T))),y&&l.has(T)&&(T=l.get(T)||T),_[T]=x;return _}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}}xe(Wn,"headerLength",4),xe(Wn,"type",void 0),xe(Wn,"multiSegment",!1),xe(Wn,"canHandle",(()=>!1));function EA(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function TA(r){return r>=224&&r<=239}function IA(r,e,t){for(let[i,o]of Tt)if(o.canHandle(r,e,t))return i}class s0 extends Mh{constructor(...e){super(...e),xe(this,"appSegments",[]),xe(this,"jpegSegments",[]),xe(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Tt.keyList())):(e=e===void 0?Tt.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&Tt.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:i,findAll:o,wanted:l,remaining:c}=this;if(!o&&this.file.chunked&&(o=Array.from(l).some((f=>{let p=Tt.get(f),y=this.options[f];return p.multiSegment&&y.multiSegment})),o&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let f=!1;for(;c.size>0&&!f&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:p}=i,y=this.appSegments.some((_=>!this.file.available(_.offset||_.start,_.length||_.size)));if(f=e>p&&!y?!await i.readNextChunk(e):!await i.readNextChunk(p),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let i,o,l,c,f,p,{file:y,findAll:_,wanted:T,remaining:x,options:M}=this;for(;e<t;e++)if(y.getUint8(e)===255){if(i=y.getUint8(e+1),TA(i)){if(o=y.getUint16(e+2),l=IA(y,e,o),l&&T.has(l)&&(c=Tt.get(l),f=c.findPosition(y,e),p=M[l],f.type=l,this.appSegments.push(f),!_&&(c.multiSegment&&p.multiSegment?(this.unfinishedMultiSegment=f.chunkNumber<f.chunkCount,this.unfinishedMultiSegment||x.delete(l)):x.delete(l),x.size===0)))break;M.recordUnknownSegments&&(f=Wn.findPosition(y,e),f.marker=i,this.unknownSegments.push(f)),e+=o+1}else if(EA(i)){if(o=y.getUint16(e+2),i===218&&M.stopAfterSos!==!1)return;M.recordJpegSegments&&this.jpegSegments.push({offset:e,length:o,marker:i}),e+=o+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,i){let o,l,c,f=new Map;for(let p=0;p<t.length;p++)o=t[p],l=o[i],f.has(l)?c=f.get(l):f.set(l,c=[]),c.push(o);return Array.from(f)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,i])=>{let o=Tt.get(t,this.options);return o.handleMultiSegments?{type:t,chunk:o.handleMultiSegments(i)}:i[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}xe(s0,"type","jpeg"),xr.set("jpeg",s0);const SA=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class xA extends Wn{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:o,skip:l}=this.options[t];o=new Set(o);let c=o.size>0,f=l.size===0,p=this.chunk.getUint16(e);e+=2;for(let y=0;y<p;y++){let _=this.chunk.getUint16(e);if(c){if(o.has(_)&&(i.set(_,this.parseTag(e,_,t)),o.delete(_),o.size===0))break}else!f&&l.has(_)||i.set(_,this.parseTag(e,_,t));e+=12}return i}parseTag(e,t,i){let{chunk:o}=this,l=o.getUint16(e+2),c=o.getUint32(e+4),f=SA[l];if(f*c<=4?e+=8:e=o.getUint32(e+8),(l<1||l>13)&&xt(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${l}, offset ${e}`),e>o.byteLength&&xt(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${l}, offset ${e} is outside of chunk size ${o.byteLength}`),l===1)return o.getUint8Array(e,c);if(l===2)return js(o.getString(e,c));if(l===7)return o.getUint8Array(e,c);if(c===1)return this.parseTagValue(l,e);{let p=new((function(_){switch(_){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(l))(c),y=f;for(let _=0;_<c;_++)p[_]=this.parseTagValue(l,e),e+=y;return p}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:xt(`Invalid tiff type ${e}`)}}}class kf extends xA{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&xt("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&xt(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,op(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,op(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",o0(...e.get(2),e.get(1))),e.set("longitude",o0(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,o={};for(t of ht)if(e=this[t],!jw(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(o,i)}else o[t]=i;return this.makerNote&&(o.makerNote=this.makerNote),this.userComment&&(o.userComment=this.userComment),o}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,o]of Object.entries(t))this.assignObjectToOutput(e,i,o)}}function o0(r,e,t,i){var o=r+e/60+t/3600;return i!=="S"&&i!=="W"||(o*=-1),o}xe(kf,"type","tiff"),xe(kf,"headerLength",10),Tt.set("tiff",kf);var kA=Object.freeze({__proto__:null,default:wA,Exifr:us,fileParsers:xr,segmentParsers:Tt,fileReaders:Cr,tagKeys:Mt,tagValues:Xn,tagRevivers:Yi,createDictionary:gt,extendDictionary:Js,fetchUrlAsArrayBuffer:Xs,readBlobAsArrayBuffer:Ys,chunkedProps:ji,otherSegments:wa,segments:Zs,tiffBlocks:ht,segmentsAndBlocks:zi,tiffExtractables:Bi,inheritables:Ea,allFormatters:$i,Options:ro,parse:Oh});const im={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},sm=Object.assign({},im,{firstChunkSize:4e4,gps:[1,2,3,4]});async function $w(r){let e=new us(sm);await e.read(r);let t=await e.parse();if(t&&t.gps){let{latitude:i,longitude:o}=t.gps;return{latitude:i,longitude:o}}}const om=Object.assign({},im,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Hw(r){let e=new us(om);await e.read(r);let t=await e.extractThumbnail();return t&&Dh?Nh.from(t):t}async function Gw(r){let e=await this.thumbnail(r);if(e!==void 0){let t=new Blob([e]);return URL.createObjectURL(t)}}const am=Object.assign({},im,{firstChunkSize:4e4,ifd0:[274]});async function lm(r){let e=new us(am);await e.read(r);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const um=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let zs=!0,Bs=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let e=r.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;zs=Number(t)+.1*Number(i)<13.4,Bs=!1}}else if(r.includes("OS X 10")){let[,e]=r.match(/OS X 10[_.](\d+)/);zs=Bs=Number(e)<15}if(r.includes("Chrome/")){let[,e]=r.match(/Chrome\/(\d+)/);zs=Bs=Number(e)<81}else if(r.includes("Firefox/")){let[,e]=r.match(/Firefox\/(\d+)/);zs=Bs=Number(e)<77}}async function Ww(r){let e=await lm(r);return Object.assign({canvas:zs,css:Bs},um[e])}class CA extends hn{constructor(...e){super(...e),xe(this,"ranges",new AA),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let o=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(o)}else{let o=e+t;if(o>this.byteLength){let{dataView:l}=this._extend(o);this._swapDataView(l)}}}_extend(e){let t;t=Dh?Nh.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let o=super.set(e,t);return this.ranges.add(t,o.byteLength),o}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class AA{constructor(){xe(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let o=e+t,l=this.list.filter((c=>a0(e,c.offset,o)||a0(e,c.end,o)));if(l.length>0){e=Math.min(e,...l.map((f=>f.offset))),o=Math.max(o,...l.map((f=>f.end))),t=o-e;let c=l.shift();c.offset=e,c.length=t,c.end=o,this.list=this.list.filter((f=>!l.includes(f)))}else this.list.push({offset:e,length:t,end:o})}available(e,t){let i=e+t;return this.list.some((o=>o.offset<=e&&i<=o.end))}}function a0(r,e,t){return r<=e&&e<=t}class Vh extends CA{constructor(e,t){super(0),xe(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=await this.readChunk(e,t);return!!i&&i.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Cr.set("blob",class extends Vh{async readWhole(){this.chunked=!1;let r=await Ys(this.input);this._swapArrayBuffer(r)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(r,e){let t=e?r+e:void 0,i=this.input.slice(r,t),o=await Ys(i);return this.set(o,r,!0)}});var PA=Object.freeze({__proto__:null,default:kA,Exifr:us,fileParsers:xr,segmentParsers:Tt,fileReaders:Cr,tagKeys:Mt,tagValues:Xn,tagRevivers:Yi,createDictionary:gt,extendDictionary:Js,fetchUrlAsArrayBuffer:Xs,readBlobAsArrayBuffer:Ys,chunkedProps:ji,otherSegments:wa,segments:Zs,tiffBlocks:ht,segmentsAndBlocks:zi,tiffExtractables:Bi,inheritables:Ea,allFormatters:$i,Options:ro,parse:Oh,gpsOnlyOptions:sm,gps:$w,thumbnailOnlyOptions:om,thumbnail:Hw,thumbnailUrl:Gw,orientationOnlyOptions:am,orientation:lm,rotations:um,get rotateCanvas(){return zs},get rotateCss(){return Bs},rotation:Ww});Cr.set("url",class extends Vh{async readWhole(){this.chunked=!1;let r=await Xs(this.input);r instanceof ArrayBuffer?this._swapArrayBuffer(r):r instanceof Uint8Array&&this._swapBuffer(r)}async _readChunk(r,e){let t=e?r+e-1:void 0,i=this.options.httpHeaders||{};(r||t)&&(i.range=`bytes=${[r,t].join("-")}`);let o=await nm(this.input,{headers:i}),l=await o.arrayBuffer(),c=l.byteLength;if(o.status!==416)return c!==e&&(this.size=r+c),this.set(l,r,!0)}});hn.prototype.getUint64=function(r){let e=this.getUint32(r),t=this.getUint32(r+4);return e<1048575?e<<32|t:typeof Tc!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Tc(e)<<Tc(32)|Tc(t)):void xt("Trying to read 64b value but JS can only handle 53b numbers.")};class bA extends Mh{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let i=this.parseBoxHead(e);if(t.push(i),i.length===0)break;e+=i.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((i=>i.kind===t))}parseBoxHead(e){let t=this.file.getUint32(e),i=this.file.getString(e+4,4),o=e+8;return t===1&&(t=this.file.getUint64(e+8),o+=8),{offset:e,length:t,kind:i,start:o}}parseBoxFullHead(e){if(e.version!==void 0)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class qw extends bA{static canHandle(e,t){if(t!==0)return!1;let i=e.getUint16(2);if(i>50)return!1;let o=16,l=[];for(;o<i;)l.push(e.getString(o,4)),o+=4;return l.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;t.kind!=="meta";)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,i){await this.file.ensureChunk(t,i);let o=this.file.subarray(t,i);this.createParser(e,o)}async findIcc(e){let t=this.findBox(e,"iprp");if(t===void 0)return;let i=this.findBox(t,"ipco");if(i===void 0)return;let o=this.findBox(i,"colr");o!==void 0&&await this.registerSegment("icc",o.offset+12,o.length)}async findExif(e){let t=this.findBox(e,"iinf");if(t===void 0)return;let i=this.findBox(e,"iloc");if(i===void 0)return;let o=this.findExifLocIdInIinf(t),l=this.findExtentInIloc(i,o);if(l===void 0)return;let[c,f]=l;await this.file.ensureChunk(c,f);let p=4+this.file.getUint32(c);c+=p,f-=p,await this.registerSegment("tiff",c,f)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,i,o,l,c=e.start,f=this.file.getUint16(c);for(c+=2;f--;){if(t=this.parseBoxHead(c),this.parseBoxFullHead(t),i=t.start,t.version>=2&&(o=t.version===3?4:2,l=this.file.getString(i+o+2,4),l==="Exif"))return this.file.getUintBytes(i,o);c+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let i=e.start,[o,l]=this.get8bits(i++),[c,f]=this.get8bits(i++),p=e.version===2?4:2,y=e.version===1||e.version===2?2:0,_=f+o+l,T=e.version===2?4:2,x=this.file.getUintBytes(i,T);for(i+=T;x--;){let M=this.file.getUintBytes(i,p);i+=p+y+2+c;let z=this.file.getUint16(i);if(i+=2,M===t)return z>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(i+f,o),this.file.getUintBytes(i+f+o,l)];i+=z*_}}}class Kw extends qw{}xe(Kw,"type","heic");class l0 extends qw{}xe(l0,"type","avif"),xr.set("heic",Kw),xr.set("avif",l0),gt(Mt,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),gt(Mt,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),gt(Mt,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),gt(Xn,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Nl=gt(Xn,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const u0={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Nl.set(37392,u0),Nl.set(41488,u0);const Cf={0:"Normal",1:"Low",2:"High"};function c0(r){return typeof r=="object"&&r.length!==void 0?r[0]:r}function h0(r){let e=Array.from(r).slice(1);return e[1]>15&&(e=e.map((t=>String.fromCharCode(t)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function Af(r){if(typeof r=="string"){var[e,t,i,o,l,c]=r.trim().split(/[-: ]/g).map(Number),f=new Date(e,t-1,i);return Number.isNaN(o)||Number.isNaN(l)||Number.isNaN(c)||(f.setHours(o),f.setMinutes(l),f.setSeconds(c)),Number.isNaN(+f)?r:f}}function wl(r){if(typeof r=="string")return r;let e=[];if(r[1]===0&&r[r.length-1]===0)for(let t=0;t<r.length;t+=2)e.push(d0(r[t+1],r[t]));else for(let t=0;t<r.length;t+=2)e.push(d0(r[t],r[t+1]));return js(String.fromCodePoint(...e))}function d0(r,e){return r<<8|e}Nl.set(41992,Cf),Nl.set(41993,Cf),Nl.set(41994,Cf),gt(Yi,["ifd0","ifd1"],[[50827,function(r){return typeof r!="string"?zw(r):r}],[306,Af],[40091,wl],[40092,wl],[40093,wl],[40094,wl],[40095,wl]]),gt(Yi,"exif",[[40960,h0],[36864,h0],[36867,Af],[36868,Af],[40962,c0],[40963,c0]]),gt(Yi,"gps",[[0,r=>Array.from(r).join(".")],[7,r=>Array.from(r).join(":")]]);class Pf extends Wn{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1752462448&&e.getString(t+4,20)==="http://ns.adobe.com/"}static headerLength(e,t){return e.getString(t+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,t){let i=super.findPosition(e,t);return i.multiSegment=i.extended=i.headerLength===79,i.multiSegment?(i.chunkCount=e.getUint8(t+72),i.chunkNumber=e.getUint8(t+76),e.getUint8(t+77)!==0&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(e){return e.map((t=>t.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:hn.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(l){let c={},f={};for(let p of Jw)c[p]=[],f[p]=0;return l.replace(OA,((p,y,_)=>{if(y==="<"){let T=++f[_];return c[_].push(T),`${p}#${T}`}return`${p}#${c[_].pop()}`}))})(e);let t=Zo.findAll(e,"rdf","Description");t.length===0&&t.push(new Zo("rdf","Description",void 0,e));let i,o={};for(let l of t)for(let c of l.properties)i=DA(c.ns,o),Qw(c,i);return(function(l){let c;for(let f in l)c=l[f]=rh(l[f]),c===void 0&&delete l[f];return rh(l)})(o)}assignToOutput(e,t){if(this.localOptions.parse)for(let[i,o]of Object.entries(t))switch(i){case"tiff":this.assignObjectToOutput(e,"ifd0",o);break;case"exif":this.assignObjectToOutput(e,"exif",o);break;case"xmlns":break;default:this.assignObjectToOutput(e,i,o)}else e.xmp=t}}xe(Pf,"type","xmp"),xe(Pf,"multiSegment",!0),Tt.set("xmp",Pf);class sh{static findAll(e){return Xw(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(sh.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],o=e[3].slice(1,-1);return o=Yw(o),new sh(t,i,o)}constructor(e,t,i){this.ns=e,this.name=t,this.value=i}serialize(){return this.value}}class Zo{static findAll(e,t,i){if(t!==void 0||i!==void 0){t=t||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var o=new RegExp(`<(${t}):(${i})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else o=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Xw(e,o).map(Zo.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],o=e[4],l=e[8];return new Zo(t,i,o,l)}constructor(e,t,i,o){this.ns=e,this.name=t,this.attrString=i,this.innerXml=o,this.attrs=sh.findAll(i),this.children=Zo.findAll(o),this.value=this.children.length===0?Yw(o):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return e==="rdf"&&(t==="Seq"||t==="Bag"||t==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return NA(this.children.map(RA));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let t of this.properties)Qw(t,e);return this.value!==void 0&&(e.value=this.value),rh(e)}}function Qw(r,e){let t=r.serialize();t!==void 0&&(e[r.name]=t)}var RA=r=>r.serialize(),NA=r=>r.length===1?r[0]:r,DA=(r,e)=>e[r]?e[r]:e[r]={};function Xw(r,e){let t,i=[];if(!r)return i;for(;(t=e.exec(r))!==null;)i.push(t);return i}function Yw(r){if((function(i){return i==null||i==="null"||i==="undefined"||i===""||i.trim()===""})(r))return;let e=Number(r);if(!Number.isNaN(e))return e;let t=r.toLowerCase();return t==="true"||t!=="false"&&r.trim()}const Jw=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],OA=new RegExp(`(<|\\/)(${Jw.join("|")})`,"g");var Zw=Object.freeze({__proto__:null,default:PA,Exifr:us,fileParsers:xr,segmentParsers:Tt,fileReaders:Cr,tagKeys:Mt,tagValues:Xn,tagRevivers:Yi,createDictionary:gt,extendDictionary:Js,fetchUrlAsArrayBuffer:Xs,readBlobAsArrayBuffer:Ys,chunkedProps:ji,otherSegments:wa,segments:Zs,tiffBlocks:ht,segmentsAndBlocks:zi,tiffExtractables:Bi,inheritables:Ea,allFormatters:$i,Options:ro,parse:Oh,gpsOnlyOptions:sm,gps:$w,thumbnailOnlyOptions:om,thumbnail:Hw,thumbnailUrl:Gw,orientationOnlyOptions:am,orientation:lm,rotations:um,get rotateCanvas(){return zs},get rotateCss(){return Bs},rotation:Ww});let f0=nh("fs",(r=>r.promises));Cr.set("fs",class extends Vh{async readWhole(){this.chunked=!1,this.fs=await f0;let r=await this.fs.readFile(this.input);this._swapBuffer(r)}async readChunked(){this.chunked=!0,this.fs=await f0,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(r,e){this.fh===void 0&&await this.open(),r+e>this.size&&(e=this.size-r);var t=this.subarray(r,e,!0);return await this.fh.read(t.dataView,0,e,r),t}async close(){if(this.fh){let r=this.fh;this.fh=void 0,await r.close()}}});Cr.set("base64",class extends Vh{constructor(...r){super(...r),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(r,e){let t,i,o=this.input;r===void 0?(r=0,t=0,i=0):(t=4*Math.floor(r/3),i=r-t/4*3),e===void 0&&(e=this.size);let l=r+e,c=t+4*Math.ceil(l/3);o=o.slice(t,c);let f=Math.min(e,this.size-r);if(Dh){let p=Nh.from(o,"base64").slice(i,i+f);return this.set(p,r,!0)}{let p=this.subarray(r,f,!0),y=atob(o),_=p.toUint8();for(let T=0;T<f;T++)_[T]=y.charCodeAt(i+T);return p}}});class p0 extends Mh{static canHandle(e,t){return t===18761||t===19789}extendOptions(e){let{ifd0:t,xmp:i,iptc:o,icc:l}=e;i.enabled&&t.deps.add(700),o.enabled&&t.deps.add(33723),l.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:i,icc:o}=this.options;if(e.enabled||t.enabled||i.enabled||o.enabled){let l=Math.max(op(this.options),this.options.chunkSize);await this.file.ensureChunk(0,l),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}xe(p0,"type","tiff"),xr.set("tiff",p0);let MA=nh("zlib");const VA=["ihdr","iccp","text","itxt","exif"];class m0 extends Mh{constructor(...e){super(...e),xe(this,"catchError",(t=>this.errors.push(t))),xe(this,"metaChunks",[]),xe(this,"unknownChunks",[])}static canHandle(e,t){return t===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:i}=this;for(;e<t;){let o=i.getUint32(e),l=i.getUint32(e+4),c=i.getString(e+4,4).toLowerCase(),f=o+4+4+4,p={type:c,offset:e,length:f,start:e+4+4,size:o,marker:l};VA.includes(c)?this.metaChunks.push(p):this.unknownChunks.push(p),e+=f}}parseTextChunks(){let e=this.metaChunks.filter((t=>t.type==="text"));for(let t of e){let[i,o]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(i,o)}}injectKeyValToIhdr(e,t){let i=this.parsers.ihdr;i&&i.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find((t=>t.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((t=>t.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((t=>t.type==="itxt"));for(let t of e)t.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find((f=>f.type==="iccp"));if(!e)return;let{chunk:t}=e,i=t.getUint8Array(0,81),o=0;for(;o<80&&i[o]!==0;)o++;let l=o+2,c=t.getString(0,o);if(this.injectKeyValToIhdr("ProfileName",c),th){let f=await MA,p=t.getUint8Array(l);p=f.inflateSync(p),this.injectSegment("icc",p)}}}xe(m0,"type","png"),xr.set("png",m0),gt(Mt,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Js(Mt,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let g0=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Js(Mt,"ifd0",g0),Js(Mt,"exif",g0),gt(Xn,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class bf extends Wn{static canHandle(e,t){return e.getUint8(t+1)===224&&e.getUint32(t+4)===1246120262&&e.getUint8(t+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}xe(bf,"type","jfif"),xe(bf,"headerLength",9),Tt.set("jfif",bf),gt(Mt,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class y0 extends Wn{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}xe(y0,"type","ihdr"),Tt.set("ihdr",y0),gt(Mt,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),gt(Xn,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Oc extends Wn{static canHandle(e,t){return e.getUint8(t+1)===226&&e.getUint32(t+4)===1229144927}static findPosition(e,t){let i=super.findPosition(e,t);return i.chunkNumber=e.getUint8(t+16),i.chunkCount=e.getUint8(t+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(e){return(function(t){let i=(function(o){let l=o[0].constructor,c=0;for(let y of o)c+=y.length;let f=new l(c),p=0;for(let y of o)f.set(y,p),p+=y.length;return f})(t.map((o=>o.chunk.toUint8())));return new hn(i)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&xt("ICC header is too short");for(let[t,i]of Object.entries(LA)){t=parseInt(t,10);let o=i(this.chunk,t);o!=="\0\0\0\0"&&e.set(t,o)}}parseTags(){let e,t,i,o,l,{raw:c}=this,f=this.chunk.getUint32(128),p=132,y=this.chunk.byteLength;for(;f--;){if(e=this.chunk.getString(p,4),t=this.chunk.getUint32(p+4),i=this.chunk.getUint32(p+8),o=this.chunk.getString(t,4),t+i>y)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");l=this.parseTag(o,t,i),l!==void 0&&l!=="\0\0\0\0"&&c.set(e,l),p+=12}}parseTag(e,t,i){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,i);case"sig ":return this.parseSig(t)}if(!(t+i>this.chunk.byteLength))return this.chunk.getUint8Array(t,i)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return js(this.chunk.getString(e+12,t))}parseText(e,t){return js(this.chunk.getString(e+8,t-8))}parseSig(e){return js(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,i=t.getUint32(e+8),o=t.getUint32(e+12),l=e+16,c=[];for(let f=0;f<i;f++){let p=t.getString(l+0,2),y=t.getString(l+2,2),_=t.getUint32(l+4),T=t.getUint32(l+8)+e,x=js(t.getUnicodeString(T,_));c.push({lang:p,country:y,text:x}),l+=o}return i===1?c[0].text:c}translateValue(e,t){return typeof e=="string"?t[e]||t[e.toLowerCase()]||e:t[e]||e}}xe(Oc,"type","icc"),xe(Oc,"multiSegment",!0),xe(Oc,"headerLength",18);const LA={4:Wr,8:function(r,e){return[r.getUint8(e),r.getUint8(e+1)>>4,r.getUint8(e+1)%16].map((t=>t.toString(10))).join(".")},12:Wr,16:Wr,20:Wr,24:function(r,e){const t=r.getUint16(e),i=r.getUint16(e+2)-1,o=r.getUint16(e+4),l=r.getUint16(e+6),c=r.getUint16(e+8),f=r.getUint16(e+10);return new Date(Date.UTC(t,i,o,l,c,f))},36:Wr,40:Wr,48:Wr,52:Wr,64:(r,e)=>r.getUint32(e),80:Wr};function Wr(r,e){return js(r.getString(e,4))}Tt.set("icc",Oc),gt(Mt,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Ic={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},v0={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};gt(Xn,"icc",[[4,Ic],[12,v0],[40,Object.assign({},Ic,v0)],[48,Ic],[80,Ic],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Sc extends Wn{static canHandle(e,t,i){return e.getUint8(t+1)===237&&e.getString(t+4,9)==="Photoshop"&&this.containsIptc8bim(e,t,i)!==void 0}static headerLength(e,t,i){let o,l=this.containsIptc8bim(e,t,i);if(l!==void 0)return o=e.getUint8(t+l+7),o%2!=0&&(o+=1),o===0&&(o=4),l+8+o}static containsIptc8bim(e,t,i){for(let o=0;o<i;o++)if(this.isIptcSegmentHead(e,t+o))return o}static isIptcSegmentHead(e,t){return e.getUint8(t)===56&&e.getUint32(t)===943868237&&e.getUint16(t+4)===1028}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,i=!1;for(let o=0;o<t;o++)if(this.chunk.getUint8(o)===28&&this.chunk.getUint8(o+1)===2){i=!0;let l=this.chunk.getUint16(o+3),c=this.chunk.getUint8(o+2),f=this.chunk.getLatin1String(o+5,l);e.set(c,this.pluralizeValue(e.get(c),f)),o+=4+l}else if(i)break;return this.translate(),this.output}pluralizeValue(e,t){return e!==void 0?e instanceof Array?(e.push(t),e):[e,t]:t}}xe(Sc,"type","iptc"),xe(Sc,"translateValues",!1),xe(Sc,"reviveValues",!1),Tt.set("iptc",Sc),gt(Mt,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),gt(Xn,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);async function e1(r,e){try{const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${r}&lon=${e}&zoom=10`,{headers:{"Accept-Language":"en","User-Agent":"GalleryApp/1.0"}});if(!t.ok)throw new Error("Geocoding failed");const o=(await t.json()).address,l=o.city||o.town||o.village||o.county||o.state,c=o.country;return l&&c?`${l}, ${c}`:l||c||void 0}catch(t){console.warn("Failed to get city name:",t);return}}const ri=()=>{const[r,e]=X.useState([]),[t,i]=X.useState([]),[o,l]=X.useState(!0),[c,f]=X.useState(null),p=X.useCallback(async()=>{try{l(!0);const{photos:j,albums:K}=await oA();e(j.sort((ne,Y)=>new Date(Y.date).getTime()-new Date(ne.date).getTime())),i(K)}catch(j){f("Failed to fetch gallery data."),console.error(j)}finally{l(!1)}},[]);X.useEffect(()=>{p()},[p]);const y=X.useMemo(()=>t.map(K=>{const ne=r.filter(S=>S.albumId===K.id);let Y;K.coverPhotoId&&(Y=r.find(S=>S.id===K.coverPhotoId)),!Y&&ne.length>0&&(Y=ne[0]);let C;if(ne.length>0){const S=ne.map(A=>new Date(A.takenAt||A.date).getFullYear());C={start:Math.min(...S),end:Math.max(...S)}}return{...K,photoCount:ne.length,coverPhotoUrl:Y==null?void 0:Y.url,yearRange:C}}).sort((K,ne)=>{var S,A;const Y=((S=K.yearRange)==null?void 0:S.end)||0,C=((A=ne.yearRange)==null?void 0:A.end)||0;return Y!==C?C-Y:K.name.localeCompare(ne.name)}),[t,r]),_=async(j,K)=>{try{const ne=r.find(Y=>Y.id===j);if(!ne)throw new Error("Photo not found in local state");await lA(j,ne._chunkId,K),e(Y=>Y.map(C=>C.id===j?{...C,...K}:C))}catch(ne){throw console.error(ne),ne}},T=async j=>{try{const K=r.find(ne=>ne.id===j);if(!K)throw new Error("Photo not found in local state");await dA(K),await uA(j,K._chunkId),e(ne=>ne.filter(Y=>Y.id!==j))}catch(K){throw console.error(K),K}},x=async(j,K,ne)=>{try{if(K.theme&&ne&&K.theme!==ne){const Y=t.filter(C=>C.theme===ne).map(C=>Zv(C.id,{theme:K.theme}));await Promise.all(Y)}await Zv(j,K),i(Y=>Y.map(C=>C.id===j?{...C,...K}:C))}catch(Y){throw console.error("Failed to update album:",Y),Y}},M=async j=>{try{await e0(j),i(K=>K.filter(ne=>ne.id!==j)),p()}catch(K){throw console.error(K),K}},z=async(j,K,ne)=>{try{const Y=r.filter(C=>C.albumId===j).map(C=>({photoId:C.id,chunkId:C._chunkId}));Y.length>0&&await cA(Y,K),ne&&await e0(j),p()}catch(Y){throw console.error(Y),Y}},$=async(j,K,ne)=>{try{const Y={id:`album_${Date.now()}`,name:j,description:K,theme:ne,createdAt:new Date().toISOString()};return await hA(Y),i(C=>[...C,Y]),Y.id}catch(Y){throw console.error(Y),Y}},W=async(j,K,ne,Y)=>{var V;let C=Y||{};if(!Y)try{const k=await Zw.parse(j,{tiff:!0,exif:!0,gps:!0});k&&(C={takenAt:(V=k.DateTimeOriginal)==null?void 0:V.toISOString(),cameraMake:k.Make,cameraModel:k.Model,fNumber:k.FNumber,exposureTime:k.ExposureTime,iso:k.ISO,gps:k.latitude&&k.longitude?{latitude:k.latitude,longitude:k.longitude}:void 0})}catch(k){console.warn(`Failed to extract EXIF data for ${j.name}:`,k)}if(C.gps&&!C.locationName){const k=await e1(C.gps.latitude,C.gps.longitude);k&&(C.locationName=k)}const S=await fA(j),A=new Image;A.src=S,await A.decode();const N={id:`photo_${Date.now()}-${Math.random().toString(36).substr(2,9)}`,url:S,date:new Date().toISOString().split("T")[0],title:K,albumId:ne,width:A.width,height:A.height,aspectRatio:A.width>A.height?"landscape":"portrait",...C},D=await aA(N);return{...N,_chunkId:D}};return{photos:r,albums:y,loading:o,error:c,refetch:p,uploadAndAddPhoto:async(j,K,ne,Y)=>{try{const C=await W(j,K,ne,Y);e(S=>[C,...S])}catch(C){throw console.error(C),C}},batchUploadPhotos:async(j,K,ne)=>{try{let Y=0;const C=j.length,S=[],A=3;for(let N=0;N<j.length;N+=A){const V=j.slice(N,N+A).map(async Ae=>{const He=await W(Ae,Ae.name.replace(/\.[^/.]+$/,""),K);return Y++,ne==null||ne(Y,C),He}),k=await Promise.all(V);S.push(...k)}e(N=>[...S,...N])}catch(Y){throw console.error(Y),Y}},createAlbum:$,updatePhotoDetails:_,deletePhotoItem:T,updateAlbum:x,deleteAlbumItem:M,transferAlbumPhotos:z}};function cm({albums:r,selectedAlbumId:e,onSelect:t,onOpenChange:i}){const[o,l]=X.useState(!1),[c,f]=X.useState("");X.useEffect(()=>{i==null||i(o)},[o,i]);const p=X.useMemo(()=>r.filter(_=>_.name.toLowerCase().includes(c.toLowerCase())||_.theme.toLowerCase().includes(c.toLowerCase())),[r,c]),y=r.find(_=>_.id===e);return E.jsxs("div",{className:"relative",children:[E.jsx("button",{type:"button",onClick:()=>l(!o),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white text-left focus:outline-none focus:border-white/40",children:y?`${y.name} (${y.theme})`:"Select an album..."}),o&&E.jsxs("div",{className:"absolute z-10 top-full mt-1 w-full bg-zinc-800 border border-white/10 rounded-lg shadow-lg p-2 space-y-2",children:[E.jsxs("div",{className:"relative",children:[E.jsx(X0,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),E.jsx("input",{type:"text",placeholder:"Search albums...",value:c,onChange:_=>f(_.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-black/50 border border-white/10 rounded text-sm text-white"})]}),E.jsxs("div",{className:"max-h-40 min-h-[10rem] overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-600",children:[p.map(_=>E.jsxs("button",{type:"button",onClick:()=>{t(_.id),l(!1)},className:"w-full text-left px-2 py-1.5 rounded hover:bg-white/10 flex justify-between items-center",children:[E.jsxs("span",{className:"text-white",children:[_.name," ",E.jsxs("span",{className:"text-white/50",children:["(",_.theme,")"]})]}),e===_.id&&E.jsx(_T,{className:"w-4 h-4 text-blue-400"})]},_.id)),p.length===0&&E.jsx("div",{className:"flex items-center justify-center h-full",children:E.jsx("p",{className:"text-sm text-white/40",children:"No albums found."})})]})]})]})}const zl={HOME_GRID:400,GALLERY_GRID_PORTRAIT:400,GALLERY_GRID_LANDSCAPE:800,ALBUM_COVER:800,VIEWER_THUMBNAIL:100},Wo={BREAKPOINTS:[800,1200,1600,2e3,2400],MAX_WIDTH_LANDSCAPE:2400,MAX_WIDTH_PORTRAIT:1800,MIN_WIDTH:800},t1=(r,e,t)=>{const i=Math.min(e||1,2),o=r*i;let l=Wo.BREAKPOINTS.find(f=>f>=o)||Wo.BREAKPOINTS[Wo.BREAKPOINTS.length-1];const c=t==="portrait"?Wo.MAX_WIDTH_PORTRAIT:Wo.MAX_WIDTH_LANDSCAPE;return Math.max(Math.min(l,c),Wo.MIN_WIDTH)},FA=(r,e)=>r<768&&e>=800?400:e;function hm({photos:r,initialIndex:e,onClose:t,albumName:i,showThumbnails:o=!1,isEditMode:l=!1}){const[c,f]=X.useState(e),[p,y]=X.useState(!1),[_,T]=X.useState(!1),[x,M]=X.useState(1600),z=X.useRef(null),{albums:$,updatePhotoDetails:W,deletePhotoItem:le,updateAlbum:ae}=ri(),j=r[c],[K,ne]=X.useState((j==null?void 0:j.title)||""),[Y,C]=X.useState((j==null?void 0:j.albumId)||""),[S,A]=X.useState(!1),[N,D]=X.useState(!1),[V,k]=X.useState(!1);X.useEffect(()=>{j&&(ne(j.title),C(j.albumId))},[j]);const Ae=X.useMemo(()=>!j||!j.albumId?null:$.find(b=>b.id===j.albumId),[j,$]),He=X.useMemo(()=>Ae?Ae.coverPhotoId?Ae.coverPhotoId===j.id:Ae.coverPhotoUrl===j.url:!1,[Ae,j]),Be=async()=>{if(j){A(!0);try{await W(j.id,{title:K,albumId:Y}),y(!1)}catch(b){console.error("Failed to save photo details:",b),alert("Failed to save changes.")}finally{A(!1)}}},Ve=async()=>{if(j&&confirm(`Are you sure you want to delete "${j.title}"? This action cannot be undone.`)){D(!0);try{await le(j.id),t()}catch(b){console.error("Failed to delete photo:",b),alert("Failed to delete photo.")}finally{D(!1)}}},H=async()=>{if(!(!j||!Ae)){k(!0);try{await ae(Ae.id,{coverPhotoId:j.id})}catch(b){console.error("Failed to set cover photo:",b),alert("Failed to set cover photo.")}finally{k(!1)}}},se=X.useCallback(()=>{f(b=>b===0?r.length-1:b-1)},[r.length]),ie=X.useCallback(()=>{f(b=>b===r.length-1?0:b+1)},[r.length]);return X.useEffect(()=>{const b=q=>{q.key==="ArrowLeft"&&se(),q.key==="ArrowRight"&&ie(),q.key==="Escape"&&(_?T(!1):p?y(!1):t()),q.key==="i"&&y(he=>!he)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[se,ie,t,p,_]),X.useEffect(()=>{if(o&&z.current){const b=z.current.children[c];b&&b.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[c,o]),X.useEffect(()=>{if(!j)return;const b=()=>{const ye=t1(window.innerWidth,window.devicePixelRatio,j.aspectRatio);M(ye)};b();let q;const he=()=>{clearTimeout(q),q=window.setTimeout(b,150)};return window.addEventListener("resize",he),()=>{window.removeEventListener("resize",he),clearTimeout(q)}},[j]),j?E.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",onClick:t,children:[E.jsxs("div",{className:`absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-20 pointer-events-none transition-opacity duration-300 ${_?"opacity-0":"opacity-100"}`,children:[E.jsxs("button",{onClick:b=>{b.stopPropagation(),t()},className:"pointer-events-auto text-white/60 hover:text-white flex items-center gap-2 transition-colors p-2",children:[E.jsx(wp,{className:"w-8 h-8"}),i&&E.jsx("span",{className:"text-lg font-light drop-shadow-md",children:i})]}),E.jsx("button",{onClick:b=>{b.stopPropagation(),y(!p)},className:`pointer-events-auto p-2 rounded-full transition-colors mr-2 ${p?"bg-white text-black":"bg-black/20 text-white/80 hover:text-white"}`,children:E.jsx(FT,{className:"w-6 h-6"})})]}),E.jsxs("div",{className:"flex-1 flex overflow-hidden relative",onClick:b=>b.stopPropagation(),children:[E.jsxs("div",{className:`relative flex-1 flex items-center justify-center transition-all duration-300 ease-in-out ${_?"p-0":"p-4 md:p-12"} ${p&&!_?"mr-80":"mr-0"}`,onClick:()=>T(!_),children:[E.jsx("button",{onClick:b=>{b.stopPropagation(),se()},className:`absolute left-4 z-10 text-white/60 hover:text-white transition-all duration-300 ${_?"opacity-0 hover:opacity-100":"opacity-100"}`,children:E.jsx(ET,{className:"w-10 h-10"})}),E.jsx("button",{onClick:b=>{b.stopPropagation(),ie()},className:`absolute right-4 z-10 text-white/60 hover:text-white transition-all duration-300 ${_?"opacity-0 hover:opacity-100":"opacity-100"}`,children:E.jsx(IT,{className:"w-10 h-10"})}),E.jsx("img",{src:ha(j.url,x),alt:j.title,className:`max-w-full max-h-full object-contain shadow-2xl animate-fade-in cursor-pointer transition-transform duration-300 ${_?"scale-100":""}`},j.id)]}),E.jsx("div",{className:`bg-zinc-900 border-l border-white/10 overflow-y-auto transition-all duration-300 ease-in-out absolute right-0 top-0 bottom-0 z-20 ${p&&!_?"w-80 translate-x-0":"w-0 translate-x-full border-none"}`,children:E.jsxs("div",{className:"p-6 w-80 flex flex-col h-full",children:[E.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l?E.jsx("input",{type:"text",value:K,onChange:b=>ne(b.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-1 text-xl text-white focus:outline-none focus:border-white/40 font-light"}):E.jsx("h3",{className:"text-xl text-white font-light",children:j.title}),E.jsx("button",{onClick:()=>y(!1),className:"text-white/40 hover:text-white ml-4",children:E.jsx(fa,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"space-y-6 text-white flex-1",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center gap-2 text-white/60 text-sm mb-2",children:[E.jsx(W0,{className:"w-4 h-4 flex-shrink-0"}),E.jsx("span",{children:j.takenAt?new Date(j.takenAt).toLocaleDateString():j.date})]}),(j.location||j.locationName)&&E.jsxs("div",{className:"flex items-center gap-2 text-white/60 text-sm",children:[E.jsx(Uc,{className:"w-4 h-4 flex-shrink-0"}),E.jsx("span",{children:j.location||j.locationName})]})]}),E.jsxs("div",{className:"border-t border-white/10 pt-4",children:[E.jsx("h4",{className:"text-xs font-bold text-white/40 uppercase mb-2",children:"Album"}),l?E.jsx(cm,{albums:$,selectedAlbumId:Y,onSelect:C}):E.jsxs("div",{className:"flex items-center gap-2 text-white/80 text-sm",children:[E.jsx(OT,{className:"w-4 h-4 flex-shrink-0"}),E.jsx("span",{children:(Ae==null?void 0:Ae.name)||"Uncategorized"})]})]}),(j.cameraModel||j.fNumber)&&E.jsxs("div",{className:"border-t border-white/10 pt-4 space-y-3",children:[E.jsx("h4",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:"EXIF Data"}),j.cameraModel&&E.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[E.jsx(q0,{className:"w-4 h-4 flex-shrink-0"}),E.jsxs("span",{children:[j.cameraMake," ",j.cameraModel]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-white/80",children:[j.fNumber&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(G0,{className:"w-4 h-4 flex-shrink-0"}),E.jsxs("span",{children:["f/",Number(j.fNumber.toFixed(4))]})]}),j.exposureTime&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(K0,{className:"w-4 h-4 flex-shrink-0"}),E.jsxs("span",{children:["1/",Math.round(1/j.exposureTime),"s"]})]}),j.iso&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xs font-bold border border-white/40 px-1 rounded flex-shrink-0",children:"ISO"}),E.jsx("span",{children:j.iso})]})]})]}),j.gps&&E.jsx("div",{className:"border-t border-white/10 pt-4",children:E.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${j.gps.latitude},${j.gps.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[E.jsx(Uc,{className:"w-4 h-4 flex-shrink-0"}),"View on Map"]})})]}),l&&E.jsxs("div",{className:"mt-auto pt-6 space-y-3",children:[E.jsxs("button",{onClick:H,disabled:V||He,className:`w-full font-medium py-2 rounded flex items-center justify-center gap-2 transition-colors ${He?"bg-green-600/20 text-green-400 cursor-default":"bg-zinc-800 text-white hover:bg-zinc-700"}`,children:[V?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(VT,{className:"w-4 h-4"}),He?"Current Cover Image":"Set as Cover Image"]}),E.jsxs("button",{onClick:Be,disabled:S,className:"w-full bg-white text-black font-medium py-2 rounded hover:bg-white/90 disabled:opacity-50 flex items-center justify-center gap-2",children:[S?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(Q0,{className:"w-4 h-4"}),S?"Saving...":"Save Changes"]}),E.jsxs("button",{onClick:Ve,disabled:N,className:"w-full bg-red-600 text-white font-medium py-2 rounded hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[N?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(Y0,{className:"w-4 h-4"}),N?"Deleting...":"Delete Photo"]})]})]})})]}),o&&E.jsx("div",{className:`h-20 bg-black/80 backdrop-blur-sm border-t border-white/10 flex items-center justify-center px-4 z-20 transition-transform duration-300 ${_?"translate-y-full":"translate-y-0"}`,onClick:b=>b.stopPropagation(),children:E.jsx("div",{ref:z,className:"flex gap-2 overflow-x-auto max-w-full px-4 py-2 scrollbar-hide",children:r.map((b,q)=>{const he=$.find(Ne=>Ne.id===b.albumId),ye=he&&he.coverPhotoUrl===b.url;return E.jsx("button",{onClick:()=>f(q),className:`relative flex-shrink-0 w-12 h-12 rounded overflow-hidden transition-all duration-300 
                    ${q===c?"ring-2 ring-white scale-110 opacity-100":"opacity-40 hover:opacity-70 hover:scale-105"}
                    ${l&&ye?"ring-2 ring-yellow-400 ring-offset-1 ring-offset-black animate-pulse":""}
                  `,children:E.jsx("img",{src:ha(b.url,zl.VIEWER_THUMBNAIL),alt:"",className:"w-full h-full object-cover"})},b.id)})})})]}):null}function UA({albumId:r,onBack:e,isEditMode:t=!1}){const[i,o]=X.useState(null),[l,c]=X.useState(""),[f,p]=X.useState(window.innerWidth),{photos:y,albums:_,loading:T,error:x}=ri();X.useEffect(()=>{const $=()=>p(window.innerWidth);return window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]);const M=X.useMemo(()=>{const W=[...y.filter(ae=>{var j;if(r&&ae.albumId!==r)return!1;if(l){const K=l.toLowerCase(),ne=_.find(Y=>Y.id===ae.albumId);return ae.title.toLowerCase().includes(K)||((j=ae.locationName)==null?void 0:j.toLowerCase().includes(K))||(ae.takenAt||ae.date).toLowerCase().includes(K)||(ne==null?void 0:ne.name.toLowerCase().includes(K))||(ne==null?void 0:ne.theme.toLowerCase().includes(K))}return!0}).sort((ae,j)=>{const K=new Date(ae.takenAt||ae.date).getTime();return new Date(j.takenAt||j.date).getTime()-K})];let le=0;for(let ae=0;ae<W.length-1;ae++){const j=le%6,K=W[ae],ne=W[ae+1],Y=K.aspectRatio==="landscape"?2:1,C=ne.aspectRatio==="landscape"?2:1;j===4&&Y===1&&C===2&&([W[ae],W[ae+1]]=[ne,K]);const S=W[ae].aspectRatio==="landscape"?2:1;le+=S}return W},[y,_,r,l]),z=X.useMemo(()=>r?_.find($=>$.id===r):null,[_,r]);return T?E.jsx("div",{className:"text-white text-center py-12",children:"Loading..."}):x?E.jsx("div",{className:"text-red-500 text-center py-12",children:x}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 py-12",children:[E.jsx("div",{className:"mb-8",children:r&&z?E.jsxs(E.Fragment,{children:[E.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-white/60 hover:text-white mb-4 transition-colors",children:[E.jsx(wp,{className:"w-4 h-4"}),"Back to Albums"]}),E.jsx("h2",{className:"text-3xl text-white font-light",children:z.name}),E.jsx("p",{className:"text-white/60 mt-2",children:z.description})]}):E.jsx("div",{className:"max-w-2xl mx-auto",children:E.jsxs("div",{className:"relative",children:[E.jsx(X0,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),E.jsx("input",{type:"text",placeholder:"Search by title, location, date, album, or theme...",value:l,onChange:$=>c($.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-full text-white placeholder-white/40 focus:outline-none focus:border-white/60 transition-colors"})]})})}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-0",children:M.map($=>E.jsx("div",{className:`p-1.5 ${$.aspectRatio==="landscape"?"md:col-span-2":""}`,children:E.jsxs("div",{className:`group relative overflow-hidden cursor-pointer rounded-lg w-full h-full aspect-square ${$.aspectRatio==="landscape"?"md:aspect-[3/2]":"md:aspect-[3/4]"}`,onClick:()=>o($),children:[E.jsx("img",{src:ha($.url,FA(f,$.aspectRatio==="portrait"?zl.GALLERY_GRID_PORTRAIT:zl.GALLERY_GRID_LANDSCAPE)),alt:$.title,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),E.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors duration-300 flex items-end p-4 opacity-0 group-hover:opacity-100",children:E.jsxs("div",{className:"text-white",children:[E.jsx("p",{className:"text-sm font-medium truncate",children:$.title}),E.jsx("p",{className:"text-xs text-white/60",children:$.date})]})})]})},$.id))}),M.length===0&&E.jsx("div",{className:"text-center py-20 text-white/40",children:E.jsx("p",{children:"No photos found for your search."})})]}),i&&E.jsx(hm,{photos:M,initialIndex:M.findIndex($=>$.id===i.id),onClose:()=>o(null),albumName:z==null?void 0:z.name,isEditMode:t})]})}function n1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jA=n1,r1=new $l("auth","Firebase",n1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Ep("@firebase/auth");function zA(r,...e){oh.logLevel<=Fe.WARN&&oh.warn(`Auth (${ma}): ${r}`,...e)}function Mc(r,...e){oh.logLevel<=Fe.ERROR&&oh.error(`Auth (${ma}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(r,...e){throw fm(r,...e)}function Qn(r,...e){return fm(r,...e)}function dm(r,e,t){const i={...jA(),[e]:t};return new $l("auth","Firebase",i).create(e,{appName:r.name})}function Ws(r){return dm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BA(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&kr(r,"argument-error"),dm(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fm(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return r1.create(r,...e)}function Ce(r,e,...t){if(!r)throw fm(e,...t)}function Qr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mc(e),new Error(e)}function ti(r,e){r||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function $A(){return _0()==="http:"||_0()==="https:"}function _0(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($A()||mI()||"connection"in navigator)?navigator.onLine:!0}function GA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ti(t>e,"Short delay should be less than long delay!"),this.isMobile=dI()||gI()}get(){return HA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(r,e){ti(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KA=new Jl(3e4,6e4);function mm(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ta(r,e,t,i,o={}){return s1(r,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Hl({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...l};return pI()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&pa(r.emulatorConfig.host)&&(y.credentials="include"),i1.fetch()(await o1(r,r.config.apiHost,t,f),y)})}async function s1(r,e,t){r._canInitEmulator=!1;const i={...WA,...e};try{const o=new XA(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw xc(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw xc(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw xc(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw xc(r,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw dm(r,_,y);kr(r,_)}}catch(o){if(o instanceof ni)throw o;kr(r,"network-request-failed",{message:String(o)})}}async function QA(r,e,t,i,o={}){const l=await Ta(r,e,t,i,o);return"mfaPendingCredential"in l&&kr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function o1(r,e,t,i){const o=`${e}${t}?${i}`,l=r,c=l.config.emulator?pm(r.config,o):`${r.config.apiScheme}://${o}`;return qA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class XA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Qn(this.auth,"network-request-failed")),KA.get())})}}function xc(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Qn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(r,e){return Ta(r,"POST","/v1/accounts:delete",e)}async function ah(r,e){return Ta(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JA(r,e=!1){const t=Jt(r),i=await t.getIdToken(e),o=gm(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Dl(Rf(o.auth_time)),issuedAtTime:Dl(Rf(o.iat)),expirationTime:Dl(Rf(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Rf(r){return Number(r)*1e3}function gm(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const o=e_(t);return o?JSON.parse(o):(Mc("Failed to decode base64 JWT payload"),null)}catch(o){return Mc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function w0(r){const e=gm(r);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ni&&ZA(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function ZA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(r){var T;const e=r.auth,t=await r.getIdToken(),i=await Bl(r,ah(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?a1(o.providerUserInfo):[],c=n2(r.providerData,l),f=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!(c!=null&&c.length),y=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new dp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,_)}async function t2(r){const e=Jt(r);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function n2(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function a1(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(r,e){const t=await s1(r,{},async()=>{const i=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,c=await o1(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return r.emulatorConfig&&pa(r.emulatorConfig.host)&&(p.credentials="include"),i1.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function i2(r,e){return Ta(r,"POST","/v2/accounts:revokeToken",mm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=w0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await r2(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new ea;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ea,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(r,e){Ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class qn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new e2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JA(this,e)}reload(){return t2(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await Bl(this,YA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:M,providerData:z,stsTokenManager:$}=t;Ce(T&&$,e,"internal-error");const W=ea.fromJSON(this.name,$);Ce(typeof T=="string",e,"internal-error"),Oi(i,e.name),Oi(o,e.name),Ce(typeof x=="boolean",e,"internal-error"),Ce(typeof M=="boolean",e,"internal-error"),Oi(l,e.name),Oi(c,e.name),Oi(f,e.name),Oi(p,e.name),Oi(y,e.name),Oi(_,e.name);const le=new qn({uid:T,auth:e,email:o,emailVerified:x,displayName:i,isAnonymous:M,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:W,createdAt:y,lastLoginAt:_});return z&&Array.isArray(z)&&(le.providerData=z.map(ae=>({...ae}))),p&&(le._redirectEventId=p),le}static async _fromIdTokenResponse(e,t,i=!1){const o=new ea;o.updateFromServerResponse(t);const l=new qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await lh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?a1(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new ea;f.updateFromIdToken(i);const p=new qn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new dp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new Map;function Xr(r){ti(r instanceof Function,"Expected a class definition");let e=E0.get(r);return e?(ti(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,E0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}l1.type="NONE";const T0=l1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r,e,t){return`firebase:${r}:${e}:${t}`}class ta{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Vc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Vc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ah(this.auth,{idToken:e}).catch(()=>{});return t?qn._fromGetAccountInfoResponse(this.auth,t,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ta(Xr(T0),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Xr(T0);const c=Vc(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const _=await y._get(c);if(_){let T;if(typeof _=="string"){const x=await ah(e,{idToken:_}).catch(()=>{});if(!x)break;T=await qn._fromGetAccountInfoResponse(e,x,_)}else T=qn._fromJSON(e,_);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ta(l,e,i):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new ta(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p1(e))return"Blackberry";if(m1(e))return"Webos";if(c1(e))return"Safari";if((e.includes("chrome/")||h1(e))&&!e.includes("edge/"))return"Chrome";if(f1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function u1(r=Yt()){return/firefox\//i.test(r)}function c1(r=Yt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h1(r=Yt()){return/crios\//i.test(r)}function d1(r=Yt()){return/iemobile/i.test(r)}function f1(r=Yt()){return/android/i.test(r)}function p1(r=Yt()){return/blackberry/i.test(r)}function m1(r=Yt()){return/webos/i.test(r)}function ym(r=Yt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function s2(r=Yt()){var e;return ym(r)&&!!((e=window.navigator)!=null&&e.standalone)}function o2(){return yI()&&document.documentMode===10}function g1(r=Yt()){return ym(r)||f1(r)||m1(r)||p1(r)||/windows phone/i.test(r)||d1(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r,e=[]){let t;switch(r){case"Browser":t=I0(Yt());break;case"Worker":t=`${I0(Yt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ma}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(r,e={}){return Ta(r,"GET","/v2/passwordPolicy",mm(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=6;class c2{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??u2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S0(this),this.idTokenSubscription=new S0(this),this.beforeStateQueue=new a2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ta.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ah(this,{idToken:e}),i=await qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Gn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(Ws(this));const t=e?Jt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await l2(this),t=new c2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await i2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await ta.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&zA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Lh(r){return Jt(r)}class S0{constructor(e){this.auth=e,this.observer=null,this.addObserver=xI(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d2(r){vm=r}function f2(r){return vm.loadJS(r)}function p2(){return vm.gapiScript}function m2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(r,e){const t=Ip(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ji(l,e??{}))return o;kr(o,"already-initialized")}return t.initialize({options:e})}function y2(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Xr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function v2(r,e,t){const i=Lh(r);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=v1(e),{host:c,port:f}=_2(e),p=f===null?"":`:${f}`,y={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Ji(y,i.config.emulator)&&Ji(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,pa(c)?(i_(`${l}//${c}${p}`),s_("Auth",!0)):w2()}function v1(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _2(r){const e=v1(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:x0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:x0(c)}}}function x0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function w2(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,t){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(r,e){return QA(r,"POST","/v1/accounts:signInWithIdp",mm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="http://localhost";class eo extends _1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const c=new eo(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return na(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,na(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,na(e,t)}buildRequest(){const e={requestUri:E2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends _m{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Zl{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Zl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eo._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Kr.credential(t,i)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Zl{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Zl{constructor(){super("twitter.com")}static credential(e,t){return eo._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Fi.credential(t,i)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await qn._fromIdTokenResponse(e,i,o),c=k0(i);return new da({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=k0(i);return new da({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function k0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends ni{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,uh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new uh(e,t,i,o)}}function w1(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?uh._fromErrorAndOperation(r,l,e,i):l})}async function T2(r,e,t=!1){const i=await Bl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return da._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(r,e,t=!1){const{auth:i}=r;if(Gn(i.app))return Promise.reject(Ws(i));const o="reauthenticate";try{const l=await Bl(r,w1(i,o,e,r),t);Ce(l.idToken,i,"internal-error");const c=gm(l.idToken);Ce(c,i,"internal-error");const{sub:f}=c;return Ce(r.uid===f,i,"user-mismatch"),da._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&kr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(r,e,t=!1){if(Gn(r.app))return Promise.reject(Ws(r));const i="signIn",o=await w1(r,i,e),l=await da._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function x2(r,e,t,i){return Jt(r).onIdTokenChanged(e,t,i)}function k2(r,e,t){return Jt(r).beforeAuthStateChanged(e,t)}function C2(r,e,t,i){return Jt(r).onAuthStateChanged(e,t,i)}function A2(r){return Jt(r).signOut()}const ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=1e3,b2=10;class T1 extends E1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);o2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,b2):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},P2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}T1.type="LOCAL";const R2=T1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends E1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}I1.type="SESSION";const S1=I1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,l)),p=await N2(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const y=wm("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(T){const x=T;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function O2(r){Tr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function M2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V2(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function L2(){return x1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="firebaseLocalStorageDb",F2=1,hh="firebaseLocalStorage",C1="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uh(r,e){return r.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function U2(){const r=indexedDB.deleteDatabase(k1);return new eu(r).toPromise()}function fp(){const r=indexedDB.open(k1,F2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(hh,{keyPath:C1})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(hh)?e(i):(i.close(),await U2(),e(await fp()))})})}async function C0(r,e,t){const i=Uh(r,!0).put({[C1]:e,value:t});return new eu(i).toPromise()}async function j2(r,e){const t=Uh(r,!1).get(e),i=await new eu(t).toPromise();return i===void 0?null:i.value}function A0(r,e){const t=Uh(r,!0).delete(e);return new eu(t).toPromise()}const z2=800,B2=3;class A1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>B2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fh._getInstance(L2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await M2(),!this.activeServiceWorker)return;this.sender=new D2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fp();return await C0(e,ch,"1"),await A0(e,ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>C0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>j2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>A0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uh(o,!1).getAll();return new eu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A1.type="LOCAL";const $2=A1;new Jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(r,e){return e?Xr(e):(Ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends _1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function H2(r){return S2(r.auth,new Em(r),r.bypassAuthState)}function G2(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),I2(t,new Em(r),r.bypassAuthState)}async function W2(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),T2(t,new Em(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H2;case"linkViaPopup":case"linkViaRedirect":return W2;case"reauthViaPopup":case"reauthViaRedirect":return G2;default:kr(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Jl(2e3,1e4);async function K2(r,e,t){if(Gn(r.app))return Promise.reject(Qn(r,"operation-not-supported-in-this-environment"));const i=Lh(r);BA(r,e,_m);const o=P1(i,t);return new $s(i,"signInViaPopup",e,o).executeNotNull()}class $s extends b1{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q2.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="pendingRedirect",Lc=new Map;class X2 extends b1{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Lc.get(this.auth._key());if(!e){try{const i=await Y2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Lc.set(this.auth._key(),e)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y2(r,e){const t=eP(e),i=Z2(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function J2(r,e){Lc.set(r._key(),e)}function Z2(r){return Xr(r._redirectPersistence)}function eP(r){return Vc(Q2,r.config.apiKey,r.name)}async function tP(r,e,t=!1){if(Gn(r.app))return Promise.reject(Ws(r));const i=Lh(r),o=P1(i,e),c=await new X2(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=600*1e3;class rP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!R1(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Qn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nP&&this.cachedEventUids.clear(),this.cachedEventUids.has(P0(e))}saveEventToCache(e){this.cachedEventUids.add(P0(e)),this.lastProcessedEventTime=Date.now()}}function P0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function R1({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iP(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R1(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(r,e={}){return Ta(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aP=/^https?/;async function lP(r){if(r.config.emulator)return;const{authorizedDomains:e}=await sP(r);for(const t of e)try{if(uP(t))return}catch{}kr(r,"unauthorized-domain")}function uP(r){const e=hp(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!aP.test(t))return!1;if(oP.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new Jl(3e4,6e4);function b0(){const r=Tr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function hP(r){return new Promise((e,t)=>{var o,l,c;function i(){b0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b0(),t(Qn(r,"network-request-failed"))},timeout:cP.get()})}if((l=(o=Tr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Tr().gapi)!=null&&c.load)i();else{const f=m2("iframefcb");return Tr()[f]=()=>{gapi.load?i():t(Qn(r,"network-request-failed"))},f2(`${p2()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Fc=null,e})}let Fc=null;function dP(r){return Fc=Fc||hP(r),Fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new Jl(5e3,15e3),pP="__/auth/iframe",mP="emulator/auth/iframe",gP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vP(r){const e=r.config;Ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?pm(e,mP):`https://${r.config.authDomain}/${pP}`,i={apiKey:e.apiKey,appName:r.name,v:ma},o=yP.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Hl(i).slice(1)}`}async function _P(r){const e=await dP(r),t=Tr().gapi;return Ce(t,r,"internal-error"),e.open({where:document.body,url:vP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gP,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=Qn(r,"network-request-failed"),f=Tr().setTimeout(()=>{l(c)},fP.get());function p(){Tr().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EP=500,TP=600,IP="_blank",SP="http://localhost";class R0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xP(r,e,t,i=EP,o=TP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...wP,width:i.toString(),height:o.toString(),top:l,left:c},y=Yt().toLowerCase();t&&(f=h1(y)?IP:t),u1(y)&&(e=e||SP,p.scrollbars="yes");const _=Object.entries(p).reduce((x,[M,z])=>`${x}${M}=${z},`,"");if(s2(y)&&f!=="_self")return kP(e||"",f),new R0(null);const T=window.open(e||"",f,_);Ce(T,r,"popup-blocked");try{T.focus()}catch{}return new R0(T)}function kP(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="__/auth/handler",AP="emulator/auth/handler",PP=encodeURIComponent("fac");async function N0(r,e,t,i,o,l){Ce(r.config.authDomain,r,"auth-domain-config-required"),Ce(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ma,eventId:o};if(e instanceof _m){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",SI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof Zl){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await r._getAppCheckToken(),y=p?`#${PP}=${encodeURIComponent(p)}`:"";return`${bP(r)}?${Hl(f).slice(1)}${y}`}function bP({config:r}){return r.emulator?pm(r,AP):`https://${r.authDomain}/${CP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="webStorageSupport";class RP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S1,this._completeRedirectFn=tP,this._overrideRedirectResult=J2}async _openPopup(e,t,i,o){var c;ti((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await N0(e,t,i,hp(),o);return xP(e,l,wm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await N0(e,t,i,hp(),o);return O2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ti(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await _P(e),i=new rP(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nf,{type:Nf},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Nf];l!==void 0&&t(!!l),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return g1()||c1()||ym()}}const NP=RP;var D0="@firebase/auth",O0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MP(r){ra(new qs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y1(r)},y=new h2(i,o,l,p);return y2(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ra(new qs("auth-internal",e=>{const t=Lh(e.getProvider("auth").getImmediate());return(i=>new DP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qi(D0,O0,OP(r)),qi(D0,O0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=300,LP=r_("authIdTokenMaxAge")||VP;let M0=null;const FP=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>LP)return;const o=t==null?void 0:t.token;M0!==o&&(M0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function pp(r=u_()){const e=Ip(r,"auth");if(e.isInitialized())return e.getImmediate();const t=g2(r,{popupRedirectResolver:NP,persistence:[$2,R2,S1]}),i=r_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=FP(l.toString());k2(t,c,()=>c(t.currentUser)),x2(t,f=>c(f))}}const o=t_("auth");return o&&v2(t,`http://${o}`),t}function UP(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}d2({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Qn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",UP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MP("Browser");function jP({activeTab:r,onTabChange:e,user:t,isEditMode:i,onEditModeToggle:o,onUploadClick:l}){const[c,f]=X.useState(!1),p=[{id:"home",label:"Home"},{id:"photos",label:"Photos"},{id:"albums",label:"Albums"}],y=async()=>{try{const x=pp(),M=new Kr;M.setCustomParameters({prompt:"select_account"}),await K2(x,M),f(!1)}catch(x){console.error("Login failed:",x),x.code==="auth/popup-closed-by-user"||x.code==="auth/cancelled-popup-request"||alert(`Login failed: ${x.message}`)}},_=async()=>{try{await A2(pp()),f(!1)}catch(x){console.error("Logout failed:",x)}},T=x=>{e(x),f(!1)};return E.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 border-b border-white/10 transition-colors duration-200 ${c?"bg-zinc-900":"bg-black/80 backdrop-blur-md"}`,children:[E.jsx("div",{className:"max-w-7xl mx-auto px-6",children:E.jsxs("div",{className:"flex items-center justify-between h-14",children:[E.jsx("div",{className:"text-white font-bold tracking-wider cursor-pointer z-50",onClick:()=>T("home"),children:"GALLERY"}),E.jsx("div",{className:"hidden md:flex gap-8",children:p.map(x=>E.jsxs("button",{onClick:()=>e(x.id),className:`text-sm transition-colors relative py-4 ${r===x.id?"text-white":"text-white/60 hover:text-white/80"}`,children:[x.label,r===x.id&&E.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white"})]},x.id))}),E.jsx("div",{className:"hidden md:flex items-center gap-4",children:t?E.jsxs(E.Fragment,{children:[E.jsxs("button",{onClick:o,className:`w-24 flex items-center justify-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${i?"bg-zinc-800 text-white animate-rotating-border":"bg-white/20 text-white/80 hover:bg-white/30"}`,children:[E.jsx("span",{className:"w-4 h-4 inline-flex items-center justify-center",children:i?E.jsx(Gy,{className:"w-4 h-4"}):E.jsx($y,{className:"w-4 h-4"})}),i?"Editor":"Viewer"]}),E.jsxs("button",{onClick:l,className:"flex items-center gap-2 bg-white text-black px-3 py-1.5 rounded-full text-sm font-medium hover:bg-white/90 transition-colors",children:[E.jsx(jc,{className:"w-4 h-4"}),"Upload"]}),E.jsx("button",{onClick:_,className:"text-sm text-white/60 hover:text-white",children:"Logout"})]}):E.jsx("button",{onClick:y,className:"text-sm text-white/60 hover:text-white",children:"Admin Login"})}),E.jsx("button",{className:"md:hidden text-white p-2 z-50",onClick:()=>f(!c),children:c?E.jsx(fa,{className:"w-6 h-6"}):E.jsx(BT,{className:"w-6 h-6"})})]})}),c&&E.jsx("div",{className:"fixed inset-0 top-14 bg-zinc-900 z-40 md:hidden flex flex-col p-6 animate-in slide-in-from-top-5 duration-200",children:E.jsxs("div",{className:"flex flex-col gap-6",children:[E.jsx("div",{className:"flex flex-col gap-4 border-b border-white/10 pb-6",children:p.map(x=>E.jsx("button",{onClick:()=>T(x.id),className:`text-lg font-medium text-left transition-colors ${r===x.id?"text-white":"text-white/60 hover:text-white/80"}`,children:x.label},x.id))}),E.jsx("div",{className:"flex flex-col gap-4",children:t?E.jsxs(E.Fragment,{children:[E.jsxs("button",{onClick:()=>{o(),f(!1)},className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-base font-medium transition-all border ${i?"bg-zinc-800 text-white border-white shadow-[0_0_10px_rgba(255,255,255,0.3)] animate-pulse":"bg-white/10 text-white/80 border-transparent hover:bg-white/20"}`,children:[i?E.jsx(Gy,{className:"w-5 h-5"}):E.jsx($y,{className:"w-5 h-5"}),i?"Editor":"Viewer"]}),E.jsxs("button",{onClick:()=>{l(),f(!1)},className:"flex items-center justify-center gap-2 bg-white text-black px-4 py-3 rounded-lg text-base font-medium hover:bg-white/90 transition-colors",children:[E.jsx(jc,{className:"w-5 h-5"}),"Upload Photos"]}),E.jsx("button",{onClick:_,className:"text-base text-white/60 hover:text-white py-2 text-left",children:"Logout"})]}):E.jsx("button",{onClick:y,className:"text-base text-white/60 hover:text-white py-2 text-left",children:"Admin Login"})})]})})]})}function zP({isEditMode:r}){const[e,t]=X.useState(0),[i,o]=X.useState(null),[l,c]=X.useState(1200),{photos:f,loading:p,error:y}=ri(),_=f.sort((M,z)=>{const $=new Date(M.takenAt||M.date).getTime();return new Date(z.takenAt||z.date).getTime()-$}),T=_.slice(0,12);X.useEffect(()=>{if(T.length===0)return;const M=setInterval(()=>{t(z=>(z+1)%T.length)},4e3);return()=>clearInterval(M)},[T.length]);const x=T[e]||f[0];return X.useEffect(()=>{if(!x)return;const M=()=>{const W=t1(window.innerWidth,window.devicePixelRatio,x.aspectRatio);c(W)};M();let z;const $=()=>{clearTimeout(z),z=window.setTimeout(M,150)};return window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$),clearTimeout(z)}},[x]),p?E.jsx("div",{className:"text-white text-center py-12",children:"Loading..."}):y?E.jsx("div",{className:"text-red-500 text-center py-12",children:y}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"min-h-[calc(100vh-56px)] px-6 py-12",children:[x&&E.jsxs("div",{className:"max-w-6xl mx-auto",children:[E.jsxs("div",{className:"relative aspect-[16/10] rounded-lg overflow-hidden cursor-pointer group",onClick:()=>o(x),children:[E.jsx("img",{src:ha(x.url,l),alt:x.title,className:"w-full h-full object-cover animate-fade-in"},x.id),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:[E.jsx("h2",{className:"text-white mb-2",children:x.title}),E.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60",children:[E.jsx("span",{children:x.date}),x.location&&E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Uc,{className:"w-4 h-4"}),E.jsx("span",{children:x.location})]})]})]})]}),E.jsx("div",{className:"flex justify-center gap-2 mt-6",children:T.map((M,z)=>E.jsx("button",{onClick:()=>t(z),className:`h-1 rounded-full transition-all ${z===e?"w-8 bg-white":"w-1 bg-white/30 hover:bg-white/50"}`},z))})]}),E.jsxs("div",{className:"max-w-6xl mx-auto mt-16",children:[E.jsx("h3",{className:"text-white mb-6",children:"Recent Photos"}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:_.slice(0,20).map(M=>E.jsx("div",{className:"aspect-square rounded overflow-hidden cursor-pointer group",onClick:()=>o(M),children:E.jsx("img",{src:ha(M.url,zl.HOME_GRID),alt:M.title,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"})},M.id))})]})]}),i&&E.jsx(hm,{photos:_,initialIndex:_.findIndex(M=>M.id===i.id),onClose:()=>o(null),albumName:void 0,isEditMode:r})]})}function BP({onAlbumClick:r,isEditMode:e=!1,onAddNewAlbum:t,onEditAlbum:i,onTransferAlbum:o}){const{albums:l,loading:c,error:f}=ri(),p=X.useMemo(()=>l?l.reduce((y,_)=>{const T=_.theme||"Uncategorized";return y[T]||(y[T]=[]),y[T].push(_),y},{}):{},[l]);return c?E.jsx("div",{className:"text-white text-center py-12",children:"Loading..."}):f?E.jsx("div",{className:"text-red-500 text-center py-12",children:f}):E.jsx("div",{className:"max-w-full mx-auto py-12",children:E.jsxs("div",{className:"space-y-12",children:[e&&E.jsxs("section",{children:[E.jsx("h3",{className:"text-xl text-white font-semibold mb-4 px-6",children:"Add a new album"}),E.jsxs("div",{className:"flex overflow-x-auto space-x-6 px-6 pb-4 -mx-6 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent",children:[E.jsx("div",{className:"w-6 flex-shrink-0"})," ",E.jsx("div",{className:"group w-[25rem] flex-shrink-0 cursor-pointer",onClick:t,children:E.jsx("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden mb-3 border-2 border-dashed border-white/20 hover:border-white/40 transition-colors flex items-center justify-center",children:E.jsxs("div",{className:"text-center text-white/60 group-hover:text-white/80 transition-colors",children:[E.jsx(jc,{className:"w-12 h-12 mx-auto"}),E.jsx("p",{className:"mt-2",children:"Add New Album"})]})})})]})]}),Object.entries(p).map(([y,_])=>E.jsxs("section",{children:[E.jsx("h3",{className:"text-xl text-white font-semibold mb-4 px-6",children:y}),E.jsxs("div",{className:"flex overflow-x-auto space-x-6 px-6 pb-4 -mx-6 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent",children:[E.jsx("div",{className:"w-6 flex-shrink-0"})," ",_.map(T=>E.jsxs("div",{className:"group w-[25rem] flex-shrink-0 cursor-pointer relative",onClick:()=>r(T.id),children:[E.jsxs("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden mb-3",children:[T.coverPhotoUrl?E.jsx("img",{src:ha(T.coverPhotoUrl,zl.ALBUM_COVER),alt:T.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}):E.jsx("div",{className:"w-full h-full bg-zinc-800 flex items-center justify-center text-white/20",children:E.jsx(Hy,{className:"w-12 h-12"})}),E.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300"}),E.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/60 text-white px-2.5 py-0.5 rounded-full text-xs backdrop-blur-sm border border-white/10 opacity-75 group-hover:opacity-100 transition-opacity",children:[T.photoCount," photos"]}),e&&E.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[E.jsx("button",{onClick:x=>{x.stopPropagation(),o==null||o(T)},className:"bg-black/60 text-white p-2 rounded-full backdrop-blur-sm border border-white/10 hover:bg-black/80",title:"Transfer Photos",children:E.jsx(Mf,{className:"w-4 h-4"})}),E.jsx("button",{onClick:x=>{x.stopPropagation(),i==null||i(T)},className:"bg-black/60 text-white p-2 rounded-full backdrop-blur-sm border border-white/10 hover:bg-black/80",title:"Edit Album",children:E.jsx(HT,{className:"w-4 h-4"})})]})]}),E.jsxs("div",{className:"flex justify-between items-start gap-4",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"text-white font-medium group-hover:text-white/80 transition-colors truncate",children:T.name}),E.jsx("p",{className:"text-white/60 text-sm line-clamp-1 mt-0.5",children:T.description||"No description"})]}),T.yearRange&&E.jsx("div",{className:"text-sm text-white/40 flex-shrink-0 mt-0.5",children:T.yearRange.start===T.yearRange.end?T.yearRange.start:`${T.yearRange.start}${T.yearRange.end}`})]})]},T.id)),E.jsx("div",{className:"w-6 flex-shrink-0"})," "]})]},y)),l.length===0&&!e&&E.jsxs("div",{className:"col-span-full text-center py-20 text-white/40 px-6",children:[E.jsx(Hy,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),E.jsx("p",{className:"text-lg",children:"No albums yet"}),E.jsx("p",{className:"text-sm mt-2",children:"Upload a photo to create your first album"})]})]})})}function $P({albumId:r,onBack:e,isEditMode:t=!1}){const{photos:i,albums:o}=ri(),l=X.useMemo(()=>i.filter(f=>f.albumId===r).sort((f,p)=>{const y=new Date(f.takenAt||f.date).getTime(),_=new Date(p.takenAt||p.date).getTime();return y-_}),[i,r]),c=o.find(f=>f.id===r);return!c||l.length===0?E.jsxs("div",{className:"min-h-[calc(100vh-56px)] flex flex-col items-center justify-center text-white",children:[E.jsx("p",{className:"text-xl mb-4",children:"No photos in this album"}),E.jsxs("button",{onClick:e,className:"text-blue-400 hover:text-blue-300 flex items-center gap-2",children:[E.jsx(wp,{className:"w-4 h-4"})," Back to Albums"]})]}):E.jsx(hm,{photos:l,initialIndex:0,onClose:e,albumName:c.name,showThumbnails:!0,isEditMode:t})}function HP(r,e=[]){let t=[];function i(l,c){const f=X.createContext(c),p=t.length;t=[...t,c];const y=T=>{var le;const{scope:x,children:M,...z}=T,$=((le=x==null?void 0:x[r])==null?void 0:le[p])||f,W=X.useMemo(()=>z,Object.values(z));return E.jsx($.Provider,{value:W,children:M})};y.displayName=l+"Provider";function _(T,x){var $;const M=(($=x==null?void 0:x[r])==null?void 0:$[p])||f,z=X.useContext(M);if(z)return z;if(c!==void 0)return c;throw new Error(`\`${T}\` must be used within \`${l}\``)}return[y,_]}const o=()=>{const l=t.map(c=>X.createContext(c));return function(f){const p=(f==null?void 0:f[r])||l;return X.useMemo(()=>({[`__scope${r}`]:{...f,[r]:p}}),[f,p])}};return o.scopeName=r,[i,GP(o,...e)]}function GP(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const i=r.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=i.reduce((f,{useScope:p,scopeName:y})=>{const T=p(l)[`__scope${y}`];return{...f,...T}},{});return X.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}$0();function V0(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function WP(...r){return e=>{let t=!1;const i=r.map(o=>{const l=V0(o,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():V0(r[o],null)}}}}var N1=X.forwardRef((r,e)=>{const{children:t,...i}=r,o=X.Children.toArray(t),l=o.find(KP);if(l){const c=l.props.children,f=o.map(p=>p===l?X.Children.count(c)>1?X.Children.only(null):X.isValidElement(c)?c.props.children:null:p);return E.jsx(mp,{...i,ref:e,children:X.isValidElement(c)?X.cloneElement(c,void 0,f):null})}return E.jsx(mp,{...i,ref:e,children:t})});N1.displayName="Slot";var mp=X.forwardRef((r,e)=>{const{children:t,...i}=r;if(X.isValidElement(t)){const o=XP(t),l=QP(i,t.props);return t.type!==X.Fragment&&(l.ref=e?WP(e,o):o),X.cloneElement(t,l)}return X.Children.count(t)>1?X.Children.only(null):null});mp.displayName="SlotClone";var qP=({children:r})=>E.jsx(E.Fragment,{children:r});function KP(r){return X.isValidElement(r)&&r.type===qP}function QP(r,e){const t={...e};for(const i in e){const o=r[i],l=e[i];/^on[A-Z]/.test(i)?o&&l?t[i]=(...f)=>{l(...f),o(...f)}:o&&(t[i]=o):i==="style"?t[i]={...o,...l}:i==="className"&&(t[i]=[o,l].filter(Boolean).join(" "))}return{...r,...t}}function XP(r){var i,o;let e=(i=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(o=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var YP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],D1=YP.reduce((r,e)=>{const t=X.forwardRef((i,o)=>{const{asChild:l,...c}=i,f=l?N1:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(f,{...c,ref:o})});return t.displayName=`Primitive.${e}`,{...r,[e]:t}},{}),Tm="Progress",Im=100,[JP]=HP(Tm),[ZP,eb]=JP(Tm),O1=X.forwardRef((r,e)=>{const{__scopeProgress:t,value:i=null,max:o,getValueLabel:l=tb,...c}=r;(o||o===0)&&!L0(o)&&console.error(nb(`${o}`,"Progress"));const f=L0(o)?o:Im;i!==null&&!F0(i,f)&&console.error(rb(`${i}`,"Progress"));const p=F0(i,f)?i:null,y=dh(p)?l(p,f):void 0;return E.jsx(ZP,{scope:t,value:p,max:f,children:E.jsx(D1.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":dh(p)?p:void 0,"aria-valuetext":y,role:"progressbar","data-state":L1(p,f),"data-value":p??void 0,"data-max":f,...c,ref:e})})});O1.displayName=Tm;var M1="ProgressIndicator",V1=X.forwardRef((r,e)=>{const{__scopeProgress:t,...i}=r,o=eb(M1,t);return E.jsx(D1.div,{"data-state":L1(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...i,ref:e})});V1.displayName=M1;function tb(r,e){return`${Math.round(r/e*100)}%`}function L1(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function dh(r){return typeof r=="number"}function L0(r){return dh(r)&&!isNaN(r)&&r>0}function F0(r,e){return dh(r)&&!isNaN(r)&&r<=e&&r>=0}function nb(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Im}\`.`}function rb(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Im} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ib=O1,sb=V1;function F1(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=F1(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function ob(){for(var r,e,t=0,i="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=F1(r))&&(i&&(i+=" "),i+=e);return i}const Sm="-",ab=r=>{const e=ub(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=r;return{getClassGroupId:c=>{const f=c.split(Sm);return f[0]===""&&f.length!==1&&f.shift(),U1(f,e)||lb(c)},getConflictingClassGroupIds:(c,f)=>{const p=t[c]||[];return f&&i[c]?[...p,...i[c]]:p}}},U1=(r,e)=>{var c;if(r.length===0)return e.classGroupId;const t=r[0],i=e.nextPart.get(t),o=i?U1(r.slice(1),i):void 0;if(o)return o;if(e.validators.length===0)return;const l=r.join(Sm);return(c=e.validators.find(({validator:f})=>f(l)))==null?void 0:c.classGroupId},U0=/^\[(.+)\]$/,lb=r=>{if(U0.test(r)){const e=U0.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ub=r=>{const{theme:e,classGroups:t}=r,i={nextPart:new Map,validators:[]};for(const o in t)gp(t[o],i,o,e);return i},gp=(r,e,t,i)=>{r.forEach(o=>{if(typeof o=="string"){const l=o===""?e:j0(e,o);l.classGroupId=t;return}if(typeof o=="function"){if(cb(o)){gp(o(i),e,t,i);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([l,c])=>{gp(c,j0(e,l),t,i)})})},j0=(r,e)=>{let t=r;return e.split(Sm).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},cb=r=>r.isThemeGetter,hb=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const o=(l,c)=>{t.set(l,c),e++,e>r&&(e=0,i=t,t=new Map)};return{get(l){let c=t.get(l);if(c!==void 0)return c;if((c=i.get(l))!==void 0)return o(l,c),c},set(l,c){t.has(l)?t.set(l,c):o(l,c)}}},yp="!",vp=":",db=vp.length,fb=r=>{const{prefix:e,experimentalParseClassName:t}=r;let i=o=>{const l=[];let c=0,f=0,p=0,y;for(let z=0;z<o.length;z++){let $=o[z];if(c===0&&f===0){if($===vp){l.push(o.slice(p,z)),p=z+db;continue}if($==="/"){y=z;continue}}$==="["?c++:$==="]"?c--:$==="("?f++:$===")"&&f--}const _=l.length===0?o:o.substring(p),T=pb(_),x=T!==_,M=y&&y>p?y-p:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:T,maybePostfixModifierPosition:M}};if(e){const o=e+vp,l=i;i=c=>c.startsWith(o)?l(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const o=i;i=l=>t({className:l,parseClassName:o})}return i},pb=r=>r.endsWith(yp)?r.substring(0,r.length-1):r.startsWith(yp)?r.substring(1):r,mb=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const o=[];let l=[];return i.forEach(c=>{c[0]==="["||e[c]?(o.push(...l.sort(),c),l=[]):l.push(c)}),o.push(...l.sort()),o}},gb=r=>({cache:hb(r.cacheSize),parseClassName:fb(r),sortModifiers:mb(r),...ab(r)}),yb=/\s+/,vb=(r,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:l}=e,c=[],f=r.trim().split(yb);let p="";for(let y=f.length-1;y>=0;y-=1){const _=f[y],{isExternal:T,modifiers:x,hasImportantModifier:M,baseClassName:z,maybePostfixModifierPosition:$}=t(_);if(T){p=_+(p.length>0?" "+p:p);continue}let W=!!$,le=i(W?z.substring(0,$):z);if(!le){if(!W){p=_+(p.length>0?" "+p:p);continue}if(le=i(z),!le){p=_+(p.length>0?" "+p:p);continue}W=!1}const ae=l(x).join(":"),j=M?ae+yp:ae,K=j+le;if(c.includes(K))continue;c.push(K);const ne=o(le,W);for(let Y=0;Y<ne.length;++Y){const C=ne[Y];c.push(j+C)}p=_+(p.length>0?" "+p:p)}return p};function _b(){let r=0,e,t,i="";for(;r<arguments.length;)(e=arguments[r++])&&(t=j1(e))&&(i&&(i+=" "),i+=t);return i}const j1=r=>{if(typeof r=="string")return r;let e,t="";for(let i=0;i<r.length;i++)r[i]&&(e=j1(r[i]))&&(t&&(t+=" "),t+=e);return t};function wb(r,...e){let t,i,o,l=c;function c(p){const y=e.reduce((_,T)=>T(_),r());return t=gb(y),i=t.cache.get,o=t.cache.set,l=f,f(p)}function f(p){const y=i(p);if(y)return y;const _=vb(p,t);return o(p,_),_}return function(){return l(_b.apply(null,arguments))}}const At=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},z1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,B1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Eb=/^\d+\/\d+$/,Tb=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ib=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qo=r=>Eb.test(r),Oe=r=>!!r&&!Number.isNaN(Number(r)),Mi=r=>!!r&&Number.isInteger(Number(r)),Df=r=>r.endsWith("%")&&Oe(r.slice(0,-1)),qr=r=>Tb.test(r),Cb=()=>!0,Ab=r=>Ib.test(r)&&!Sb.test(r),$1=()=>!1,Pb=r=>xb.test(r),bb=r=>kb.test(r),Rb=r=>!pe(r)&&!me(r),Nb=r=>Ia(r,W1,$1),pe=r=>z1.test(r),Ls=r=>Ia(r,q1,Ab),Of=r=>Ia(r,Lb,Oe),z0=r=>Ia(r,H1,$1),Db=r=>Ia(r,G1,bb),kc=r=>Ia(r,K1,Pb),me=r=>B1.test(r),El=r=>Sa(r,q1),Ob=r=>Sa(r,Fb),B0=r=>Sa(r,H1),Mb=r=>Sa(r,W1),Vb=r=>Sa(r,G1),Cc=r=>Sa(r,K1,!0),Ia=(r,e,t)=>{const i=z1.exec(r);return i?i[1]?e(i[1]):t(i[2]):!1},Sa=(r,e,t=!1)=>{const i=B1.exec(r);return i?i[1]?e(i[1]):t:!1},H1=r=>r==="position"||r==="percentage",G1=r=>r==="image"||r==="url",W1=r=>r==="length"||r==="size"||r==="bg-size",q1=r=>r==="length",Lb=r=>r==="number",Fb=r=>r==="family-name",K1=r=>r==="shadow",Ub=()=>{const r=At("color"),e=At("font"),t=At("text"),i=At("font-weight"),o=At("tracking"),l=At("leading"),c=At("breakpoint"),f=At("container"),p=At("spacing"),y=At("radius"),_=At("shadow"),T=At("inset-shadow"),x=At("text-shadow"),M=At("drop-shadow"),z=At("blur"),$=At("perspective"),W=At("aspect"),le=At("ease"),ae=At("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ne=()=>[...K(),me,pe],Y=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],S=()=>[me,pe,p],A=()=>[qo,"full","auto",...S()],N=()=>[Mi,"none","subgrid",me,pe],D=()=>["auto",{span:["full",Mi,me,pe]},Mi,me,pe],V=()=>[Mi,"auto",me,pe],k=()=>["auto","min","max","fr",me,pe],Ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],He=()=>["start","end","center","stretch","center-safe","end-safe"],Be=()=>["auto",...S()],Ve=()=>[qo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],H=()=>[r,me,pe],se=()=>[...K(),B0,z0,{position:[me,pe]}],ie=()=>["no-repeat",{repeat:["","x","y","space","round"]}],b=()=>["auto","cover","contain",Mb,Nb,{size:[me,pe]}],q=()=>[Df,El,Ls],he=()=>["","none","full",y,me,pe],ye=()=>["",Oe,El,Ls],Ne=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ie=()=>[Oe,Df,B0,z0],Le=()=>["","none",z,me,pe],We=()=>["none",Oe,me,pe],yt=()=>["none",Oe,me,pe],Yn=()=>[Oe,me,pe],Jn=()=>[qo,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qr],breakpoint:[qr],color:[Cb],container:[qr],"drop-shadow":[qr],ease:["in","out","in-out"],font:[Rb],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qr],shadow:[qr],spacing:["px",Oe],text:[qr],"text-shadow":[qr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qo,pe,me,W]}],container:["container"],columns:[{columns:[Oe,pe,me,f]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ne()}],overflow:[{overflow:Y()}],"overflow-x":[{"overflow-x":Y()}],"overflow-y":[{"overflow-y":Y()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Mi,"auto",me,pe]}],basis:[{basis:[qo,"full","auto",f,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Oe,qo,"auto","initial","none",pe]}],grow:[{grow:["",Oe,me,pe]}],shrink:[{shrink:["",Oe,me,pe]}],order:[{order:[Mi,"first","last","none",me,pe]}],"grid-cols":[{"grid-cols":N()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":N()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...Ae(),"normal"]}],"justify-items":[{"justify-items":[...He(),"normal"]}],"justify-self":[{"justify-self":["auto",...He()]}],"align-content":[{content:["normal",...Ae()]}],"align-items":[{items:[...He(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...He(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ae()}],"place-items":[{"place-items":[...He(),"baseline"]}],"place-self":[{"place-self":["auto",...He()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:Be()}],mx:[{mx:Be()}],my:[{my:Be()}],ms:[{ms:Be()}],me:[{me:Be()}],mt:[{mt:Be()}],mr:[{mr:Be()}],mb:[{mb:Be()}],ml:[{ml:Be()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ve()}],w:[{w:[f,"screen",...Ve()]}],"min-w":[{"min-w":[f,"screen","none",...Ve()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[c]},...Ve()]}],h:[{h:["screen",...Ve()]}],"min-h":[{"min-h":["screen","none",...Ve()]}],"max-h":[{"max-h":["screen",...Ve()]}],"font-size":[{text:["base",t,El,Ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,me,Of]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Df,pe]}],"font-family":[{font:[Ob,pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,me,pe]}],"line-clamp":[{"line-clamp":[Oe,"none",me,Of]}],leading:[{leading:[l,...S()]}],"list-image":[{"list-image":["none",me,pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",me,pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[Oe,"from-font","auto",me,Ls]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[Oe,"auto",me,pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me,pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me,pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:ie()}],"bg-size":[{bg:b()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mi,me,pe],radial:["",me,pe],conic:[Mi,me,pe]},Vb,Db]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:he()}],"rounded-s":[{"rounded-s":he()}],"rounded-e":[{"rounded-e":he()}],"rounded-t":[{"rounded-t":he()}],"rounded-r":[{"rounded-r":he()}],"rounded-b":[{"rounded-b":he()}],"rounded-l":[{"rounded-l":he()}],"rounded-ss":[{"rounded-ss":he()}],"rounded-se":[{"rounded-se":he()}],"rounded-ee":[{"rounded-ee":he()}],"rounded-es":[{"rounded-es":he()}],"rounded-tl":[{"rounded-tl":he()}],"rounded-tr":[{"rounded-tr":he()}],"rounded-br":[{"rounded-br":he()}],"rounded-bl":[{"rounded-bl":he()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Oe,me,pe]}],"outline-w":[{outline:["",Oe,El,Ls]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",_,Cc,kc]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",T,Cc,kc]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[Oe,Ls]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",x,Cc,kc]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[Oe,me,pe]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Oe]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ie()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":Ie()}],"mask-image-t-to-pos":[{"mask-t-to":Ie()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":Ie()}],"mask-image-r-to-pos":[{"mask-r-to":Ie()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":Ie()}],"mask-image-b-to-pos":[{"mask-b-to":Ie()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":Ie()}],"mask-image-l-to-pos":[{"mask-l-to":Ie()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":Ie()}],"mask-image-x-to-pos":[{"mask-x-to":Ie()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":Ie()}],"mask-image-y-to-pos":[{"mask-y-to":Ie()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[me,pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ie()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":K()}],"mask-image-conic-pos":[{"mask-conic":[Oe]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ie()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:ie()}],"mask-size":[{mask:b()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",me,pe]}],filter:[{filter:["","none",me,pe]}],blur:[{blur:Le()}],brightness:[{brightness:[Oe,me,pe]}],contrast:[{contrast:[Oe,me,pe]}],"drop-shadow":[{"drop-shadow":["","none",M,Cc,kc]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",Oe,me,pe]}],"hue-rotate":[{"hue-rotate":[Oe,me,pe]}],invert:[{invert:["",Oe,me,pe]}],saturate:[{saturate:[Oe,me,pe]}],sepia:[{sepia:["",Oe,me,pe]}],"backdrop-filter":[{"backdrop-filter":["","none",me,pe]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[Oe,me,pe]}],"backdrop-contrast":[{"backdrop-contrast":[Oe,me,pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Oe,me,pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Oe,me,pe]}],"backdrop-invert":[{"backdrop-invert":["",Oe,me,pe]}],"backdrop-opacity":[{"backdrop-opacity":[Oe,me,pe]}],"backdrop-saturate":[{"backdrop-saturate":[Oe,me,pe]}],"backdrop-sepia":[{"backdrop-sepia":["",Oe,me,pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",me,pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Oe,"initial",me,pe]}],ease:[{ease:["linear","initial",le,me,pe]}],delay:[{delay:[Oe,me,pe]}],animate:[{animate:["none",ae,me,pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[$,me,pe]}],"perspective-origin":[{"perspective-origin":ne()}],rotate:[{rotate:We()}],"rotate-x":[{"rotate-x":We()}],"rotate-y":[{"rotate-y":We()}],"rotate-z":[{"rotate-z":We()}],scale:[{scale:yt()}],"scale-x":[{"scale-x":yt()}],"scale-y":[{"scale-y":yt()}],"scale-z":[{"scale-z":yt()}],"scale-3d":["scale-3d"],skew:[{skew:Yn()}],"skew-x":[{"skew-x":Yn()}],"skew-y":[{"skew-y":Yn()}],transform:[{transform:[me,pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:ne()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Jn()}],"translate-x":[{"translate-x":Jn()}],"translate-y":[{"translate-y":Jn()}],"translate-z":[{"translate-z":Jn()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me,pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me,pe]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[Oe,El,Ls,Of]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},jb=wb(Ub);function zb(...r){return jb(ob(r))}function Bb({className:r,value:e,...t}){return E.jsx(ib,{"data-slot":"progress",className:zb("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...t,children:E.jsx(sb,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function $b({isOpen:r,onClose:e}){const[t,i]=X.useState([]),[o,l]=X.useState(""),[c,f]=X.useState(""),[p,y]=X.useState(null),[_,T]=X.useState(!1),[x,M]=X.useState(""),[z,$]=X.useState(""),[W,le]=X.useState(""),[ae,j]=X.useState(!1),[K,ne]=X.useState({completed:0,total:0}),[Y,C]=X.useState(!1),{uploadAndAddPhoto:S,batchUploadPhotos:A,createAlbum:N,deleteAlbumItem:D,albums:V}=ri();if(X.useEffect(()=>{if(t.length!==1){y(null);return}(async()=>{try{const se=await Zw.parse(t[0],{tiff:!0,exif:!0,gps:!0});let ie={};if(se)if(ie={takenAt:se.DateTimeOriginal?se.DateTimeOriginal.toISOString():void 0,cameraMake:se.Make,cameraModel:se.Model,fNumber:se.FNumber,exposureTime:se.ExposureTime,iso:se.ISO,gps:se.latitude&&se.longitude?{latitude:se.latitude,longitude:se.longitude}:void 0},ie.gps){y(ie);const b=await e1(ie.gps.latitude,ie.gps.longitude);b&&y(q=>q?{...q,locationName:b}:{locationName:b})}else y(ie)}catch(se){console.warn("Failed to extract EXIF data for preview:",se),y(null)}})()},[t]),!r)return null;const k=()=>{i([]),l(""),f(""),T(!1),M(""),$(""),le(""),y(null),ne({completed:0,total:0}),C(!1)},Ae=H=>{H.target.files&&i(Array.from(H.target.files))},He=async H=>{if(H.preventDefault(),t.length===0||t.length===1&&!o)return;j(!0),ne({completed:0,total:t.length});let se=c,ie=null;try{if(_){if(!x||!W){alert("Please fill in album details"),j(!1);return}const b=await N(x,z,W);se=b,ie=b}if(!se){alert("Please select or create an album"),j(!1);return}try{t.length===1?(await S(t[0],o,se,p||void 0),ne({completed:1,total:1})):await A(t,se,(b,q)=>{ne({completed:b,total:q})})}catch(b){throw ie&&(console.warn(`Photo upload failed. Rolling back album creation for albumId: ${ie}`),await D(ie)),b}e(),k()}catch(b){console.error("Upload failed:",b),alert(`Upload failed: ${b.message||"Unknown error"}`)}finally{j(!1)}},Be=t.length===1,Ve=K.total>0?K.completed/K.total*100:0;return E.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-zinc-900 rounded-lg w-full max-w-md p-6 relative border border-white/10 max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-700 transition-all duration-300",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white",children:E.jsx(fa,{className:"w-6 h-6"})}),E.jsx("h2",{className:"text-xl text-white font-semibold mb-6",children:Be?"Upload Photo":t.length>1?`Upload ${t.length} Photos`:"Upload Photos"}),E.jsxs("form",{onSubmit:He,className:"space-y-4",children:[E.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-lg p-8 text-center hover:border-white/40 transition-colors cursor-pointer relative",children:[E.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Ae,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),t.length>0?E.jsx("div",{className:"text-white",children:Be?E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"font-medium truncate",children:t[0].name}),E.jsxs("p",{className:"text-sm text-white/60 mt-1",children:[(t[0].size/1024/1024).toFixed(2)," MB"]})]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"flex justify-center mb-2",children:E.jsxs("div",{className:"relative",children:[E.jsx(CT,{className:"w-8 h-8 text-white/80"}),E.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t.length})]})}),E.jsxs("p",{className:"font-medium",children:[t.length," photos selected"]}),E.jsxs("p",{className:"text-sm text-white/60 mt-1",children:[(t.reduce((H,se)=>H+se.size,0)/1024/1024).toFixed(2)," MB Total"]})]})}):E.jsxs("div",{className:"text-white/60",children:[E.jsx(YT,{className:"w-8 h-8 mx-auto mb-2"}),E.jsx("p",{children:"Click or drag to upload images"})]})]}),Be&&p&&E.jsxs("div",{className:"bg-white/5 p-3 rounded border border-white/10 text-sm space-y-2",children:[E.jsx("h4",{className:"text-xs text-white/40 font-bold uppercase",children:"Photo Info"}),p.takenAt&&E.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[E.jsx(W0,{className:"w-4 h-4"}),E.jsx("span",{children:new Date(p.takenAt).toLocaleString()})]}),p.cameraModel&&E.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[E.jsx(q0,{className:"w-4 h-4"}),E.jsxs("span",{children:[p.cameraMake," ",p.cameraModel]})]}),p.gps&&E.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[E.jsx(Uc,{className:"w-4 h-4"}),E.jsx("span",{children:p.locationName?p.locationName:`GPS: ${p.gps.latitude.toFixed(4)}, ${p.gps.longitude.toFixed(4)}`})]}),E.jsxs("div",{className:"grid grid-cols-3 gap-2 text-white/70",children:[p.fNumber&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(G0,{className:"w-4 h-4"}),E.jsxs("span",{children:["f/",p.fNumber.toFixed(1)]})]}),p.exposureTime&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(K0,{className:"w-4 h-4"}),E.jsxs("span",{children:["1/",Math.round(1/p.exposureTime),"s"]})]}),p.iso&&E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xs font-bold border border-white/40 px-1 rounded",children:"ISO"}),E.jsx("span",{children:p.iso})]})]})]}),Be&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Title"}),E.jsx("input",{type:"text",value:o,onChange:H=>l(H.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"Enter photo title",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Album"}),_?E.jsxs("div",{className:"space-y-3 bg-white/5 p-3 rounded border border-white/10",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("span",{className:"text-sm text-white font-medium",children:"New Album"}),E.jsx("button",{type:"button",onClick:()=>T(!1),className:"text-xs text-white/40 hover:text-white",children:"Cancel"})]}),E.jsx("input",{type:"text",value:W,onChange:H=>le(H.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white text-sm",placeholder:"Theme (e.g. Travel)"}),E.jsx("input",{type:"text",value:x,onChange:H=>M(H.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white text-sm",placeholder:"Album Name"}),E.jsx("textarea",{value:z,onChange:H=>$(H.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white text-sm",placeholder:"Description (Optional)",rows:2})]}):E.jsxs("div",{className:"space-y-2",children:[E.jsx("div",{className:"transition-all duration-300 ease-in-out",style:{marginBottom:Y?"14rem":"0"},children:E.jsx(cm,{albums:V,selectedAlbumId:c,onSelect:f,onOpenChange:C})}),E.jsxs("button",{type:"button",onClick:()=>{T(!0),f("")},className:"text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[E.jsx(jc,{className:"w-3 h-3"})," Create new album"]})]})]}),ae&&E.jsxs("div",{className:"space-y-1 pt-2",children:[E.jsx(Bb,{value:Ve,className:"w-full h-2 bg-white/10 [&>div]:bg-white"}),E.jsxs("p",{className:"text-xs text-white/60 text-right",children:[K.completed," / ",K.total]})]}),E.jsx("button",{type:"submit",disabled:t.length===0||Be&&!o||ae||!c&&!_,className:"w-full bg-white text-black font-medium py-2 rounded hover:bg-white/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-6",children:ae?E.jsxs(E.Fragment,{children:[E.jsx(Hi,{className:"w-4 h-4 animate-spin"}),(t.length>1,"Uploading...")]}):t.length>1?"Upload All Photos":"Upload Photo"})]})]})})}function Hb({isOpen:r,onClose:e}){const[t,i]=X.useState(""),[o,l]=X.useState(""),[c,f]=X.useState(""),[p,y]=X.useState(!1),{createAlbum:_}=ri();if(!r)return null;const T=async x=>{if(x.preventDefault(),!(!t||!o))try{y(!0),await _(t,c,o),e(),i(""),l(""),f("")}catch(M){console.error("Failed to create album:",M),alert(`Failed to create album: ${M.message}`)}finally{y(!1)}};return E.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-zinc-900 rounded-lg w-full max-w-md p-6 relative border border-white/10",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white",children:E.jsx(fa,{className:"w-6 h-6"})}),E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:E.jsx(NT,{className:"w-5 h-5 text-white"})}),E.jsx("h2",{className:"text-xl text-white font-semibold",children:"Create New Album"})]}),E.jsxs("form",{onSubmit:T,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Theme"}),E.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"e.g. Travel, Events",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Album Name"}),E.jsx("input",{type:"text",value:t,onChange:x=>i(x.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"e.g. Summer Trip 2023",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Description"}),E.jsx("textarea",{value:c,onChange:x=>f(x.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40 resize-none",placeholder:"Optional description...",rows:3})]}),E.jsx("button",{type:"submit",disabled:!t||!o||p,className:"w-full bg-white text-black font-medium py-2 rounded hover:bg-white/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-6",children:p?E.jsxs(E.Fragment,{children:[E.jsx(Hi,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):"Create Album"})]})]})})}function Gb({isOpen:r,onClose:e,album:t}){const[i,o]=X.useState(""),[l,c]=X.useState(""),[f,p]=X.useState(""),[y,_]=X.useState(!1),[T,x]=X.useState(!1),{updateAlbum:M,deleteAlbumItem:z}=ri();if(X.useEffect(()=>{t&&(o(t.name),c(t.theme),p(t.description))},[t]),!r||!t)return null;const $=async le=>{if(le.preventDefault(),!(!i||!l))try{_(!0),await M(t.id,{name:i,theme:l,description:f},t.theme),e()}catch(ae){console.error("Failed to update album:",ae),alert(`Failed to update album: ${ae.message}`)}finally{_(!1)}},W=async()=>{if(confirm(`Are you sure you want to delete the album "${t.name}"? All photos within this album will become uncategorized. This action cannot be undone.`))try{x(!0),await z(t.id),e()}catch(le){console.error("Failed to delete album:",le),alert(`Failed to delete album: ${le.message}`)}finally{x(!1)}};return E.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-zinc-900 rounded-lg w-full max-w-md p-6 relative border border-white/10",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white",children:E.jsx(fa,{className:"w-6 h-6"})}),E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:E.jsx(PT,{className:"w-5 h-5 text-white"})}),E.jsx("h2",{className:"text-xl text-white font-semibold",children:"Edit Album"})]}),E.jsxs("form",{onSubmit:$,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Theme"}),E.jsx("input",{type:"text",value:l,onChange:le=>c(le.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"e.g. Travel, Events",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Album Name"}),E.jsx("input",{type:"text",value:i,onChange:le=>o(le.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40",placeholder:"e.g. Summer Trip 2023",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Description"}),E.jsx("textarea",{value:f,onChange:le=>p(le.target.value),className:"w-full bg-black/50 border border-white/10 rounded px-3 py-2 text-white focus:outline-none focus:border-white/40 resize-none",placeholder:"Optional description...",rows:3})]}),E.jsxs("div",{className:"flex gap-3 pt-4",children:[E.jsxs("button",{type:"button",onClick:W,disabled:T||y,className:"w-full bg-red-600 text-white font-medium py-2 rounded hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[T?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(Y0,{className:"w-4 h-4"}),T?"Deleting...":"Delete"]}),E.jsxs("button",{type:"submit",disabled:!i||!l||y||T,className:"w-full bg-white text-black font-medium py-2 rounded hover:bg-white/90 disabled:opacity-50 flex items-center justify-center gap-2",children:[y?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(Q0,{className:"w-4 h-4"}),y?"Saving...":"Save Changes"]})]})]})]})})}function Wb({isOpen:r,onClose:e,sourceAlbum:t}){const[i,o]=X.useState(""),[l,c]=X.useState(!0),[f,p]=X.useState(!1),{albums:y,transferAlbumPhotos:_}=ri();if(X.useEffect(()=>{r||(o(""),c(!0))},[r]),!r||!t)return null;const T=async M=>{if(M.preventDefault(),!(!i||i===t.id)&&confirm(`Are you sure you want to transfer all photos from "${t.name}" to the selected album?`))try{p(!0),await _(t.id,i,l),e()}catch(z){console.error("Failed to transfer photos:",z),alert(`Failed to transfer photos: ${z.message}`)}finally{p(!1)}},x=y.filter(M=>M.id!==t.id);return E.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-zinc-900 rounded-lg w-full max-w-md p-6 relative border border-white/10",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white",children:E.jsx(fa,{className:"w-6 h-6"})}),E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:E.jsx(Mf,{className:"w-5 h-5 text-white"})}),E.jsx("h2",{className:"text-xl text-white font-semibold",children:"Transfer Album"})]}),E.jsxs("form",{onSubmit:T,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"From"}),E.jsx("p",{className:"font-medium text-white p-2 bg-black/20 rounded",children:t.name})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"To"}),E.jsx(cm,{albums:x,selectedAlbumId:i,onSelect:o})]}),E.jsx("div",{className:"pt-2",children:E.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/80",children:[E.jsx("input",{type:"checkbox",checked:l,onChange:M=>c(M.target.checked),className:"w-4 h-4 rounded bg-black/50 border-white/20 text-blue-500 focus:ring-blue-500"}),'Delete "',t.name,'" album after transfer']})}),E.jsx("div",{className:"pt-4",children:E.jsxs("button",{type:"submit",disabled:!i||f,className:"w-full bg-blue-600 text-white font-medium py-2 rounded hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[f?E.jsx(Hi,{className:"w-4 h-4 animate-spin"}):E.jsx(Mf,{className:"w-4 h-4"}),f?"Transferring...":`Transfer ${t.photoCount} Photos`]})})]})]})})}function qb(){const[r,e]=X.useState("home"),[t,i]=X.useState(null),[o,l]=X.useState(null),[c,f]=X.useState(!1),[p,y]=X.useState(!1),[_,T]=X.useState(!1),[x,M]=X.useState(null),[z,$]=X.useState(null);X.useEffect(()=>{const K=pp(),ne=C2(K,Y=>{l(Y),Y||f(!1)});return()=>ne()},[]);const W=K=>{e(K),i(null)},le=K=>{i(K)},ae=()=>{i(null)},j=()=>{o&&f(K=>!K)};return E.jsxs("div",{className:"min-h-screen bg-black",children:[E.jsx(jP,{activeTab:r,onTabChange:W,user:o,isEditMode:c,onEditModeToggle:j,onUploadClick:()=>y(!0)}),E.jsx($b,{isOpen:p,onClose:()=>y(!1)}),E.jsx(Hb,{isOpen:_,onClose:()=>T(!1)}),E.jsx(Gb,{isOpen:!!x,onClose:()=>M(null),album:x}),E.jsx(Wb,{isOpen:!!z,onClose:()=>$(null),sourceAlbum:z}),E.jsxs("main",{className:"pt-14",children:[r==="home"&&E.jsx(zP,{isEditMode:c}),r==="photos"&&E.jsx(UA,{isEditMode:c}),r==="albums"&&(t?E.jsx($P,{albumId:t,onBack:ae,isEditMode:c}):E.jsx(BP,{onAlbumClick:le,isEditMode:c,onAddNewAlbum:()=>T(!0),onEditAlbum:M,onTransferAlbum:$}))]})]})}lT.createRoot(document.getElementById("root")).render(E.jsx(qb,{}));
